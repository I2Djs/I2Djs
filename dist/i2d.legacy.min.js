/*!
      * i2djs v3.8.0
      * (c) 2023 Narayana Swamy (narayanaswamy14@gmail.com)
      * @license BSD-3-Clause
      */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("pdfkit/js/pdfkit.standalone.js")):"function"==typeof define&&define.amd?define(["exports","pdfkit/js/pdfkit.standalone.js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).i2d={},t.PDFDocument)}(this,(function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i,n,o,s=r(e),a=null,h=[],c={},u=[],l=[];function f(t,e,r){this.executable=e,this.duration=e.duration?e.duration:0,this.delay=e.delay?e.delay:0,this.lastTime=0-(e.delay?e.delay:0),this.loopTracker=0,this.loop=e.loop?e.loop:0,this.direction=e.direction,this.easying=r,this.end=e.end?e.end:null,"reverse"===this.direction?this.factor=1:this.factor=0}function d(){}"undefined"==typeof window&&(global.window={setTimeout:setTimeout,clearTimeout:clearTimeout},global.performance={now:function(){return Date.now()}},global.document={}),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)},f.prototype.execute=function(t){this.executable.run(t)},f.prototype.resetCallBack=function(t){"function"==typeof t&&(this.callBack=t)},d.prototype={startAnimeFrames:function(){i||(i=window.requestAnimationFrame(g))},stopAnimeFrame:function(){i&&(window.cancelAnimFrame(i),i=null)},add:function(t,e,r){var i=new f(t,e,r);i.currTime=performance.now(),e.target&&(e.target.animList||(e.target.animList=[]),e.target.animList[e.target.animList.length]=i),h[h.length]=i,this.startAnimeFrames()},remove:function(t){var e=h.indexOf(t);-1!==e&&h.splice(e,1)},onRequestFrame:function(t){if("function"!=typeof t)throw new Error("Wrong input");l.push(t),l.length>0&&!i&&this.startAnimeFrames()},removeRequestFrameCall:function(t){if("function"!=typeof t)throw new Error("Wrong input");var e=l.indexOf(t);-1!==e&&l.splice(e,1)},clearAll:function(){h=[],l=[]}},d.prototype.addVdom=function(t){var e=u.length+1;return c[e]=t,u.push(e),this.startAnimeFrames(),e},d.prototype.removeVdom=function(t){var e=u.indexOf(t);-1!==e&&(u.splice(e,1),c[t].root.destroy(),delete c[t]),0===u.length&&0===h.length&&0===l.length&&this.stopAnimeFrame()},d.prototype.vDomChanged=function(t){if(c[t]&&void 0!==c[t].stateModified)c[t].stateModified=!0,c[t].root.stateModified=!0;else if("string"==typeof t){var e=t.split(":");if(c[e[0]]&&void 0!==c[e[0]].stateModified){c[e[0]].stateModified=!0,c[e[0]].root.stateModified=!0;var r=c[e[0]].root.fetchEl("#"+e[1]);r&&(r.stateModified=!0)}}},d.prototype.execute=function(){this.startAnimeFrames()},d.prototype.vDomUpdates=function(){for(var t=0,e=u.length;t<e;t+=1)if(u[t]&&c[u[t]]&&c[u[t]].stateModified)c[u[t]].execute(),c[u[t]].stateModified=!1;else if(u[t]&&c[u[t]]&&c[u[t]].root&&"NODE"!==c[u[t]].root.ENV){document.getElementById(c[u[t]].root.container.id)||this.removeVdom(u[t])}};var p=Math.abs,y=0,v=[];function g(){try{v=[],y=0,o=performance.now();for(var t=0;t<h.length;t+=1)(n=h[t]).lastTime+=o-n.currTime,n.currTime=o,n.lastTime<n.duration&&n.lastTime>=0?(n.execute(p(n.factor-n.easying(n.lastTime,n.duration))),v[y++]=n):n.lastTime>n.duration?x(n):v[y++]=n;h=v,l.length>0&&function(){for(var t=0;t<l.length;t+=1)l[t](o)}(),a.vDomUpdates()}catch(t){console.error(t)}finally{i=window.requestAnimationFrame(g)}}function x(t){if(t.loopTracker>=t.loop-1){if(t.execute(1-t.factor),t.end&&t.end(),t.executable.target){var e=t.executable.target.animList;if(e&&e.length>0)if(1===e.length)t.executable.target.animList=[];else if(e.length>1){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}}}else t.loopTracker+=1,t.lastTime=t.lastTime-t.duration,t.lastTime=t.lastTime%t.duration,"alternate"===t.direction?t.factor=1-t.factor:"reverse"===t.direction?t.factor=1:t.factor=0,t.execute(p(t.factor-t.easying(t.lastTime,t.duration))),v[y++]=t}var m=a=new d;function w(){}function b(t,e){var r,i=0,n=0,o=1,s=1,a=e;if(t.attr.transform&&t.attr.transform.translate&&(i=(r=t.attr.transform.translate)[0],n=r[1],a.x-=i,a.y-=n),t.attr.transform&&t.attr.transform.scale&&(o=void 0!==t.attr.transform.scale[0]?t.attr.transform.scale[0]:1,s=void 0!==t.attr.transform.scale[1]?t.attr.transform.scale[1]:o,a.x/=o,a.y/=s),t.attr.transform&&t.attr.transform.rotate){var h=t.attr.transform.rotate[0],c={x:t.attr.transform.rotate[1],y:t.attr.transform.rotate[2]},u=a.x,l=a.y,f=c.x,d=c.y,p=Math.PI/180*h,y=Math.cos(p),v=Math.sin(p);a.x=y*(u-f)+v*(l-d)+f,a.y=y*(l-d)-v*(u-f)+d}}w.prototype.execute=function(){this.root.execute(),this.stateModified=!1},w.prototype.rootNode=function(t){this.root=t,this.stateModified=!0},w.prototype.eventsCheck=function(t,e,r){for(var i,n,o=0;o<=t.length-1;o+=1){var s=t[o],a={x:e.x,y:e.y};b(s,a),s.in({x:a.x,y:a.y})&&(s.children&&s.children.length>0?(n=this.eventsCheck(s.children,{x:a.x,y:a.y},r))&&(i=n):i=s)}return i},w.prototype.transformCoOr=b;var A=Math.sqrt,B=Math.sin,E=Math.cos,T=Math.abs,S=Math.atan2,_=Math.tan,k=Math.PI,M=Math.ceil,C=Math.max;function L(t,e){var r=1;if(0===e)return r;for(var i=1;i<=e;i+=1)r*=t;return r}function D(t,e){var r=0;for(var i in t)r+=L(e[i]-t[i],2);if(isNaN(r))throw new Error("error");return A(r)}function P(t,e,r){var i=L(r,3),n=L(r,2);return{x:e.ax*i+e.bx*n+e.cx*r+t.x,y:e.ay*i+e.by*n+e.cy*r+t.y}}var I=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r,i=[],n=!0,o=!1;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{o&&console.log("Error -"+r)}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},z=2*k,R=function(t,e,r,i,n,o,s){var a=t.x,h=t.y;return{x:i*(a*=e)-n*(h*=r)+o,y:n*a+i*h+s}},O=function(t,e){var r=4/3*_(e/4),i=E(t),n=B(t),o=E(t+e),s=B(t+e);return[{x:i-n*r,y:n+i*r},{x:o+s*r,y:s-o*r},{x:o,y:s}]},j=function(t,e,r,i){var n=t*i-e*r<0?-1:1,o=(t*r+e*i)/(A(t*t+e*e)*A(t*t+e*e));return o>1&&(o=1),o<-1&&(o=-1),n*Math.acos(o)};function N(t,e,r,i){var n=t.x,o=t.y,s=e.x,a=e.y,h=k/180*r,c=E(-h),u=B(-h);return{x:c*(n-s)+u*(o-a)+s,y:c*(o-a)-u*(n-s)+a}}function F(){}F.prototype={pow:L,getAngle:function(t,e){return S(e.x-t.x,e.y-t.y)},getDistance:D,scaleAlongOrigin:function(t,e){var r={};for(var i in t)r[i]=t[i]*e;return r},scaleAlongPoint:function(t,e,r){var i=(t.y-e.y)/(t.x-e.x),n=t.x*r;return{x:n,y:(i*(n-e.x)+e.y)*r}},linearTransitionBetweenPoints:function(t,e,r){return{x:t.x+(e.x-t.x)*r,y:t.y+(e.y-t.y)*r}},bezierTransition:function(t,e,r,i){return{x:(t.x-2*e.x+r.x)*i*i+(2*e.x-2*t.x)*i+t.x,y:(t.y-2*e.y+r.y)*i*i+(2*e.y-2*t.y)*i+t.y}},bezierLength:function(t,e,r){var i={},n={};i.x=t.x+r.x-2*e.x,i.y=t.y+r.y-2*e.y,n.x=2*e.x-2*t.x,n.y=2*e.y-2*t.y;var o=4*(i.x*i.x+i.y*i.y),s=4*(i.x*n.x+i.y*n.y),a=n.x*n.x+n.y*n.y,h=2*A(o+s+a),c=A(o),u=2*o*c,l=2*A(a),f=s/c,d=(2*c+f+h)/(f+l);return d=isNaN(d)||T(d)===1/0?1:d,(u*h+c*s*(h-l)+(4*a*o-s*s)*Math.log(d))/(4*u)},cubicBezierTransition:P,cubicBezierLength:function(t,e){for(var r,i,n=.001,o=0,s=P.bind(null,t,e),a=0;a<=1;a+=n)r=s(a),i=s(a+n),o+=A(L((i.x-r.x)/n,2)+L((i.y-r.y)/n,2))*n;return o},cubicBezierCoefficients:function(t){var e=3*(t.cntrl1.x-t.p0.x),r=3*(t.cntrl2.x-t.cntrl1.x)-e,i=t.p1.x-t.p0.x-e-r,n=3*(t.cntrl1.y-t.p0.y),o=3*(t.cntrl2.y-t.cntrl1.y)-n;return{cx:e,bx:r,ax:i,cy:n,by:o,ay:t.p1.y-t.p0.y-n-o}},arcToBezier:function(t){var e=t.px,r=t.py,i=t.cx,n=t.cy,o=t.rx,s=t.ry,a=t.xAxisRotation,h=void 0===a?0:a,c=t.largeArcFlag,u=void 0===c?0:c,l=t.sweepFlag,f=void 0===l?0:l,d=[];if(0===o||0===s)return[];var p=B(h*z/360),y=E(h*z/360),v=y*(e-i)/2+p*(r-n)/2,g=-p*(e-i)/2+y*(r-n)/2;if(0===v&&0===g)return[];o=T(o),s=T(s);var x=L(v,2)/L(o,2)+L(g,2)/L(s,2);x>1&&(o*=A(x),s*=A(x));var m=function(t,e,r,i,n,o,s,a,h,c,u,l){var f=L(n,2),d=L(o,2),p=L(u,2),y=L(l,2),v=f*d-f*y-d*p;v<0&&(v=0);var g=(v=A(v/=f*y+d*p)*(s===a?-1:1))*n/o*l,x=v*-o/n*u,m=c*g-h*x+(t+r)/2,w=h*g+c*x+(e+i)/2,b=(u-g)/n,B=(l-x)/o,E=(-u-g)/n,T=(-l-x)/o,S=j(1,0,b,B),_=j(b,B,E,T);return 0===a&&_>0&&(_-=z),1===a&&_<0&&(_+=z),[m,w,S,_]}(e,r,i,n,o,s,u,f,p,y,v,g),w=I(m,4),b=w[0],S=w[1],_=w[2],k=w[3],D=C(M(T(k)/(z/4)),1);k/=D;for(var P=0;P<D;P++)d.push(O(_,k)),_+=k;return d.map((function(t){var e=R(t[0],o,s,y,p,b,S),r=e.x,i=e.y,n=R(t[1],o,s,y,p,b,S),a=n.x,h=n.y,c=R(t[2],o,s,y,p,b,S);return{x1:r,y1:i,x2:a,y2:h,x:c.x,y:c.y}}))},intermediateValue:function(t,e,r){return t+(e-t)*r},toCubicCurves:function(t){if(t.length){for(var e=t,r=[],i=0;i<e.length;i+=1)if(-1!==["M","C","S","Q"].indexOf(e[i].type))r.push(e[i]);else if(-1!==["V","H","L","Z"].indexOf(e[i].type)){var n={x:(e[i].p0.x+e[i].p1.x)/2,y:(e[i].p0.y+e[i].p1.y)/2};r.push({p0:e[i].p0,cntrl1:n,cntrl2:n,p1:e[i].p1,type:"C",length:e[i].length})}else console.log("wrong cmd type");return r}},rotatePoint:N,rotateBBox:function(t,e){var r={x:t.x,y:t.y},i={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},o={x:t.x+t.width,y:t.y+t.height},s=e.translate,a=e.rotate,h={x:a[1]||0,y:a[2]||0},c=a[0];s&&s.length>0&&(h.x+=s[0],h.y+=s[1]),r=N(r,h,c,D(r,h)),i=N(i,h,c,D(i,h)),n=N(n,h,c,D(n,h)),o=N(o,h,c,D(o,h));var u=[r.x,i.x,n.x,o.x].sort((function(t,e){return t-e})),l=[r.y,i.y,n.y,o.y].sort((function(t,e){return t-e}));return{x:u[0],y:l[0],width:u[3]-u[0],height:l[3]-l[0]}}};var U=new F,Y=U;function X(t,e){return t/e}function G(t,e){var r=t/e;return 1-(1-r)*Math.sin(r*e*.002*Math.PI*2+Math.PI/2)/Math.exp(8*r)}function H(t,e){var r=t/e,i=r/100;return 1-(1-r)*Math.abs(Math.sin(r*e*i*Math.PI*2+Math.PI/2))/Math.exp(10*r)}function q(t,e){var r=t/e;return r*r}function V(t,e){var r=t/e;return r*(2-r)}function W(t,e){var r=t/e;return r<.5?2*r*r:(4-2*r)*r-1}function Z(t,e){var r=t/e;return Y.pow(r,3)}function Q(t,e){var r=t/e;return(r-=1)*r*r+1}function J(t,e){var r=t/e;return r<.5?4*Y.pow(r,3):(r-1)*(2*r-2)*(2*r-2)+1}function $(t,e){var r=t/e;return 1-Math.cos(r*Math.PI/2)}function K(t,e){var r=t/e;return Math.cos(r*Math.PI/2)}function tt(t,e){var r=t/e;return(1-Math.cos(Math.PI*r))/2}function et(t){var e;if("function"==typeof t)return function(e,r){return t(e/r)};switch(t){case"easeOutQuad":e=V;break;case"easeInQuad":e=q;break;case"easeInOutQuad":e=W;break;case"easeInCubic":e=Z;break;case"easeOutCubic":e=Q;break;case"easeInOutCubic":e=J;break;case"easeInSin":e=$;break;case"easeOutSin":e=K;break;case"easeInOutSin":e=tt;break;case"bounce":e=H;break;case"linear":default:e=X;break;case"elastic":e=G}return e}var rt=0,it=0;function nt(){return rt+=1}function ot(){return it+=1}var st=et;function at(t){return this.easying=st(t),this.transition=t,this}function ht(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.durationP=t,this}function ct(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.loopValue=t,this}function ut(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.directionV=t,this}function lt(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.data=t,"CANVAS"===this.data.nodeName&&(this.canvasStack=[]),this}function ft(t){return"function"!=typeof t?null:(this.callbckExe=t,this)}function dt(t){return this.end=t,this}function pt(t){return this.endExe=t,this}function yt(){this.start()}function vt(){this.queue=m,this.sequenceQueue=[],this.lengthV=0,this.currPos=0,this.ID=nt(),this.loopCounter=0}function gt(){this.queue=m,this.group=[],this.currPos=0,this.ID=nt(),this.loopCounter=1}vt.prototype={duration:ht,loop:ct,callbck:ft,bind:lt,child:dt,ease:at,end:pt,commit:yt,reset:function(t){return this.resetV=t,this},direction:ut},vt.prototype.add=function(t){var e=this;return Array.isArray(t)||"function"==typeof t||(t=[t]),Array.isArray(t)&&t.map((function(t){return e.lengthV+=t.length?t.length:0,t})),this.sequenceQueue=this.sequenceQueue.concat(t),this},vt.prototype.easyingGlobal=function(t,e){return t/e},vt.prototype.start=function(){var t=this;if("alternate"===t.directionV)t.factor=t.factor?-1*t.factor:1,t.currPos=t.factor<0?this.sequenceQueue.length-1:0;else if("reverse"===t.directionV){for(var e=0;e<this.sequenceQueue.length;e+=1){var r=this.sequenceQueue[e];r instanceof vt||r instanceof gt||r.run(1),t.currPos=e}t.factor=-1}else t.currPos=0,t.factor=1;this.execute()},vt.prototype.execute=function(){var t=this,e=this.sequenceQueue[t.currPos];if(e="function"==typeof e?e():e)return e instanceof vt||e instanceof gt?e.end(t.triggerEnd.bind(t,e)).commit():(this.currObj=e,this.queue.add(ot(),{run:function(t){e.run(t)},target:e.target,delay:void 0!==e.delay?e.delay:0,duration:void 0!==e.duration?e.duration:t.durationP,loop:e.loop?e.loop:1,direction:t.factor<0?"reverse":"default",end:t.triggerEnd.bind(t,e)},(function(t,e){return t/e}))),this},vt.prototype.triggerEnd=function(t){var e=this;if(e.currPos+=e.factor,t.end&&e.triggerChild(t),e.sequenceQueue.length===e.currPos||e.currPos<0)return e.endExe&&e.endExe(),e.loopCounter+=1,void(e.loopCounter<e.loopValue&&e.start());this.execute()},vt.prototype.triggerChild=function(t){t.end instanceof gt||t.end instanceof vt?setTimeout((function(){t.end.commit()}),0):t.end()},gt.prototype={duration:ht,loop:ct,callbck:ft,bind:lt,child:dt,ease:at,end:pt,commit:yt,direction:ut},gt.prototype.add=function(t){var e=this;return Array.isArray(t)||(t=[t]),this.group=this.group.concat(t),this.group.forEach((function(t){t.durationP=t.durationP?t.durationP:e.durationP})),this},gt.prototype.execute=function(){var t=this;t.currPos=0;for(var e=function(e,r){var i=t.group[e];i instanceof vt||i instanceof gt?i.end(t.triggerEnd.bind(t,i)).commit():t.queue.add(ot(),{run:function(t){i.run(t)},target:i.target,delay:void 0!==i.delay?i.delay:0,duration:void 0!==i.duration?i.duration:t.durationP,loop:i.loop?i.loop:1,direction:i.direction?i.direction:"default",end:t.triggerEnd.bind(t,i)},i.ease?st(i.ease):t.easying)},r=0,i=t.group.length;r<i;r++)e(r);return t},gt.prototype.start=function(){var t=this;"alternate"===t.directionV?t.factor=t.factor?-1*t.factor:1:"reverse"===t.directionV?t.factor=-1:t.factor=1,this.execute()},gt.prototype.triggerEnd=function(t){var e=this;this.currPos+=1,t.end&&this.triggerChild(t.end),this.currPos===this.group.length&&(this.endExe&&this.triggerChild(this.endExe),e.loopCounter+=1,e.loopCounter<e.loopValue&&e.start())},gt.prototype.triggerChild=function(t){t instanceof gt||t instanceof vt?t.commit():"function"==typeof t?t():console.log("wrong type")};var xt={sequenceChain:function(){return new vt},parallelChain:function(){return new gt}};var mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function wt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bt={exports:{}},At={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},Bt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function Et(t){return t>=48&&t<=57}function Tt(t){return t>=48&&t<=57||43===t||45===t||46===t}function St(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function _t(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&Bt.indexOf(e)>=0);)t.index++;var e}function kt(t){var e=t.path.charCodeAt(t.index);return 48===e?(t.param=0,void t.index++):49===e?(t.param=1,void t.index++):void(t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")")}function Mt(t){var e,r=t.index,i=r,n=t.max,o=!1,s=!1,a=!1,h=!1;if(i>=n)t.err="SvgPath: missed param (at pos "+i+")";else if(43!==(e=t.path.charCodeAt(i))&&45!==e||(e=++i<n?t.path.charCodeAt(i):0),Et(e)||46===e){if(46!==e){if(o=48===e,e=++i<n?t.path.charCodeAt(i):0,o&&i<n&&e&&Et(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+r+")");for(;i<n&&Et(t.path.charCodeAt(i));)i++,s=!0;e=i<n?t.path.charCodeAt(i):0}if(46===e){for(h=!0,i++;Et(t.path.charCodeAt(i));)i++,a=!0;e=i<n?t.path.charCodeAt(i):0}if(101===e||69===e){if(h&&!s&&!a)return void(t.err="SvgPath: invalid float exponent (at pos "+i+")");if(43!==(e=++i<n?t.path.charCodeAt(i):0)&&45!==e||i++,!(i<n&&Et(t.path.charCodeAt(i))))return void(t.err="SvgPath: invalid float exponent (at pos "+i+")");for(;i<n&&Et(t.path.charCodeAt(i));)i++}t.index=i,t.param=parseFloat(t.path.slice(r,i))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+i+")"}function Ct(t){var e,r;r=(e=t.path[t.segmentStart]).toLowerCase();var i=t.data;if("m"===r&&i.length>2&&(t.result.push([e,i[0],i[1]]),i=i.slice(2),r="l",e="m"===e?"l":"L"),"r"===r)t.result.push([e].concat(i));else for(;i.length>=At[r]&&(t.result.push([e].concat(i.splice(0,At[r]))),At[r]););}function Lt(t){var e,r,i,n,o,s=t.max;if(t.segmentStart=t.index,e=t.path.charCodeAt(t.index),r=97==(32|e),function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(e))if(n=At[t.path[t.index].toLowerCase()],t.index++,_t(t),t.data=[],n){for(i=!1;;){for(o=n;o>0;o--){if(!r||3!==o&&4!==o?Mt(t):kt(t),t.err.length)return;t.data.push(t.param),_t(t),i=!1,t.index<s&&44===t.path.charCodeAt(t.index)&&(t.index++,_t(t),i=!0)}if(!i){if(t.index>=t.max)break;if(!Tt(t.path.charCodeAt(t.index)))break}}Ct(t)}else Ct(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}function Dt(){if(!(this instanceof Dt))return new Dt;this.queue=[],this.cache=null}Dt.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},Dt.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},Dt.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},Dt.prototype.rotate=function(t,e,r){var i,n,o;return 0!==t&&(this.translate(e,r),i=t*Math.PI/180,n=Math.cos(i),o=Math.sin(i),this.queue.push([n,o,-o,n,0,0]),this.cache=null,this.translate(-e,-r)),this},Dt.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},Dt.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},Dt.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=(e=this.cache,r=this.queue[t],[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]);var e,r;return this.cache},Dt.prototype.calc=function(t,e,r){var i;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(i=this.cache)[0]+e*i[2]+(r?0:i[4]),t*i[1]+e*i[3]+(r?0:i[5])]):[t,e]};var Pt=Dt,It=Pt,zt={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},Rt=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,Ot=/[\s,]+/,jt=2*Math.PI;function Nt(t,e,r,i){var n=t*r+e*i;return n>1&&(n=1),n<-1&&(n=-1),(t*i-e*r<0?-1:1)*Math.acos(n)}function Ft(t,e){var r=4/3*Math.tan(e/4),i=Math.cos(t),n=Math.sin(t),o=Math.cos(t+e),s=Math.sin(t+e);return[i,n,i-n*r,n+i*r,o+s*r,s-o*r,o,s]}var Ut=1e-10,Yt=Math.PI/180;function Xt(t,e,r){if(!(this instanceof Xt))return new Xt(t,e,r);this.rx=t,this.ry=e,this.ax=r}Xt.prototype.transform=function(t){var e=Math.cos(this.ax*Yt),r=Math.sin(this.ax*Yt),i=[this.rx*(t[0]*e+t[2]*r),this.rx*(t[1]*e+t[3]*r),this.ry*(-t[0]*r+t[2]*e),this.ry*(-t[1]*r+t[3]*e)],n=i[0]*i[0]+i[2]*i[2],o=i[1]*i[1]+i[3]*i[3],s=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),a=(n+o)/2;if(s<Ut*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var h=i[0]*i[1]+i[2]*i[3],c=a+(s=Math.sqrt(s))/2,u=a-s/2;return this.ax=Math.abs(h)<Ut&&Math.abs(c-o)<Ut?90:180*Math.atan(Math.abs(h)>Math.abs(c-o)?(c-n)/h:h/(c-o))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)):(this.ax+=90,this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)),this},Xt.prototype.isDegenerate=function(){return this.rx<Ut*this.ry||this.ry<Ut*this.rx};var Gt=function(t){var e=new St(t),r=e.max;for(_t(e);e.index<r&&!e.err.length;)Lt(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}},Ht=function(t){var e,r,i=new It;return t.split(Rt).forEach((function(t){if(t.length)if(void 0===zt[t])switch(r=t.split(Ot).map((function(t){return+t||0})),e){case"matrix":return void(6===r.length&&i.matrix(r));case"scale":return void(1===r.length?i.scale(r[0],r[0]):2===r.length&&i.scale(r[0],r[1]));case"rotate":return void(1===r.length?i.rotate(r[0],0,0):3===r.length&&i.rotate(r[0],r[1],r[2]));case"translate":return void(1===r.length?i.translate(r[0],0):2===r.length&&i.translate(r[0],r[1]));case"skewX":return void(1===r.length&&i.skewX(r[0]));case"skewY":return void(1===r.length&&i.skewY(r[0]))}else e=t})),i},qt=Pt,Vt=function(t,e,r,i,n,o,s,a,h){var c=Math.sin(h*jt/360),u=Math.cos(h*jt/360),l=u*(t-r)/2+c*(e-i)/2,f=-c*(t-r)/2+u*(e-i)/2;if(0===l&&0===f)return[];if(0===s||0===a)return[];s=Math.abs(s),a=Math.abs(a);var d=l*l/(s*s)+f*f/(a*a);d>1&&(s*=Math.sqrt(d),a*=Math.sqrt(d));var p=function(t,e,r,i,n,o,s,a,h,c){var u=c*(t-r)/2+h*(e-i)/2,l=-h*(t-r)/2+c*(e-i)/2,f=s*s,d=a*a,p=u*u,y=l*l,v=f*d-f*y-d*p;v<0&&(v=0),v/=f*y+d*p;var g=(v=Math.sqrt(v)*(n===o?-1:1))*s/a*l,x=v*-a/s*u,m=c*g-h*x+(t+r)/2,w=h*g+c*x+(e+i)/2,b=(u-g)/s,A=(l-x)/a,B=(-u-g)/s,E=(-l-x)/a,T=Nt(1,0,b,A),S=Nt(b,A,B,E);return 0===o&&S>0&&(S-=jt),1===o&&S<0&&(S+=jt),[m,w,T,S]}(t,e,r,i,n,o,s,a,c,u),y=[],v=p[2],g=p[3],x=Math.max(Math.ceil(Math.abs(g)/(jt/4)),1);g/=x;for(var m=0;m<x;m++)y.push(Ft(v,g)),v+=g;return y.map((function(t){for(var e=0;e<t.length;e+=2){var r=t[e+0],i=t[e+1],n=u*(r*=s)-c*(i*=a),o=c*r+u*i;t[e+0]=n+p[0],t[e+1]=o+p[1]}return t}))},Wt=Xt;function Zt(t){if(!(this instanceof Zt))return new Zt(t);var e=Gt(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}Zt.from=function(t){if("string"==typeof t)return new Zt(t);if(t instanceof Zt){var e=new Zt("");return e.err=t.err,e.segments=t.segments.map((function(t){return t.slice()})),e.__stack=t.__stack.map((function(t){return qt().matrix(t.toArray())})),e}throw new Error("SvgPath.from: invalid param type "+t)},Zt.prototype.__matrix=function(t){var e,r=this;t.queue.length&&this.iterate((function(i,n,o,s){var a,h,c,u;switch(i[0]){case"v":h=0===(a=t.calc(0,i[1],!0))[0]?["v",a[1]]:["l",a[0],a[1]];break;case"V":h=(a=t.calc(o,i[1],!1))[0]===t.calc(o,s,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":h=0===(a=t.calc(i[1],0,!0))[1]?["h",a[0]]:["l",a[0],a[1]];break;case"H":h=(a=t.calc(i[1],s,!1))[1]===t.calc(o,s,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var l=t.toArray(),f=Wt(i[1],i[2],i[3]).transform(l);if(l[0]*l[3]-l[1]*l[2]<0&&(i[5]=i[5]?"0":"1"),a=t.calc(i[6],i[7],"a"===i[0]),"A"===i[0]&&i[6]===o&&i[7]===s||"a"===i[0]&&0===i[6]&&0===i[7]){h=["a"===i[0]?"l":"L",a[0],a[1]];break}h=f.isDegenerate()?["a"===i[0]?"l":"L",a[0],a[1]]:[i[0],f.rx,f.ry,f.ax,i[4],i[5],a[0],a[1]];break;case"m":u=n>0,h=["m",(a=t.calc(i[1],i[2],u))[0],a[1]];break;default:for(h=[c=i[0]],u=c.toLowerCase()===c,e=1;e<i.length;e+=2)a=t.calc(i[e],i[e+1],u),h.push(a[0],a[1])}r.segments[n]=h}),!0)},Zt.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=qt(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},Zt.prototype.toString=function(){var t="",e="",r=!1;this.__evaluateStack();for(var i=0,n=this.segments.length;i<n;i++){var o=this.segments[i],s=o[0];s!==e||"m"===s||"M"===s?("m"===s&&"z"===e&&(t+=" "),t+=s,r=!1):r=!0;for(var a=1;a<o.length;a++){var h=o[a];1===a?r&&h>=0&&(t+=" "):h>=0&&(t+=" "),t+=h}e=s}return t},Zt.prototype.translate=function(t,e){return this.__stack.push(qt().translate(t,e||0)),this},Zt.prototype.scale=function(t,e){return this.__stack.push(qt().scale(t,e||0===e?e:t)),this},Zt.prototype.rotate=function(t,e,r){return this.__stack.push(qt().rotate(t,e||0,r||0)),this},Zt.prototype.skewX=function(t){return this.__stack.push(qt().skewX(t)),this},Zt.prototype.skewY=function(t){return this.__stack.push(qt().skewY(t)),this},Zt.prototype.matrix=function(t){return this.__stack.push(qt().matrix(t)),this},Zt.prototype.transform=function(t){return t.trim()?(this.__stack.push(Ht(t)),this):this},Zt.prototype.round=function(t){var e,r=0,i=0,n=0,o=0;return t=t||0,this.__evaluateStack(),this.segments.forEach((function(s){var a=s[0].toLowerCase()===s[0];switch(s[0]){case"H":case"h":return a&&(s[1]+=n),n=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"V":case"v":return a&&(s[1]+=o),o=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"Z":case"z":return n=r,void(o=i);case"M":case"m":return a&&(s[1]+=n,s[2]+=o),n=s[1]-s[1].toFixed(t),o=s[2]-s[2].toFixed(t),r=n,i=o,s[1]=+s[1].toFixed(t),void(s[2]=+s[2].toFixed(t));case"A":case"a":return a&&(s[6]+=n,s[7]+=o),n=s[6]-s[6].toFixed(t),o=s[7]-s[7].toFixed(t),s[1]=+s[1].toFixed(t),s[2]=+s[2].toFixed(t),s[3]=+s[3].toFixed(t+2),s[6]=+s[6].toFixed(t),void(s[7]=+s[7].toFixed(t));default:return e=s.length,a&&(s[e-2]+=n,s[e-1]+=o),n=s[e-2]-s[e-2].toFixed(t),o=s[e-1]-s[e-1].toFixed(t),void s.forEach((function(e,r){r&&(s[r]=+s[r].toFixed(t))}))}})),this},Zt.prototype.iterate=function(t,e){var r,i,n,o=this.segments,s={},a=!1,h=0,c=0,u=0,l=0;if(e||this.__evaluateStack(),o.forEach((function(e,r){var i=t(e,r,h,c);Array.isArray(i)&&(s[r]=i,a=!0);var n=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return h=e[1]+(n?h:0),c=e[2]+(n?c:0),u=h,void(l=c);case"h":case"H":return void(h=e[1]+(n?h:0));case"v":case"V":return void(c=e[1]+(n?c:0));case"z":case"Z":return h=u,void(c=l);default:h=e[e.length-2]+(n?h:0),c=e[e.length-1]+(n?c:0)}})),!a)return this;for(n=[],r=0;r<o.length;r++)if(void 0!==s[r])for(i=0;i<s[r].length;i++)n.push(s[r][i]);else n.push(o[r]);return this.segments=n,this},Zt.prototype.abs=function(){return this.iterate((function(t,e,r,i){var n,o=t[0],s=o.toUpperCase();if(o!==s)switch(t[0]=s,o){case"v":return void(t[1]+=i);case"a":return t[6]+=r,void(t[7]+=i);default:for(n=1;n<t.length;n++)t[n]+=n%2?r:i}}),!0),this},Zt.prototype.rel=function(){return this.iterate((function(t,e,r,i){var n,o=t[0],s=o.toLowerCase();if(o!==s&&(0!==e||"M"!==o))switch(t[0]=s,o){case"V":return void(t[1]-=i);case"A":return t[6]-=r,void(t[7]-=i);default:for(n=1;n<t.length;n++)t[n]-=n%2?r:i}}),!0),this},Zt.prototype.unarc=function(){return this.iterate((function(t,e,r,i){var n,o,s,a=[],h=t[0];return"A"!==h&&"a"!==h?null:("a"===h?(o=r+t[6],s=i+t[7]):(o=t[6],s=t[7]),0===(n=Vt(r,i,o,s,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(n.forEach((function(t){a.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])})),a))})),this},Zt.prototype.unshort=function(){var t,e,r,i,n,o=this.segments;return this.iterate((function(s,a,h,c){var u,l=s[0],f=l.toUpperCase();a&&("T"===f?(u="t"===l,"Q"===(r=o[a-1])[0]?(t=r[1]-h,e=r[2]-c):"q"===r[0]?(t=r[1]-r[3],e=r[2]-r[4]):(t=0,e=0),i=-t,n=-e,u||(i+=h,n+=c),o[a]=[u?"q":"Q",i,n,s[1],s[2]]):"S"===f&&(u="s"===l,"C"===(r=o[a-1])[0]?(t=r[3]-h,e=r[4]-c):"c"===r[0]?(t=r[3]-r[5],e=r[4]-r[6]):(t=0,e=0),i=-t,n=-e,u||(i+=h,n+=c),o[a]=[u?"c":"C",i,n,s[1],s[2],s[3],s[4]]))})),this};var Qt=Zt;!function(t){t.exports=Qt}(bt);var Jt=wt(bt.exports),$t={exports:{}};function Kt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function te(t,e,r){return[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]}function ee(t){return"number"==typeof t&&isFinite(t)}!function(t,e){!function(t){var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi,i=function(t){var i=[];return t.replace(r,(function(t,r,n){var s=r.toLowerCase();for(n=o(n),"m"===s&&n.length>2&&(i.push([r].concat(n.splice(0,2))),s="l",r="m"===r?"l":"L");n.length>=0;){if(n.length===e[s])return n.unshift(r),i.push(n);if(n.length<e[s])throw new Error("malformed path data");i.push([r].concat(n.splice(0,e[s])))}})),i},n=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function o(t){var e=t.match(n);return e?e.map(Number):[]}var s=function(t,e,r,i,n,o,s,h){return new a(t,e,r,i,n,o,s,h)};function a(t,e,r,i,n,o,s,a){this.a={x:t,y:e},this.b={x:r,y:i},this.c={x:n,y:o},this.d={x:s,y:a},null!=s&&null!=a?(this.getArcLength=w,this.getPoint=f,this.getDerivative=c):(this.getArcLength=d,this.getPoint=l,this.getDerivative=h),this.init()}function h(t,e,r){return{x:2*(1-r)*(t[1]-t[0])+2*r*(t[2]-t[1]),y:2*(1-r)*(e[1]-e[0])+2*r*(e[2]-e[1])}}function c(t,e,r){return l([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],r)}function u(t,e,r,i,n){for(var o=1,s=t/e,a=(t-r(i,n,s))/e;o>.001;){var h=r(i,n,s+a),c=r(i,n,s-a),u=Math.abs(t-h)/e,l=Math.abs(t-c)/e;u<o?(o=u,s+=a):l<o?(o=l,s-=a):a/=2}return s}function l(t,e,r){return{x:(1-r)*(1-r)*t[0]+2*(1-r)*r*t[1]+r*r*t[2],y:(1-r)*(1-r)*e[0]+2*(1-r)*r*e[1]+r*r*e[2]}}function f(t,e,r){return{x:(1-r)*(1-r)*(1-r)*t[0]+3*(1-r)*(1-r)*r*t[1]+3*(1-r)*r*r*t[2]+r*r*r*t[3],y:(1-r)*(1-r)*(1-r)*e[0]+3*(1-r)*(1-r)*r*e[1]+3*(1-r)*r*r*e[2]+r*r*r*e[3]}}function d(t,e,r){void 0===r&&(r=1);var i=t[0]-2*t[1]+t[2],n=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],s=2*e[1]-2*e[0],a=4*(i*i+n*n),h=4*(i*o+n*s),c=o*o+s*s;if(0===a)return r*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var u=h/(2*a),l=r+u,f=c/a-u*u;return Math.sqrt(a)/2*(l*Math.sqrt(l*l+f)-u*Math.sqrt(u*u+f)+f*Math.log(Math.abs((l+Math.sqrt(l*l+f))/(u+Math.sqrt(u*u+f)))))}a.prototype={constructor:a,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=u(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(t){var e=u(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),r=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),i=Math.sqrt(r.x*r.x+r.y*r.y);return i>0?{x:r.x/i,y:r.y/i}:{x:0,y:0}},getPropertiesAtLength:function(t){var e,r=u(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),i=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],r),n=Math.sqrt(i.x*i.x+i.y*i.y);e=n>0?{x:i.x/n,y:i.y/n}:{x:0,y:0};var o=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],r);return{x:o.x,y:o.y,tangentX:e.x,tangentY:e.y}}};var p=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],y=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],v=[[1],[1,1],[1,2,1],[1,3,3,1]];function g(t,e){return v[t][e]}function x(t,e,r){var i,n,o,s=r.length-1;if(0===s)return 0;if(0===t){for(n=0,o=0;o<=s;o++)n+=g(s,o)*Math.pow(1-e,s-o)*Math.pow(e,o)*r[o];return n}for(i=new Array(s),o=0;o<s;o++)i[o]=s*(r[o+1]-r[o]);return x(t-1,e,i)}function m(t,e,r){var i=x(1,r,t),n=x(1,r,e),o=i*i+n*n;return Math.sqrt(o)}function w(t,e,r){var i,n,o,s;void 0===r&&(r=1);var a=20;for(i=r/2,n=0,o=0;o<a;o++)s=i*p[a][o]+i,n+=y[a][o]*m(t,e,s);return i*n}var b=2*Math.PI;function A(t,e,r,i){var n=t*r+e*i;return n>1&&(n=1),n<-1&&(n=-1),(t*i-e*r<0?-1:1)*Math.acos(n)}function B(t,e,r,i,n,o,s,a,h,c){var u=c*(t-r)/2+h*(e-i)/2,l=-h*(t-r)/2+c*(e-i)/2,f=s*s,d=a*a,p=u*u,y=l*l,v=f*d-f*y-d*p;v<0&&(v=0),v/=f*y+d*p;var g=(v=Math.sqrt(v)*(n===o?-1:1))*s/a*l,x=v*-a/s*u,m=c*g-h*x+(t+r)/2,w=h*g+c*x+(e+i)/2,B=(u-g)/s,E=(l-x)/a,T=(-u-g)/s,S=(-l-x)/a,_=A(1,0,B,E),k=A(B,E,T,S);return 0===o&&k>0&&(k-=b),1===o&&k<0&&(k+=b),[m,w,_,k]}function E(t,e){var r=4/3*Math.tan(e/4),i=Math.cos(t),n=Math.sin(t),o=Math.cos(t+e),s=Math.sin(t+e);return[i,n,i-n*r,n+i*r,o+s*r,s-o*r,o,s]}var T=function(t,e,r,i,n,o,s,a,h){var c=Math.sin(n*b/360),u=Math.cos(n*b/360),l=u*(t-a)/2+c*(e-h)/2,f=-c*(t-a)/2+u*(e-h)/2;if(0===l&&0===f)return[];if(0===r||0===i)return[];r=Math.abs(r),i=Math.abs(i);var d=l*l/(r*r)+f*f/(i*i);d>1&&(r*=Math.sqrt(d),i*=Math.sqrt(d));var p=B(t,e,a,h,o,s,r,i,c,u),y=[],v=p[2],g=p[3],x=Math.max(Math.ceil(Math.abs(g)/(b/4)),1);g/=x;for(var m=0;m<x;m++)y.push(E(v,g)),v+=g;return y.map((function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],o=t[e+1],s=u*(n*=r)-c*(o*=i),a=c*n+u*o;t[e+0]=s+p[0],t[e+1]=a+p[1]}return t}))},S=function(t,e,r,i,n,o,s,a,h){return new _(t,e,r,i,n,o,s,a,h)};function _(t,e,r,i,n,o,a,h,c){var u=0,l=[],f=[];T(t,e,r,i,n,o,a,h,c).forEach((function(t){var e=new s(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),r=e.getTotalLength();u+=r,l.push(r),f.push(e)})),this.length=u,this.partialLengths=l,this.curves=f}_.prototype={constructor:_,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var r=0,i=0;i<e;i++)r+=this.partialLengths[i];return this.curves[e].getPointAtLength(t-r)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var r=0,i=0;i<e;i++)r+=this.partialLengths[i];return this.curves[e].getTangentAtLength(t-r)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),r=this.getPointAtLength(t);return{x:r.x,y:r.y,tangentX:e.x,tangentY:e.y}}};var k=function(t,e,r,i){return new M(t,e,r,i)};function M(t,e,r,i){this.x0=t,this.x1=e,this.y0=r,this.y1=i}M.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},M.prototype.getPointAtLength=function(t){var e=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),r=(this.x1-this.x0)*e,i=(this.y1-this.y0)*e;return{x:this.x0+r,y:this.y0+i}},M.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},M.prototype.getPropertiesAtLength=function(t){var e=this.getPointAtLength(t),r=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:r.x,tangentY:r.y}};var C=function(t){var e=0,r=[],n=[];function o(t){if(!t)return null;for(var a,h,c=i(t),u=[0,0],l=[0,0],f=0;f<c.length;f++)"M"===c[f][0]?(h=[(u=[c[f][1],c[f][2]])[0],u[1]],n.push(null)):"m"===c[f][0]?(h=[(u=[c[f][1]+u[0],c[f][2]+u[1]])[0],u[1]],n.push(null)):"L"===c[f][0]?(e+=Math.sqrt(Math.pow(u[0]-c[f][1],2)+Math.pow(u[1]-c[f][2],2)),n.push(new k(u[0],c[f][1],u[1],c[f][2])),u=[c[f][1],c[f][2]]):"l"===c[f][0]?(e+=Math.sqrt(Math.pow(c[f][1],2)+Math.pow(c[f][2],2)),n.push(new k(u[0],c[f][1]+u[0],u[1],c[f][2]+u[1])),u=[c[f][1]+u[0],c[f][2]+u[1]]):"H"===c[f][0]?(e+=Math.abs(u[0]-c[f][1]),n.push(new k(u[0],c[f][1],u[1],u[1])),u[0]=c[f][1]):"h"===c[f][0]?(e+=Math.abs(c[f][1]),n.push(new k(u[0],u[0]+c[f][1],u[1],u[1])),u[0]=c[f][1]+u[0]):"V"===c[f][0]?(e+=Math.abs(u[1]-c[f][1]),n.push(new k(u[0],u[0],u[1],c[f][1])),u[1]=c[f][1]):"v"===c[f][0]?(e+=Math.abs(c[f][1]),n.push(new k(u[0],u[0],u[1],u[1]+c[f][1])),u[1]=c[f][1]+u[1]):"z"===c[f][0]||"Z"===c[f][0]?(e+=Math.sqrt(Math.pow(h[0]-u[0],2)+Math.pow(h[1]-u[1],2)),n.push(new k(u[0],h[0],u[1],h[1])),u=[h[0],h[1]]):"C"===c[f][0]?(a=new s(u[0],u[1],c[f][1],c[f][2],c[f][3],c[f][4],c[f][5],c[f][6]),e+=a.getTotalLength(),u=[c[f][5],c[f][6]],n.push(a)):"c"===c[f][0]?(a=new s(u[0],u[1],u[0]+c[f][1],u[1]+c[f][2],u[0]+c[f][3],u[1]+c[f][4],u[0]+c[f][5],u[1]+c[f][6]),e+=a.getTotalLength(),u=[c[f][5]+u[0],c[f][6]+u[1]],n.push(a)):"S"===c[f][0]?(a=f>0&&["C","c","S","s"].indexOf(c[f-1][0])>-1?new s(u[0],u[1],2*u[0]-c[f-1][c[f-1].length-4],2*u[1]-c[f-1][c[f-1].length-3],c[f][1],c[f][2],c[f][3],c[f][4]):new s(u[0],u[1],u[0],u[1],c[f][1],c[f][2],c[f][3],c[f][4]),e+=a.getTotalLength(),u=[c[f][3],c[f][4]],n.push(a)):"s"===c[f][0]?(a=f>0&&["C","c","S","s"].indexOf(c[f-1][0])>-1?new s(u[0],u[1],u[0]+a.d.x-a.c.x,u[1]+a.d.y-a.c.y,u[0]+c[f][1],u[1]+c[f][2],u[0]+c[f][3],u[1]+c[f][4]):new s(u[0],u[1],u[0],u[1],u[0]+c[f][1],u[1]+c[f][2],u[0]+c[f][3],u[1]+c[f][4]),e+=a.getTotalLength(),u=[c[f][3]+u[0],c[f][4]+u[1]],n.push(a)):"Q"===c[f][0]?(a=u[0]!=c[f][1]&&u[1]!=c[f][2]?new s(u[0],u[1],c[f][1],c[f][2],c[f][3],c[f][4]):new k(c[f][1],c[f][3],c[f][2],c[f][4]),e+=a.getTotalLength(),n.push(a),u=[c[f][3],c[f][4]],l=[c[f][1],c[f][2]]):"q"===c[f][0]?(a=0!=c[f][1]||0!=c[f][2]?new s(u[0],u[1],u[0]+c[f][1],u[1]+c[f][2],u[0]+c[f][3],u[1]+c[f][4]):new k(u[0]+c[f][1],u[0]+c[f][3],u[1]+c[f][2],u[1]+c[f][4]),e+=a.getTotalLength(),l=[u[0]+c[f][1],u[1]+c[f][2]],u=[c[f][3]+u[0],c[f][4]+u[1]],n.push(a)):"T"===c[f][0]?(a=f>0&&["Q","q","T","t"].indexOf(c[f-1][0])>-1?new s(u[0],u[1],2*u[0]-l[0],2*u[1]-l[1],c[f][1],c[f][2]):new k(u[0],c[f][1],u[1],c[f][2]),n.push(a),e+=a.getTotalLength(),l=[2*u[0]-l[0],2*u[1]-l[1]],u=[c[f][1],c[f][2]]):"t"===c[f][0]?(a=f>0&&["Q","q","T","t"].indexOf(c[f-1][0])>-1?new s(u[0],u[1],2*u[0]-l[0],2*u[1]-l[1],u[0]+c[f][1],u[1]+c[f][2]):new k(u[0],u[0]+c[f][1],u[1],u[1]+c[f][2]),e+=a.getTotalLength(),l=[2*u[0]-l[0],2*u[1]-l[1]],u=[c[f][1]+u[0],c[f][2]+u[0]],n.push(a)):"A"===c[f][0]?(a=new S(u[0],u[1],c[f][1],c[f][2],c[f][3],c[f][4],c[f][5],c[f][6],c[f][7]),e+=a.getTotalLength(),u=[c[f][6],c[f][7]],n.push(a)):"a"===c[f][0]&&(a=new S(u[0],u[1],c[f][1],c[f][2],c[f][3],c[f][4],c[f][5],u[0]+c[f][6],u[1]+c[f][7]),e+=a.getTotalLength(),u=[u[0]+c[f][6],u[1]+c[f][7]],n.push(a)),r.push(e);return o}o.getTotalLength=function(){return e},o.getPointAtLength=function(t){var e=a(t);return n[e.i].getPointAtLength(e.fraction)},o.getTangentAtLength=function(t){var e=a(t);return n[e.i].getTangentAtLength(e.fraction)},o.getPropertiesAtLength=function(t){var e=a(t);return n[e.i].getPropertiesAtLength(e.fraction)};var a=function(t){t<0?t=0:t>e&&(t=e);for(var i=r.length-1;r[i]>=t&&r[i]>0;)i--;return i++,{fraction:t-r[i-1],i:i}};return o(t)};t.svgPathProperties=C,t.parse=i,t.Bezier=s,Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,$t.exports);var re='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n';function ie(t,e){var r=function(t){return new Jt(t).abs()}(t);return function(t){var e=t.segments||[],r=[];if(!e.length||"M"!==e[0][0])return!1;for(var i=0;i<e.length;i++){var n=e[i],o=n[0],s=n[1],a=n[2];if("M"===o&&i||"Z"===o)break;if("M"===o||"L"===o)r.push([s,a]);else if("H"===o)r.push([s,r[r.length-1][1]]);else{if("V"!==o)return!1;r.push([r[r.length-1][0],s])}}return!!r.length&&{ring:r}}(r)||function(t,e){var r,i,n=function(t){return t.toString().split("M").map((function(t,e){return t=t.trim(),e&&t?"M"+t:t})).filter((function(t){return t}))}(t)[0],o=[],s=3;if(!n)throw new TypeError(re);i=function(t){if("undefined"!=typeof window&&window&&window.document)try{var e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e}catch(t){}return $t.exports.svgPathProperties(t)}(n),r=i.getTotalLength(),e&&ee(e)&&e>0&&(s=Math.max(s,Math.ceil(r/e)));for(var a=0;a<s;a++){var h=i.getPointAtLength(r*a/s);o.push([h.x,h.y])}return{ring:o,skipBisect:!0}}(r,e)}function ne(t,e){for(var r=t.length+e,i=function(t){for(var e,r,i=-1,n=t.length,o=t[n-1],s=o[0],a=o[1],h=0;++i<n;)e=s,r=a,e-=s=(o=t[i])[0],r-=a=o[1],h+=Math.sqrt(e*e+r*r);return h}(t)/e,n=0,o=0,s=i/2;t.length<r;){var a=t[n],h=t[(n+1)%t.length],c=Kt(a,h);s<=o+c?(t.splice(n+1,0,c?te(a,h,(s-o)/c):a.slice(0)),s+=i):(o+=c,n++)}}function oe(t,e){var r,i,n;if("string"==typeof t){var o=ie(t,e);t=o.ring,n=o.skipBisect}else if(!Array.isArray(t))throw new TypeError(re);if(!function(t){return t.every((function(t){return Array.isArray(t)&&t.length>=2&&ee(t[0])&&ee(t[1])}))}(r=t.slice(0)))throw new TypeError(re);return r.length>1&&function(t,e){return Kt(t,e)<1e-9}(r[0],r[r.length-1])&&r.pop(),i=function(t){for(var e,r=-1,i=t.length,n=t[i-1],o=0;++r<i;)e=n,n=t[r],o+=e[1]*n[0]-e[0]*n[1];return o/2}(r),i>0&&r.reverse(),!n&&e&&ee(e)&&e>0&&function(t,e){void 0===e&&(e=1/0);for(var r=0;r<t.length;r++)for(var i=t[r],n=r===t.length-1?t[0]:t[r+1];Kt(i,n)>e;)n=te(i,n,.5),t.splice(r+1,0,n)}(r,e),r}function se(t,e,r){void 0===r&&(r={});var i=r.maxSegmentLength;void 0===i&&(i=10);var n=r.string;void 0===n&&(n=!0);var o=function(t,e,r){var i;return i=t.length-e.length,ne(t,i<0?-1*i:0),ne(e,i>0?i:0),function(t,e){for(var r,i,n,o=t.length,s=1/0,a=function(n){i=0,e.forEach((function(e,r){var s=Kt(t[(n+r)%o],e);i+=s*s})),i<s&&(s=i,r=n)},h=0;h<o;h++)a(h);r&&(n=t.splice(0,r),t.splice.apply(t,[t.length,0].concat(n)))}(t,e),function(t,e,r){var i=t.map((function(t,r){return function(t,e){return function(r){return t.map((function(t,i){return t+r*(e[i]-t)}))}}(t,e[r])}));return function(t){var e=i.map((function(e){return e(t)}));return r?"M"+e.join("L")+"Z":e}}(t,e,r)}(oe(t,i),oe(e,i),n);return!n||"string"!=typeof t&&"string"!=typeof e?o:function(r){return r<1e-4&&"string"==typeof t?t:1-r<1e-4&&"string"==typeof e?e:o(r)}}var ae,he,ce={exports:{}};function ue(t,e,r){r=r||2;var i,n,o,s,a,h,c,u=e&&e.length,l=u?e[0]*r:t.length,f=le(t,0,l,r,!0),d=[];if(!f||f.next===f.prev)return d;if(u&&(f=function(t,e,r,i){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=le(t,e[n]*i,n<o-1?e[n+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),a.push(Ae(s));for(a.sort(xe),n=0;n<a.length;n++)r=me(a[n],r);return r}(t,e,f,r)),t.length>80*r){i=o=t[0],n=s=t[1];for(var p=r;p<l;p+=r)(a=t[p])<i&&(i=a),(h=t[p+1])<n&&(n=h),a>o&&(o=a),h>s&&(s=h);c=0!==(c=Math.max(o-i,s-n))?32767/c:0}return de(f,d,r,i,n,c,0),d}function le(t,e,r,i,n){var o,s;if(n===ze(t,e,r,i)>0)for(o=e;o<r;o+=i)s=De(o,t[o],t[o+1],s);else for(o=r-i;o>=e;o-=i)s=De(o,t[o],t[o+1],s);return s&&Se(s,s.next)&&(Pe(s),s=s.next),s}function fe(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!Se(i,i.next)&&0!==Te(i.prev,i,i.next))i=i.next;else{if(Pe(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function de(t,e,r,i,n,o,s){if(t){!s&&o&&function(t,e,r,i){var n=t;do{0===n.z&&(n.z=be(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,s,a,h,c=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,i=r,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(h=c;a>0||h>0&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,c*=2}while(s>1)}(n)}(t,i,n,o);for(var a,h,c=t;t.prev!==t.next;)if(a=t.prev,h=t.next,o?ye(t,i,n,o):pe(t))e.push(a.i/r|0),e.push(t.i/r|0),e.push(h.i/r|0),Pe(t),t=h.next,c=h.next;else if((t=h)===c){s?1===s?de(t=ve(fe(t),e,r),e,r,i,n,o,2):2===s&&ge(t,e,r,i,n,o):de(fe(t),e,r,i,n,o,1);break}}}function pe(t){var e=t.prev,r=t,i=t.next;if(Te(e,r,i)>=0)return!1;for(var n=e.x,o=r.x,s=i.x,a=e.y,h=r.y,c=i.y,u=n<o?n<s?n:s:o<s?o:s,l=a<h?a<c?a:c:h<c?h:c,f=n>o?n>s?n:s:o>s?o:s,d=a>h?a>c?a:c:h>c?h:c,p=i.next;p!==e;){if(p.x>=u&&p.x<=f&&p.y>=l&&p.y<=d&&Be(n,a,o,h,s,c,p.x,p.y)&&Te(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function ye(t,e,r,i){var n=t.prev,o=t,s=t.next;if(Te(n,o,s)>=0)return!1;for(var a=n.x,h=o.x,c=s.x,u=n.y,l=o.y,f=s.y,d=a<h?a<c?a:c:h<c?h:c,p=u<l?u<f?u:f:l<f?l:f,y=a>h?a>c?a:c:h>c?h:c,v=u>l?u>f?u:f:l>f?l:f,g=be(d,p,e,r,i),x=be(y,v,e,r,i),m=t.prevZ,w=t.nextZ;m&&m.z>=g&&w&&w.z<=x;){if(m.x>=d&&m.x<=y&&m.y>=p&&m.y<=v&&m!==n&&m!==s&&Be(a,u,h,l,c,f,m.x,m.y)&&Te(m.prev,m,m.next)>=0)return!1;if(m=m.prevZ,w.x>=d&&w.x<=y&&w.y>=p&&w.y<=v&&w!==n&&w!==s&&Be(a,u,h,l,c,f,w.x,w.y)&&Te(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;m&&m.z>=g;){if(m.x>=d&&m.x<=y&&m.y>=p&&m.y<=v&&m!==n&&m!==s&&Be(a,u,h,l,c,f,m.x,m.y)&&Te(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;w&&w.z<=x;){if(w.x>=d&&w.x<=y&&w.y>=p&&w.y<=v&&w!==n&&w!==s&&Be(a,u,h,l,c,f,w.x,w.y)&&Te(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function ve(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!Se(n,o)&&_e(n,i,i.next,o)&&Ce(n,o)&&Ce(o,n)&&(e.push(n.i/r|0),e.push(i.i/r|0),e.push(o.i/r|0),Pe(i),Pe(i.next),i=t=o),i=i.next}while(i!==t);return fe(i)}function ge(t,e,r,i,n,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Ee(s,a)){var h=Le(s,a);return s=fe(s,s.next),h=fe(h,h.next),de(s,e,r,i,n,o,0),void de(h,e,r,i,n,o,0)}a=a.next}s=s.next}while(s!==t)}function xe(t,e){return t.x-e.x}function me(t,e){var r=function(t,e){var r,i=e,n=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>s&&(s=a,r=i.x<i.next.x?i:i.next,a===n))return r}i=i.next}while(i!==e);if(!r)return null;var h,c=r,u=r.x,l=r.y,f=1/0;i=r;do{n>=i.x&&i.x>=u&&n!==i.x&&Be(o<l?n:s,o,u,l,o<l?s:n,o,i.x,i.y)&&(h=Math.abs(o-i.y)/(n-i.x),Ce(i,t)&&(h<f||h===f&&(i.x>r.x||i.x===r.x&&we(r,i)))&&(r=i,f=h)),i=i.next}while(i!==c);return r}(t,e);if(!r)return e;var i=Le(r,t);return fe(i,i.next),fe(r,r.next)}function we(t,e){return Te(t.prev,t,e.prev)<0&&Te(e.next,t,t.next)<0}function be(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ae(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Be(t,e,r,i,n,o,s,a){return(n-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(r-s)*(e-a)&&(r-s)*(o-a)>=(n-s)*(i-a)}function Ee(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&_e(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Ce(t,e)&&Ce(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(Te(t.prev,t,e.prev)||Te(t,e.prev,e))||Se(t,e)&&Te(t.prev,t,t.next)>0&&Te(e.prev,e,e.next)>0)}function Te(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Se(t,e){return t.x===e.x&&t.y===e.y}function _e(t,e,r,i){var n=Me(Te(t,e,r)),o=Me(Te(t,e,i)),s=Me(Te(r,i,t)),a=Me(Te(r,i,e));return n!==o&&s!==a||(!(0!==n||!ke(t,r,e))||(!(0!==o||!ke(t,i,e))||(!(0!==s||!ke(r,t,i))||!(0!==a||!ke(r,e,i)))))}function ke(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Me(t){return t>0?1:t<0?-1:0}function Ce(t,e){return Te(t.prev,t,t.next)<0?Te(t,e,t.next)>=0&&Te(t,t.prev,e)>=0:Te(t,e,t.prev)<0||Te(t,t.next,e)<0}function Le(t,e){var r=new Ie(t.i,t.x,t.y),i=new Ie(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function De(t,e,r,i){var n=new Ie(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Pe(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ie(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ze(t,e,r,i){for(var n=0,o=e,s=r-i;o<r;o+=i)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}function Re(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}ce.exports=ue,ce.exports.default=ue,ue.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,s=Math.abs(ze(t,0,o,r));if(n)for(var a=0,h=e.length;a<h;a++){var c=e[a]*r,u=a<h-1?e[a+1]*r:t.length;s-=Math.abs(ze(t,c,u,r))}var l=0;for(a=0;a<i.length;a+=3){var f=i[a]*r,d=i[a+1]*r,p=i[a+2]*r;l+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},ue.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[n][o][s]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r},1===(ae=Re).length&&(he=ae,ae=function(t,e){return Re(he(t),e)});var Oe=0,je=U,Ne=m,Fe=et;function Ue(t,e,r,i){var n=r.minX,o=r.minY,s=r.maxX,a=r.maxY;if(-1!==["V","H","L","v","h","l"].indexOf(t.type))[t.p0?t.p0:e.p1,t.p1].forEach((function(t){t.x<n&&(n=t.x),t.x>s&&(s=t.x),t.y<o&&(o=t.y),t.y>a&&(a=t.y)}));else if(-1!==["Q","C","q","c"].indexOf(t.type))for(var h,c=je.cubicBezierCoefficients(t),u=je.cubicBezierTransition.bind(null,t.p0,c),l=0;l<1;)h=u(l),l+=.05,h.x<n&&(n=h.x),h.x>s&&(s=h.x),h.y<o&&(o=h.y),h.y>a&&(a=h.y);else{var f=t.p0;f.x<n&&(n=f.x),f.x>s&&(s=f.x),f.y<o&&(o=f.y),f.y>a&&(a=f.y)}r.minX=n,r.minY=o,r.maxX=s,r.maxY=a,i.x=n,i.y=o,i.width=s-n,i.height=a-o}function Ye(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Xe(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ge(t,e,r){return t?r:e}function He(t){this.stack=[],this.length=0,this.stackGroup=[],this.BBox={x:0,y:0,width:0,height:0},this.minMax={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},t&&this.parse(t)}function qe(t){return["S","C","V","L","H","Q"].indexOf(t)>-1}He.prototype={z:function(){return this.cp=this.start,this.segmentLength=je.getDistance(this.pp,this.cp),this.stack.push({p0:this.pp,p1:this.cp,type:"Z",length:this.segmentLength,pointAt:function(t){return je.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Ue(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},m:function(t,e){var r=Ge(t,this.pp?this.pp:{x:0,y:0},{x:0,y:0});return this.cntrl=null,this.cp=Ye(e,r),this.start=this.cp,this.segmentLength=0,this.length=this.segmentLength,0!==this.currPathArr&&this.pp?(this.stackGroup.push(this.stack),this.stack=[]):this.stackGroup.push(this.stack),this.stack.push({type:"M",p0:this.cp,length:this.segmentLength,pointAt:function(t){return this.p0}}),this.pp=this.cp,Ue(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},v:function(t,e){var r=Ge(t,this.pp,{x:this.pp.x,y:0});return this.cntrl=null,this.cp=Ye(e,r),this.segmentLength=je.getDistance(this.pp,this.cp),this.stack.push({type:"V",p0:this.pp,p1:this.cp,length:this.segmentLength,pointAt:function(t){return je.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Ue(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},h:function(t,e){var r=Ge(t,this.pp,{x:0,y:this.pp.y});return this.cp=Ye(e,r),this.cntrl=null,this.segmentLength=je.getDistance(this.pp,this.cp),this.stack.push({type:t?"H":"h",p0:this.pp,p1:this.cp,length:this.segmentLength,relative:{p1:e},pointAt:function(t){return je.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Ue(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},l:function(t,e){var r=Ge(t,this.pp,{x:0,y:0});return this.cntrl=null,this.cp=Ye(e,r),this.segmentLength=je.getDistance(this.pp,this.cp),this.stack.push({type:t?"L":"l",p0:this.pp,p1:this.cp,relative:{p1:e},length:this.segmentLength,pointAt:function(t){return je.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Ue(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},q:function(t,e,r){var i=Ge(t,this.pp,{x:0,y:0}),n=Ye(e,i),o=Ye(r,i);return this.cp=o,this.segmentLength=je.bezierLength(this.pp,n,this.cp),this.cp=o,this.stack.push({type:t?"Q":"q",p0:this.pp,cntrl1:n,cntrl2:n,p1:this.cp,relative:{cntrl1:e,p1:r},length:this.segmentLength,pointAt:function(t){return je.bezierTransition(this.p0,this.cntrl1,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this.cntrl=n,Ue(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},s:function(t,e,r){var i=Ge(t,this.pp,{x:0,y:0}),n=Ye(e,i),o=this.cntrl?Ye(this.pp,Xe(this.pp,this.cntrl?this.cntrl:this.pp)):n,s=Ye(r,i);this.cp=s;var a=je.cubicBezierCoefficients({p0:this.pp,cntrl1:o,cntrl2:n,p1:s});return this.segmentLength=je.cubicBezierLength(this.pp,a),this.stack.push({type:t?"S":"s",p0:this.pp,cntrl1:o,cntrl2:n,p1:this.cp,co:a,length:this.segmentLength,relative:{cntrl2:e,p1:r},pointAt:function(t){return je.cubicBezierTransition(this.p0,this.co,t)}}),Ue(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this.length+=this.segmentLength,this.pp=this.cp,this.cntrl=n,this},c:function(t,e,r,i){var n=this,o=Ge(t,this.pp,{x:0,y:0}),s=Ye(e,o),a=Ye(r,o),h=Ye(i,o),c=je.cubicBezierCoefficients({p0:this.pp,cntrl1:s,cntrl2:a,p1:h});return this.cntrl=a,this.cp=h,this.segmentLength=je.cubicBezierLength(this.pp,c),this.stack.push({type:t?"C":"c",p0:this.pp,cntrl1:s,cntrl2:a,p1:this.cp,length:this.segmentLength,co:c,relative:{cntrl1:e,cntrl2:r,p1:i},pointAt:function(t){return je.cubicBezierTransition(this.p0,this.co,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Ue(n.stack[n.stack.length-1],n.stack[n.stack.length-2],n.minMax,n.BBox),this},a:function(t,e,r,i,n,o,s){var a=Ge(t,this.pp,{x:0,y:0}),h=this,c=Ye(s,a);this.cp=c;var u=je.arcToBezier({px:this.pp.x,py:this.pp.y,cx:c.x,cy:c.y,rx:e,ry:r,xAxisRotation:i,largeArcFlag:n,sweepFlag:o});return u.forEach((function(t,e){var r=0===e?h.pp:{x:u[0].x,y:u[0].y},i={x:t.x1,y:t.y1},n={x:t.x2,y:t.y2},o={x:t.x,y:t.y},s=je.cubicBezierLength(r,je.cubicBezierCoefficients({p0:r,cntrl1:i,cntrl2:n,p1:o}));h.stack.push({type:"C",p0:r,cntrl1:i,cntrl2:n,p1:o,length:s,pointAt:function(t){return je.bezierTransition(this.p0,this.cntrl1,this.cntrl2,this.p1,t)}}),h.length+=s,Ue(h.stack[h.stack.length-1],h.stack[h.stack.length-2],h.minMax,h.BBox)})),this.pp=this.cp,this.cntrl=null,this},fetchXY:function(){return{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:parseFloat(this.pathArr[this.currPathArr+=1])}}},He.prototype.points=function(t){if(void 0===this.f&&(this.f=.3),void 0===this.t&&(this.t=.6),0!==t.length){this.m(!0,{x:t[0].x,y:t[0].y});for(var e=0,r=0,i=0,n=0,o=0,s=t[0],a=1;a<t.length;a++){var h=t[a],c=t[a+1];n=0,o=0,c&&(e=(c.y-s.y)/(c.x-s.x),o=(n=(c.x-h.x)*-this.f)*e*this.t),this.c(!0,{x:s.x-r,y:s.y-i},{x:h.x+n,y:h.y+o},{x:h.x,y:h.y}),r=n,i=o,s=h}}},He.prototype.curveFfactor=function(t){this.f=t},He.prototype.curveTfactor=function(t){this.t=t},He.prototype.parse=function(t){for(this.path=t,this.currPathArr=-1,this.stack=[],this.length=0,this.pathArr=function(t){var e=t.replace(/e-/g,"$");e=(e=(e=e.replace(/ /g,",")).replace(/-/g,",-")).split(/([a-zA-Z,])/g).filter((function(t){return""!==t&&","!==t})).map((function(t){return t.replace(/\$/g,"e-")}));for(var r=0;r<e.length;r+=1)if(e[r].split(".").length>2){for(var i=e[r].split("."),n=[i[0]+"."+i[1]],o=2;o<i.length;o+=1)n.push("."+i[o]);e.splice(r,1,n[0],n[1])}return e}(this.path),this.stackGroup=[];this.currPathArr<this.pathArr.length-1;)this.case(this.pathArr[this.currPathArr+=1]);return this.stack},He.prototype.fetchPathString=function(){for(var t,e="",r=0;r<this.stack.length;r++)"M"===(t=this.stack[r]).type||"m"===t.type?e+=t.type+" "+t.p0.x+","+t.p0.y+" ":"Z"===t.type||"z"===t.type?e+="z":"C"===t.type?e+=t.type+" "+t.cntrl1.x+","+t.cntrl1.y+" "+t.cntrl2.x+","+t.cntrl2.y+" "+t.p1.x+","+t.p1.y+" ":"c"===t.type?e+=t.type+" "+t.relative.cntrl1.x+","+t.relative.cntrl1.y+" "+t.relative.cntrl2.x+","+t.relative.cntrl2.y+" "+t.relative.p1.x+","+t.relative.p1.y+" ":"Q"===t.type?e+=t.type+" "+t.cntrl1.x+","+t.cntrl1.y+" "+t.p1.x+","+t.p1.y+" ":"q"===t.type?e+=t.type+" "+t.relative.cntrl1.x+","+t.relative.cntrl1.y+" "+t.relative.p1.x+","+t.relative.p1.y+" ":"S"===t.type?e+=t.type+" "+t.cntrl2.x+","+t.cntrl2.y+" "+t.p1.x+","+t.p1.y+" ":"s"===t.type?e+=t.type+" "+t.relative.cntrl2.x+","+t.relative.cntrl2.y+" "+t.relative.p1.x+","+t.relative.p1.y+" ":"V"===t.type?e+=t.type+" "+t.p1.y+" ":"v"===t.type?e+=t.type+" "+t.relative.p1.y+" ":"H"===t.type?e+=t.type+" "+t.p1.x+" ":"h"===t.type?e+=t.type+" "+t.relative.p1.x+" ":"L"===t.type?e+=t.type+" "+t.p1.x+","+t.p1.y+" ":"l"===t.type&&(e+=t.type+" "+t.relative.p1.x+","+t.relative.p1.y+" ");return e},He.prototype.getTotalLength=function(){return this.length},He.prototype.getAngleAtLength=function(t,e){if(t>this.length)return null;var r=this.getPointAtLength(t),i=this.getPointAtLength(t+("src"===e?-1*t*.01:.01*t));return Math.atan2(i.y-r.y,i.x-r.x)},He.prototype.getPointAtLength=function(t){var e={x:0,y:0},r=t;return this.stack.every((function(t,i){return r-=t.length,Math.floor(r)>=0||(e=t.pointAt((t.length+r)/(0===t.length?1:t.length)),!1)})),e},He.prototype.execute=function(t,e){var r;e||t.beginPath();for(var i=0;i<this.stack.length;i++)switch((r=this.stack[i]).type){case"M":case"m":t.moveTo(r.p0.x,r.p0.y);break;case"Z":case"z":case"L":case"l":case"V":case"v":case"H":case"h":t.lineTo(r.p1.x,r.p1.y);break;case"C":case"c":case"S":case"s":t.bezierCurveTo(r.cntrl1.x,r.cntrl1.y,r.cntrl2.x,r.cntrl2.y,r.p1.x,r.p1.y);break;case"Q":case"q":t.quadraticCurveTo(r.cntrl1.x,r.cntrl1.y,r.p1.x,r.p1.y)}e||t.closePath()},He.prototype.getPoints=function(t){for(var e,r=[],i=0;i<this.stack.length;i++){var n=0;switch((e=this.stack[i]).type){case"M":case"m":r[r.length]=e.p0.x,r[r.length]=e.p0.y;break;case"Z":case"z":case"L":case"l":case"V":case"v":case"H":case"h":r[r.length]=e.p1.x,r[r.length]=e.p1.y;break;case"C":case"c":case"S":case"s":case"Q":case"q":for(;n<=1;){var o=e.pointAt(n);r[r.length]=o.x,r[r.length]=o.y,n+=.05}}}return r},He.prototype.case=function(t){var e,r,i,n,o,s=t;switch(-1!==["m","M","v","V","l","L","h","H","q","Q","c","C","s","S","a","A","z","Z"].indexOf(s)?this.PC=s:(s=this.PC,this.currPathArr=this.currPathArr-1),s){case"m":this.m(!1,this.fetchXY());break;case"M":this.m(!0,this.fetchXY());break;case"v":this.v(!1,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"V":this.v(!0,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"l":this.l(!1,this.fetchXY());break;case"L":this.l(!0,this.fetchXY());break;case"h":this.h(!1,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"H":this.h(!0,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"q":this.q(!1,this.fetchXY(),this.fetchXY());break;case"Q":this.q(!0,this.fetchXY(),this.fetchXY());break;case"c":this.c(!1,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"C":this.c(!0,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"s":this.s(!1,this.fetchXY(),this.fetchXY());break;case"S":this.s(!0,this.fetchXY(),this.fetchXY());break;case"a":e=parseFloat(this.pathArr[this.currPathArr+=1]),r=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),this.a(!1,e,r,i,n,o,this.fetchXY());break;case"A":e=parseFloat(this.pathArr[this.currPathArr+=1]),r=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),this.a(!0,e,r,i,n,o,this.fetchXY());break;case"z":case"Z":this.z()}};var Ve=function(t,e,r,i,n,o){this.type=t,this.p0=e,this.c1_src=r,this.c2_src=i,this.co=n,this.length_src=o};Ve.prototype.execute=function(t){var e=this.co,r=this.p0,i=this.c1_src,n=this.c2_src,o={x:r.x+(i.x-r.x)*t,y:r.y+(i.y-r.y)*t},s=i.x+(n.x-i.x)*t,a=i.y+(n.y-i.y)*t;return this.cntrl1=o,this.cntrl2={x:o.x+(s-o.x)*t,y:o.y+(a-o.y)*t},this.p1={x:e.ax*je.pow(t,3)+e.bx*je.pow(t,2)+e.cx*t+r.x,y:e.ay*je.pow(t,3)+e.by*je.pow(t,2)+e.cy*t+r.y},this.length=this.length_src*t,this.relative={cntrl1:qe(this.type)?this.cntrl1:Xe(this.cntrl1,this.p0),cntrl2:qe(this.type)?this.cntrl2:Xe(this.cntrl2,this.p0),p1:qe(this.type)?this.p1:Xe(this.p1,this.p0)},this},Ve.prototype.pointAt=function(t){return je.cubicBezierTransition(this.p0,this.co,t)};var We=function(t,e,r,i,n,o){this.type=t,this.p0=e,this.p1_src=r,this.p2_src=i,this.length_src=n,this.length=0};We.prototype.execute=function(t){var e=this.p0,r=this.p1_src,i=this.p2_src;return this.length=this.length_src*t,this.cntrl1={x:e.x+(r.x-e.x)*t,y:e.y+(r.y-e.y)*t},this.cntrl2=this.cntrl1,this.p1={x:(e.x-2*r.x+i.x)*t*t+(2*r.x-2*e.x)*t+e.x,y:(e.y-2*r.y+i.y)*t*t+(2*r.y-2*e.y)*t+e.y},this.relative={cntrl1:qe(this.type)?this.cntrl1:Xe(this.cntrl1,this.p0),p1:qe(this.type)?this.p1:Xe(this.p1,this.p0)},this},We.prototype.pointAt=function(t){return je.bezierTransition(this.p0,this.cntrl1,this.p1,t)};var Ze=function(t,e,r,i,n){this.type=t,this.p0=e,this.p1=e,this.p2_src=r,this.length_src=i,this.length=0};function Qe(t){return t instanceof He}Ze.prototype.execute=function(t){var e=this.p0,r=this.p2_src;return this.p1={x:e.x+(r.x-e.x)*t,y:e.y+(r.y-e.y)*t},this.length=this.length_src*t,this.relative={p1:qe(this.type)?this.p1:Xe(this.p1,this.p0)},this},Ze.prototype.pointAt=function(t){return je.linearTransitionBetweenPoints(this.p0,this.p1,t)};var Je={instance:function(t){return new He(t)},isTypePath:Qe,animatePathTo:function(t){var e=this,r=t.duration,i=t.ease,n=t.end,o=t.loop,s=t.direction,a=t.d||e.attr.d,h=0;if(e.arrayStack=[],!a)throw Error("Path Not defined");for(var c=xt.sequenceChain(),u=Qe(a)?a:new He(a),l=u.stackGroup.reduce((function(t,e){return t=t.concat(e)}),[]),f=[],d=function(t){if("Z"===l[t].type||"z"===l[t].type)f.push({run:function(t){u.stack.length=this.id+1,u.stack[this.id]=this.render.execute(t),e.setAttr("d",u)},target:e,id:t,render:new Ze(l[t].type,l[t].p0,l[0].p0,l[t].segmentLength),length:l[t].length}),h+=0;else if(-1!==["V","v","H","h","L","l"].indexOf(l[t].type))f.push({run:function(t){u.stack.length=this.id+1,u.stack[this.id]=this.render.execute(t),e.setAttr("d",u)},target:e,id:t,render:new Ze(l[t].type,l[t].p0,l[t].p1,l[t].length),length:l[t].length}),h+=l[t].length;else if("Q"===l[t].type||"q"===l[t].type)f.push({run:function(t){u.stack.length=this.id+1,u.stack[this.id]=this.render.execute(t),e.setAttr("d",u)},target:e,id:t,render:new We(l[t].type,l[t].p0,l[t].cntrl1,l[t].p1,l[t].length),length:l[t].length}),h+=l[t].length;else if("C"===l[t].type||"S"===l[t].type||"c"===l[t].type||"s"===l[t].type){var r=je.cubicBezierCoefficients(l[t]);f.push({run:function(t){u.stack.length=this.id+1,u.stack[this.id]=this.render.execute(t),e.setAttr("d",u)},target:e,id:t,co:r,render:new Ve(l[t].type,l[t].p0,l[t].cntrl1,l[t].cntrl2,r,l[t].length),length:l[t].length}),h+=l[t].length}else"M"!==l[t].type&&"m"!==l[t].type||(f.push({run:function(){u.stack.length=this.id+1,u.stack[this.id]={type:"M",p0:l[t].p0,length:0,pointAt:function(t){return this.p0}}},target:e,id:t,length:0}),h+=0)},p=0;p<l.length;p+=1)d(p);return f.forEach((function(t){t.duration=t.length/h*r})),c.add(f).ease(i).loop(o||0).direction(s||"default"),"function"==typeof n&&c.end(n.bind(e)),c.commit(),this},morphTo:function(t){var e=this,r=t.duration,i=t.ease,n=t.loop?t.loop:0,o=t.direction?t.direction:"default",s=t.attr.d?t.attr.d:e.attr.d,a=se(Qe(e.attr.d)?e.attr.d.fetchPathString():e.attr.d,Qe(s)?s.fetchPathString():s,{maxSegmentLength:25});Ne.add("morph_"+(Oe+=1),{run:function(t){e.setAttr("d",a(t))},target:e,duration:r,loop:n,direction:o},Fe(i))}},$e={AliceBlue:"f0f8ff",AntiqueWhite:"faebd7",Aqua:"00ffff",Aquamarine:"7fffd4",Azure:"f0ffff",Beige:"f5f5dc",Bisque:"ffe4c4",Black:"000000",BlanchedAlmond:"ffebcd",Blue:"0000ff",BlueViolet:"8a2be2",Brown:"a52a2a",BurlyWood:"deb887",CadetBlue:"5f9ea0",Chartreuse:"7fff00",Chocolate:"d2691e",Coral:"ff7f50",CornflowerBlue:"6495ed",Cornsilk:"fff8dc",Crimson:"dc143c",Cyan:"00ffff",DarkBlue:"00008b",DarkCyan:"008b8b",DarkGoldenRod:"b8860b",DarkGray:"a9a9a9",DarkGrey:"a9a9a9",DarkGreen:"006400",DarkKhaki:"bdb76b",DarkMagenta:"8b008b",DarkOliveGreen:"556b2f",DarkOrange:"ff8c00",DarkOrchid:"9932cc",DarkRed:"8b0000",DarkSalmon:"e9967a",DarkSeaGreen:"8fbc8f",DarkSlateBlue:"483d8b",DarkSlateGray:"2f4f4f",DarkSlateGrey:"2f4f4f",DarkTurquoise:"00ced1",DarkViolet:"9400d3",DeepPink:"ff1493",DeepSkyBlue:"00bfff",DimGray:"696969",DimGrey:"696969",DodgerBlue:"1e90ff",FireBrick:"b22222",FloralWhite:"fffaf0",ForestGreen:"228b22",Fuchsia:"ff00ff",Gainsboro:"dcdcdc",GhostWhite:"f8f8ff",Gold:"ffd700",GoldenRod:"daa520",Gray:"808080",Grey:"808080",Green:"008000",GreenYellow:"adff2f",HoneyDew:"f0fff0",HotPink:"ff69b4",IndianRed:"cd5c5c",Indigo:"4b0082",Ivory:"fffff0",Khaki:"f0e68c",Lavender:"e6e6fa",LavenderBlush:"fff0f5",LawnGreen:"7cfc00",LemonChiffon:"fffacd",LightBlue:"add8e6",LightCoral:"f08080",LightCyan:"e0ffff",LightGoldenRodYellow:"fafad2",LightGray:"d3d3d3",LightGrey:"d3d3d3",LightGreen:"90ee90",LightPink:"ffb6c1",LightSalmon:"ffa07a",LightSeaGreen:"20b2aa",LightSkyBlue:"87cefa",LightSlateGray:"778899",LightSlateGrey:"778899",LightSteelBlue:"b0c4de",LightYellow:"ffffe0",Lime:"00ff00",LimeGreen:"32cd32",Linen:"faf0e6",Magenta:"ff00ff",Maroon:"800000",MediumAquaMarine:"66cdaa",MediumBlue:"0000cd",MediumOrchid:"ba55d3",MediumPurple:"9370db",MediumSeaGreen:"3cb371",MediumSlateBlue:"7b68ee",MediumSpringGreen:"00fa9a",MediumTurquoise:"48d1cc",MediumVioletRed:"c71585",MidnightBlue:"191970",MintCream:"f5fffa",MistyRose:"ffe4e1",Moccasin:"ffe4b5",NavajoWhite:"ffdead",Navy:"000080",OldLace:"fdf5e6",Olive:"808000",OliveDrab:"6b8e23",Orange:"ffa500",OrangeRed:"ff4500",Orchid:"da70d6",PaleGoldenRod:"eee8aa",PaleGreen:"98fb98",PaleTurquoise:"afeeee",PaleVioletRed:"db7093",PapayaWhip:"ffefd5",PeachPuff:"ffdab9",Peru:"cd853f",Pink:"ffc0cb",Plum:"dda0dd",PowderBlue:"b0e0e6",Purple:"800080",RebeccaPurple:"663399",Red:"ff0000",RosyBrown:"bc8f8f",RoyalBlue:"4169e1",SaddleBrown:"8b4513",Salmon:"fa8072",SandyBrown:"f4a460",SeaGreen:"2e8b57",SeaShell:"fff5ee",Sienna:"a0522d",Silver:"c0c0c0",SkyBlue:"87ceeb",SlateBlue:"6a5acd",SlateGray:"708090",SlateGrey:"708090",Snow:"fffafa",SpringGreen:"00ff7f",SteelBlue:"4682b4",Tan:"d2b48c",Teal:"008080",Thistle:"d8bfd8",Tomato:"ff6347",Turquoise:"40e0d0",Violet:"ee82ee",Wheat:"f5deb3",White:"ffffff",WhiteSmoke:"f5f5f5",Yellow:"ffff00",YellowGreen:"9acd32"},Ke=Math.round,tr="rgba(0,0,0,0)";function er(t,e,r,i){this.r=t,this.g=e,this.b=r,this.a=void 0===i?255:i,this.rgba="rgba("+t+","+e+","+r+","+i+")"}function rr(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,r,i){return e+e+r+r+i+i}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return new er(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255)}function ir(t){var e,r,i,n,o,s,a,h=t.replace(/[^0-9.,]+/g,"").split(",").map((function(t){return parseFloat(t)}));if(o=h[0]/360,s=h[1]/100,a=h[2]/100,n=h[3],0===s)e=r=i=a;else{var c=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},u=a<.5?a*(1+s):a+s-a*s,l=2*a-u;e=255*c(l,u,o+1/3),r=255*c(l,u,o),i=255*c(l,u,o-1/3)}return new er(e,r,i,n)}function nr(t){return t instanceof er?t:t.startsWith("#")?rr(t):t.startsWith("rgb")?function(t){for(var e=t.replace(/[^0-9.,]+/g,"").split(","),r={},i=["r","g","b","a"],n=0;n<e.length;n+=1)r[i[n]]=parseFloat(e[n]);return new er(r.r,r.g,r.b,r.a)}(t):t.startsWith("hsl")?ir(t):{r:0,g:0,b:0,a:255}}er.prototype.normalize=function(){return this.normalFlag||(this.r/=255,this.g/=255,this.b/=255,this.a/=255,this.normalFlag=!0),this};var or,sr={nameToHex:function(t){return $e[t]?"#"+$e[t]:"#000"},hexToRgb:rr,rgbToHex:function(t){var e=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")).split(",");return"#"+((1<<24)+(parseInt(e[0],10)<<16)+(parseInt(e[1],10)<<8)+parseInt(e[2],10)).toString(16).slice(1)},hslToRgb:ir,transition:function(t,e){return e=e||tr,t=nr(t=t||tr),e=nr(e),function(r){return new er(Ke(t.r+(e.r-t.r)*r),Ke(t.g+(e.g-t.g)*r),Ke(t.b+(e.b-t.b)*r),Ke(t.a+(e.a-t.a)*r))}},colorToRGB:nr,rgba:function(t,e,r,i){return new er(t,e,r,i)},isTypeColor:function(t){return t instanceof er||t.startsWith("#")||t.startsWith("rgb")||t.startsWith("hsl")},RGBAInstanceCheck:function(t){return t instanceof er}};function ar(t){this.vDom=t,this.disable=!1,this.dragNode=null,this.touchNode=null,this.wheelNode=null,this.pointers=[]}function hr(t,e,r){if(t.dom.parent)return t.dom.parent.events[e]&&t.dom.parent.events[e](t.dom.parent,r),hr(t.dom.parent,e,r)}ar.prototype.getNode=function(t){},ar.prototype.addPointer=function(t){this.pointers.push(t)},ar.prototype.removePointer=function(t){for(var e=this,r=this.pointers,i=-1,n=0;n<r.length;n++)if(t.pointerId===r[n].pointerId){i=n;break}-1!==i&&(e.pointers=[],e.distance=0,this.pointerNode&&this.pointerNode.node.events.zoom&&this.pointerNode.node.events.zoom.onZoomEnd(this.pointerNode.node,t,e))},ar.prototype.clickCheck=function(t){lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"click")},ar.prototype.dblclickCheck=function(t){lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"dblclick")},ar.prototype.pointerdownCheck=function(t){var e=lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"pointerdown");!e||this.pointerNode&&this.pointerNode.node===e?this.pointerNode&&(this.pointerNode.clickCounter+=1):this.pointerNode={node:e,clickCounter:1,dragCounter:0},e&&(e.events.zoom||e.events.drag)?(e.events.zoom&&e.events.zoom.panFlag&&e.events.zoom.panExecute(e,t,"pointerdown",this),e.events.drag&&e.events.drag.execute(e,t,"pointerdown",this)):e&&"touch"===t.pointerType&&e.events.mouseover.call(e,t)},ar.prototype.pointermoveCheck=function(t){var e=this,r=this.pointerNode?this.pointerNode.node:null;r?(this.pointerNode.dragCounter+=1,r.events.zoom&&(r.events.zoom.panFlag&&r.events.zoom.panExecute(r,t,"pointermove",e),r.events.zoom.zoomPinch(r,t,e)),r.events.drag&&r.events.drag.execute(r,t,"pointermove",e),r.events.mousemove&&r.events.mousemove.call(r,t)):r&&"touch"===t.pointerType&&r.events.mousemove.call(r,t),t.preventDefault()},ar.prototype.pointerupCheck=function(t){var e=this,r=this.pointerNode?this.pointerNode.node:null;r&&(r.events.drag&&r.events.drag.execute(r,t,"pointerup",e),r.events.zoom&&r.events.zoom.panFlag&&r.events.zoom.panExecute(r,t,"pointerup",e),this.pointerNode.dragCounter<=2||"touch"===t.pointerType&&this.pointerNode.dragCounter<=5?(r.events.click&&r.events.click.call(r,t),hr(r,"click",t),2===this.pointerNode.clickCounter&&(r.events.dblclick&&r.events.dblclick.call(r,t),hr(r,"dblclick",t)),or&&clearTimeout(or),or=setTimeout((function(){e.pointerNode=null,or=null}),200)):this.pointerNode=null,"touch"===t.pointerType&&r.events.mouseup.call(r,t))},ar.prototype.mousedownCheck=function(t){lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mousedown")},ar.prototype.mousemoveCheck=function(t){var e=lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mousemove");this.selectedNode&&this.selectedNode!==e&&(this.selectedNode.events.mouseout&&this.selectedNode.events.mouseout.call(this.selectedNode,t),this.selectedNode.events.mouseleave&&this.selectedNode.events.mouseleave.call(this.selectedNode,t)),e&&(e.events.mouseover||e.events.mousein)&&this.selectedNode!==e&&(e.events.mouseover&&e.events.mouseover.call(e,t),e.events.mousein&&e.events.mousein.call(e,t)),this.selectedNode=e,t.preventDefault()},ar.prototype.mouseupCheck=function(t){lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mouseup")},ar.prototype.mouseleaveCheck=function(t){lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mouseleave")},ar.prototype.contextmenuCheck=function(t){lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"contextmenu")},ar.prototype.touchstartCheck=function(t){lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"touchstart")},ar.prototype.touchendCheck=function(t){lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"touchend")},ar.prototype.touchmoveCheck=function(t){var e=t.touches;0!==e.length&&lr([this.vDom],{x:e[0].clientX,y:e[0].clientY},t,"touchmove")},ar.prototype.touchcancelCheck=function(t){lr([this.vDom],{x:t.x,y:t.y},t,"touchcacel")};var cr=0,ur=0;function lr(t,e,r,i){for(var n,o,s=t.length-1;s>=0;s-=1){var a=t[s],h={x:e.x,y:e.y};if(a.bbox&&(fr(a,h),a.in({x:h.x,y:h.y})&&(a.children&&a.children.length>0?(o=lr(a.children,{x:h.x,y:h.y},r,i))&&(n=o):n=a,a.events[i]&&"function"==typeof a.events[i]&&a.events[i](r),n)))break}return n||"rootNode"!==a.attr.id||(n=a,a.events[i]&&"function"==typeof a.events[i]&&a.events[i](r)),n}function fr(t,e){var r,i=0,n=0,o=1,s=1,a=e;if(t.attr.transform&&t.attr.transform.translate&&(i=(r=t.attr.transform.translate)[0],n=r[1],a.x-=i,a.y-=n),t.attr.transform&&t.attr.transform.scale&&(o=void 0!==t.attr.transform.scale[0]?t.attr.transform.scale[0]:1,s=void 0!==t.attr.transform.scale[1]?t.attr.transform.scale[1]:o,a.x/=o,a.y/=s),t.attr.transform&&t.attr.transform.rotate){var h=t.attr.transform.rotate[0],c={x:t.attr.transform.rotate[1],y:t.attr.transform.rotate[2]},u=a.x,l=a.y,f=c.x,d=c.y,p=Math.PI/180*h,y=Math.cos(p),v=Math.sin(p);a.x=y*(u-f)+v*(l-d)+f,a.y=y*(l-d)-v*(u-f)+d}}ar.prototype.wheelEventCheck=function(t){var e=this;if(this.wheelNode)this.wheelNode.events.zoom.zoomExecute(this.wheelNode,t,e),cr+=1,this.wheelHndl&&(clearTimeout(this.wheelHndl),this.wheelHndl=null,ur=cr),this.wheelHndl=setTimeout((function(){ur!==cr?ur=cr:(e.wheelHndl=null,e.wheelNode.events.zoom.onZoomEnd(e.wheelNode,t,e),e.wheelNode=null,cr=0)}),100);else{var r=lr([this.vDom],{x:t.offsetX,y:t.offsetY},t,"wheel");(r=r||this.vDom)&&r.events.zoom&&(r.events.zoom.disableWheel||(r.events.zoom.zoomExecute(r,t,e),this.wheelNode=r))}};var dr,pr=[],yr="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(dr||(dr={}));var vr,gr=function(t){return Object.freeze(t)},xr=function(t,e){this.inlineSize=t,this.blockSize=e,gr(this)},mr=function(){function t(t,e,r,i){return this.x=t,this.y=e,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,gr(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),wr=function(t){return t instanceof SVGElement&&"getBBox"in t},br=function(t){if(wr(t)){var e=t.getBBox(),r=e.width,i=e.height;return!r&&!i}var n=t,o=n.offsetWidth,s=n.offsetHeight;return!(o||s||t.getClientRects().length)},Ar=function(t){var e;if(t instanceof Element)return!0;var r=null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},Br="undefined"!=typeof window?window:{},Er=new WeakMap,Tr=/auto|scroll/,Sr=/^tb|vertical/,_r=/msie|trident/i.test(Br.navigator&&Br.navigator.userAgent),kr=function(t){return parseFloat(t||"0")},Mr=function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=!1),new xr((r?e:t)||0,(r?t:e)||0)},Cr=gr({devicePixelContentBoxSize:Mr(),borderBoxSize:Mr(),contentBoxSize:Mr(),contentRect:new mr(0,0,0,0)}),Lr=function(t,e){if(void 0===e&&(e=!1),Er.has(t)&&!e)return Er.get(t);if(br(t))return Er.set(t,Cr),Cr;var r=getComputedStyle(t),i=wr(t)&&t.ownerSVGElement&&t.getBBox(),n=!_r&&"border-box"===r.boxSizing,o=Sr.test(r.writingMode||""),s=!i&&Tr.test(r.overflowY||""),a=!i&&Tr.test(r.overflowX||""),h=i?0:kr(r.paddingTop),c=i?0:kr(r.paddingRight),u=i?0:kr(r.paddingBottom),l=i?0:kr(r.paddingLeft),f=i?0:kr(r.borderTopWidth),d=i?0:kr(r.borderRightWidth),p=i?0:kr(r.borderBottomWidth),y=l+c,v=h+u,g=(i?0:kr(r.borderLeftWidth))+d,x=f+p,m=a?t.offsetHeight-x-t.clientHeight:0,w=s?t.offsetWidth-g-t.clientWidth:0,b=n?y+g:0,A=n?v+x:0,B=i?i.width:kr(r.width)-b-w,E=i?i.height:kr(r.height)-A-m,T=B+y+w+g,S=E+v+m+x,_=gr({devicePixelContentBoxSize:Mr(Math.round(B*devicePixelRatio),Math.round(E*devicePixelRatio),o),borderBoxSize:Mr(T,S,o),contentBoxSize:Mr(B,E,o),contentRect:new mr(l,h,B,E)});return Er.set(t,_),_},Dr=function(t,e,r){var i=Lr(t,r),n=i.borderBoxSize,o=i.contentBoxSize,s=i.devicePixelContentBoxSize;switch(e){case dr.DEVICE_PIXEL_CONTENT_BOX:return s;case dr.BORDER_BOX:return n;default:return o}},Pr=function(t){var e=Lr(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=gr([e.borderBoxSize]),this.contentBoxSize=gr([e.contentBoxSize]),this.devicePixelContentBoxSize=gr([e.devicePixelContentBoxSize])},Ir=function(t){if(br(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e},zr=function(){var t=1/0,e=[];pr.forEach((function(r){if(0!==r.activeTargets.length){var i=[];r.activeTargets.forEach((function(e){var r=new Pr(e.target),n=Ir(e.target);i.push(r),e.lastReportedSize=Dr(e.target,e.observedBox),n<t&&(t=n)})),e.push((function(){r.callback.call(r.observer,i,r.observer)})),r.activeTargets.splice(0,r.activeTargets.length)}}));for(var r=0,i=e;r<i.length;r++){(0,i[r])()}return t},Rr=function(t){pr.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(r){r.isActive()&&(Ir(r.target)>t?e.activeTargets.push(r):e.skippedTargets.push(r))}))}))},Or=function(){var t=0;for(Rr(t);pr.some((function(t){return t.activeTargets.length>0}));)t=zr(),Rr(t);return pr.some((function(t){return t.skippedTargets.length>0}))&&function(){var t;"function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:yr}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=yr),window.dispatchEvent(t)}(),t>0},jr=[],Nr=function(t){if(!vr){var e=0,r=document.createTextNode("");new MutationObserver((function(){return jr.splice(0).forEach((function(t){return t()}))})).observe(r,{characterData:!0}),vr=function(){r.textContent="".concat(e?e--:e++)}}jr.push(t),vr()},Fr=0,Ur={attributes:!0,characterData:!0,childList:!0,subtree:!0},Yr=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Xr=function(t){return void 0===t&&(t=0),Date.now()+t},Gr=!1,Hr=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!Gr){Gr=!0;var r,i=Xr(t);r=function(){var r=!1;try{r=Or()}finally{if(Gr=!1,t=i-Xr(),!Fr)return;r?e.run(1e3):t>0?e.run(t):e.start()}},Nr((function(){requestAnimationFrame(r)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,Ur)};document.body?e():Br.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Yr.forEach((function(e){return Br.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Yr.forEach((function(e){return Br.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),qr=function(t){!Fr&&t>0&&Hr.start(),!(Fr+=t)&&Hr.stop()},Vr=function(){function t(t,e){this.target=t,this.observedBox=e||dr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=Dr(this.target,this.observedBox,!0);return t=this.target,wr(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),Wr=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},Zr=new WeakMap,Qr=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},Jr=function(){function t(){}return t.connect=function(t,e){var r=new Wr(t,e);Zr.set(t,r)},t.observe=function(t,e,r){var i=Zr.get(t),n=0===i.observationTargets.length;Qr(i.observationTargets,e)<0&&(n&&pr.push(i),i.observationTargets.push(new Vr(e,r&&r.box)),qr(1),Hr.schedule())},t.unobserve=function(t,e){var r=Zr.get(t),i=Qr(r.observationTargets,e),n=1===r.observationTargets.length;i>=0&&(n&&pr.splice(pr.indexOf(r),1),r.observationTargets.splice(i,1),qr(-1))},t.disconnect=function(t){var e=this,r=Zr.get(t);r.observationTargets.slice().forEach((function(r){return e.unobserve(t,r.target)})),r.activeTargets.splice(0,r.activeTargets.length)},t}(),$r=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Jr.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ar(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Jr.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ar(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Jr.unobserve(this,t)},t.prototype.disconnect=function(){Jr.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),Kr=0,ti=U,ei=et,ri=m,ii=window.ResizeObserver||$r;var ni=function(t,e,r){var i=[],n=t.attr.transform;return"function"==typeof r?function(i){t[e](r.call(t,i))}:(r.forEach((function(t,r){var o;o=n[e]&&void 0!==n[e][r]?n[e][r]:"scale"===e?1:0,i.push(ti.intermediateValue.bind(null,o,t))})),function(r){t[e](i.map((function(t){return t(r)})))})},oi=function(t,e,r){var i,n,o;if("function"==typeof r)return function(i){t.setStyle(e,r.call(t,t.dataObj,i))};if(i=t.style[e],isNaN(r)){if(sr.isTypeColor(r)){var s=sr.transition(i,r);return function(r){t.setStyle(e,s(r))}}i=i.match(/(\d+)/g),o=r.match(/(\d+)/g),n=r.match(/\D+$/),i=parseInt(i.length>0?i[0]:0,10),o=parseInt(o.length>0?o[0]:0,10),n=n.length>0?n[0]:"px"}else i=void 0!==t.style[e]?t.style[e]:1,o=r,n=0;return function(r){t.setStyle(e,ti.intermediateValue(i,o,r)+n)}},si=function(t,e){var r,i=e.attr?e.attr:{},n=e.style?e.style:{},o=[];if("function"!=typeof i){var s=function(n){if("transform"!==n){var s=i[n];"function"==typeof s?o[o.length]=function(e){t.setAttr(n,s.call(t,e))}:"d"===n?t.morphTo(e):o[o.length]=function(t,e,r){var i=t.attr[e];return function(n){t.setAttr(e,ti.intermediateValue(i,r,n))}}(t,n,i[n])}else if("function"==typeof(r=i[n]))o[o.length]=function(t,e,r){return function(i){t.setAttr(e,r.call(t,i))}}(t,n,r);else{t.attr.transform||(t.attr.transform={});for(var a=Object.keys(i.transform),h=0,c=a.length;h<c;h+=1)o[o.length]=ni(t,a[h],i.transform[a[h]])}};for(var a in i)s(a)}else o[o.length]=i.bind(t);if("function"!=typeof n)for(var h in n)o[o.length]=oi(t,h,n[h]);else o[o.length]=n.bind(t);return{run:function(t){for(var e=0,r=o.length;e<r;e+=1)o[e](t)},target:t,duration:e.duration,delay:e.delay?e.delay:0,end:e.end?e.end.bind(t,t.dataObj):null,loop:e.loop?e.loop:0,direction:e.direction?e.direction:"default",ease:e.ease?e.ease:"default"}};function ai(t,e,r){for(var i=t.map(r),n={new:[],update:[],old:[]},o=0;o<e.length;o+=1){var s=i.indexOf(r(e[o].dataObj,o));-1!==s?(e[o].dataObj=t[s],n.update.push(e[o]),i[s]=null):n.old.push(e[o])}return n.new=t.filter((function(t,e){var n=i.indexOf(r(t,e));return-1!==n&&(i[n]=null,!0)})),n}var hi={};hi.push={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var e=0,r=t.length;e<r;e++)this.data.push(t[e]);if(this.config.action.enter){var i={};this.selector.split(",").forEach((function(e){i[e]=t})),this.config.action.enter.call(this,i)}},enumerable:!1,configurable:!1,writable:!1},hi.pop={value:function(){var t=this,e=this.data.pop();if(this.config.action.exit){var r={};this.selector.split(",").forEach((function(i){r[i]=t.fetchEls(i,[e])})),this.config.action.exit.call(this,r)}},enumerable:!1,configurable:!1,writable:!1},hi.remove={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var e=this,r=0,i=t.length;r<i;r++)-1!==this.data.indexOf(t[r])&&this.data.splice(this.data.indexOf(t[r]),1);if(this.config.action.exit){var n={};this.selector.split(",").forEach((function(r){n[r]=e.fetchEls(r,t)})),this.config.action.exit.call(this,n)}},enumerable:!1,configurable:!0,writable:!1},hi.update={value:function(){var t=this;if(this.config.action.update){var e={};this.selector.split(",").forEach((function(r){e[r]=t.fetchEls(r,t.data)})),this.config.action.update.call(this,e)}},enumerable:!1,configurable:!0,writable:!1},hi.join={value:function(t){this.data=t,ui.call(this,t,this.selector,this.config)},enumerable:!1,configurable:!0,writable:!1};var ci=function(){};function ui(t,e,r){var i=this,n=e.split(","),o=r.joinOn,s={new:{},update:{},old:{}};o||(o=function(t,e){return e});for(var a=0,h=n.length;a<h;a++){var c=n[a],u=ai(t,i.fetchEls(c).stack,o);s.new[c]=u.new,s.update[c]=(new fi).wrapper(u.update),s.old[c]=(new fi).wrapper(u.old)}return r.action&&(r.action.enter&&r.action.enter.call(i,s.new),r.action.exit&&r.action.exit.call(i,s.old),r.action.update&&r.action.update.call(i,s.update)),hi.config={value:r,enumerable:!1,configurable:!0,writable:!0},hi.selector={value:e,enumerable:!1,configurable:!0,writable:!1},hi.data={value:t,enumerable:!1,configurable:!0,writable:!0},Object.create(i,hi)}function li(t,e,r){var i,n={};for(i in t)"end"!==i&&("function"==typeof t[i]?n[i]=t[i].call(e,e.dataObj,r):n[i]=t[i]);return n}ci.prototype.getAttr=function(t){return this.attr[t]},ci.prototype.getStyle=function(t){return this.style[t]},ci.prototype.exec=function(t){return"function"!=typeof t&&console.error("Wrong Exe type"),t.call(this,this.dataObj),this},ci.prototype.fetchEls=function(t,e){var r=[],i=new fi;if(this.children.length>0)if("."===t.charAt(0)){var n=t.substring(1,t.length);this.children.forEach((function(t){if(t){var i=e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.class===n,o=!e&&t.attr.class===n;(i||o)&&r.push(t)}}))}else if("#"===t.charAt(0)){var o=t.substring(1,t.length);this.children.every((function(t){if(t){var i=e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.id===o,n=!e&&t.attr.id===o;return!i&&!n||(r.push(t),!1)}}))}else t="group"===t?"g":t,this.children.forEach((function(i){if(i){var n=e&&i.dataObj&&-1!==e.indexOf(i.dataObj)&&i.nodeName===t,o=!e&&i.nodeName===t;(n||o)&&r.push(i)}}));return i.wrapper(r)},ci.prototype.fetchEl=function(t,e){var r;if(this.children.length>0)if("."===t.charAt(0)){var i=t.substring(1,t.length);this.children.every((function(t){if(t){var n=e&&t.dataObj&&e===t.dataObj&&t.attr.class===i,o=!e&&t.attr.class===i;return!n&&!o||(r=t,!1)}}))}else if("#"===t.charAt(0)){var n=t.substring(1,t.length);this.children.every((function(t){if(t){var i=e&&t.dataObj&&e===t.dataObj&&t.attr.id===n,o=!e&&t.attr.id===n;return!i&&!o||(r=t,!1)}}))}else t="group"===t?"g":t,this.children.forEach((function(i){if(i){var n=e&&i.dataObj&&e===i.dataObj&&i.nodeName===t,o=!e&&i.nodeName===t;(n||o)&&(r=i)}}));return r},ci.prototype.join=ui,ci.prototype.data=function(t){return t?(this.dataObj=t,this):this.dataObj},ci.prototype.interrupt=function(){if(this.animList&&this.animList.length>0)for(var t=this.animList.length-1;t>=0;t--)ri.remove(this.animList[t]);return this.animList=[],this},ci.prototype.animateTo=function(t){return ri.add(Kr+=1,si(this,t),ei(t.ease)),this},ci.prototype.animateExe=function(t){return si(this,t)};function fi(t,e,r,i){var n,o,s=this;e||(e=[]);var a=r&&r.attr?Object.keys(r.attr):[],h=r&&r.style?Object.keys(r.style):[],c=!r||(void 0===r.bbox||r.bbox);return this.stack=e.map((function(e,u){for(var l,f=s.createNode(t.ctx,{el:r.el,bbox:c},i),d=0,p=h.length;d<p;d+=1)if(o=h[d],"function"==typeof r.style[o]){var y=r.style[o].call(f,e,u);f.setStyle(o,y)}else f.setStyle(o,r.style[o]);for(var v=0,g=a.length;v<g;v+=1)if("transform"!==(o=a[v]))if("function"==typeof r.attr[o]){var x=r.attr[o].call(f,e,u);f.setAttr(o,x)}else f.setAttr(o,r.attr[o]);else for(var m in"function"==typeof r.attr.transform?n=r.attr[o].call(f,e,u):(l=r.attr,n=l.transform),n)f[m](n[m]);return f.dataObj=e,f})),this}fi.prototype={createEls:function(t,e){for(var r,i=[],n=t,o=0,s=this.stack.length;o<s;o+=1){var a={};if(r=this.stack[o],"function"==typeof t&&(n=t.call(r,r.dataObj,o)),"function"==typeof e)a=e.call(r,r.dataObj,o);else for(var h=Object.keys(e),c=0,u=h.length;c<u;c+=1){var l=h[c];a[l]=e[l]}i.push(r.createEls(n,a))}var f=new fi;return f.wrapper(i),f},createEl:function(t){for(var e,r=[],i=0,n=this.stack.length;i<n;i+=1){var o={};if(e=this.stack[i],"function"==typeof t)o=t.call(e,e.dataObj,i);else for(var s=Object.keys(t),a=0,h=s.length;a<h;a+=1){var c=s[a];"object"!=typeof t[c]?o[c]=t[c]:o[c]=JSON.parse(JSON.stringify(t[c]))}r.push(e.createEl(o))}var u=new fi;return u.wrapper(r),u},forEach:function(t){for(var e=0,r=this.stack.length;e<r;e+=1)t.call(this.stack[e],this.stack[e].dataObj,e);return this},setAttr:function(t,e){for(var r,i=arguments,n=0,o=this.stack.length;n<o;n+=1)if(r=this.stack[n],i.length>1)"function"==typeof e?r.setAttr(t,e.call(r,r.dataObj,n)):r.setAttr(t,e);else if("function"==typeof t)r.setAttr(t.call(r,r.dataObj,n));else for(var s=Object.keys(t),a=0,h=s.length;a<h;a+=1){var c=s[a];"function"==typeof t[c]?r.setAttr(c,t[c].call(r,r.dataObj,n)):r.setAttr(c,t[c])}return this},fetchEls:function(t,e){for(var r,i=[],n=0;n<this.stack.length;n+=1)r=this.stack[n],i.push(r.fetchEls(t,e));var o=new fi;return o.wrapper(i),o},setStyle:function(t,e){for(var r,i=arguments,n=0,o=this.stack.length;n<o;n+=1)if(r=this.stack[n],i.length>1)"function"==typeof e?r.setStyle(t,e.call(r,r.dataObj,n)):r.setStyle(t,e);else{if("function"==typeof t)r.setStyle(t.call(r,r.dataObj,n));else for(var s=Object.keys(t),a=0,h=s.length;a<h;a+=1){var c=s[a];"function"==typeof t[c]?r.setStyle(c,t[c].call(r,r.dataObj,n)):r.setStyle(c,t[c])}"function"==typeof t?r.setStyle(t.call(r,r.dataObj,n)):r.setStyle(t)}return this},translate:function(t){for(var e,r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],"function"==typeof t?e.translate(t.call(e,e.dataObj,r)):e.translate(t);return this},rotate:function(t){for(var e,r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],"function"==typeof t?e.rotate(t.call(e,e.dataObj,r)):e.rotate(t);return this},scale:function(t){for(var e,r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],"function"==typeof t?e.scale(t.call(e,e.dataObj,r)):e.scale(t);return this},exec:function(t){var e;if("function"==typeof t){for(var r=0,i=this.stack.length;r<i;r+=1)e=this.stack[r],t.call(e,e.dataObj,r);return this}},animateTo:function(t){for(var e,r,i=0;i<this.stack.length;i+=1)r={},r=li(t,e=this.stack[i],i),t.attr&&"function"!=typeof t.attr&&(r.attr=li(t.attr,e,i)),t.style&&"function"!=typeof t.style&&(r.style=li(t.style,e,i)),t.end&&(r.end=t.end),t.ease&&(r.ease=t.ease),e.animateTo(r);return this},animateExe:function(t){for(var e,r,i=[],n=0;n<this.stack.length;n+=1)r={},r=li(t,e=this.stack[n],n),t.attr&&"function"!=typeof t.attr&&(r.attr=li(t.attr,e,n)),t.style&&"function"!=typeof t.style&&(r.style=li(t.style,e,n)),t.end&&(r.end=t.end),t.ease&&(r.ease=t.ease),i.push(e.animateExe(r));return i},animatePathTo:function(t){for(var e,r=Object.keys(t),i=0,n=this.stack.length;i<n;i+=1){e=this.stack[i];for(var o={},s=0;s<r.length;s++){var a=t[r[s]];"function"==typeof a&&(a=a.call(e,e.dataObj,i)),o[r[s]]=a}e.animatePathTo(o)}return this},remove:function(){for(var t=0,e=this.stack.length;t<e;t+=1)this.stack[t].remove();return this},interrupt:function(){for(var t=0,e=this.stack.length;t<e;t+=1)this.stack[t].interrupt();return this},text:function(t){var e;if("function"!=typeof t)for(var r=0;r<this.stack.length;r+=1)(e=this.stack[r]).text(t);else for(var i=0;i<this.stack.length;i+=1)(e=this.stack[i]).text(t.call(e,e.dataObj,i));return this},join:function(t,e,r){for(var i,n=[],o=0;o<this.stack.length;o+=1)i=this.stack[o],n.push(i.join(t,e,r));var s=new fi;return s.wrapper(n),s},on:function(t,e){for(var r=0,i=this.stack.length;r<i;r+=1)this.stack[r].on(t,e);return this}},fi.prototype.createNode=function(){},fi.prototype.wrapper=function(t){if(t)for(var e=0,r=t.length;e<r;e++){var i=t[e];this.stack.push(i)}return this};var di=function(t){var e=function(e){var r=t[e],i=r.contentRect;r.target.resizeHandler&&r.target.resizeHandler.forEach((function(t){t(i)}))};for(var r in t)e(r)};function pi(t,e){t.ro||(t.ro=new ii(di),t.ro.observe(t.container)),t.container.resizeHandler||(t.container.resizeHandler=[]),t.container.resizeHandler.push(e)}function yi(t,e){if(t.container.resizeHandler){var r=t.container.resizeHandler.indexOf(e);-1!==r&&t.container.resizeHandler.splice(r,1),0===t.container.resizeHandler.length&&t.ro&&t.ro.disconnect()}}var vi=m,gi=0;function xi(){return gi+=1}var mi=function(){fi.apply(this,arguments)};function wi(t,e){void 0===e&&(e={}),this.pDom=t;var r=e.id?e.id:"mask-"+Math.ceil(1e3*Math.random());this.id=e.id||r,e.id=r,this.defs||(this.defs=t.createEl({el:"defs"})),this.mask=this.defs.createEl({el:"mask",attr:e,style:{}})}function bi(t,e){void 0===e&&(e={}),this.pDom=t;var r=e.id?e.id:"clip-"+Math.ceil(1e3*Math.random());this.id=e.id||r,e.id=r,this.defs||(this.defs=t.createEl({el:"defs"})),this.clip=this.defs.createEl({el:"clipPath",attr:e,style:{}})}function Ai(t,e){void 0===e&&(e={}),this.pDom=t;var r=e.id?e.id:"pattern-"+Math.ceil(1e3*Math.random());this.id=e.id||r,e.id=r,this.defs||(this.defs=t.createEl({el:"defs"})),this.pattern=this.defs.createEl({el:"pattern",attr:e,style:{}})}function Bi(t){var e="";for(var r in t)"rotate"===r?e+=r+"("+t.rotate[0]+" "+(t.rotate[1]||0)+" "+(t.rotate[2]||0)+") ":"skew"===r?(t.skew[0]&&(e+="skewX("+t[r][0]+") "),t.skew[1]&&(e+="skewY("+t[r][1]+") ")):t[r].length>1?e+=r+"("+t[r].join(" ")+") ":e+=r+"("+t[r]+") ";return e}function Ei(t,e,r){this.config=t,this.type=e||"linear",this.pDom=r,this.defs=this.pDom.createEl({el:"defs"})}(mi.prototype=new fi).constructor=mi,mi.prototype.createNode=function(t,e,r){return _i(e,r)},wi.prototype.exe=function(){return"url(#"+this.id+")"},bi.prototype.exe=function(){return"url(#"+this.id+")"},Ai.prototype.exe=function(){return"url(#"+this.id+")"},Ei.prototype.exe=function(){return"url(#"+this.config.id+")"},Ei.prototype.linearGradient=function(){var t=this;return this.linearEl=this.defs.join([1],"linearGradient",{action:{enter:function(e){var r=this.createEls(e.linearGradient,{el:"linearGradient"}).setAttr({id:t.config.id,x1:t.config.x1+"%",y1:t.config.y1+"%",x2:t.config.x2+"%",y2:t.config.y2+"%",spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"});t.config.gradientTransform&&r.setAttr("gradientTransform",Bi(t.config.gradientTransform))},exit:function(t){t.linearGradient.remove()},update:function(e){e.linearGradient.setAttr({id:t.config.id,x1:t.config.x1+"%",y1:t.config.y1+"%",x2:t.config.x2+"%",y2:t.config.y2+"%",spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"}),t.config.gradientTransform&&e.linearGradient.setAttr("gradientTransform",Bi(t.config.gradientTransform))}}}),this.linearEl=this.linearEl.fetchEl("linearGradient"),this.linearEl.fetchEls("stop").remove(),this.linearEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:function(t,e){return t.value+"%"},"stop-color":function(t,e){return t.color}}}),this},Ei.prototype.radialGradient=function(){var t=this;return this.defs||(this.defs=this.pDom.createEl({el:"defs"})),this.radialEl=this.defs.join([1],"radialGradient",{action:{enter:function(e){var r=this.createEls(e.radialGradient,{el:"radialGradient"}).setAttr({id:t.config.id,cx:t.config.innerCircle.x+"%",cy:t.config.innerCircle.y+"%",r:t.config.outerCircle.r+"%",fx:t.config.outerCircle.x+"%",fy:t.config.outerCircle.y+"%",spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"});t.config.gradientTransform&&r.setAttr("gradientTransform",Bi(t.config.gradientTransform))},exit:function(t){t.radialGradient.remove()},update:function(e){e.radialGradient.setAttr({id:t.config.id,cx:t.config.innerCircle.x+"%",cy:t.config.innerCircle.y+"%",r:t.config.outerCircle.r+"%",fx:t.config.outerCircle.x+"%",fy:t.config.outerCircle.y+"%",spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"}),t.config.gradientTransform&&e.radialGradient.setAttr("gradientTransform",Bi(t.config.gradientTransform))}}}),this.radialEl=this.radialEl.fetchEl("radialGradient"),this.radialEl.fetchEls("stop").remove(),this.radialEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:function(t,e){return t.value+"%"},"stop-color":function(t,e){return t.color}}}),this},Ei.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,"linear"===this.type?this.linearGradient():"radial"===this.type&&this.radialGradient())};var Ti={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Si=function(t){return document.createElementNS(Ti.svg,t)};function _i(t,e){var r,i,n=null,o=t.el.indexOf(":");if(o>=0)r=t.el.slice(0,o),i=t.el.slice(o+1),n=document.createElementNS(Ti[r],i);else if("group"===t.el)n=Si("g");else n=Si(t.el);var s=new ki(n,t,xi(),e);return t.dataObj&&(n.dataObj=t.dataObj),s}var ki=function(t,e,r,i){this.dom=t,this.nodeName=t.nodeName,this.attr={},this.style={},this.changedAttribute={},this.changedStyles={},this.id=r,this.nodeType="svg",this.dom.nodeId=r,this.children=[],this.vDomIndex=i,this.events={},e.style&&this.setStyle(e.style),e.attr&&this.setAttr(e.attr)};function Mi(t,e){var r=e.indexOf(":"),i=t.changedAttribute[e];r>=0?t.dom.setAttributeNS(Ti[e.slice(0,r)],e.slice(r+1),i):"text"===e?t.dom.textContent=i:"d"===e?Je.isTypePath(i)?t.dom.setAttribute(e,i.fetchPathString()):t.dom.setAttribute(e,i):"onerror"===e||"onload"===e?t.dom[e]=function(e){i.call(t,e)}:t.dom.setAttribute(e,i)}function Ci(t){t.dom.setAttribute("transform",Bi(t.attr.transform))}function Li(t){if("[object Array]"===Object.prototype.toString.call(t))return t.reduce((function(t,e){return t+e.x+","+e.y+" "}),"")}ki.prototype=new ci,ki.prototype.node=function(){return this.execute(),this.dom},ki.prototype.transFormAttributes=function(){var t=this;for(var e in t.changedAttribute)"transform"!==e?Mi(t,e):Ci(t);this.changedAttribute={}},ki.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.scale=t,this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,vi.vDomChanged(this.vDomIndex),this},ki.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewX=[t],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,vi.vDomChanged(this.vDomIndex),this},ki.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewY=[t],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,vi.vDomChanged(this.vDomIndex),this},ki.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,vi.vDomChanged(this.vDomIndex),this},ki.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)&&t.length>0?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,vi.vDomChanged(this.vDomIndex),this},ki.prototype.setStyle=function(t,e){if(2===arguments.length)null==e&&null!=this.style[t]?delete this.style[t]:("function"==typeof e&&(e=e.call(this,this.dataObj)),sr.RGBAInstanceCheck(e)&&(e=e.rgba),this.style[t]=e),this.changedStyles[t]=e;else if(1===arguments.length&&"object"==typeof t)for(var r in t)null==t[r]&&null!=this.style[t]?delete this.style[r]:this.style[r]=t[r],this.changedStyles[r]=t[r];return this.styleChanged=!0,vi.vDomChanged(this.vDomIndex),this},ki.prototype.setAttr=function(t,e){if(2===arguments.length)"points"===t&&(e=Li(e)),this.attr[t]=e,this.changedAttribute[t]=e;else if(1===arguments.length&&"object"==typeof t)for(var r in t)"points"===r&&(t[r]=Li(t[r])),this.attr[r]=t[r],this.changedAttribute[r]=t[r];return this.attrChanged=!0,vi.vDomChanged(this.vDomIndex),this},ki.prototype.execute=function(){if(this.styleChanged||this.attrChanged){this.transFormAttributes();for(var t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();for(var r in this.changedStyles)"object"==typeof this.changedStyles[r]&&(this.changedStyles[r]instanceof Ei||this.changedStyles[r]instanceof Ai||this.changedStyles[r]instanceof bi||this.changedStyles[r]instanceof wi)&&(this.changedStyles[r]=this.changedStyles[r].exe()),this.dom.style.setProperty(r,this.changedStyles[r],"");this.changedStyles={}}else for(var i=0,n=this.children.length;i<n;i+=1)this.children[i].execute()},ki.prototype.child=function(t){var e=this.dom;if(t instanceof mi){for(var r=document.createDocumentFragment(),i=0,n=t.stack.length;i<n;i++)r.appendChild(t.stack[i].dom),t.stack[i].parentNode=this,this.children[this.children.length]=t.stack[i];e.appendChild(r)}else t instanceof ki?(e.appendChild(t.dom),t.parentNode=this,this.children.push(t)):console.log("wrong node type");return this},ki.prototype.animatePathTo=Je.animatePathTo,ki.prototype.morphTo=Je.morphTo,ki.prototype.createRadialGradient=function(t){var e=new Ei(t,"radial",this);return e.radialGradient(),e},ki.prototype.createLinearGradient=function(t){var e=new Ei(t,"linear",this);return e.linearGradient(),e},ki.prototype.on=function(t,e){var r=this;if(r.events[t]&&"drag"!==t&&"zoom"!==t&&(r.dom.removeEventListener(t,r.events[t]),delete r.events[t]),"drag"===t&&delete r.dom.drag_,"zoom"===t&&(r.dom.removeEventListener("wheel",r.events[t]),delete r.dom.drag_),e){if("drag"===t)r.dom.drag_=function(t,i){e.execute(r,t,i)};else if("zoom"===t){var i,n=0,o=0;r.events[t]=function(t){e.disableWheel||(e.zoomExecute(r,t),n+=1,i&&(clearTimeout(i),i=null,o=n),i=setTimeout((function(){o!==n?o=n:(i=null,e.onZoomEnd(r,t),n=0)}),100))},r.dom.addEventListener("wheel",r.events[t]),r.dom.drag_=function(t,i,n){e.panFlag&&e.panExecute(r,t,i,n)}}else{var s=e.bind(r);r.events[t]=function(t){s(t)},r.dom.addEventListener(t,r.events[t])}return this}},ki.prototype.html=function(t){return arguments.length?(this.dom.innerHTML(t),this):this.dom.innerHTML},ki.prototype.text=function(t){return arguments.length?(this.attr.text=t,this.changedAttribute.text=t,this):this.attr.text},ki.prototype.remove=function(){this.parentNode.removeChild(this)},ki.prototype.createEls=function(t,e){var r=new mi({type:"SVG"},t,e,this.vDomIndex);return this.child(r),vi.vDomChanged(this.vDomIndex),r},ki.prototype.createEl=function(t){var e=_i(t,this.vDomIndex);return this.child(e),vi.vDomChanged(this.vDomIndex),e},ki.prototype.removeChild=function(t){var e=this.children,r=e.indexOf(t);if(-1!==r){var i=e.splice(r,1)[0].dom;if(!this.dom.contains(i))return;this.dom.removeChild(i)}};var Di=m,Pi=et,Ii=0;function zi(){return Ii+=1}function Ri(t,e,r){var i=e.dx;void 0===i&&(i=0);var n=e.dy;void 0===n&&(n=0);var o=t.transform.translate,s=t.transform.scale,a=s[0],h=s[1];return void 0===h&&(h=a),function(t,e,r){var i=e[0],n=e[1];return r[0]>=t[0][0]*i&&r[0]<=t[1][0]*i&&r[1]>=t[0][1]*n&&r[1]<=t[1][1]*n}(r,[a,h],[o[0]+i,o[1]+n])&&(i/=a,n/=h,t.dx=i,t.dy=n,o[0]/=a,o[1]/=h,o[0]+=i,o[1]+=n,o[0]*=a,o[1]*=h),t}var Oi=function(){var t=this;this.dragStartFlag=!1,this.dragExtent=[[-1/0,-1/0],[1/0,1/0]],this.event={x:0,y:0,dx:0,dy:0,transform:{translate:[0,0],scale:[1,1]}},this.onDragStart=function(e,r){t.event.x=r.offsetX,t.event.y=r.offsetY,t.event.dx=0,t.event.dy=0,t.dragStartFlag=!0},this.onDrag=function(){},this.onDragEnd=function(){t.event.x=event.offsetX,t.event.y=event.offsetY,t.event.dx=0,t.event.dy=0,t.dragStartFlag=!1}};function ji(t,e){return e<=t[0]?t[0]:e>=t[1]?t[1]:e}function Ni(t,e,r,i){return t.translate[0]/=e,t.translate[1]/=e,t.translate[0]-=i[0]/e-i[0]/r,t.translate[1]-=i[1]/e-i[1]/r,t.scale=[r,r],t.translate[0]*=r,t.translate[1]*=r,t}Oi.prototype={dragExtent:function(t){return this.dragExtent=t,this},dragStart:function(t){var e=this;return"function"==typeof t&&(this.onDragStart=function(r,i){e.event.x=i.offsetX,e.event.y=i.offsetY,e.event.dx=0,e.event.dy=0,t.call(r,e.event),e.dragStartFlag=!0}),this},drag:function(t){var e=this;return"function"==typeof t&&(this.onDrag=function(r,i){var n=i.offsetX-e.event.x,o=i.offsetY-e.event.y;e.event.x=i.offsetX,e.event.y=i.offsetY,e.event=Ri(this.event,{dx:n,dy:o},e.dragExtent),t.call(r,e.event)}),this},dragEnd:function(t){var e=this;return"function"==typeof t&&(this.onDragEnd=function(r,i){e.dragStartFlag=!1,e.event.x=i.offsetX,e.event.y=i.offsetY,e.event.dx=0,e.event.dy=0,t.call(r,e.event)}),this},bindMethods:function(t){var e=this;t.dragTo=function(r,i){e.dragTo(t,r,i)}},execute:function(t,e,r){var i=this;this.event.e=e,e.preventDefault&&e.preventDefault(),this.dragStartFlag||"mousedown"!==r&&"pointerdown"!==r?this.onDragEnd&&this.dragStartFlag&&("mouseup"===r||"mouseleave"===r||"pointerleave"===r||"pointerup"===r)?i.onDragEnd(t,e):this.dragStartFlag&&this.onDrag&&i.onDrag(t,e):i.onDragStart(t,e)}};var Fi=function(){var t=this;this.event={x:0,y:0,dx:0,dy:0,distance:0},this.event.pointers=[],this.event.transform={translate:[0,0],scale:[1,1]},this.zoomBy_=.001,this.zoomExtent_=[0,1/0],this.zoomStartFlag=!1,this.zoomDuration=250,this.onZoomStart=function(e,r){t.event.x=r.offsetX,t.event.y=r.offsetY,t.event.dx=0,t.event.dy=0,t.zoomStartFlag=!0,t.event.distance=0},this.onZoom=function(e,r){t.event.x=r.offsetX,t.event.y=r.offsetY},this.onZoomEnd=function(e,r){t.event.x=r.offsetX,t.event.y=r.offsetY,t.event.dx=0,t.event.dy=0,t.zoomStartFlag=!1,t.event.distance=0},this.onPanStart=function(t,e){},this.onPan=function(t,e){},this.onPanEnd=function(){},this.disableWheel=!1,this.disableDbclick=!1};Fi.prototype.zoomStart=function(t){var e=this;return"function"==typeof t&&(this.zoomStartExe=t,this.onZoomStart=function(r,i,n){if(n.pointers&&2===n.pointers.length){var o=n.pointers;i={x:o[0].offsetX+.5*(o[1].offsetX-o[0].offsetX),y:o[0].offsetY+.5*(o[1].offsetY-o[0].offsetY)}}e.event.x=i.offsetX,e.event.y=i.offsetY,e.event.dx=0,e.event.dy=0,e.zoomStartFlag||t.call(r,e.event),e.zoomStartFlag=!0,e.event.distance=0}),this},Fi.prototype.zoom=function(t){var e=this;return"function"==typeof t&&(this.zoomExe=t,this.onZoom=function(r,i){var n=e.event.transform,o=n.scale[0],s=o,a=i.deltaY,h=i.offsetX,c=i.offsetY;s=ji(e.zoomExtent_,s+-1*a*e.zoomBy_),e.event.transform=Ni(n,o,s,[h,c]),e.event.x=h,e.event.y=c,t.call(r,e.event)}),this},Fi.prototype.zoomEnd=function(t){var e=this;return"function"==typeof t&&(this.zoomEndExe=t,this.onZoomEnd=function(r,i){e.event.x=i.offsetX,e.event.y=i.offsetY,e.event.dx=0,e.event.dy=0,e.zoomStartFlag=!1,t.call(r,e.event),e.event.distance=0}),this},Fi.prototype.zoomTransition=function(){},Fi.prototype.zoomExecute=function(t,e,r){this.eventType="zoom",e.preventDefault&&e.preventDefault(),this.zoomStartFlag?this.onZoom(t,e):this.onZoomStart(t,e,r)},Fi.prototype.zoomPinch=function(t,e,r){var i=r.pointers;if(e.preventDefault&&e.preventDefault(),2===r.pointers.length)if(this.zoomStartFlag){for(var n=this.event.distance,o=0;o<i.length;o++)if(e.pointerId===i[o].pointerId){i[o]=e;break}var s=U.getDistance({x:i[0].offsetX,y:i[0].offsetY},{x:i[1].offsetX,y:i[1].offsetY}),a={offsetX:this.event.x,offsetY:this.event.y,deltaY:n?n-s:0};this.event.distance=s,this.onZoom(t,a)}else this.onZoomStart(t,e,r)},Fi.prototype.scaleBy=function(t,e,r){var i=this,n=i.event.transform,o=e*n.scale[0],s=n.scale[0],a=this.zoomTarget_||r,h=(a[0]-r[0])*s,c=(a[1]-r[1])*s,u=0,l={run:function(e){var a=n.scale[0],l=ji(i.zoomExtent_,s+(o-s)*e);i.event.transform=Ni(n,a,l,r),i.event.transform.translate[0]+=h*(e-u)/l,i.event.transform.translate[1]+=c*(e-u)/l,u=e,i.zoomExe&&i.zoomExe.call(t,i.event)},target:t,duration:i.zoomDuration,delay:0,end:function(){i.onZoomEnd&&i.onZoomEnd(t,{})},loop:1,direction:"default",ease:"default"};Di.add(zi(),l,Pi(l.ease))},Fi.prototype.zoomTarget=function(t){this.zoomTarget_=t},Fi.prototype.scaleTo=function(t,e,r){var i=this,n=i.event.transform,o=n.scale[0],s=this.zoomTarget_||r,a=(s[0]-r[0])*o,h=(s[1]-r[1])*o,c=0,u={run:function(s){var u=n.scale[0],l=ji(i.zoomExtent_,o+(e-o)*s);i.event.transform=Ni(n,u,l,r),i.event.transform.translate[0]+=a*(s-c)/l,i.event.transform.translate[1]+=h*(s-c)/l,c=s,i.zoomStartFlag||i.onZoomStart(t,{offsetX:r[0],offsetY:r[1]},{}),i.zoomExe&&i.zoomExe.call(t,i.event)},target:t,duration:i.zoomDuration,delay:0,end:function(){i.onZoomEnd&&i.onZoomEnd(t,i.event)},loop:1,direction:"default",ease:"default"};Di.add(zi(),u,Pi(u.ease))},Fi.prototype.panTo=function(t,e){var r=this,i=r.event.transform,n=e[0]-r.event.x,o=e[1]-r.event.y,s=0,a={run:function(e){var a=i.scale[0];i.translate[0]+=n*(e-s)/a,i.translate[1]+=o*(e-s)/a,s=e,r.zoomExe&&r.zoomExe.call(t,r.event)},target:t,duration:r.zoomDuration,delay:0,end:function(){r.onZoomEnd&&r.onZoomEnd(t,r.event)},loop:1,direction:"default",ease:"default"};Di.add(zi(),a,Pi(a.ease))},Fi.prototype.bindMethods=function(t){var e=this;t.scaleTo=function(r,i){e.scaleTo(t,r,i)},t.scaleBy=function(r,i){return e.scaleBy(t,r,i),t},t.panTo=function(r,i){return e.panTo(t,r,i),t}},Fi.prototype.zoomFactor=function(t){return this.zoomBy_=t,this},Fi.prototype.scaleExtent=function(t){return this.zoomExtent_=t,this},Fi.prototype.duration=function(t){return this.zoomDuration=t||250,this},Fi.prototype.panExtent=function(t){return this.panExtent_=t,this.panFlag=!0,this},Fi.prototype.panExecute=function(t,e,r,i){if(1===i.pointers.length){if(this.event.e=e,this.eventType="pan",e.preventDefault&&e.preventDefault(),"touchstart"!==e.type&&"touchmove"!==e.type&&"touchend"!==e.type&&"touchcancel"!==e.type||(e.offsetX=e.touches[0].clientX,e.offsetY=e.touches[0].clientY),this.zoomStartFlag||"mousedown"!==r&&"pointerdown"!==r)if(!this.onZoomEnd||"mouseup"!==r&&"mouseleave"!==r&&"pointerup"!==r&&"pointerleave"!==r){if(this.zoomExe){var n=e.offsetX-this.event.x,o=e.offsetY-this.event.y;this.event.x=e.offsetX,this.event.y=e.offsetY,this.event=Ri(this.event,{dx:n,dy:o},this.panExtent_),this.zoomExe.call(t,this.event)}}else this.onZoomEnd(t,e);else this.onZoomStart(t,e,{});e.preventDefault&&e.preventDefault()}};var Ui={drag:function(){return new Oi},zoom:function(){return new Fi}};function Yi(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xi={exports:{}};!function(t,e){t.exports=function t(e,r,i){function n(s,a){if(!r[s]){if(!e[s]){if(!a&&Yi)return Yi(s);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[s]={exports:{}};e[s][0].call(c.exports,(function(t){var r=e[s][1][t];return n(r||t)}),c,c.exports,t,e,r,i)}return r[s].exports}for(var o=Yi,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,r){(function(t){var r=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),n=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=r&&r.prototype.append&&r.prototype.getBlob;function s(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var i=r.buffer;if(r.byteLength!==i.byteLength){var n=new Uint8Array(r.byteLength);n.set(new Uint8Array(i,r.byteOffset,r.byteLength)),i=n.buffer}t[e]=i}}}function a(t,e){e=e||{};var i=new r;s(t);for(var n=0;n<t.length;n++)i.append(t[n]);return e.type?i.getBlob(e.type):i.getBlob()}function h(t,e){return s(t),new Blob(t,e||{})}e.exports=i?n?t.Blob:h:o?a:void 0}).call(this,void 0!==mt?mt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){(function(r){var i=t("stream").Writable,n=t("util"),o=t("blob"),s=r.URL||r.webkitURL||r.mozURL;function a(){if(!(this instanceof a))return new a;i.call(this),this._chunks=[],this._blob=null,this.length=0}n.inherits(a,i),a.prototype._write=function(t,e,r){t instanceof Uint8Array||(t=new Uint8Array(t)),this.length+=t.length,this._chunks.push(t),r()},a.prototype.toBlob=function(t){return t=t||"application/octet-stream",this._blob||(this._blob=new o(this._chunks,{type:t}),this._chunks=[]),this._blob.type!==t&&(this._blob=new o([this._blob],{type:t})),this._blob},a.prototype.toBlobURL=function(t){return s.createObjectURL(this.toBlob(t))},e.exports=a}).call(this,void 0!==mt?mt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{blob:1,stream:22,util:25}],3:[function(t,e,r){
/*!
    	 * The buffer module from node.js, for the browser.
    	 *
    	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
    	 * @license  MIT
    	 */
var i=t("base64-js"),n=t("ieee754"),o=t("is-array");r.Buffer=a,r.SlowBuffer=a,r.INSPECT_MAX_BYTES=50,a.poolSize=8192;var s=1073741823;function a(t,e,r){if(!(this instanceof a))return new a(t,e,r);var i,n,h,c=typeof t;if("number"===c)i=t>0?t>>>0:0;else if("string"===c)"base64"===e&&(t=M(t)),i=a.byteLength(t,e);else{if("object"!==c||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&o(t.data)&&(t=t.data),i=+t.length>0?Math.floor(+t.length):0}if(this.length>s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");if(a.TYPED_ARRAY_SUPPORT?n=a._augment(new Uint8Array(i)):((n=this).length=i,n._isBuffer=!0),a.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)n._set(t);else if(L(t))if(a.isBuffer(t))for(h=0;h<i;h++)n[h]=t.readUInt8(h);else for(h=0;h<i;h++)n[h]=(t[h]%256+256)%256;else if("string"===c)n.write(t,0,e);else if("number"===c&&!a.TYPED_ARRAY_SUPPORT&&!r)for(h=0;h<i;h++)n[h]=0;return n}function h(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=e.length;if(o%2!=0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[r+s]=a}return s}function c(t,e,r,i){return O(P(e),t,r,i)}function u(t,e,r,i){return O(I(e),t,r,i)}function l(t,e,r,i){return u(t,e,r,i)}function f(t,e,r,i){return O(R(e),t,r,i)}function d(t,e,r,i){return O(z(e),t,r,i)}function p(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function y(t,e,r){var i="",n="";r=Math.min(t.length,r);for(var o=e;o<r;o++)t[o]<=127?(i+=j(n)+String.fromCharCode(t[o]),n=""):n+="%"+t[o].toString(16);return i+j(n)}function v(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;n++)i+=String.fromCharCode(t[n]);return i}function g(t,e,r){return v(t,e,r)}function x(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=e;o<r;o++)n+=D(t[o]);return n}function m(t,e,r){for(var i=t.slice(e,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function w(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function b(t,e,r,i,n,o){if(!a.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>n||e<o)throw new TypeError("value is out of bounds");if(r+i>t.length)throw new TypeError("index out of range")}function A(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-r,2);n<o;n++)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function B(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-r,4);n<o;n++)t[r+n]=e>>>8*(i?n:3-n)&255}function E(t,e,r,i,n,o){if(e>n||e<o)throw new TypeError("value is out of bounds");if(r+i>t.length)throw new TypeError("index out of range")}function T(t,e,r,i,o){return o||E(t,e,r,4,34028234663852886e22,-34028234663852886e22),n.write(t,e,r,i,23,4),r+4}function S(t,e,r,i,o){return o||E(t,e,r,8,17976931348623157e292,-17976931348623157e292),n.write(t,e,r,i,52,8),r+8}a.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(t){return!1}}(),a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var r=t.length,i=e.length,n=0,o=Math.min(r,i);n<o&&t[n]===e[n];n++);return n!==o&&(r=t[n],i=e[n]),r<i?-1:i<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!o(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new a(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var i=new a(e),n=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(i,n),n+=s.length}return i},a.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":default:r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=P(t).length;break;case"base64":r=R(t).length}return r},a.prototype.length=void 0,a.prototype.parent=void 0,a.prototype.toString=function(t,e,r){var i=!1;if(t||(t="utf8"),(e>>>=0)<0&&(e=0),(r=void 0===r||r===1/0?this.length:r>>>0)>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return y(this,e,r);case"ascii":return v(this,e,r);case"binary":return g(this,e,r);case"base64":return p(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===a.compare(this,t)},a.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return a.compare(this,t)},a.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},a.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},a.prototype.write=function(t,e,r,i){if(isFinite(e))isFinite(r)||(i=r,r=void 0);else{var n=i;i=e,e=r,r=n}e=Number(e)||0;var o,s=this.length-e;switch(r?(r=Number(r))>s&&(r=s):r=s,i=String(i||"utf8").toLowerCase()){case"hex":o=h(this,t,e,r);break;case"utf8":case"utf-8":o=c(this,t,e,r);break;case"ascii":o=u(this,t,e,r);break;case"binary":o=l(this,t,e,r);break;case"base64":o=f(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=d(this,t,e,r);break;default:throw new TypeError("Unknown encoding: "+i)}return o},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),a.TYPED_ARRAY_SUPPORT)return a._augment(this.subarray(t,e));for(var i=e-t,n=new a(i,void 0,!0),o=0;o<i;o++)n[o]=this[o+t];return n},a.prototype.readUInt8=function(t,e){return e||w(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||w(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||w(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||w(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readInt8=function(t,e){return e||w(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||w(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){e||w(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return e||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||w(t,4,this.length),n.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||w(t,4,this.length),n.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||w(t,8,this.length),n.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||w(t,8,this.length),n.read(this,t,!1,52,8)},a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):A(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):B(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):B(this,t,e,!1),e+4},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):A(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):B(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,r){return T(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return T(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return S(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return S(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,i){var n=this;if(r||(r=0),i||0===i||(i=this.length),e||(e=0),i!==r&&0!==t.length&&0!==n.length){if(i<r)throw new TypeError("sourceEnd < sourceStart");if(e<0||e>=t.length)throw new TypeError("targetStart out of bounds");if(r<0||r>=n.length)throw new TypeError("sourceStart out of bounds");if(i<0||i>n.length)throw new TypeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var o=i-r;if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(var s=0;s<o;s++)t[s+e]=this[s+r];else t._set(this.subarray(r,r+o),e)}},a.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new TypeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new TypeError("start out of bounds");if(r<0||r>this.length)throw new TypeError("end out of bounds");var i;if("number"==typeof t)for(i=e;i<r;i++)this[i]=t;else{var n=P(t.toString()),o=n.length;for(i=e;i<r;i++)this[i]=n[i%o]}return this}},a.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(a.TYPED_ARRAY_SUPPORT)return new a(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var _=a.prototype;a._augment=function(t){return t.constructor=a,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=_.get,t.set=_.set,t.write=_.write,t.toString=_.toString,t.toLocaleString=_.toString,t.toJSON=_.toJSON,t.equals=_.equals,t.compare=_.compare,t.copy=_.copy,t.slice=_.slice,t.readUInt8=_.readUInt8,t.readUInt16LE=_.readUInt16LE,t.readUInt16BE=_.readUInt16BE,t.readUInt32LE=_.readUInt32LE,t.readUInt32BE=_.readUInt32BE,t.readInt8=_.readInt8,t.readInt16LE=_.readInt16LE,t.readInt16BE=_.readInt16BE,t.readInt32LE=_.readInt32LE,t.readInt32BE=_.readInt32BE,t.readFloatLE=_.readFloatLE,t.readFloatBE=_.readFloatBE,t.readDoubleLE=_.readDoubleLE,t.readDoubleBE=_.readDoubleBE,t.writeUInt8=_.writeUInt8,t.writeUInt16LE=_.writeUInt16LE,t.writeUInt16BE=_.writeUInt16BE,t.writeUInt32LE=_.writeUInt32LE,t.writeUInt32BE=_.writeUInt32BE,t.writeInt8=_.writeInt8,t.writeInt16LE=_.writeInt16LE,t.writeInt16BE=_.writeInt16BE,t.writeInt32LE=_.writeInt32LE,t.writeInt32BE=_.writeInt32BE,t.writeFloatLE=_.writeFloatLE,t.writeFloatBE=_.writeFloatBE,t.writeDoubleLE=_.writeDoubleLE,t.writeDoubleBE=_.writeDoubleBE,t.fill=_.fill,t.inspect=_.inspect,t.toArrayBuffer=_.toArrayBuffer,t};var k=/[^+\/0-9A-z]/g;function M(t){for(t=C(t).replace(k,"");t.length%4!=0;)t+="=";return t}function C(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function L(t){return o(t)||a.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function P(t){for(var e=[],r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i<=127)e.push(i);else{var n=r;i>=55296&&i<=57343&&r++;for(var o=encodeURIComponent(t.slice(n,r+1)).substr(1).split("%"),s=0;s<o.length;s++)e.push(parseInt(o[s],16))}}return e}function I(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function z(t){for(var e,r,i,n=[],o=0;o<t.length;o++)r=(e=t.charCodeAt(o))>>8,i=e%256,n.push(i),n.push(r);return n}function R(t){return i.toByteArray(t)}function O(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);n++)e[n+r]=t[n];return n}function j(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}},{"base64-js":4,ieee754:5,"is-array":6}],4:[function(t,e,r){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){var e="undefined"!=typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),n="/".charCodeAt(0),o="0".charCodeAt(0),s="a".charCodeAt(0),a="A".charCodeAt(0);function h(t){var e=t.charCodeAt(0);return e===r?62:e===n?63:e<o?-1:e<o+10?e-o+26+26:e<a+26?e-a:e<s+26?e-s+26:void 0}function c(t){var r,i,n,o,s,a;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;s="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,a=new e(3*t.length/4-s),n=s>0?t.length-4:t.length;var u=0;function l(t){a[u++]=t}for(r=0,i=0;r<n;r+=4,i+=3)l((16711680&(o=h(t.charAt(r))<<18|h(t.charAt(r+1))<<12|h(t.charAt(r+2))<<6|h(t.charAt(r+3))))>>16),l((65280&o)>>8),l(255&o);return 2===s?l(255&(o=h(t.charAt(r))<<2|h(t.charAt(r+1))>>4)):1===s&&(l((o=h(t.charAt(r))<<10|h(t.charAt(r+1))<<4|h(t.charAt(r+2))>>2)>>8&255),l(255&o)),a}function u(t){var e,r,n,o=t.length%3,s="";function a(t){return i.charAt(t)}function h(t){return a(t>>18&63)+a(t>>12&63)+a(t>>6&63)+a(63&t)}for(e=0,n=t.length-o;e<n;e+=3)s+=h(r=(t[e]<<16)+(t[e+1]<<8)+t[e+2]);switch(o){case 1:s+=a((r=t[t.length-1])>>2),s+=a(r<<4&63),s+="==";break;case 2:s+=a((r=(t[t.length-2]<<8)+t[t.length-1])>>10),s+=a(r>>4&63),s+=a(r<<2&63),s+="="}return s}t.toByteArray=c,t.fromByteArray=u}(void 0===r?this.base64js={}:r)},{}],5:[function(t,e,r){r.read=function(t,e,r,i,n){var o,s,a=8*n-i-1,h=(1<<a)-1,c=h>>1,u=-7,l=r?n-1:0,f=r?-1:1,d=t[e+l];for(l+=f,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+t[e+l],l+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+t[e+l],l+=f,u-=8);if(0===o)o=1-c;else{if(o===h)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=c}return(d?-1:1)*s*Math.pow(2,o-i)},r.write=function(t,e,r,i,n,o){var s,a,h,c=8*o-n-1,u=(1<<c)-1,l=u>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+l>=1?f/h:f*Math.pow(2,1-l))*h>=2&&(s++,h/=2),s+l>=u?(a=0,s=u):s+l>=1?(a=(e*h-1)*Math.pow(2,n),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,n),s=0));n>=8;t[r+d]=255&a,d+=p,a/=256,n-=8);for(s=s<<n|a,c+=n;c>0;t[r+d]=255&s,d+=p,s/=256,c-=8);t[r+d-p]|=128*y}},{}],6:[function(t,e,r){var i=Array.isArray,n=Object.prototype.toString;e.exports=i||function(t){return!!t&&"[object Array]"==n.call(t)}},{}],7:[function(t,e,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,r,i,o,h,c,u=arguments;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(a(r=this._events[t]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,o=new Array(i-1),h=1;h<i;h++)o[h-1]=u[h];r.apply(this,o)}else if(s(r)){for(i=arguments.length,o=new Array(i-1),h=1;h<i;h++)o[h-1]=u[h];for(i=(c=r.slice()).length,h=0;h<i;h++)c[h].apply(this,o)}return!0},i.prototype.addListener=function(t,e){var r;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var r,i,o,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(r=this._events[t]).length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(r)){for(a=o;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[t]))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.listenerCount=function(t,e){return t._events&&t._events[e]?n(t._events[e])?1:t._events[e].length:0}},{}],8:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],9:[function(t,e,r){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],10:[function(t,e,r){var i=e.exports={};function n(){}i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var i=[];if(e){var n=document.createElement("div");return new MutationObserver((function(){var t=i.slice();i.length=0,t.forEach((function(t){t()}))})).observe(n,{attributes:!0}),function(t){i.length||n.setAttribute("yes","no"),i.push(t)}}return r?(window.addEventListener("message",(function(t){var e=t.source;e!==window&&null!==e||"process-tick"!==t.data||(t.stopPropagation(),i.length>0&&i.shift()())}),!0),function(t){i.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],11:[function(t,e,r){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":12}],12:[function(t,e,r){(function(r){e.exports=a;var i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},n=t("core-util-is");n.inherits=t("inherits");var o=t("./_stream_readable"),s=t("./_stream_writable");function a(t){if(!(this instanceof a))return new a(t);o.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function c(t,e){for(var r=0,i=t.length;r<i;r++)e(t[r],r)}n.inherits(a,o),c(i(s.prototype),(function(t){a.prototype[t]||(a.prototype[t]=s.prototype[t])}))}).call(this,t("_process"))},{"./_stream_readable":14,"./_stream_writable":16,_process:10,"core-util-is":17,inherits:8}],13:[function(t,e,r){e.exports=o;var i=t("./_stream_transform"),n=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}n.inherits=t("inherits"),n.inherits(o,i),o.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":15,"core-util-is":17,inherits:8}],14:[function(t,e,r){(function(r){e.exports=u;var i=t("isarray"),n=t("buffer").Buffer;u.ReadableState=c;var o=t("events").EventEmitter;o.listenerCount||(o.listenerCount=function(t,e){return t.listeners(e).length});var s,a=t("stream"),h=t("core-util-is");function c(e,r){var i=(e=e||{}).highWaterMark;this.highWaterMark=i||0===i?i:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=t("string_decoder/").StringDecoder),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function u(t){if(!(this instanceof u))return new u(t);this._readableState=new c(t),this.readable=!0,a.call(this)}function l(t,e,r,i,n){var o=v(e,r);if(o)t.emit("error",o);else if(null==r)e.reading=!1,e.ended||g(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!n){var s=new Error("stream.push() after EOF");t.emit("error",s)}else e.endEmitted&&n?(s=new Error("stream.unshift() after end event"),t.emit("error",s)):(!e.decoder||n||i||(r=e.decoder.write(r)),e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):(e.reading=!1,e.buffer.push(r)),e.needReadable&&x(t),w(t,e));else n||(e.reading=!1);return f(e)}function f(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}h.inherits=t("inherits"),h.inherits(u,a),u.prototype.push=function(t,e){var r=this._readableState;return"string"!=typeof t||r.objectMode||(e=e||r.defaultEncoding)!==r.encoding&&(t=new n(t,e),e=""),l(this,r,t,e,!1)},u.prototype.unshift=function(t){return l(this,this._readableState,t,"",!0)},u.prototype.setEncoding=function(e){s||(s=t("string_decoder/").StringDecoder),this._readableState.decoder=new s(e),this._readableState.encoding=e};var d=8388608;function p(t){if(t>=d)t=d;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function y(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=p(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function v(t,e){var r=null;return n.isBuffer(e)||"string"==typeof e||null==e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function g(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.length>0?x(t):_(t)}function x(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?r.nextTick((function(){m(t)})):m(t))}function m(t){t.emit("readable")}function w(t,e){e.readingMore||(e.readingMore=!0,r.nextTick((function(){b(t,e)})))}function b(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function A(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&B(t)}}function B(t){var e,r=t._readableState;function i(t,i,n){!1===t.write(e)&&r.awaitDrain++}for(r.awaitDrain=0;r.pipesCount&&null!==(e=t.read());)if(1===r.pipesCount?i(r.pipes):k(r.pipes,i),t.emit("data",e),r.awaitDrain>0)return;if(0===r.pipesCount)return r.flowing=!1,void(o.listenerCount(t,"data")>0&&T(t));r.ranOut=!0}function E(){this._readableState.ranOut&&(this._readableState.ranOut=!1,B(this))}function T(t,e){if(t._readableState.flowing)throw new Error("Cannot switch to old mode now.");var i=e||!1,n=!1;t.readable=!0,t.pipe=a.prototype.pipe,t.on=t.addListener=a.prototype.on,t.on("readable",(function(){var e;for(n=!0;!i&&null!==(e=t.read());)t.emit("data",e);null===e&&(n=!1,t._readableState.needReadable=!0)})),t.pause=function(){i=!0,this.emit("pause")},t.resume=function(){i=!1,n?r.nextTick((function(){t.emit("readable")})):this.read(0),this.emit("resume")},t.emit("readable")}function S(t,e){var r,i=e.buffer,o=e.length,s=!!e.decoder,a=!!e.objectMode;if(0===i.length)return null;if(0===o)r=null;else if(a)r=i.shift();else if(!t||t>=o)r=s?i.join(""):n.concat(i,o),i.length=0;else if(t<i[0].length)r=(l=i[0]).slice(0,t),i[0]=l.slice(t);else if(t===i[0].length)r=i.shift();else{r=s?"":new n(t);for(var h=0,c=0,u=i.length;c<u&&h<t;c++){var l=i[0],f=Math.min(t-h,l.length);s?r+=l.slice(0,f):l.copy(r,h,0,f),f<l.length?i[0]=l.slice(f):i.shift(),h+=f}}return r}function _(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,r.nextTick((function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))})))}function k(t,e){for(var r=0,i=t.length;r<i;r++)e(t[r],r)}function M(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}u.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var r,i=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return x(this),null;if(0===(t=y(t,e))&&e.ended)return r=null,e.length>0&&e.decoder&&(r=S(t,e),e.length-=r.length),0===e.length&&_(this),r;var n=e.needReadable;return e.length-t<=e.highWaterMark&&(n=!0),(e.ended||e.reading)&&(n=!1),n&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),n&&!e.reading&&(t=y(i,e)),null===(r=t>0?S(t,e):null)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&_(this),r},u.prototype._read=function(t){this.emit("error",new Error("not implemented"))},u.prototype.pipe=function(t,e){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1;var a=e&&!1===e.end||t===r.stdout||t===r.stderr?l:c;function h(t){t===n&&l()}function c(){t.end()}s.endEmitted?r.nextTick(a):n.once("end",a),t.on("unpipe",h);var u=A(n);function l(){t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",h),n.removeListener("end",c),n.removeListener("end",l),t._writableState&&!t._writableState.needDrain||u()}function f(e){y(),t.removeListener("error",f),0===o.listenerCount(t,"error")&&t.emit("error",e)}function d(){t.removeListener("finish",p),y()}function p(){t.removeListener("close",d),y()}function y(){n.unpipe(t)}return t.on("drain",u),t._events&&t._events.error?i(t._events.error)?t._events.error.unshift(f):t._events.error=[f,t._events.error]:t.on("error",f),t.once("close",d),t.once("finish",p),t.emit("pipe",n),s.flowing||(this.on("readable",E),s.flowing=!0,r.nextTick((function(){B(n)}))),t},u.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",E),e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",E),e.flowing=!1;for(var n=0;n<i;n++)r[n].emit("unpipe",this);return this}return-1===(n=M(e.pipes,t))||(e.pipes.splice(n,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},u.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||T(this),"readable"===t&&this.readable){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&x(this):this.read(0))}return r},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){T(this),this.read(0),this.emit("resume")},u.prototype.pause=function(){T(this,!0),this.emit("pause")},u.prototype.wrap=function(t){var e=this._readableState,r=!1,i=this;for(var n in t.on("end",(function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)})),t.on("data",(function(n){e.decoder&&(n=e.decoder.write(n)),e.objectMode&&null==n||(e.objectMode||n&&n.length)&&(i.push(n)||(r=!0,t.pause()))})),t)"function"==typeof t[n]&&void 0===this[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));return k(["error","close","destroy","pause","resume"],(function(e){t.on(e,i.emit.bind(i,e))})),i._read=function(e){r&&(r=!1,t.resume())},i},u._fromList=S}).call(this,t("_process"))},{_process:10,buffer:3,"core-util-is":17,events:7,inherits:8,isarray:9,stream:22,"string_decoder/":23}],15:[function(t,e,r){e.exports=a;var i=t("./_stream_duplex"),n=t("core-util-is");function o(t,e){this.afterTransform=function(t,r){return s(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function s(t,e,r){var i=t._transformState;i.transforming=!1;var n=i.writecb;if(!n)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!=r&&t.push(r),n&&n(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);i.call(this,t),this._transformState=new o(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",(function(){"function"==typeof this._flush?this._flush((function(t){h(e,t)})):h(e)}))}function h(t,e){if(e)return t.emit("error",e);var r=t._writableState;t._readableState;var i=t._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}n.inherits=t("inherits"),n.inherits(a,i),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,r){throw new Error("not implemented")},a.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":12,"core-util-is":17,inherits:8}],16:[function(t,e,r){(function(r){e.exports=h;var i=t("buffer").Buffer;h.WritableState=a;var n=t("core-util-is");n.inherits=t("inherits");var o=t("stream");function s(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function a(t,e){var r=(t=t||{}).highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){v(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function h(e){var r=t("./_stream_duplex");if(!(this instanceof h||this instanceof r))return new h(e);this._writableState=new a(e,this),this.writable=!0,o.call(this)}function c(t,e,i){var n=new Error("write after end");t.emit("error",n),r.nextTick((function(){i(n)}))}function u(t,e,n,o){var s=!0;if(!i.isBuffer(n)&&"string"!=typeof n&&null!=n&&!e.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),r.nextTick((function(){o(a)})),s=!1}return s}function l(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=new i(e,r)),e}function f(t,e,r,n,o){r=l(e,r,n),i.isBuffer(r)&&(n="buffer");var a=e.objectMode?1:r.length;e.length+=a;var h=e.length<e.highWaterMark;return h||(e.needDrain=!0),e.writing?e.buffer.push(new s(r,n,o)):d(t,e,a,r,n,o),h}function d(t,e,r,i,n,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,t._write(i,n,e.onwrite),e.sync=!1}function p(t,e,i,n,o){i?r.nextTick((function(){o(n)})):o(n),t._writableState.errorEmitted=!0,t.emit("error",n)}function y(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function v(t,e){var i=t._writableState,n=i.sync,o=i.writecb;if(y(i),e)p(t,i,n,e,o);else{var s=w(t,i);s||i.bufferProcessing||!i.buffer.length||m(t,i),n?r.nextTick((function(){g(t,i,s,o)})):g(t,i,s,o)}}function g(t,e,r,i){r||x(t,e),i(),r&&b(t,e)}function x(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){e.bufferProcessing=!0;for(var r=0;r<e.buffer.length;r++){var i=e.buffer[r],n=i.chunk,o=i.encoding,s=i.callback;if(d(t,e,e.objectMode?1:n.length,n,o,s),e.writing){r++;break}}e.bufferProcessing=!1,r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}function w(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function b(t,e){var r=w(t,e);return r&&(e.finished=!0,t.emit("finish")),r}function A(t,e,i){e.ending=!0,b(t,e),i&&(e.finished?r.nextTick(i):t.once("finish",i)),e.ended=!0}n.inherits(h,o),h.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},h.prototype.write=function(t,e,r){var n=this._writableState,o=!1;return"function"==typeof e&&(r=e,e=null),i.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?c(this,n,r):u(this,n,t,r)&&(o=f(this,n,t,e,r)),o},h.prototype._write=function(t,e,r){r(new Error("not implemented"))},h.prototype.end=function(t,e,r){var i=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),i.ending||i.finished||A(this,i,r)}}).call(this,t("_process"))},{"./_stream_duplex":12,_process:10,buffer:3,"core-util-is":17,inherits:8,stream:22}],17:[function(t,e,r){(function(t){function e(t){return Array.isArray(t)}function i(t){return"boolean"==typeof t}function n(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function h(t){return"symbol"==typeof t}function c(t){return void 0===t}function u(t){return l(t)&&"[object RegExp]"===g(t)}function l(t){return"object"==typeof t&&null!==t}function f(t){return l(t)&&"[object Date]"===g(t)}function d(t){return l(t)&&("[object Error]"===g(t)||t instanceof Error)}function p(t){return"function"==typeof t}function y(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function v(e){return t.isBuffer(e)}function g(t){return Object.prototype.toString.call(t)}r.isArray=e,r.isBoolean=i,r.isNull=n,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=h,r.isUndefined=c,r.isRegExp=u,r.isObject=l,r.isDate=f,r.isError=d,r.isFunction=p,r.isPrimitive=y,r.isBuffer=v}).call(this,t("buffer").Buffer)},{buffer:3}],18:[function(t,e,r){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":13}],19:[function(t,e,r){var i=t("stream");(r=e.exports=t("./lib/_stream_readable.js")).Stream=i,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":12,"./lib/_stream_passthrough.js":13,"./lib/_stream_readable.js":14,"./lib/_stream_transform.js":15,"./lib/_stream_writable.js":16,stream:22}],20:[function(t,e,r){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":15}],21:[function(t,e,r){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":16}],22:[function(t,e,r){e.exports=n;var i=t("events").EventEmitter;function n(){i.call(this)}t("inherits")(n,i),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){var r=this;function n(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",n),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",h));var s=!1;function a(){s||(s=!0,t.end())}function h(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){r.removeListener("data",n),t.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",h),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("error",c),t.on("error",c),r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t}},{events:7,inherits:8,"readable-stream/duplex.js":11,"readable-stream/passthrough.js":18,"readable-stream/readable.js":19,"readable-stream/transform.js":20,"readable-stream/writable.js":21}],23:[function(t,e,r){var i=t("buffer").Buffer,n=i.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){if(t&&!n(t))throw new Error("Unknown encoding: "+t)}var s=r.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),o(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=h;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=c;break;default:return void(this.write=a)}this.charBuffer=new i(6),this.charReceived=0,this.charLength=0};function a(t){return t.toString(this.encoding)}function h(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function c(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}s.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(t=t.slice(r,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i,n=t.length;if(this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,n),n-=this.charReceived),n=(e+=t.toString(this.encoding,0,n)).length-1,(i=e.charCodeAt(n))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,n)}return e},s.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e},s.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,i=this.charBuffer,n=this.encoding;e+=i.slice(0,r).toString(n)}return e}},{buffer:3}],24:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],25:[function(t,e,r){(function(e,i){var n=/%[sdj%]/g;r.format=function(t){var e=arguments;if(!A(t)){for(var r=[],i=0;i<arguments.length;i++)r.push(a(e[i]));return r.join(" ")}i=1;for(var o=arguments,s=o.length,h=String(t).replace(n,(function(t){if("%%"===t)return"%";if(i>=s)return t;switch(t){case"%s":return String(o[i++]);case"%d":return Number(o[i++]);case"%j":try{return JSON.stringify(o[i++])}catch(t){return"[Circular]"}default:return t}})),c=o[i];i<s;c=o[++i])m(c)||!S(c)?h+=" "+c:h+=" "+a(c);return h},r.deprecate=function(t,n){if(E(i.process))return function(){return r.deprecate(t,n).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;function s(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),o=!0}return t.apply(this,arguments)}return s};var o,s={};function a(t,e){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),x(e)?i.showHidden=e:e&&r._extend(i,e),E(i.showHidden)&&(i.showHidden=!1),E(i.depth)&&(i.depth=2),E(i.colors)&&(i.colors=!1),E(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=h),l(i,t,i.depth)}function h(t,e){var r=a.styles[e];return r?"["+a.colors[r][0]+"m"+t+"["+a.colors[r][1]+"m":t}function c(t,e){return t}function u(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}function l(t,e,i){if(t.customInspect&&e&&M(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(i,t);return A(n)||(n=l(t,n,i)),n}var o=f(t,e);if(o)return o;var s=Object.keys(e),a=u(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),k(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(e);if(0===s.length){if(M(e)){var h=e.name?": "+e.name:"";return t.stylize("[Function"+h+"]","special")}if(T(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(_(e))return t.stylize(Date.prototype.toString.call(e),"date");if(k(e))return d(e)}var c,x="",m=!1,w=["{","}"];return g(e)&&(m=!0,w=["[","]"]),M(e)&&(x=" [Function"+(e.name?": "+e.name:"")+"]"),T(e)&&(x=" "+RegExp.prototype.toString.call(e)),_(e)&&(x=" "+Date.prototype.toUTCString.call(e)),k(e)&&(x=" "+d(e)),0!==s.length||m&&0!=e.length?i<0?T(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=m?p(t,e,i,a,s):s.map((function(r){return y(t,e,i,a,r,m)})),t.seen.pop(),v(c,x,w)):w[0]+x+w[1]}function f(t,e){if(E(e))return t.stylize("undefined","undefined");if(A(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return b(e)?t.stylize(""+e,"number"):x(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,r,i,n){for(var o=[],s=0,a=e.length;s<a;++s)z(e,String(s))?o.push(y(t,e,r,i,String(s),!0)):o.push("");return n.forEach((function(n){n.match(/^\d+$/)||o.push(y(t,e,r,i,n,!0))})),o}function y(t,e,r,i,n,o){var s,a,h;if((h=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),z(i,n)||(s="["+n+"]"),a||(t.seen.indexOf(h.value)<0?(a=m(r)?l(t,h.value,null):l(t,h.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),E(s)){if(o&&n.match(/^\d+$/))return a;(s=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function v(t,e,r){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function g(t){return Array.isArray(t)}function x(t){return"boolean"==typeof t}function m(t){return null===t}function w(t){return null==t}function b(t){return"number"==typeof t}function A(t){return"string"==typeof t}function B(t){return"symbol"==typeof t}function E(t){return void 0===t}function T(t){return S(t)&&"[object RegExp]"===L(t)}function S(t){return"object"==typeof t&&null!==t}function _(t){return S(t)&&"[object Date]"===L(t)}function k(t){return S(t)&&("[object Error]"===L(t)||t instanceof Error)}function M(t){return"function"==typeof t}function C(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function L(t){return Object.prototype.toString.call(t)}function D(t){return t<10?"0"+t.toString(10):t.toString(10)}r.debuglog=function(t){if(E(o)&&(o=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var i=e.pid;s[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,i,e)}}else s[t]=function(){};return s[t]},r.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=g,r.isBoolean=x,r.isNull=m,r.isNullOrUndefined=w,r.isNumber=b,r.isString=A,r.isSymbol=B,r.isUndefined=E,r.isRegExp=T,r.isObject=S,r.isDate=_,r.isError=k,r.isFunction=M,r.isPrimitive=C,r.isBuffer=t("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var t=new Date,e=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r.log=function(){console.log("%s - %s",I(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!S(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t}}).call(this,t("_process"),void 0!==mt?mt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":24,_process:10,inherits:8}]},{},[2])(2)}(Xi);var Gi=Xi.exports,Hi={fillStyle:"fillColor",strokeStyle:"strokeColor",globalAlpha:"opacity"},qi=U,Vi=m,Wi=0,Zi=Ui.zoom(),Qi=Ui.drag();function Ji(){return Wi+=1}var $i=function(){fi.apply(this,arguments)};function Ki(t){var e={translateX:0,translateY:0,scaleX:1,scaleY:1};return t&&(t.translate&&t.translate.length>0&&(e.translateX=t.translate[0],e.translateY=t.translate[1]),t.scale&&t.scale.length>0&&(e.scaleX=t.scale[0],e.scaleY=t.scale[1]||e.scaleX)),e}function tn(){var t=this,e=t.attr,r=e.transform,i=e.points;void 0===i&&(i=[]);var n=Ki(r),o=n.translateX,s=n.translateY,a=n.scaleX,h=n.scaleY;if(i&&i.length>0){for(var c=i[0].x,u=i[0].x,l=i[0].y,f=i[0].y,d=1;d<i.length;d+=1)c>i[d].x&&(c=i[d].x),u<i[d].x&&(u=i[d].x),l>i[d].y&&(l=i[d].y),f<i[d].y&&(f=i[d].y);t.BBox={x:o+c*a,y:s+l*h,width:(u-c)*a,height:(f-l)*h}}else t.BBox={x:0,y:0,width:0,height:0};r&&r.rotate?t.BBoxHit=qi.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox}function en(t,e){this.config=t,this.type=e||"linear",this.mode=this.config.mode&&"percent"!==this.config.mode?"absolute":"percent"}function rn(t,e,r){this.imageData=t,this.width=e,this.height=r}function nn(t,e){void 0===e&&(e={});var r=e.id?e.id:"mask-"+Math.ceil(1e3*Math.random());this.config=e,this.mask=new Bn(t.dom.ctx,{el:"g",attr:{id:r}},Ji(),t.vDomIndex)}function on(t){return new nn(this,t)}function sn(t,e){void 0===e&&(e={});var r=e.id?e.id:"clip-"+Math.ceil(1e3*Math.random());this.clip=new Bn(t.dom.ctx,{el:"g",attr:{id:r}},Ji(),t.vDomIndex)}function an(t){return new sn(this,t)}function hn(t,e,r,i){void 0===e&&(e={}),void 0===r&&(r=0),void 0===i&&(i=0);var n=this,o=e.id?e.id:"pattern-"+Math.ceil(1e3*Math.random());this.repeatInd=e.repeat?e.repeat:"repeat","NODE"===t.ENV||(n.pattern=Mn(null,{},{enableEvents:!1,enableResize:!1}),n.pattern.setSize(r,i)),n.pattern.setAttr("id",o),t.prependChild([n.pattern]),n.pattern.vDomIndex=t.vDomIndex+":"+o,n.pattern.onChange((function(){n.patternObj=t.ctx.createPattern(n.pattern.domEl,n.repeatInd)}))}function cn(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=0),new hn(this,t,e,r)}function un(){this.BBox={x:0,y:0,width:0,height:0},this.BBoxHit={x:0,y:0,width:0,height:0}}function ln(t,e,r,i,n,o){var s=this;for(var a in s.ctx=t,s.attr=e,s.style=r,s.nodeName="Image",s.nodeExe=o,e)this.setAttr(a,e[a]);Vi.vDomChanged(o.vDomIndex),s.stack=[s]}function fn(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="text",i.stack=[i],i.attr.width&&this.fitWidth()}($i.prototype=new fi).constructor=$i,$i.prototype.createNode=function(t,e,r){return new Bn(t,e,Ji(),r)},en.prototype.exe=function(t,e){return"linear"===this.type&&"percent"===this.mode?this.linearGradient(t,e):"linear"===this.type&&"absolute"===this.mode?this.absoluteLinearGradient(t):"radial"===this.type&&"percent"===this.mode?this.radialGradient(t,e):"radial"===this.type&&"absolute"===this.mode?this.absoluteRadialGradient(t):void console.error("wrong Gradiant type")},en.prototype.linearGradient=function(t,e){var r=t.createLinearGradient(e.x+e.width*(this.config.x1/100),e.y+e.height*(this.config.y1/100),e.x+e.width*(this.config.x2/100),e.y+e.height*(this.config.y2/100));return this.config.colorStops.forEach((function(t){r.addColorStop(t.value/100,t.color)})),r},en.prototype.absoluteLinearGradient=function(t){var e=t.createLinearGradient(this.config.x1,this.config.y1,this.config.x2,this.config.y2);return this.config.colorStops.forEach((function(t){e.addColorStop(t.value,t.color)})),e},en.prototype.radialGradient=function(t,e){var r=t.createRadialGradient(e.x+e.width*(this.config.innerCircle.x/100),e.y+e.height*(this.config.innerCircle.y/100),e.width>e.height?e.width*this.config.innerCircle.r/100:e.height*this.config.innerCircle.r/100,e.x+e.width*(this.config.outerCircle.x/100),e.y+e.height*(this.config.outerCircle.y/100),e.width>e.height?e.width*this.config.outerCircle.r/100:e.height*this.config.outerCircle.r/100);return this.config.colorStops.forEach((function(t){r.addColorStop(t.value/100,t.color)})),r},en.prototype.absoluteRadialGradient=function(t,e){var r=t.createRadialGradient(this.config.innerCircle.x,this.config.innerCircle.y,this.config.innerCircle.r,this.config.outerCircle.x,this.config.outerCircle.y,this.config.outerCircle.r);return this.config.colorStops.forEach((function(t){r.addColorStop(t.value/100,t.color)})),r},en.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,this)},rn.prototype.get=function(t){var e=this.imageData?this.imageData.pixels:[],r=(t.y-1)*(4*this.width)+4*(t.x-1);return"rgba("+e[r]+", "+e[r+1]+", "+e[r+2]+", "+e[r+3]+")"},rn.prototype.put=function(t,e){var r=(t.y-1)*(4*this.width)+4*(t.x-1);return this.imageData.pixels[r]=e[0],this.imageData.pixels[r+1]=e[1],this.imageData.pixels[r+2]=e[2],this.imageData.pixels[r+3]=e[3],this},nn.prototype.setAttr=function(t,e){this.config[t]=e},nn.prototype.exe=function(){return this.mask.execute(),this.mask.dom.ctx.globalCompositeOperation=this.config.globalCompositeOperation||"destination-atop",!0},sn.prototype.exe=function(){return this.clip.execute(),this.clip.dom.ctx.clip(),!0},hn.prototype.repeat=function(t){this.repeatInd=t},hn.prototype.exe=function(){return this.patternObj},un.prototype={render:function(t){var e=this;if(t.transform){var r=t.transform,i=r.scale;void 0===i&&(i=[1,1]);var n=r.skew;void 0===n&&(n=[0,0]);var o=r.translate;void 0===o&&(o=[0,0]);var s=i[0];void 0===s&&(s=1);var a=i[1];void 0===a&&(a=s);var h=n[0];void 0===h&&(h=0);var c=n[1];void 0===c&&(c=h);var u=o[0];void 0===u&&(u=0);var l=o[1];void 0===l&&(l=u),e.ctx.transform(s,h,c,a,u,l),r.rotate&&r.rotate.length>0&&(e.ctx.translate(r.rotate[1]||0,r.rotate[2]||0),e.ctx.rotate(r.rotate[0]*(Math.PI/180)),e.ctx.translate(-r.rotate[1]||0,-r.rotate[2]||0))}for(var f=0;f<e.stack.length;f+=1)e.stack[f].execute()},renderPdf:function(t,e){if(t.transform){var r=t.transform,i=r.scale;void 0===i&&(i=[1,1]);var n=r.skew;void 0===n&&(n=[0,0]);var o=r.translate;void 0===o&&(o=[0,0]);var s=i[0];void 0===s&&(s=1);var a=i[1];void 0===a&&(a=s);var h=n[0];void 0===h&&(h=0);var c=n[1];void 0===c&&(c=h);var u=o[0];void 0===u&&(u=0);var l=o[1];void 0===l&&(l=u),e.transform(s,h,c,a,u,l),r.rotate&&r.rotate.length>0&&(e.translate(r.rotate[1]||0,r.rotate[2]||0),e.rotate(r.rotate[0]*(Math.PI/180)),e.translate(-r.rotate[1]||0,-r.rotate[2]||0))}for(var f=0;f<this.stack.length;f+=1)this.stack[f].executePdf(e)},setAttr:function(t,e){null==e&&null!=this.attr[t]?delete this.attr[t]:this.attr[t]=e},setStyle:function(t,e){null==e&&null!=this.style[t]?delete this.style[t]:this.style[t]=e},applyStyles:function(){"#000000"!==this.ctx.fillStyle&&this.ctx.fill(),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke()},applyStylesPdf:function(t){this.style.fillStyle&&this.style.strokeStyle?t.fillAndStroke(this.style.fillStyle,this.style.strokeStyle):this.style.fillStyle?t.fill(this.style.fillStyle):this.style.strokeStyle&&t.stroke(this.style.strokeStyle)}},ln.prototype=new un,ln.prototype.constructor=ln,ln.prototype.setAttr=function(t,e){var r=this;"src"===t&&("string"==typeof e?(r.image=r.image?r.image:function(t){var e=new Image;return e.crossOrigin="anonymous",e.onload=function(){t.attr.height=t.attr.height?t.attr.height:this.height,t.attr.width=t.attr.width?t.attr.width:this.width,t.imageObj=this,t.nodeExe.attr.onload&&"function"==typeof t.nodeExe.attr.onload&&t.nodeExe.attr.onload.call(t.nodeExe,t.image),t.nodeExe.BBoxUpdate=!0,Vi.vDomChanged(t.nodeExe.vDomIndex)},e.onerror=function(e){t.nodeExe.attr.onerror&&"function"==typeof t.nodeExe.attr.onerror&&t.nodeExe.attr.onerror.call(t.nodeExe,e)},e}(r),r.image.src!==e&&(r.image.src=e)):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement?(r.imageObj=e,r.attr.height=r.attr.height?r.attr.height:e.height,r.attr.width=r.attr.width?r.attr.width:e.width):(e instanceof Bn||e instanceof kn)&&(r.imageObj=e.domEl,r.attr.height=r.attr.height?r.attr.height:e.attr.height,r.attr.width=r.attr.width?r.attr.width:e.attr.width)),this.attr[t]=e,Vi.vDomChanged(this.nodeExe.vDomIndex)},ln.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.x;void 0===i&&(i=0);var n=e.y;void 0===n&&(n=0);var o=e.width;void 0===o&&(o=0);var s=e.height;void 0===s&&(s=0);var a=Ki(r),h=a.translateX,c=a.translateY,u=a.scaleX,l=a.scaleY;t.BBox={x:(h+i)*u,y:(c+n)*l,width:o*u,height:s*l},r&&r.rotate?t.BBoxHit=qi.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},ln.prototype.execute=function(){var t=this.attr,e=t.width;void 0===e&&(e=0);var r=t.height;void 0===r&&(r=0);var i=t.x;void 0===i&&(i=0);var n=t.y;void 0===n&&(n=0),this.imageObj&&this.ctx.drawImage(this.imageObj,i,n,e,r)},ln.prototype.applyStyles=function(){},ln.prototype.in=function(t){var e=this.attr,r=e.width;void 0===r&&(r=0);var i=e.height;void 0===i&&(i=0);var n=e.x;void 0===n&&(n=0);var o=e.y;return void 0===o&&(o=0),t.x>=n&&t.x<=n+r&&t.y>=o&&t.y<=o+i},fn.prototype=new un,fn.prototype.constructor=fn,fn.prototype.fitWidth=function(){this.style.font&&(this.ctx.font=this.style.font);for(var t=this.attr.width,e=[],r="",i=0,n=this.attr.text.split("\n").reduce((function(t,e){return(t=t.concat(e.split(" "))).push("\n"),t}),[]);i<n.length;)0!==i&&(r+=" "),"\n"===n[i]?(e.push(r),r=" "):this.ctx.measureText(r+n[i]).width<t?r+=n[i]:(r&&r.length>0&&e.push(r),r=n[i]),i++;e.push(r),this.textList=e},fn.prototype.text=function(t){this.attr.text=t,this.attr.width&&this.fitWidth()},fn.prototype.updateBBox=function(){var t=this,e=1,r=0,i=t.attr,n=i.x;void 0===n&&(n=0);var o=i.y;void 0===o&&(o=0);var s=i.transform,a=Ki(s),h=a.translateX,c=a.translateY,u=a.scaleX,l=a.scaleY;this.style.font&&(this.ctx.font=this.style.font,e=parseInt(this.style.font.replace(/[^\d.]/g,""),10)||1,t.textHeight=e+3),this.attr.width&&this.textList&&this.textList.length>0?(r=this.attr.width,e*=this.textList.length):r=this.ctx.measureText(this.attr.text).width,"center"===this.style.textAlign?n-=r/2:"right"===this.style.textAlign&&(n-=r),t.width=r,t.height=e,t.x=n,t.y=o,t.BBox={x:(h+n)*u,y:(c+o)*l,width:r*u,height:e*l},s&&s.rotate?t.BBoxHit=qi.rotateBBox(this.BBox,s):t.BBoxHit=this.BBox},fn.prototype.execute=function(){if(void 0!==this.attr.text&&null!==this.attr.text)if(this.textList&&this.textList.length>0)for(var t=0;t<this.textList.length;t++)"#000000"!==this.ctx.fillStyle&&this.ctx.fillText(this.textList[t],this.attr.x,this.attr.y+this.textHeight*(t+1)),"#000000"!==this.ctx.strokeStyle&&this.ctx.strokeText(this.textList[t],this.attr.x,this.attr.y+this.textHeight*(t+1));else"#000000"!==this.ctx.fillStyle&&this.ctx.fillText(this.attr.text,this.attr.x,this.attr.y+this.height),"#000000"!==this.ctx.strokeStyle&&this.ctx.strokeText(this.attr.text,this.attr.x,this.attr.y+this.height)},fn.prototype.executePdf=function(t){if(void 0!==this.attr.text&&null!==this.attr.text)if(this.textList&&this.textList.length>0)for(var e=0;e<this.textList.length;e++)this.style.fillStyle&&(t.text(this.textList[e],this.attr.x,this.attr.y+this.textHeight*(e+1)),t.fill()),this.ctx.strokeStyle&&(t.text(this.textList[e],this.attr.x,this.attr.y+this.textHeight*(e+1)),t.stroke());else this.style.fillStyle&&t.text(this.attr.text,this.attr.x,this.attr.y+this.height),this.style.strokeStyle&&t.strokeText(this.attr.text,this.attr.x,this.attr.y+this.height)},fn.prototype.applyStyles=function(){},fn.prototype.in=function(t){var e=this,r=e.x;void 0===r&&(r=0);var i=e.y;void 0===i&&(i=0);var n=e.width;void 0===n&&(n=0);var o=e.height;return void 0===o&&(o=0),t.x>=r&&t.x<=r+n&&t.y>=i&&t.y<=i+o};var dn=function(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="circle",i.stack=[i]};(dn.prototype=new un).constructor=dn,dn.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.r;void 0===i&&(i=0);var n=e.cx;void 0===n&&(n=0);var o=e.cy;void 0===o&&(o=0);var s=Ki(r),a=s.translateX,h=s.translateY,c=s.scaleX,u=s.scaleY;t.BBox={x:a+(n-i)*c,y:h+(o-i)*u,width:2*i*c,height:2*i*u},r&&r.rotate?t.BBoxHit=qi.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},dn.prototype.execute=function(){var t=this.attr,e=t.r;void 0===e&&(e=0);var r=t.cx;void 0===r&&(r=0);var i=t.cy;void 0===i&&(i=0),this.ctx.beginPath(),this.ctx.arc(r,i,e,0,2*Math.PI,!1),this.applyStyles(),this.ctx.closePath()},dn.prototype.executePdf=function(t){var e=this.attr,r=e.r;void 0===r&&(r=0);var i=e.cx;void 0===i&&(i=0);var n=e.cy;void 0===n&&(n=0),t.circle(parseInt(i),parseInt(n),parseInt(r)),this.applyStylesPdf(t)},dn.prototype.in=function(t,e){var r=this.attr,i=r.r;void 0===i&&(i=0);var n=r.cx;void 0===n&&(n=0);var o=r.cy;return void 0===o&&(o=0),Math.sqrt((t.x-n)*(t.x-n)+(t.y-o)*(t.y-o))<=i};var pn=function(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="line",i.stack=[i]};function yn(t,e,r){var i=this;i.ctx=t,i.attr=e,i.style=r,i.nodeName="polyline",i.stack=[i]}(pn.prototype=new un).constructor=pn,pn.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.x1;void 0===i&&(i=0);var n=e.y1;void 0===n&&(n=0);var o=e.x2;void 0===o&&(o=0);var s=e.y2;void 0===s&&(s=0);var a=Ki(r),h=a.translateX,c=a.translateY,u=a.scaleX,l=a.scaleY;t.BBox={x:h+(i<o?i:o)*u,y:c+(n<s?n:s)*l,width:Math.abs(o-i)*u,height:Math.abs(s-n)*l},r&&r.rotate?t.BBoxHit=qi.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},pn.prototype.execute=function(){var t=this.ctx,e=this.attr,r=e.x1;void 0===r&&(r=0);var i=e.y1;void 0===i&&(i=0);var n=e.x2;void 0===n&&(n=0);var o=e.y2;void 0===o&&(o=0),t.beginPath(),t.moveTo(r,i),t.lineTo(n,o),this.applyStyles(),t.closePath()},pn.prototype.executePdf=function(t){var e=this.attr,r=e.x1;void 0===r&&(r=0);var i=e.y1;void 0===i&&(i=0);var n=e.x2;void 0===n&&(n=0);var o=e.y2;void 0===o&&(o=0),t.moveTo(r,i),t.lineTo(n,o),this.applyStylesPdf(t)},pn.prototype.in=function(t){var e=this.attr,r=e.x1;void 0===r&&(r=0);var i=e.y1;void 0===i&&(i=0);var n=e.x2;void 0===n&&(n=0);var o=e.y2;return void 0===o&&(o=0),parseFloat(qi.getDistance({x:r,y:i},t)+qi.getDistance(t,{x:n,y:o})).toFixed(1)===parseFloat(qi.getDistance({x:r,y:i},{x:n,y:o})).toFixed(1)},yn.prototype=new un,yn.constructor=yn,yn.prototype.execute=function(){var t;if(this.attr.points&&0!==this.attr.points.length){this.ctx.beginPath(),this.ctx.moveTo(this.attr.points[0].x,this.attr.points[0].y);for(var e=1;e<this.attr.points.length;e++)t=this.attr.points[e],this.ctx.lineTo(t.x,t.y);this.applyStyles(),this.ctx.closePath()}},yn.prototype.executePdf=function(t){var e;if(this.attr.points&&0!==this.attr.points.length){t.moveTo(this.attr.points[0].x,this.attr.points[0].y);for(var r=1;r<this.attr.points.length;r++)e=this.attr.points[r],t.lineTo(e.x,e.y);this.applyStylesPdf(t)}},yn.prototype.updateBBox=tn,yn.prototype.in=function(t){for(var e=!1,r=0,i=this.attr.points.length;r<=i-2;r++){var n=this.attr.points[r],o=this.attr.points[r+1];e=e||parseFloat(qi.getDistance({x:n.x,y:n.y},t)+qi.getDistance(t,{x:o.x,y:o.y})).toFixed(1)===parseFloat(qi.getDistance({x:n.x,y:n.y},{x:o.x,y:o.y})).toFixed(1)}return e};var vn=function(t,e,r){var i=this;return i.ctx=t,i.angle=0,i.nodeName="path",i.attr=e,i.style=r,i.attr.d&&(Je.isTypePath(i.attr.d)?(i.path=i.attr.d,i.attr.d=i.attr.d.fetchPathString()):i.path=Je.instance(i.attr.d),i.pathNode=new Path2D(i.attr.d)),i.stack=[i],i};function gn(t){if("[object Array]"===Object.prototype.toString.call(t)){if(!t||0!==t.length){var e=new Path2D;e.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;r++)e.lineTo(t[r].x,t[r].y);return e.closePath(),{path:e,points:t,rawPoints:t.map((function(t){return[t.x,t.y]})),execute:function(t){t.beginPath();var e=this.points;t.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;r++)t.lineTo(e[r].x,e[r].y);t.closePath()}}}}else console.error("Points expected as array [{x: , y:}]")}(vn.prototype=new un).constructor=vn,vn.prototype.updateBBox=function(){var t=this,e=t.attr.transform,r=Ki(e),i=r.translateX,n=r.translateY,o=r.scaleX,s=r.scaleY;t.BBox=t.path?t.path.BBox:{x:0,y:0,width:0,height:0},t.BBox.x=i+t.BBox.x*o,t.BBox.y=n+t.BBox.y*s,t.BBox.width*=o,t.BBox.height*=s,e&&e.rotate?t.BBoxHit=qi.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},vn.prototype.setAttr=function(t,e){this.attr[t]=e,"d"===t&&(Je.isTypePath(e)?(this.path=e,this.attr.d=e.fetchPathString()):this.path=Je.instance(this.attr.d),this.pathNode=new Path2D(this.attr.d))},vn.prototype.getPointAtLength=function(t){return this.path?this.path.getPointAtLength(t):{x:0,y:0}},vn.prototype.getAngleAtLength=function(t){return this.path?this.path.getAngleAtLength(t):0},vn.prototype.getTotalLength=function(){return this.path?this.path.getTotalLength():0},vn.prototype.execute=function(){this.attr.d&&("#000000"!==this.ctx.fillStyle||"#000000"!==this.ctx.strokeStyle?("#000000"!==this.ctx.fillStyle&&this.ctx.fill(this.pathNode),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke(this.pathNode)):this.path.execute(this.ctx))},vn.prototype.executePdf=function(t){this.attr.d&&t.path(this.attr.d),this.applyStylesPdf(t)},vn.prototype.applyStyles=function(){},vn.prototype.in=function(t){var e=!1;return this.attr.d&&this.pathNode?(this.ctx.save(),this.ctx.scale(1/this.ctx.pixelRatio,1/this.ctx.pixelRatio),e=this.ctx.isPointInPath(this.pathNode,t.x,t.y),this.ctx.restore(),e):e};var xn=function(t,e,r){var i=this;return i.ctx=t,i.nodeName="polygon",i.attr=e,i.style=r,i.stack=[i],i.attr.points&&(i.polygon=gn(i.attr.points)),this};(xn.prototype=new un).constructor=xn,xn.prototype.setAttr=function(t,e){this.attr[t]=e,"points"===t&&(this.polygon=gn(this.attr.points),this.polygon&&(this.attr.points=this.polygon.points))},xn.prototype.updateBBox=tn,xn.prototype.execute=function(){this.polygon&&("#000000"!==this.ctx.fillStyle||"#000000"!==this.ctx.strokeStyle?("#000000"!==this.ctx.fillStyle&&this.ctx.fill(this.polygon.path),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke(this.polygon.path)):this.polygon.execute(this.ctx))},xn.prototype.executePdf=function(t){this.polygon&&((this.style.fillStyle||this.style.strokeStyle)&&t.polygon.apply(t,this.polygon.rawPoints),this.applyStylesPdf(t))},xn.prototype.applyStyles=function(){},xn.prototype.in=function(t){var e=!1;return!!this.polygon&&(this.ctx.save(),this.ctx.scale(1/this.ctx.pixelRatio,1/this.ctx.pixelRatio),e=this.style.fillStyle?this.ctx.isPointInPath(this.polygon.path,t.x,t.y):e,this.ctx.restore(),e)};var mn=function(t,e,r){var i=this;return i.ctx=t,i.nodeName="ellipse",i.attr=e,i.style=r,i.stack=[i],this};(mn.prototype=new un).constructor=mn,mn.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.cx;void 0===i&&(i=0);var n=e.cy;void 0===n&&(n=0);var o=e.rx;void 0===o&&(o=0);var s=e.ry;void 0===s&&(s=0);var a=Ki(r),h=a.translateX,c=a.translateY,u=a.scaleX,l=a.scaleY;t.BBox={x:h+(i-o)*u,y:c+(n-s)*l,width:2*o*u,height:2*s*l},r&&r.rotate?t.BBoxHit=qi.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},mn.prototype.execute=function(){var t=this.ctx,e=this.attr,r=e.cx;void 0===r&&(r=0);var i=e.cy;void 0===i&&(i=0);var n=e.rx;void 0===n&&(n=0);var o=e.ry;void 0===o&&(o=0),t.beginPath(),t.ellipse(r,i,n,o,0,0,2*Math.PI),this.applyStyles(),t.closePath()},mn.prototype.executePdf=function(t){var e=this.attr,r=e.cx;void 0===r&&(r=0);var i=e.cy;void 0===i&&(i=0);var n=e.rx;void 0===n&&(n=0);var o=e.ry;void 0===o&&(o=0),t.ellipse(r,i,n,o),this.applyStylesPdf(t)},mn.prototype.in=function(t){var e=this.attr,r=e.cx;void 0===r&&(r=0);var i=e.cy;void 0===i&&(i=0);var n=e.rx;void 0===n&&(n=0);var o=e.ry;return void 0===o&&(o=0),(t.x-r)*(t.x-r)/(n*n)+(t.y-i)*(t.y-i)/(o*o)<=1};var wn=function(t,e,r){var i=this;return i.ctx=t,i.nodeName="rect",i.attr=e,i.style=r,i.stack=[i],this};function bn(t,e){var r=e.x;void 0===r&&(r=0);var i=e.y;void 0===i&&(i=0);var n=e.width;void 0===n&&(n=0);var o=e.height;void 0===o&&(o=0);var s=e.rx;void 0===s&&(s=0);var a=e.ry;void 0===a&&(a=0),t.beginPath&&t.beginPath(),t.moveTo(r+s,i),t.lineTo(r+n-s,i),t.quadraticCurveTo(r+n,i,r+n,i+a),t.lineTo(r+n,i+o-a),t.quadraticCurveTo(r+n,i+o,r+n-s,i+o),t.lineTo(r+s,i+o),t.quadraticCurveTo(r,i+o,r,i+o-a),t.lineTo(r,i+a),t.quadraticCurveTo(r,i,r+s,i),t.closePath&&t.closePath()}(wn.prototype=new un).constructor=wn,wn.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.x;void 0===i&&(i=0);var n=e.y;void 0===n&&(n=0);var o=e.width;void 0===o&&(o=0);var s=e.height;void 0===s&&(s=0);var a=Ki(r),h=a.translateX,c=a.translateY,u=a.scaleX,l=a.scaleY;t.BBox={x:h+i*u,y:c+n*l,width:o*u,height:s*l},r&&r.rotate?t.BBoxHit=qi.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},wn.prototype.applyStyles=function(){},wn.prototype.executePdf=function(t){var e=this.attr,r=e.x;void 0===r&&(r=0);var i=e.y;void 0===i&&(i=0);var n=e.width;void 0===n&&(n=0);var o=e.height;void 0===o&&(o=0);var s=e.rx;void 0===s&&(s=0);var a=e.ry;void 0===a&&(a=0);var h=this.style,c=h.fillStyle,u=h.strokeStyle;c||u?(c&&(s||a?bn(t,{x:r,y:i,width:n,height:o,rx:s,ry:a}):t.rect(r,i,n,o)),u&&(s||a?bn(t,{x:r,y:i,width:n,height:o,rx:s,ry:a}):t.rect(r,i,n,o))):t.rect(r,i,n,o),this.applyStylesPdf(t)},wn.prototype.execute=function(){var t=this.ctx,e=this.attr,r=e.x;void 0===r&&(r=0);var i=e.y;void 0===i&&(i=0);var n=e.width;void 0===n&&(n=0);var o=e.height;void 0===o&&(o=0);var s=e.rx;void 0===s&&(s=0);var a=e.ry;void 0===a&&(a=0),"#000000"!==t.fillStyle||"#000000"!==t.strokeStyle?("#000000"!==t.fillStyle&&(s||a?(bn(t,{x:r,y:i,width:n,height:o,rx:s,ry:a}),t.fill()):t.fillRect(r,i,n,o)),"#000000"!==t.strokeStyle&&(s||a?(bn(t,{x:r,y:i,width:n,height:o,rx:s,ry:a}),t.stroke()):t.strokeRect(r,i,n,o))):t.rect(r,i,n,o)},wn.prototype.in=function(t){var e=this.attr,r=e.x;void 0===r&&(r=0);var i=e.y;void 0===i&&(i=0);var n=e.width;void 0===n&&(n=0);var o=e.height;return void 0===o&&(o=0),t.x>=r&&t.x<=r+n&&t.y>=i&&t.y<=i+o};var An=function(t,e,r){var i=this;return i.nodeName="g",i.ctx=t,i.attr=e,i.style=r,i.stack=new Array(0),this};(An.prototype=new un).constructor=An,An.prototype.updateBBox=function(t){var e,r,i,n,o=this,s=Ki(o.attr.transform),a=s.translateX,h=s.translateY,c=s.scaleX,u=s.scaleY;if(o.BBox={},t&&t.length>0)for(var l,f,d,p=0;p<t.length;p+=1)f=(l=t[p]).dom.BBoxHit.x,d=l.dom.BBoxHit.y,e=void 0===e||e>f?f:e,i=void 0===i||i>d?d:i,r=void 0===r||r<f+l.dom.BBoxHit.width?f+l.dom.BBoxHit.width:r,n=void 0===n||n<d+l.dom.BBoxHit.height?d+l.dom.BBoxHit.height:n;e=void 0===e?0:e,i=void 0===i?0:i,r=void 0===r?0:r,n=void 0===n?0:n,o.BBox.x=a+e*c,o.BBox.y=h+i*u,o.BBox.width=Math.abs(r-e)*c,o.BBox.height=Math.abs(n-i)*u,o.attr.transform&&o.attr.transform.rotate?o.BBoxHit=qi.rotateBBox(this.BBox,this.attr.transform):o.BBoxHit=this.BBox},An.prototype.child=function(t){var e=this,r=t;r instanceof Bn?(r.dom.parent=e,e.stack[e.stack.length]=r):r instanceof $i?r.stack.forEach((function(t){t.dom.parent=e,e.stack[e.stack.length]=t})):console.log("wrong Object")},An.prototype.in=function(t){var e=t.x,r=t.y,i=this.BBox,n=Ki(this.attr.transform),o=n.translateX,s=n.translateY,a=n.scaleX,h=n.scaleY;return e>=(i.x-o)/a&&e<=(i.x-o+i.width)/a&&r>=(i.y-s)/h&&r<=(i.y-s+i.height)/h};var Bn=function(t,e,r,i){switch(this.style=e.style||{},this.setStyle(e.style),this.attr=e.attr||{},this.id=r,this.nodeName=e.el,this.nodeType="CANVAS",this.children=[],this.events={},this.ctx=t,this.vDomIndex=i,this.bbox=void 0===e.bbox||e.bbox,e.el){case"circle":this.dom=new dn(this.ctx,this.attr,this.style);break;case"rect":this.dom=new wn(this.ctx,this.attr,this.style);break;case"line":this.dom=new pn(this.ctx,this.attr,this.style);break;case"polyline":this.dom=new yn(this.ctx,this.attr,this.style);break;case"path":this.dom=new vn(this.ctx,this.attr,this.style);break;case"group":case"g":this.dom=new An(this.ctx,this.attr,this.style);break;case"text":this.dom=new fn(this.ctx,this.attr,this.style);break;case"image":this.dom=new ln(this.ctx,this.attr,this.style,e.onload,e.onerror,this);break;case"polygon":this.dom=new xn(this.ctx,this.attr,this.style);break;case"ellipse":this.dom=new mn(this.ctx,this.attr,this.style);break;default:this.dom=null}this.dom.nodeExe=this,this.BBoxUpdate=!0};function En(t){return sr.RGBAInstanceCheck(t)&&(t=t.rgba),"#000"===t||"#000000"===t||"black"===t?"rgb(1, 1, 1)":t}function Tn(t,e){var r=document.createElement("canvas");r.setAttribute("height",e),r.setAttribute("width",t),this.canvas=r,this.context=this.canvas.getContext("2d")}function Sn(t,e){var r=new Image;return r.crossOrigin="anonymous",r.src=e,t?(r.onload=function(){t&&(t.attr&&(t.attr.height=t.attr.height?t.attr.height:this.naturalHeight,t.attr.width=t.attr.width?t.attr.width:this.naturalWidth),t instanceof kn&&t.setSize(t.attr.width,t.attr.height),t.imageObj=this,t.attr&&t.attr.onload&&"function"==typeof t.attr.onload&&t.attr.onload.call(t,t.image),t.asyncOnLoad&&"function"==typeof t.asyncOnLoad&&t.asyncOnLoad(t.image),_n(t))},r.onerror=function(e){console.error(e),t.nodeExe.attr.onerror&&"function"==typeof t.nodeExe.attr.onerror&&t.nodeExe.attr.onerror.call(t.nodeExe,e),t.asyncOnLoad&&"function"==typeof t.asyncOnLoad&&t.asyncOnLoad(t.image)},r):r}function _n(t){t.imageObj&&(t.attr&&t.attr.clip?function(t){var e=t.ctx,r=t.attr,i=r.clip,n=r.width;void 0===n&&(n=0);var o=r.height;void 0===o&&(o=0);var s=i.sx;void 0===s&&(s=0);var a=i.sy;void 0===a&&(a=0);var h=i.swidth;void 0===h&&(h=n);var c=i.sheight;void 0===c&&(c=o);e.clearRect(0,0,n,o),e.drawImage(t.imageObj,s,a,h,c,0,0,n,o)}(t):t.execute(),t.attr&&t.attr.filter&&function(t){var e=t.ctx,r=t.attr,i=r.width;void 0===i&&(i=0);var n=r.height;void 0===n&&(n=0);var o=e.getImageData(0,0,i,n);e.putImageData(t.attr.filter(o),0,0)}(t),Vi.vDomChanged(t.nodeExe.vDomIndex))}function kn(t,e){void 0===e&&(e={});var r=this;r.attr=Object.assign({},e.attr)||{},r.style=Object.assign({},e.style)||{};var i=r.attr.scale||1;for(var n in r.rImageObj=new Tn((r.attr.width||1)*i,(r.attr.height||1)*i),r.ctx=r.rImageObj.context,r.domEl=r.rImageObj.canvas,r.imageArray=[],r.seekIndex=0,r.nodeName="Sprite",r.nodeExe=t,r.attr)r.setAttr(n,r.attr[n]);Vi.vDomChanged(t.vDomIndex)}function Mn(t,e,r){void 0===e&&(e={}),void 0===r&&(r={});var i=t?document.querySelector(t):null,n=i?i.clientHeight:0,o=i?i.clientWidth:0,a=document.createElement("canvas"),h=a.getContext("2d",e),c=r.enableEvents;void 0===c&&(c=!0);var u=r.autoUpdate;void 0===u&&(u=!0);var l=r.enableResize;void 0===l&&(l=!0);var f=function(t){var e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return e<1?1:e}(h);h.pixelRatio=f;var d,p=function(t){t.clearRect(0,0,o*f,n*f)};a.setAttribute("height",n*f),a.setAttribute("width",o*f),a.style.height=n+"px",a.style.width=o+"px",a.style.position="absolute";var y,v,g,x,m=999999;i?(i.appendChild(a),d=new w,u&&(m=Vi.addVdom(d))):c=!1;var b=new Bn(h,{el:"g",attr:{id:"rootNode"}},Ji(),m);d&&d.rootNode(b);var A=b.execute.bind(b),B=b.executePdf.bind(b);b.container=i,b.domEl=a,b.height=n,b.width=o,b.type="CANVAS",b.ctx=h,b.setClear=function(t){p=t},b.setAttr=function(t,e){"viewBox"===t&&this.setViewBox.apply(this,e.split(",")),a.setAttribute(t,e),this.attr[t]=e},b.enableEvents=function(t){c=t},b.setStyle=function(t,e){this.domEl.style[t]=e},b.addDependentLayer=function(t){if(t instanceof Bn){var e=t.attr.id?t.attr.id:"dep-"+Math.ceil(1e3*Math.random());t.setAttr("id",e),t.vDomIndex=this.vDomIndex+":"+e,this.prependChild([t])}};var E=function(e){document.querySelector(t)?(n=y||e.height,o=v||e.width,b.width=o,b.height=n,T(b.domEl,o,n),g&&g(),b.execute()):yi(b)},T=function(t,e,r){t.setAttribute("height",r*f),t.setAttribute("width",e*f),t.style.height=r+"px",t.style.width=e+"px"};if(b.setPixelRatio=function(t){f=t,this.ctx.pixelRatio=f,T(this.domEl,this.width,this.height)},b.onResize=function(t){g=t},b.onChange=function(t){x=t},b.exportPdf=function(t){var e=new s.default({size:[this.width,this.height]}),r=e.pipe(Gi());B(e),e.end(),r.on("finish",(function(){t(r.toBlobURL("application/pdf"))}))},b.toDataURL=function(t){return this.domEl.toDataURL(t)},b.invokeOnChange=function(){},b.setSize=function(t,e){y=e,v=t,o=t,n=e,this.width=o,this.height=n,T(this.domEl,o,n),this.execute()},b.setViewBox=function(t,e,r,i){},b.getPixels=function(t,e,r,i){return new rn(this.ctx.getImageData(t,e,r,i),r,i)},b.putPixels=function(t,e,r){if(t instanceof rn)return this.ctx.putImageData(t.imageData,e,r)},b.clear=function(){p()},b.setContext=function(t,e){this.ctx[t]&&"function"==typeof this.ctx[t]?this.ctx[t].apply(null,e):this.ctx[t]&&(this.ctx[t]=e)},b.createPattern=cn,b.createClip=an,b.createMask=on,b.execute=function(){p(h),h.setTransform(f,0,0,f,0,0),this.updateBBox(),A(),x&&this.stateModified&&x(),this.stateModified=!1},b.update=function(){this.execute()},b.createTexture=function(t){return new kn(this,t)},b.createAsyncTexture=function(t){var e=this;return new Promise((function(r,i){var n=new kn(e,t);n.onLoad((function(){r(n)}))}))},b.destroy=function(){var e=document.querySelector(t);e&&e.contains(a)&&e.removeChild(a),Vi.removeVdom(m),yi(b,E)},c){var S=new ar(b);a.addEventListener("mousemove",(function(t){t.preventDefault(),S.mousemoveCheck(t)})),a.addEventListener("mousedown",(function(t){S.mousedownCheck(t)})),a.addEventListener("mouseup",(function(t){S.mouseupCheck(t)})),a.addEventListener("mouseleave",(function(t){S.mouseleaveCheck(t)})),a.addEventListener("contextmenu",(function(t){S.contextmenuCheck(t)})),a.addEventListener("touchstart",(function(t){S.touchstartCheck(t)})),a.addEventListener("touchend",(function(t){S.touchendCheck(t)})),a.addEventListener("touchmove",(function(t){t.preventDefault(),S.touchmoveCheck(t)})),a.addEventListener("touchcancel",(function(t){S.touchcancelCheck(t)})),a.addEventListener("wheel",(function(t){S.wheelEventCheck(t)})),a.addEventListener("pointerdown",(function(t){S.addPointer(t),S.pointerdownCheck(t)})),a.addEventListener("pointerup",(function(t){S.removePointer(t),S.pointerupCheck(t)})),a.addEventListener("pointermove",(function(t){t.preventDefault(),S.pointermoveCheck(t)}))}return Vi.execute(),l&&b.container&&pi(b,E),b}Bn.prototype=new ci,Bn.prototype.node=function(){return this.updateBBox(),this.dom},Bn.prototype.stylesExe=function(){var t,e,r=this.style;for(e in this.resolvedStyle={},r)"string"==typeof r[e]||"number"==typeof r[e]?t=r[e]:"object"==typeof r[e]?t=r[e]instanceof en||r[e]instanceof hn||r[e]instanceof sn||r[e]instanceof nn?r[e].exe(this.ctx,this.dom.BBox):r[e]:"function"==typeof r[e]?(r[e]=r[e].call(this,this.dataObj),t=r[e]):console.log("unkonwn Style"),"function"!=typeof this.ctx[e]?this.ctx[e]=t:"function"==typeof this.ctx[e]?this.ctx[e](t):console.log("junk comp"),this.resolvedStyle[e]=t},Bn.prototype.stylesExePdf=function(t){if(t)for(var e in this.resolvedStyle)"function"!=typeof t[Hi[e]]?t[Hi[e]]=this.resolvedStyle[e]:"function"==typeof t[Hi[e]]?t[Hi[e]](this.resolvedStyle[e]):console.log("junk comp")},Bn.prototype.remove=function(){var t=this.dom.parent.children,e=t.indexOf(this);-1!==e&&t.splice(e,1),this.dom.parent.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex)},Bn.prototype.attributesExe=function(){this.dom.render(this.attr)},Bn.prototype.attributesExePdf=function(t){this.dom.renderPdf(this.attr,t)},Bn.prototype.setStyle=function(t,e){if(2===arguments.length)null==e&&null!=this.style[t]?delete this.style[t]:this.style[t]=En(e);else if(1===arguments.length&&"object"==typeof t)for(var r=Object.keys(t),i=0,n=r.length;i<n;i+=1)null==t[r[i]]&&null!=this.style[r[i]]?delete this.style[r[i]]:this.style[r[i]]=En(t[r[i]]);return Vi.vDomChanged(this.vDomIndex),this},Bn.prototype.setAttr=function(t,e){if(2===arguments.length)null==e&&null!=this.attr[t]?delete this.attr[t]:this.attr[t]=e,this.dom.setAttr(t,e);else if(1===arguments.length&&"object"==typeof t)for(var r=Object.keys(t),i=0;i<r.length;i+=1)null==t[r[i]]&&null!=this.attr[r[i]]?delete this.attr[r[i]]:this.attr[r[i]]=t[r[i]],this.dom.setAttr(r[i],t[r[i]]);return this.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex),this},Bn.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex),this},Bn.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),t.length<1?null:(this.attr.transform.scale=[t[0],t[1]?t[1]:t[0]],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex),this)},Bn.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex),this},Bn.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skew||(this.attr.transform.skew=[]),this.attr.transform.skew[0]=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex),this},Bn.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skew||(this.attr.transform.skew=[]),this.attr.transform.skew[1]=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex),this},Bn.prototype.execute=function(){if("none"!==this.style.display){if(this.ctx.save(),this.stylesExe(),this.attributesExe(),this.dom instanceof An)for(var t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();this.ctx.restore()}},Bn.prototype.executePdf=function(t){if("none"!==this.style.display){if(t.save(),this.stylesExePdf(t),this.attributesExePdf(t),this.dom instanceof An)for(var e=0,r=this.children.length;e<r;e+=1)this.children[e].executePdf(t);t.restore()}},Bn.prototype.prependChild=function(t){var e=this,r=t;if(e.dom instanceof An)for(var i=0;i<r.length;i+=1)r[i].dom.parent=e,e.children.unshift(r[i]);else console.error("Trying to insert child to nonGroup Element");return this.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex),e},Bn.prototype.child=function(t){var e=this,r=t;if(e.dom instanceof An)for(var i=0;i<r.length;i+=1)r[i].dom.parent=e,e.children[e.children.length]=r[i];else console.error("Trying to insert child to nonGroup Element");return this.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex),e},Bn.prototype.updateBBox=function(){var t;if(this.bbox){for(var e=0,r=this.children.length;e<r;e+=1)this.children[e]&&(t=this.children[e].updateBBox()||t);if(this.BBoxUpdate||t)return this.dom.updateBBox(this.children),this.BBoxUpdate=!1,!0}return!1},Bn.prototype.in=function(t){return this.dom.in(t)},Bn.prototype.on=function(t,e){if(this.events||(this.events={}),!e&&this.events[t])delete this.events[t];else if(e)if("function"==typeof e){var r=e.bind(this);this.events[t]=function(t){r(t)}}else"object"==typeof e&&(this.events[t]=e,e.constructor!==Zi.constructor&&e.constructor!==Qi.constructor||e.bindMethods(this));return this},Bn.prototype.animatePathTo=Je.animatePathTo,Bn.prototype.morphTo=Je.morphTo,Bn.prototype.vDomIndex=null,Bn.prototype.createRadialGradient=function(t){return new en(t,"radial")},Bn.prototype.createLinearGradient=function(t){return new en(t,"linear")},Bn.prototype.createEls=function(t,e){var r=new $i({type:"CANVAS",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(r.stack),Vi.vDomChanged(this.vDomIndex),r},Bn.prototype.text=function(t){return this.dom instanceof fn&&this.dom.text(t),Vi.vDomChanged(this.vDomIndex),this},Bn.prototype.createEl=function(t){var e=new Bn(this.dom.ctx,t,Ji(),this.vDomIndex);return this.child([e]),Vi.vDomChanged(this.vDomIndex),e},Bn.prototype.removeChild=function(t){var e=-1;if(this.children.forEach((function(r,i){r===t&&(e=i)})),-1!==e){var r=this.children.splice(e,1)[0];this.dom.removeChild(r.dom)}this.BBoxUpdate=!0,Vi.vDomChanged(this.vDomIndex)},Bn.prototype.getBBox=function(){return{x:this.dom.BBox.x,y:this.dom.BBox.y,width:this.dom.BBox.width,height:this.dom.BBox.height}},Bn.prototype.getPixels=function(){return new rn(this.ctx.getImageData(this.dom.BBox.x,this.dom.BBox.y,this.dom.BBox.width,this.dom.BBox.height),this.dom.BBox.width,this.dom.BBox.height)},Bn.prototype.putPixels=function(t){if(t instanceof rn)return this.ctx.putImageData(t.imageData,this.dom.BBox.x,this.dom.BBox.y)},Tn.prototype.setAttr=function(t,e){"height"===t?this.canvas.setAttribute("height",e):"width"===t&&this.canvas.setAttribute("width",e)},kn.prototype=new ci,kn.prototype.constructor=kn,kn.prototype.setSize=function(t,e){var r=this.attr.scale||1;this.rImageObj.setAttr("width",t*r),this.rImageObj.setAttr("height",e*r),_n(this)},kn.prototype.setAttr=function(t,e){var r=this;if("src"===t)if(Array.isArray(e)){var i=e.map((function(t){return new Promise((function(e,r){var i=Sn(null,t);i.onload=function(){e(this)},i.onerror=function(t){r(t)}}))}));Promise.all(i).then((function(t){r.image=t,r.imageObj=t[r.seekIndex],r.attr&&r.attr.onload&&"function"==typeof r.attr.onload&&r.attr.onload.call(r,t),r.asyncOnLoad&&"function"==typeof r.asyncOnLoad&&r.asyncOnLoad(t),_n(r)}))}else"string"==typeof e?(r.image||(r.image=Sn(r,e)),r.image.src!==e&&(r.image.src=e)):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement?(r.imageObj=e,r.attr.height=r.attr.height?r.attr.height:e.height,r.attr.width=r.attr.width?r.attr.width:e.width,_n(r)):(e instanceof Bn||e instanceof kn)&&(r.imageObj=e.domEl,r.attr.height=r.attr.height?r.attr.height:e.attr.height,r.attr.width=r.attr.width?r.attr.width:e.attr.width,_n(r));return this.attr[t]=e,"height"!==t&&"width"!==t||(this.rImageObj.setAttr(t,e),_n(r)),"clip"!==t&&"filter"!==t||_n(r),r},kn.prototype.onLoad=function(t){this.asyncOnLoad=t},kn.prototype.clone=function(){var t=Object.assign({},this.attr),e=Object.assign({},this.style);return t.src=this,new kn(this.nodeExe,{attr:t,style:e})},kn.prototype.execute=function(){var t=this.attr,e=t.width;void 0===e&&(e=0);var r=t.height;void 0===r&&(r=0);var i=this.attr.draw||{},n=this.attr.scale||1;this.ctx.clearRect(0,0,e*n,r*n),this.ctx.drawImage(this.imageObj,i.x||0,i.y||0,(i.width||e)*n,(i.height||r)*n)},kn.prototype.exportAsDataUrl=function(t,e){return void 0===t&&(t="image/png"),void 0===e&&(e=1),this.rImageObj?this.rImageObj.toDataURL(t,e):this},kn.prototype.next=function(t){Array.isArray(this.image)&&(t<this.image.length&&t>=0?this.seekIndex=t:this.seekIndex<this.image.length-1&&this.seekIndex++,this.imageObj=this.image[this.seekIndex],_n(this))};var Cn={canvasLayer:Mn,pdfLayer:function(t,e,r){}};function Ln(t){var e;switch(t){case"point":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in float a_size;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      gl_PointSize = a_size;\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                        fragColor = v_color;\n                    }\n                    "};break;case"circle":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in float a_radius;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      gl_PointSize = a_radius; // * a_transform.z * u_transform.z;\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                      float r = 0.0, delta = 0.0, alpha = 1.0;\n                      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n                      r = dot(cxy, cxy);\n                      if(r > 1.0) {\n                        discard;\n                      }\n                      delta = 0.09;\n                      alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n                      fragColor = v_color * alpha;\n                    }\n                    "};break;case"image":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec2 a_texCoord;\n                    uniform mat3 u_transformMatrix;\n                    out vec2 v_texCoord;\n\n                    void main() {\n                      gl_Position = vec4(u_transformMatrix * vec3(a_position, 1), 1);\n                      v_texCoord = a_texCoord;\n                    }\n          ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    uniform sampler2D u_image;\n                    uniform float u_opacity;\n                    in vec2 v_texCoord;\n                    out vec4 fragColor;\n                    void main() {\n                      vec4 col = texture(u_image, v_texCoord);\n                      if (col.a == 0.0) {\n                        discard;\n                      } else {\n                        fragColor = col;\n                        fragColor.a *= u_opacity;\n                      }\n                    }\n                    "};break;case"polyline":case"polygon":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    uniform mat3 u_transformMatrix;\n\n                    void main() {\n                      gl_Position = vec4(u_transformMatrix * vec3(a_position, 1), 1);\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    uniform vec4 u_color;\n                    out vec4 fragColor;\n                    void main() {\n                        fragColor = u_color;\n                    }\n                    "};break;case"rect":default:e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                      fragColor = v_color;\n                    }\n                    "};break;case"line":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                        fragColor = v_color;\n                    }\n                    "}}return e}var Dn,Pn=U,In=m,zn=Ui.zoom(),Rn=Ui.drag();var On=0;function jn(){return On+=1}function Nn(t){var e={translateX:0,translateY:0,scaleX:1,scaleY:1,angle:0};return t&&(t.translate&&t.translate.length>0&&(e.translateX=t.translate[0],e.translateY=t.translate[1]),t.scale&&t.scale.length>0&&(e.scaleX=t.scale[0],e.scaleY=t.scale[1]||e.scaleX),t.rotate&&t.rotate.length>0&&(e.angle=t.rotate[0])),e}function Fn(){var t=this,e=t.attr,r=e.transform,i=e.points;void 0===i&&(i=[]);var n=Nn(r),o=n.translateX,s=n.translateY,a=n.scaleX,h=n.scaleY;if(i&&i.length>0){for(var c=i[0].x,u=i[0].x,l=i[0].y,f=i[0].y,d=1;d<i.length;d+=1)c>i[d].x&&(c=i[d].x),u<i[d].x&&(u=i[d].x),l>i[d].y&&(l=i[d].y),f<i[d].y&&(f=i[d].y);t.BBox={x:o+c*a,y:s+l*h,width:(u-c)*a,height:(f-l)*h}}else t.BBox={x:0,y:0,width:0,height:0};r&&r.rotate?t.BBoxHit=Pn.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox}var Un=function(t,e){var r=t[0],i=t[1],n=t[2],o=t[3],s=t[4],a=t[5],h=t[6],c=t[7],u=t[8],l=e[0],f=e[1],d=e[2],p=e[3],y=e[4],v=e[5],g=e[6],x=e[7],m=e[8];return[l*r+f*o+d*h,l*i+f*s+d*c,l*n+f*a+d*u,p*r+y*o+v*h,p*i+y*s+v*c,p*n+y*a+v*u,g*r+x*o+m*h,g*i+x*s+m*c,g*n+x*a+m*u]},Yn=function(t,e,r){return r&&r[6]===t&&r[7]===e?r:[1,0,0,0,1,0,t,e,1]},Xn=function(t){var e=Math.cos(t),r=Math.sin(t);return[e,-r,0,r,e,0,0,0,1]},Gn=function(t,e){return[t,0,0,0,e,0,0,0,1]},Hn=function(){return[1,0,0,0,1,0,0,0,1]},qn=function(t,e){return[2/t,0,0,0,-2/e,0,-1,1,1]};function Vn(t){var e=this.attr.transform,r=t||this.projectionMatrix;if(e&&e.translate&&(this.translationMatrix=Yn(e.translate[0],e.translate[1],this.translationMatrix),r=Un(r,this.translationMatrix)),e&&e.rotate){var i=Math.PI/180*e.rotate[0];this.rotationMatrix=Xn(i),this.rotationCentric=Yn(e.rotate[1]||0,e.rotate[2]||0,this.rotationCentric),r=Un(r,this.rotationMatrix)}e&&e.scale&&(this.scaleMatrix=Gn(e.scale[0],e.scale[1]),r=Un(r,this.scaleMatrix)),this.rotationCentric&&(r=Un(r,this.rotationCentric)),this.transformMatrix=r}var Wn=function(){fi.apply(this,arguments)};function Zn(t,e,r){var i=t.createShader(r);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var n=t.getShaderInfoLog(i);return console.error("*** Error compiling shader '"+i+"':"+n),t.deleteShader(i),null}return i}function Qn(t,e){return function(t,e){var r=t.createProgram();if(e.forEach((function(e){t.attachShader(r,e)})),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var i=t.getProgramInfoLog(r);return console.error("Error in program linking:"+i),t.deleteProgram(r),null}return r}(t,[Zn(t,e.vertexShader,t.VERTEX_SHADER),Zn(t,e.fragmentShader,t.FRAGMENT_SHADER)])}function Jn(){this.BBox={x:0,y:0,width:0,height:0},this.BBoxHit={x:0,y:0,width:0,height:0}}function $n(t,e,r){this.ctx=t,this.attr=e||{},this.style=r||{},this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null)}function Kn(t,e,r){this.ctx=t,this.attr=e||{},this.style=r||{},this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null)}function to(t,e,r){var i=this;this.ctx=t,this.attr=e,this.style=r,this.pointsGeometry=[],this.transform=[0,0,1,1],this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),i.attr.d&&(Je.isTypePath(i.attr.d)?(i.path=i.attr.d,i.attr.d=i.attr.d.fetchPathString()):i.path=Je.instance(i.attr.d),this.points=new Float32Array(this.path.getPoints())),this.style.stroke&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255])),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null)}function eo(t,e,r){this.ctx=t,this.attr=e||{},this.style=r||{},this.points=[],this.transform=[0,0,1,1];var i=[];if(this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),this.attr.points){for(var n=this.attr.points,o=0,s=n.length;o<s;o++)i[2*o]=n[o].x,i[2*o+1]=n[o].y;this.points=new Float32Array(i)}this.style.stroke&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255])),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null)}function ro(t,e,r){this.ctx=t,this.attr=e||{},this.style=r||{},this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null)}function io(t){return ce.exports(t.reduce((function(t,e){return t[t.length]=e.x,t[t.length]=e.y,t}),[])).map((function(e){return t[e]}))}function no(t,e,r){this.ctx=t,this.attr=e,this.style=r,this.positionArray=[],this.transform=[0,0,1,1];var i=[];if(this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),this.attr.points){for(var n=io(this.attr.points),o=0,s=n.length;o<s;o++)i[2*o]=n[o].x,i[2*o+1]=n[o].y;this.points=new Float32Array(i)}this.style.fill&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255])),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null)}function oo(t,e,r){this.ctx=t,this.attr=e,this.style=r,this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null)}(Wn.prototype=new fi).constructor=Wn,Wn.prototype.createNode=function(t,e,r){return new jo(t,e,jn(),r)},Jn.prototype.exec=function(t,e){"function"!=typeof t&&console.error("Wrong Exe type"),t.call(this,e)},Jn.prototype.setStyle=function(t,e){e?(this.style[t]=e,this.shader&&"fill"===t&&(void 0!==this.style.opacity&&(e.a*=this.style.opacity),this.shader.indexBased&&this.shader.updateColor(this.pindex,e)),this.shader&&"opacity"===t&&(void 0!==this.style.fill&&(this.style.fill.a*=this.style.opacity),this.shader.updateColor(this.pindex,this.style.fill))):this.style[t]&&delete this.style[t]},Jn.prototype.getAttr=function(t){return this.attr[t]},Jn.prototype.getStyle=function(t){return this.style[t]},$n.prototype=new Jn,$n.prototype.constructor=$n,$n.prototype.setShader=function(t){this.shader=t,this.shader&&(this.shader.addVertex(this.attr.x||0,this.attr.y||0,this.pindex),this.shader.addColors(this.style.fill||fo,this.pindex),this.shader.addSize(this.attr.size||0,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},$n.prototype.setAttr=function(t,e){this.attr[t]=e,"transform"===t&&this.exec(Vn,this.p_matrix),this.shader&&("x"===t||"y"===t?this.shader.updateVertex(this.pindex,this.attr.x,this.attr.y):"size"===t?this.shader.updateSize(this.pindex,this.attr.size||0):"transform"===t&&this.shader.updateTransform(this.pindex,this.transformMatrix))},$n.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},$n.prototype.in=function(t){var e=this.attr,r=e.x;void 0===r&&(r=0);var i=e.y;void 0===i&&(i=0);var n=e.size;return void 0===n&&(n=0),t.x>=r&&t.x<=r+n&&t.y>=i&&t.y<=i+n},$n.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.x;void 0===i&&(i=0);var n=e.y;void 0===n&&(n=0);var o=e.size;void 0===o&&(o=0);var s=Nn(r),a=s.translateX,h=s.translateY,c=s.scaleX,u=s.scaleY;t.BBox={x:a+i*c,y:h+n*u,width:o*c,height:o*u},r&&r.rotate?t.BBoxHit=Pn.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},Kn.prototype=new Jn,Kn.prototype.constructor=Kn,Kn.prototype.setShader=function(t){this.shader=t,this.shader&&(this.shader.addVertex(this.attr.x||0,this.attr.y||0,this.attr.width||0,this.attr.height||0,this.pindex),this.shader.addColors(this.style.fill||fo,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},Kn.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},Kn.prototype.setAttr=function(t,e){this.attr[t]=e,"transform"===t&&this.exec(Vn,this.p_matrix),this.shader&&("x"===t||"width"===t||"y"===t||"height"===t?this.shader.updateVertex(this.pindex,this.attr.x||0,this.attr.y||0,this.attr.width||0,this.attr.height||0):"transform"===t&&this.shader.updateTransform(this.pindex,this.transformMatrix))},Kn.prototype.in=function(t){var e=this.attr,r=e.x;void 0===r&&(r=0);var i=e.y;void 0===i&&(i=0);var n=e.width;void 0===n&&(n=0);var o=e.height;return void 0===o&&(o=0),t.x>=r&&t.x<=r+n&&t.y>=i&&t.y<=i+o},Kn.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.x;void 0===i&&(i=0);var n=e.y;void 0===n&&(n=0);var o=e.width;void 0===o&&(o=0);var s=e.height;void 0===s&&(s=0);var a=Nn(r),h=a.translateX,c=a.translateY,u=a.scaleX,l=a.scaleY;t.BBox={x:h+i*u,y:c+n*l,width:o*u,height:s*l},r&&r.rotate?t.BBoxHit=Pn.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},to.prototype=new Jn,to.prototype.constructor=to,to.prototype.setShader=function(t){this.shader=t},to.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t)},to.prototype.setAttr=function(t,e){this.attr[t]=e,null!==e?"d"===t?(Je.isTypePath(e)?(this.path=e,this.attr.d=e.fetchPathString()):this.path=Je.instance(this.attr.d),this.points=new Float32Array(this.path.getPoints())):"transform"===t&&this.exec(Vn,this.p_matrix):delete this.attr[t]},to.prototype.updateBBox=function(){var t=this,e=t.attr.transform,r=Nn(e),i=r.translateX,n=r.translateY,o=r.scaleX,s=r.scaleY;t.BBox=t.path?t.path.BBox:{x:0,y:0,width:0,height:0},t.BBox.x=i+t.BBox.x*o,t.BBox.y=n+t.BBox.y*s,t.BBox.width*=o,t.BBox.height*=s,e&&e.rotate?t.BBoxHit=Pn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},eo.prototype=new Jn,eo.prototype.constructor=eo,eo.prototype.setShader=function(t){this.shader=t},eo.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t)},eo.prototype.setAttr=function(t,e){if(this.attr[t]=e,"points"===t){for(var r=this.attr.points,i=[],n=0,o=r.length;n<o;n++)i[2*n]=r[n].x,i[2*n+1]=r[n].y;this.points=new Float32Array(i)}else"transform"===t&&this.exec(Vn,this.p_matrix)},eo.prototype.updateBBox=Fn,eo.prototype.setStyle=function(t,e){this.style[t]=e,"stroke"===t&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255]))},ro.prototype=new Jn,ro.prototype.constructor=ro,ro.prototype.setShader=function(t){this.shader=t;var e=this.attr,r=e.x1;void 0===r&&(r=0);var i=e.y1;void 0===i&&(i=0);var n=e.x2;void 0===n&&(n=r);var o=e.y2;void 0===o&&(o=i),this.shader&&(this.shader.addVertex(r,i,n,o,this.pindex),this.shader.addColors(this.style.stroke||fo,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},ro.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},ro.prototype.setAttr=function(t,e){this.attr[t]=e,null!==e||null===this.attr[t]?("transform"===t&&this.exec(Vn,this.p_matrix),!this.shader||"x1"!==t&&"y1"!==t&&"x2"!==t&&"y2"!==t?this.shader&&"transform"===t&&this.shader.updateTransform(this.pindex,this.transformMatrix):this.shader.updateVertex(this.pindex,this.attr.x1,this.attr.y1,this.attr.x2,this.attr.y2)):delete this.attr[t]},ro.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.x1;void 0===i&&(i=0);var n=e.y1;void 0===n&&(n=0);var o=e.x2;void 0===o&&(o=0);var s=e.y2;void 0===s&&(s=0);var a=Nn(r),h=a.translateX,c=a.translateY,u=a.scaleX,l=a.scaleY;t.BBox={x:h+(i<o?i:o)*u,y:c+(n<s?n:s)*l,width:Math.abs(o-i)*u,height:Math.abs(s-n)*l},r&&r.rotate?t.BBoxHit=Pn.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},no.prototype=new Jn,no.prototype.constructor=no,no.prototype.setShader=function(t){this.shader=t},no.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t)},no.prototype.setAttr=function(t,e){if(this.attr[t]=e,null!==e)if("points"===t){for(var r=[],i=io(e),n=0,o=i.length;n<o;n++)r[2*n]=i[n].x,r[2*n+1]=i[n].y;this.points=new Float32Array(r)}else"transform"===t&&this.exec(Vn,this.p_matrix);else delete this.attr[t]},no.prototype.setStyle=function(t,e){this.style[t]=e,"fill"===t&&(this.color=new Float32Array([this.style.fill.r/255,this.style.fill.g/255,this.style.fill.b/255,void 0===this.style.fill.a?1:this.style.fill.a/255]))},no.prototype.updateBBox=Fn,oo.prototype=new Jn,oo.prototype.constructor=oo,oo.prototype.setShader=function(t){this.shader=t,this.shader&&(this.shader.addVertex(this.attr.cx||0,this.attr.cy||0,this.pindex),this.shader.addColors(this.style.fill||fo,this.pindex),this.shader.addSize(this.attr.r||0,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},oo.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},oo.prototype.setAttr=function(t,e){this.attr[t]=e,null!==e?("transform"===t&&this.exec(Vn,this.p_matrix),"cx"!==t&&"cy"!==t||!this.shader?"r"===t&&this.shader?this.shader.updateSize(this.pindex,this.attr.r||0):"transform"===t&&this.shader&&this.shader.updateTransform(this.pindex,this.transformMatrix):this.shader.updateVertex(this.pindex,this.attr.cx,this.attr.cy)):delete this.attr[t]},oo.prototype.in=function(t,e){var r=this.attr,i=r.r;void 0===i&&(i=0);var n=r.cx;void 0===n&&(n=0);var o=r.cy;return void 0===o&&(o=0),Math.sqrt((t.x-n)*(t.x-n)+(t.y-o)*(t.y-o))<=i},oo.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.r;void 0===i&&(i=0);var n=e.cx;void 0===n&&(n=0);var o=e.cy;void 0===o&&(o=0);var s=Nn(r),a=s.translateX,h=s.translateY,c=s.scaleX,u=s.scaleY;t.BBox={x:a+(n-i)*c,y:h+(o-i)*u,width:2*i*c,height:2*i*u},r&&r.rotate?t.BBoxHit=Pn.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox};var so={};function ao(t){return 0==(t&t-1)}function ho(t,e){var r=document.createElement("canvas"),i=r.getContext("2d");(e=e||{fill:"#fff"}).font||(e.font="10px Arial");var n=parseFloat(e.font,10)||12;i.font=e.font;var o=i.measureText(t).width,s=n;for(var a in r.setAttribute("height",s*Dn),r.setAttribute("width",o*Dn),r.style.width=o,r.style.height=s,e.font=n*Dn+(isNaN(parseFloat(e.font,10))?e.font:e.font.substring(n.toString().length)),e)i[a]=e[a];return i.fillText(t,0,.75*s*Dn),{dom:r,ctx:i,width:o,height:s,ratio:Dn,style:e,str:t,updateText:function(){for(var t in function(t,e,r,i){t.clearRect(0,0,e*i,r*i)}(this.ctx,this.width,this.height,this.ratio),this.style)this.ctx[t]=this.style[t];this.ctx.fillText(this.str,0,.75*this.height)}}}function co(t,e,r,i){var n=this;this.ctx=t,this.attr=e,this.style=r,this.vDomIndex=i,this.positionArray=new Float32Array(12),this.transform=[0,0,1,1],this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null),n.attr.text&&"string"==typeof n.attr.text&&(this.text=ho(n.attr.text,n.style),this.attr.width=this.text.width,this.attr.height=this.text.height),this.text&&(this.textureNode=new Uo(t,{src:this.text.dom},this.vDomIndex))}function uo(t,e,r,i){var n=this;if(this.ctx=t,this.attr=e,this.style=r,this.vDomIndex=i,this.positionArray=new Float32Array(12),this.transform=[0,0,1,1],this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null),n.attr.src&&"string"==typeof n.attr.src&&!so[n.attr.src]?(this.textureNode=new Uo(t,{src:this.attr.src},this.vDomIndex),so[n.attr.src]=this.textureNode):n.attr.src&&n.attr.src instanceof ci?this.textureNode=new Uo(t,{src:this.attr.src},this.vDomIndex):"string"==typeof n.attr.src&&so[n.attr.src]?this.textureNode=so[n.attr.src]:n.attr.src&&n.attr.src instanceof Uo&&(this.textureNode=n.attr.src),this.attr.x||this.attr.y||this.attr.width||this.attr.height){var o=this.attr.x||0,s=this.attr.y||0,a=o+(this.attr.width||0),h=s+(this.attr.height||0);this.positionArray[0]=this.positionArray[4]=this.positionArray[6]=o,this.positionArray[1]=this.positionArray[3]=this.positionArray[9]=s,this.positionArray[2]=this.positionArray[8]=this.positionArray[10]=a,this.positionArray[5]=this.positionArray[7]=this.positionArray[11]=h}}function lo(t,e,r,i,n){this.ctx=t,this.attr=e,this.style=r,this.renderTarget=i,this.vDomIndex=n,e.shaderType&&(this.shader=Oo(t,e,r,e.shaderType,this.renderTarget,n)),this.projectionMatrix=qn(this.ctx.canvas.width/Dn,this.ctx.canvas.height/Dn),this.transformMatrix=Un(this.projectionMatrix,Hn()),this.attr.transform&&this.exec(Vn,null)}co.prototype=new Jn,co.prototype.constructor=co,co.prototype.setShader=function(t){this.shader=t},co.prototype.setAttr=function(t,e){if(this.attr[t]=e,null!==e){if("text"===t&&"string"==typeof e&&(this.text?this.text=ho(this.attr.text,this.style):this.text=ho(e,this.style),this.attr.width=this.text.width,this.attr.height=this.text.height,this.textureNode?this.textureNode.setAttr("src",this.text.dom):this.textureNode=new Uo(this.ctx,{src:this.text.dom},this.vDomIndex)),"transform"===t)this.exec(Vn,this.p_matrix);else if("x"===t||"y"===t){var r=this.attr.x||0,i=this.attr.y||0,n=r+(this.attr.width||0),o=i+(this.attr.height||0);this.positionArray[0]=this.positionArray[4]=this.positionArray[6]=r,this.positionArray[1]=this.positionArray[3]=this.positionArray[9]=i,this.positionArray[2]=this.positionArray[8]=this.positionArray[10]=n,this.positionArray[5]=this.positionArray[7]=this.positionArray[11]=o}}else delete this.attr[t]},co.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t)},co.prototype.setStyle=function(t,e){if(this.style[t]=e,this.text)if(this.text.style[t]=e,"font"===t){var r=parseFloat(e,10)||12;this.text.ctx.font=e;var i=this.text.ctx.measureText(this.attr.text).width,n=r;this.text.style.font=r*Dn+(isNaN(parseFloat(e,10))?this.style.font:this.style.font.substring(r.toString().length)),this.text.updateText(),this.text.dom.setAttribute("height",n*Dn),this.text.dom.setAttribute("width",i*Dn),this.attr.width=i,this.attr.height=n,this.shader.updateVertexX(this.pindex,this.attr.x||0,this.attr.width||0),this.shader.updateVertexY(this.pindex,this.attr.y||0,this.attr.height||0)}else this.text.style[t]=e,this.text.updateText(),this.textureNode.setAttr("src",this.text.dom)},co.prototype.getAttr=function(t){return this.attr[t]},co.prototype.getStyle=function(t){return this.style[t]},co.prototype.in=function(t){var e=this.attr,r=e.width;void 0===r&&(r=0);var i=e.height;void 0===i&&(i=0);var n=e.x;void 0===n&&(n=0);var o=e.y;return void 0===o&&(o=0),t.x>=n&&t.x<=n+r&&t.y>=o&&t.y<=o+i},co.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.x;void 0===i&&(i=0);var n=e.y;void 0===n&&(n=0);var o=e.width;void 0===o&&(o=0);var s=e.height;void 0===s&&(s=0);var a=Nn(r),h=a.translateX,c=a.translateY,u=a.scaleX,l=a.scaleY;t.BBox={x:(h+i)*u,y:(c+n)*l,width:o*u,height:s*l},r&&r.rotate?t.BBoxHit=Pn.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},uo.prototype=new Jn,uo.prototype.constructor=uo,uo.prototype.setShader=function(t){this.shader=t},uo.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t)},uo.prototype.setAttr=function(t,e){if(this.attr[t]=e,null!==e)if("src"===t&&"string"==typeof e)e&&!so[e]?(this.textureNode=new Uo(this.ctx,{src:e},this.vDomIndex),so[e]=this.textureNode):e&&so[e]&&(this.textureNode=so[e]);else if("src"===t&&e instanceof ci)this.textureNode=new Uo(this.ctx,{src:e},this.vDomIndex);else if("src"===t&&e instanceof Uo)this.textureNode=e;else if("x"===t||"width"===t||"y"===t||"height"===t){var r=this.attr.x||0,i=this.attr.y||0,n=r+(this.attr.width||0),o=i+(this.attr.height||0);this.positionArray[0]=this.positionArray[4]=this.positionArray[6]=r,this.positionArray[1]=this.positionArray[3]=this.positionArray[9]=i,this.positionArray[2]=this.positionArray[8]=this.positionArray[10]=n,this.positionArray[5]=this.positionArray[7]=this.positionArray[11]=o}else"transform"===t&&this.exec(Vn,this.p_matrix);else delete this.attr[t]},uo.prototype.setStyle=function(t,e){e?this.style[t]=e:this.style[t]&&delete this.style[t]},uo.prototype.getAttr=function(t){return this.attr[t]},uo.prototype.getStyle=function(t){return this.style[t]},uo.prototype.in=function(t){var e=this.attr,r=e.width;void 0===r&&(r=0);var i=e.height;void 0===i&&(i=0);var n=e.x;void 0===n&&(n=0);var o=e.y;return void 0===o&&(o=0),t.x>=n&&t.x<=n+r&&t.y>=o&&t.y<=o+i},uo.prototype.updateBBox=function(){var t=this,e=t.attr,r=e.transform,i=e.x;void 0===i&&(i=0);var n=e.y;void 0===n&&(n=0);var o=e.width;void 0===o&&(o=0);var s=e.height;void 0===s&&(s=0);var a=Nn(r),h=a.translateX,c=a.translateY,u=a.scaleX,l=a.scaleY;t.BBox={x:(h+i)*u,y:(c+n)*l,width:o*u,height:s*l},r&&r.rotate?t.BBoxHit=Pn.rotateBBox(this.BBox,r):t.BBoxHit=this.BBox},lo.prototype=new Jn,lo.prototype.constructor=lo,lo.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Vn,t),this.transformMatrix=Un(this.transformMatrix,t)},lo.prototype.setAttr=function(t,e){this.attr[t]=e,"shaderType"===t&&(this.shader=Oo(this.ctx,this.attr,this.style,e,this.renderTarget,this.vDomIndex)),"transform"===t&&this.exec(Vn,this.p_matrix)},lo.prototype.setShader=function(){},lo.prototype.in=function(t){var e=t.x,r=t.y,i=this.BBox,n=Nn(this.attr.transform),o=n.translateX,s=n.translateY,a=n.scaleX,h=n.scaleY;return e>=(i.x-o)/a&&e<=(i.x-o+i.width)/a&&r>=(i.y-s)/h&&r<=(i.y-s+i.height)/h},lo.prototype.updateBBox=function(t){var e,r,i,n,o=this,s=Nn(o.attr.transform),a=s.translateX,h=s.translateY,c=s.scaleX,u=s.scaleY;if(o.BBox={},t&&t.length>0)for(var l,f,d,p=0;p<t.length;p+=1)(l=t[p])&&(f=l.dom.BBoxHit.x,d=l.dom.BBoxHit.y,e=void 0===e||e>f?f:e,i=void 0===i||i>d?d:i,r=void 0===r||r<f+l.dom.BBoxHit.width?f+l.dom.BBoxHit.width:r,n=void 0===n||n<d+l.dom.BBoxHit.height?d+l.dom.BBoxHit.height:n);e=void 0===e?0:e,i=void 0===i?0:i,r=void 0===r?0:r,n=void 0===n?0:n,o.BBox.x=a+e*c,o.BBox.y=h+i*u,o.BBox.width=Math.abs(r-e)*c,o.BBox.height=Math.abs(n-i)*u,o.attr.transform&&o.attr.transform.rotate?o.BBoxHit=Pn.rotateBBox(this.BBox,this.attr.transform):o.BBoxHit=this.BBox};var fo=sr.rgba(0,0,0,255);function po(t,e,r,i){var n=i.type;n||(n="FLOAT",i.value instanceof Float32Array?n="FLOAT":i.value instanceof Int8Array?n="BYTE":i.value instanceof Int16Array?n="SHORT":i.value instanceof Uint8Array?n="UNSIGNED_BYTE":i.value instanceof Uint16Array&&(n="UNSIGNED_SHORT"));var o=t.createBuffer();return{bufferType:t.ARRAY_BUFFER,buffer:o,drawType:t.STATIC_DRAW,valueType:t[n],size:i.size,attributeLocation:t.getAttribLocation(e,r),value:i.value,attr:r}}function yo(t,e,r,i){var n,o=i.size?i.size:i.value.length;return i.matrix?Number.isInteger(Math.sqrt(i.value.length))?n="uniformMatrix"+Math.sqrt(i.value.length)+"fv":console.error("Not Square Matrix"):i.value instanceof Uo?n="uniform1i":i.value instanceof Float32Array?n="uniform"+o+"fv":i.value instanceof Int8Array||i.value instanceof Int16Array||i.value instanceof Uint8Array?n="uniform"+o+"iv":Number.isInteger(i.value)?Number.isInteger(i.value)&&(n="uniform1i"):n="uniform1f",{matrix:i.matrix,transpose:void 0!==i.transpose&&i.transpose,type:n,value:i.value,uniformLocation:t.getUniformLocation(e,r)}}function vo(t,e,r){for(var i in this.ctx=t,this.dom={BBoxHit:{x:0,y:0,height:0,width:0}},this.shader=e,this.vDomIndex=r,this.program=Qn(t,e),this.uniforms={},this.attr={},this.attrObjs={},this.indexesObj=null,this.preDraw=e.preDraw,this.postDraw=e.postDraw,this.geometry=e.geometry,this.renderTarget=e.renderTarget,this.vao=t.createVertexArray(),e.uniforms)this.uniforms[i]=yo(t,this.program,i,e.uniforms[i]);for(var n in this.geometry&&(this.geometry instanceof Go||this.geometry instanceof Ho||this.geometry instanceof qo?(this.attributes=this.geometry.attributes,this.indexes=this.geometry.indexes):console.error("Wrong Geometry type")),this.attributes)this.attrObjs[n]=po(t,this.program,n,this.attributes[n]),this.applyAttributeToVao(n,this.attrObjs[n]);this.indexes&&(this.indexesObj=function(t,e,r){var i="FLOAT";return r.value instanceof Float32Array?i="FLOAT":r.value instanceof Int8Array?i="BYTE":r.value instanceof Int16Array?i="SHORT":r.value instanceof Uint8Array?i="UNSIGNED_BYTE":r.value instanceof Uint16Array&&(i="UNSIGNED_SHORT"),{bufferType:t.ELEMENT_ARRAY_BUFFER,buffer:t.createBuffer(),drawType:t.STATIC_DRAW,valueType:t[i],value:r.value,count:r.count,offset:r.offset}}(t,this.program,this.indexes))}function go(){}function xo(t,e,r,i){t.transform=t.transformTyped&&t.transformTyped.length>0?Array.from(t.transformTyped):t.transform,t.transformTyped=null;for(var n=e*r*9,o=0;o<r;)t.transform[n+9*o]=i[0],t.transform[n+9*o+1]=i[1],t.transform[n+9*o+2]=i[2],t.transform[n+9*o+3]=i[3],t.transform[n+9*o+4]=i[4],t.transform[n+9*o+5]=i[5],t.transform[n+9*o+6]=i[6],t.transform[n+9*o+7]=i[7],t.transform[n+9*o+8]=i[8],o++;t.addTransform_=!0,t.transformUpdate=!0}function mo(t,e,r,i){for(var n=t.addTransform_?t.transform:t.transformTyped,o=e*r*9,s=0;s<r;)n[o+9*s]=i[0],n[o+9*s+1]=i[1],n[o+9*s+2]=i[2],n[o+9*s+3]=i[3],n[o+9*s+4]=i[4],n[o+9*s+5]=i[5],n[o+9*s+6]=i[6],n[o+9*s+7]=i[7],n[o+9*s+8]=i[8],s++;t.updateTransform_=!0}function wo(t,e,r){for(var i=t.addTransform_?t.transform:t.transformTyped,n=e*r*9,o=0;o<r;)i[n+9*o]=void 0,i[n+9*o+1]=void 0,i[n+9*o+2]=void 0,i[n+9*o+3]=void 0,i[n+9*o+4]=void 0,i[n+9*o+5]=void 0,i[n+9*o+6]=void 0,i[n+9*o+7]=void 0,i[n+9*o+8]=void 0,o++;t.clearTransform_=!0,t.filterTransformUpdate=!0}function bo(t){t.addTransform_&&(t.clearTransform_&&(t.transform=t.transform.filter((function(t){return!isNaN(t)})),t.clearTransform_=!1),t.transformTyped=new Float32Array(t.transform),t.transform=[],t.addTransform_=!1,t.updateTransform_=!1,t.shaderInstance.setAttributeData("a_transformMatrix",t.transformTyped)),t.clearTransform_&&(t.transformTyped=t.transformTyped.filter((function(t){return!isNaN(t)})),t.clearTransform_=!1,t.shaderInstance.setAttributeData("a_transformMatrix",t.transformTyped)),t.updateTransform_&&(t.shaderInstance.setAttributeData("a_transformMatrix",t.transformTyped),t.updateTransform_=!1)}function Ao(t,e,r,i){t.positionArray=t.typedPositionArray&&t.typedPositionArray.length>0?Array.from(t.typedPositionArray):t.positionArray,t.typedPositionArray=null;for(var n=e*r*2,o=0;o<i.length;)t.positionArray[n+o]=i[o],o++;t.addVertex_=!0}function Bo(t,e,r,i){var n=t.addVertex_?t.positionArray:t.typedPositionArray,o=e*r*2,s=0;for(isNaN(n[o])&&console.log("overriding Nan");s<i.length;)n[o+s]=i[s],s++;t.updateVertex_=!0}function Eo(t,e,r){for(var i=t.addVertex_?t.positionArray:t.typedPositionArray,n=e*r*2,o=0;o<r;)i[n+2*o]=void 0,i[n+2*o+1]=void 0,o++;t.filterVertex_=!0}function To(t){t.addVertex_&&(t.filterVertex_&&(t.positionArray=t.positionArray.filter((function(t){return!isNaN(t)})),t.filterVertex_=!1),t.typedPositionArray=new Float32Array(t.positionArray),t.positionArray=[],t.addVertex_=!1,t.updateVertex_=!1,t.shaderInstance.setAttributeData("a_position",t.typedPositionArray)),t.filterVertex_&&(t.typedPositionArray=t.typedPositionArray.filter((function(t){return!isNaN(t)})),t.filterVertex_=!1,t.shaderInstance.setAttributeData("a_position",t.typedPositionArray)),t.updateVertex_&&(t.shaderInstance.setAttributeData("a_position",t.typedPositionArray),t.updateVertex_=!1)}function So(t,e,r,i){t.colorArray=t.typedColorArray&&t.typedColorArray.length>0?Array.from(t.typedColorArray):t.colorArray,t.typedColorArray=null;var n=e*r*4,o=0;for(i=sr.colorToRGB(i);o<r;)t.colorArray[n+4*o]=i.r/255,t.colorArray[n+4*o+1]=i.g/255,t.colorArray[n+4*o+2]=i.b/255,t.colorArray[n+4*o+3]=void 0===i.a?1:i.a/255,o++;t.addColor_=!0}function _o(t,e,r,i){var n=t.addColor_?t.colorArray:t.typedColorArray;isNaN(n[e*r*4])&&console.log("overriding Nan");for(var o=e*r*4,s=0;s<r;)n[o+4*s]=i.r/255,n[o+4*s+1]=i.g/255,n[o+4*s+2]=i.b/255,n[o+4*s+3]=void 0===i.a?1:i.a/255,s++;t.updateColor_=!0}function ko(t,e,r){var i=t.addColor_?t.colorArray:t.typedColorArray;isNaN(i[e*r*4])&&console.log("overriding Nan");for(var n=e*r*4,o=0;o<r;)i[n+4*o]=void 0,i[n+4*o+1]=void 0,i[n+4*o+2]=void 0,i[n+4*o+3]=void 0,o++;t.filterColor_=!0}function Mo(t){t.addColor_&&(t.filterColor_&&(t.colorArray=t.colorArray.filter((function(t){return!isNaN(t)})),t.filterColor_=!1),t.typedColorArray=new Float32Array(t.colorArray),t.colorArray=[],t.addColor_=!1,t.updateColor_=!1,t.shaderInstance.setAttributeData("a_color",t.typedColorArray)),t.filterColor_&&(t.typedColorArray=t.typedColorArray.filter((function(t){return!isNaN(t)})),t.shaderInstance.setAttributeData("a_color",t.typedColorArray),t.filterColor_=!1),t.updateColor_&&(t.shaderInstance.setAttributeData("a_color",t.typedColorArray),t.updateColor_=!1)}function Co(t,e,r,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.indexBased=!0,this.transform=[],this.selftransform=[0,0,1,1],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Ho,this.geometry.setAttr("a_color",{value:new Float32Array([]),size:4}),this.geometry.setAttr("a_size",{value:new Float32Array([]),size:1}),this.geometry.setAttr("a_position",{value:new Float32Array([]),size:2}),this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.shaderInstance=new vo(t,{fragmentShader:Ln("point").fragmentShader,vertexShader:Ln("point").vertexShader,uniforms:{},geometry:this.geometry},i),this.positionArray=[],this.colorArray=[],this.pointsSize=[],this.transform=[],this.vertexUpdate=!0,this.colorUpdate=!0,this.sizeUpdate=!0,this.transformUpdate=!0}function Lo(t,e,r,i,n){this.ctx=t,this.dom={},this.positionArray=[],this.colorArray=[],this.transform=[],this.rotate=[],this.attr=e||{},this.style=r||{},this.vDomIndex=n,this.renderTarget=i,this.indexBased=!0,this.selftransform=[0,0,1,1],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Go,this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.geometry.setAttr("a_color",{value:new Float32Array(this.colorArray),size:4}),this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setDrawRange(0,this.positionArray.length/2),this.shaderInstance=new vo(t,{fragmentShader:Ln("rect").fragmentShader,vertexShader:Ln("rect").vertexShader,uniforms:{},geometry:this.geometry},n)}function Do(t,e,r,i,n){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=n,this.positionArray=[],this.colorArray=[],this.transform=[],this.vertexUpdate=!0,this.colorUpdate=!0,this.renderTarget=i,this.indexBased=!0,this.selftransform=new Float32Array([0,0,1,1]),this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new qo,this.geometry.setAttr("a_color",{value:new Float32Array(this.colorArray),size:4}),this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.geometry.setDrawRange(0,this.positionArray.length/2),this.shaderInstance=new vo(t,{fragmentShader:Ln("line").fragmentShader,vertexShader:Ln("line").vertexShader,uniforms:{},geometry:this.geometry},n)}function Po(t,e,r,i,n){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=n,this.positionArray=[],this.colorArray=[],this.renderTarget=i,this.indexBased=!1,this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]});var o=Nn(this.attr.transform),s=o.translateX,a=o.translateY,h=o.scaleX,c=o.scaleY;this.transform=new Float32Array([s,a,h,c]),this.geometry=new qo,this.geometry.drawType="LINE_STRIP",this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setDrawRange(0,this.positionArray.length/2),this.shaderInstance=new vo(t,{fragmentShader:Ln("polyline").fragmentShader,vertexShader:Ln("polyline").vertexShader,uniforms:{u_transformMatrix:{value:new Float32Array(Hn()),matrix:!0},u_color:{value:new Float32Array(4)}},geometry:this.geometry},n)}function Io(t,e,r,i,n){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=n,this.colorArray=[],this.positionArray=[],this.renderTarget=i,this.indexBased=!1,this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]});var o=Nn(this.attr.transform),s=o.translateX,a=o.translateY,h=o.scaleX,c=o.scaleY;this.transform=new Float32Array([s,a,h,c]),this.geometry=new Go,this.geometry.setAttr("a_position",{value:new Float32Array([]),size:2}),this.shaderInstance=new vo(t,{fragmentShader:Ln("polygon").fragmentShader,vertexShader:Ln("polygon").vertexShader,uniforms:{u_transformMatrix:{value:new Float32Array(Hn()),matrix:!0},u_color:{value:new Float32Array(4)}},geometry:this.geometry},n)}function zo(t,e,r,i,n){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=n,this.positionArray=[],this.colorArray=[],this.transform=[],this.pointsSize=[],this.renderTarget=i,this.indexBased=!0,this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Ho,this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.geometry.setAttr("a_color",{value:new Float32Array(this.colorArray),size:4}),this.geometry.setAttr("a_radius",{value:new Float32Array(this.pointsSize),size:1}),this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setDrawRange(0,0),this.shaderInstance=new vo(t,{fragmentShader:Ln("circle").fragmentShader,vertexShader:Ln("circle").vertexShader,uniforms:{},geometry:this.geometry},n)}function Ro(t,e,r,i,n){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=n,this.textCoor=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),this.renderTarget=i,this.indexBased=!1,this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Go,this.geometry.setAttr("a_texCoord",{value:this.textCoor,size:2}),this.geometry.setAttr("a_position",{value:new Float32Array([0,0]),size:2}),this.geometry.setDrawRange(0,6),this.shaderInstance=new vo(t,{fragmentShader:Ln("image").fragmentShader,vertexShader:Ln("image").vertexShader,uniforms:{u_transformMatrix:{value:new Float32Array(Hn()),matrix:!0},u_image:{value:new Uo(this.ctx,{},this.vDomIndex)},u_opacity:{value:1..toFixed(2)}},geometry:this.geometry},n),this.positionArray=[],this.vertexUpdate=!0}function Oo(t,e,r,i,n,o){var s;switch(i){case"rect":s=new Lo(t,e,r,n,o);break;case"point":s=new Co(t,e,r,n);break;case"line":s=new Do(t,e,r,n,o);break;case"polyline":case"path":s=new Po(t,e,r,n,o);break;case"polygon":s=new Io(t,e,r,n,o);break;case"circle":s=new zo(t,e,r,n,o);break;case"image":case"text":s=new Ro(t,e,r,n,o);break;default:s=null}return s}function jo(t,e,r,i){switch(this.ctx=t,this.style=e.style||{},this.attr=e.attr||{},this.id=r,this.nodeName=e.el,this.nodeType="WEBGL",this.children=[],this.ctx=t,this.vDomIndex=i,this.el=e.el,this.shaderType=e.shaderType,this.exeCtx=e.ctx,this.bbox=void 0===e.bbox||e.bbox,this.events={},e.el){case"point":this.dom=new $n(this.ctx,this.attr,this.style);break;case"rect":this.dom=new Kn(this.ctx,this.attr,this.style);break;case"line":this.dom=new ro(this.ctx,this.attr,this.style);break;case"polyline":this.dom=new eo(this.ctx,this.attr,this.style);break;case"polygon":this.dom=new no(this.ctx,this.attr,this.style);break;case"path":this.dom=new to(this.ctx,this.attr,this.style);break;case"circle":this.dom=new oo(this.ctx,this.attr,this.style);break;case"image":this.dom=new uo(this.ctx,this.attr,this.style,i);break;case"text":this.dom=new co(this.ctx,this.attr,this.style,i);break;case"group":this.dom=new lo(this.ctx,this.attr,this.style,e.renderTarget,i);break;default:this.dom=null}this.dom.nodeExe=this,this.dom instanceof lo||(delete this.createEl,delete this.createEls)}function No(t){var e=new Image;return e.crossOrigin="anonymous",e.onload=function(){t.update(),t.updated=!0,In.vDomChanged(t.vDomIndex)},e.onerror=function(t){},e}function Fo(t,e){return new Uint8Array(new ArrayBuffer(t*e*4))}function Uo(t,e,r){var i=this,n=t.getParameter(t.MAX_TEXTURE_SIZE);this.ctx=t,this.texture=t.createTexture(),this.type="TEXTURE_2D",this.width=e.width>n?n:e.width,this.height=e.height>n?n:e.height,this.border=e.border?e.border:0,this.format=e.format?e.format:"RGBA",this.type=e.type?e.type:"UNSIGNED_BYTE",this.warpS=e.warpS?e.warpS:"CLAMP_TO_EDGE",this.warpT=e.warpT?e.warpT:"CLAMP_TO_EDGE",this.magFilter=e.magFilter?e.magFilter:"LINEAR",this.minFilter=e.minFilter?e.minFilter:"LINEAR",this.mipMap=e.mipMap,this.updated=!1,this.image=null,this.vDomIndex=r,"string"==typeof e.src?(i.image=No(i),i.image.src=e.src):e.src instanceof HTMLImageElement||e.src instanceof SVGImageElement||e.src instanceof HTMLCanvasElement||e.src instanceof Uint8Array?(i.image=e.src,i.update(),i.updated=!0):e.src instanceof ci?(i.image=e.src.domEl,i.update(),i.updated=!0):(this.width&&this.height&&(i.image=Fo(this.width,this.height),i.update()),i.updated=!0),In.vDomChanged(i.vDomIndex)}function Yo(t,e){this.ctx=t,this.fbo=t.createFramebuffer(),this.texture=e.texture,this.texture.updated||this.texture.update()}function Xo(){}function Go(t){this.attributes={},this.drawType="TRIANGLES",this.indexes=null,this.drawRange=[0,0]}function Ho(t){this.attributes={},this.drawType="POINTS",this.indexes=null,this.drawRange=[0,0]}function qo(t){this.attributes={},this.drawType="LINES",this.indexes=null,this.drawRange=[0,0]}vo.prototype=new go,vo.prototype.constructor=vo,vo.prototype.applyAttributeToVao=function(t,e){this.ctx.bindVertexArray(this.vao),"a_transformMatrix"===t?(this.ctx.enableVertexAttribArray(e.attributeLocation+0),this.ctx.enableVertexAttribArray(e.attributeLocation+1),this.ctx.enableVertexAttribArray(e.attributeLocation+2),this.ctx.bindBuffer(e.bufferType,e.buffer),this.ctx.bufferData(e.bufferType,e.value,e.drawType),this.ctx.vertexAttribPointer(e.attributeLocation+0,e.size,e.valueType,!1,4*e.size*3,0),this.ctx.vertexAttribPointer(e.attributeLocation+1,e.size,e.valueType,!1,4*e.size*3,12),this.ctx.vertexAttribPointer(e.attributeLocation+2,e.size,e.valueType,!1,4*e.size*3,24)):(this.ctx.enableVertexAttribArray(e.attributeLocation),this.ctx.bindBuffer(e.bufferType,e.buffer),this.ctx.bufferData(e.bufferType,e.value,e.drawType),this.ctx.vertexAttribPointer(e.attributeLocation,e.size,e.valueType,!1,0,0))},vo.prototype.useProgram=function(){this.ctx.useProgram(this.program)},vo.prototype.applyUniforms=function(){for(var t in this.uniforms)this.uniforms[t].matrix?this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].transpose,this.uniforms[t].value):this.uniforms[t].value instanceof Uo?(this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].value.texture),this.uniforms[t].value.loadTexture()):this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].value)},vo.prototype.applyIndexes=function(){var t=this.indexesObj;this.ctx.bindBuffer(t.bufferType,t.buffer),this.ctx.bufferData(t.bufferType,t.value,t.drawType)},vo.prototype.draw=function(){this.ctx.drawArrays(this.ctx[this.geometry.drawType],this.geometry.drawRange[0],this.geometry.drawRange[1])},vo.prototype.drawElements=function(){this.ctx.drawElements(this.ctx[this.geometry.drawType],this.indexesObj.count,this.indexesObj.type?this.indexesObj.type:this.ctx.UNSIGNED_SHORT,this.indexesObj.offset)},vo.prototype.updateBBox=function(t){return!0},vo.prototype.execute=function(){this.ctx.useProgram(this.program),this.applyUniforms(),this.ctx.bindVertexArray(this.vao),this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.update(),this.indexesObj?(this.applyIndexes(),this.drawElements()):this.draw(),this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.clear()},vo.prototype.addUniform=function(t,e){this.uniforms[t]=yo(this.ctx,this.program,t,e),In.vDomChanged(this.vDomIndex)},vo.prototype.addAttribute=function(t,e){this.attributes[t]=e,this.attrObjs[t]=po(this.ctx,this.program,t,e),this.applyAttributeToVao(t,this.attrObjs[t]),In.vDomChanged(this.vDomIndex)},vo.prototype.setAttributeData=function(t,e){var r=this.attrObjs[t];this.attributes[t].value=e,this.attrObjs[t].value=e,this.ctx.bindBuffer(r.bufferType,r.buffer),this.ctx.bufferData(r.bufferType,r.value,r.drawType),In.vDomChanged(this.vDomIndex)},vo.prototype.applyAttributeData=function(t,e){this.attributes[t].value=e,this.attrObjs[t].value=e;var r=this.attrObjs[t];this.ctx.bindBuffer(r.bufferType,r.buffer),this.ctx.bufferData(r.bufferType,this.attributes[r.attr].value,r.drawType),this.ctx.enableVertexAttribArray(r.attributeLocation),this.ctx.vertexAttribPointer(r.attributeLocation,r.size,r.valueType,!1,0,0)},vo.prototype.setUniformData=function(t,e){this.uniforms[t].value=e,In.vDomChanged(this.vDomIndex)},vo.prototype.applyUniformData=function(t,e){this.uniforms[t].value=e,this.uniforms[t].matrix?this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].transpose,this.uniforms[t].value):this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].value)},go.prototype.setAttr=function(t,e){if(this.attr[t]=e,"transform"===t){var r=Nn(this.attr.transform),i=r.translateX,n=r.translateY,o=r.scaleX,s=r.scaleY;this.selftransform=new Float32Array([i,n,o,s])}},go.prototype.translate=function(t){this.attr.transform.translate=t},go.prototype.scale=function(t){this.attr.transform.scale=t},go.prototype.rotate=function(t){this.attr.transform.rotate=t},Co.prototype=new go,Co.prototype.constructor=Co,Co.prototype.clear=function(t){ko(this,t,1),Eo(this,t,1),wo(this,t,1),(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=void 0,this.filterSizeFlag=!0},Co.prototype.addTransform=function(t,e){xo(this,e,1,t)},Co.prototype.updateTransform=function(t,e){mo(this,t,1,e)},Co.prototype.updateVertex=function(t,e,r){Bo(this,t,1,[e,r])},Co.prototype.updateSize=function(t,e){(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=e},Co.prototype.updateColor=function(t,e){_o(this,t,1,e)},Co.prototype.addVertex=function(t,e,r){Ao(this,r,1,[t,e])},Co.prototype.addSize=function(t,e){this.pointsSize=this.typedSizeArray&&this.typedSizeArray.length>0?Array.from(this.typedSizeArray):this.pointsSize,this.pointsSize[e]=t,this.sizeUpdate=!0},Co.prototype.addColors=function(t,e){So(this,e,1,t)},Co.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.update(),To(this),Mo(this),bo(this),this.sizeUpdate&&(this.filterSizeFlag&&(this.pointsSize=this.pointsSize.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.typedSizeArray=new Float32Array(this.pointsSize),this.pointsSize=[],this.sizeUpdate=!1),this.filterSizeFlag&&(this.typedSizeArray=this.typedSizeArray.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.shaderInstance.setAttributeData("a_size",this.typedSizeArray),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.update()},Lo.prototype=new go,Lo.prototype.constructor=Lo,Lo.prototype.clear=function(t){ko(this,t,6),Eo(this,t,6),wo(this,t,6)},Lo.prototype.updateVertex=function(t,e,r,i,n){var o=e+i,s=r+n;Bo(this,t,6,[e,r,o,r,e,s,e,s,o,r,o,s])},Lo.prototype.updateTransform=function(t,e){mo(this,t,6,e)},Lo.prototype.addTransform=function(t,e){xo(this,e,6,t)},Lo.prototype.updateColor=function(t,e){_o(this,t,6,e)},Lo.prototype.addVertex=function(t,e,r,i,n){var o=t+r,s=e+i;Ao(this,n,6,[t,e,o,e,t,s,t,s,o,e,o,s])},Lo.prototype.addColors=function(t,e){So(this,e,6,t)},Lo.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.update(),Mo(this),bo(this),To(this),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.clear()},Do.prototype=new go,Do.prototype.constructor=Do,Do.prototype.clear=function(t){ko(this,t,2),Eo(this,t,2)},Do.prototype.updateTransform=function(t,e){mo(this,t,2,e)},Do.prototype.addTransform=function(t,e){xo(this,e,2,t)},Do.prototype.updateVertex=function(t,e,r,i,n){Bo(this,t,2,[e,r,i,n])},Do.prototype.updateColor=function(t,e){_o(this,t,2,e)},Do.prototype.addVertex=function(t,e,r,i,n){Ao(this,n,2,[t,e,r,i])},Do.prototype.addColors=function(t,e){So(this,e,2,t)},Do.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.update(),To(this),Mo(this),bo(this),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.clear()},Po.prototype=new go,Po.prototype.constructor=Po,Po.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.update();for(var e=0,r=t.length;e<r;e++)this.shaderInstance.setUniformData("u_transformMatrix",t[e].dom.transformMatrix),this.shaderInstance.setAttributeData("a_position",t[e].dom.points),this.shaderInstance.setUniformData("u_color",t[e].dom.color),this.geometry.setDrawRange(0,t[e].dom.points.length/2),this.shaderInstance.execute();this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.clear()},Io.prototype=new go,Io.prototype.constructor=Io,Io.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.update(),this.shaderInstance.useProgram();for(var e=0,r=t.length;e<r;e++)this.shaderInstance.setUniformData("u_transformMatrix",t[e].dom.transformMatrix),this.shaderInstance.setAttributeData("a_position",t[e].dom.points),this.shaderInstance.setUniformData("u_color",t[e].dom.color),this.geometry.setDrawRange(0,t[e].dom.points.length/2),this.shaderInstance.execute();this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.clear()},zo.prototype=new go,zo.prototype.constructor=zo,zo.prototype.clear=function(t){ko(this,t,1),Eo(this,t,1),wo(this,t,1),(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=void 0,this.filterSizeFlag=!0},zo.prototype.updateTransform=function(t,e){mo(this,t,1,e)},zo.prototype.addTransform=function(t,e){xo(this,e,1,t)},zo.prototype.updateVertex=function(t,e,r){Bo(this,t,1,[e,r])},zo.prototype.updateColor=function(t,e){_o(this,t,1,e)},zo.prototype.updateSize=function(t,e){(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=e},zo.prototype.addVertex=function(t,e,r){Ao(this,r,1,[t,e])},zo.prototype.addSize=function(t,e){this.pointsSize=this.typedSizeArray&&this.typedSizeArray.length>0?Array.from(this.typedSizeArray):this.pointsSize,this.pointsSize[e]=t,this.sizeUpdate=!0},zo.prototype.addColors=function(t,e){So(this,e,1,t)},zo.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.update(),To(this),Mo(this),bo(this),this.sizeUpdate&&(this.filterSizeFlag&&(this.pointsSize=this.pointsSize.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.typedSizeArray=new Float32Array(this.pointsSize),this.pointsSize=[],this.sizeUpdate=!1),this.filterSizeFlag&&(this.typedSizeArray=this.typedSizeArray.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.shaderInstance.setAttributeData("a_radius",this.typedSizeArray),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.clear()},Ro.prototype=new go,Ro.prototype.constructor=Ro,Ro.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.update(),this.shaderInstance.useProgram(),this.shaderInstance.applyAttributeData("a_texCoord",this.textCoor);for(var e,r=void 0!==this.style.opacity?this.style.opacity:1,i=0,n=t.length;i<n;i++){var o=t[i];o.dom.textureNode&&o.dom.textureNode.updated&&("none"!==o.style.display&&(this.shaderInstance.applyUniformData("u_transformMatrix",o.dom.transformMatrix),o.dom.textureNode!==e&&(o.dom.textureNode.loadTexture(),e=o.dom.textureNode,this.shaderInstance.applyUniformData("u_image",o.dom.textureNode)),this.shaderInstance.applyAttributeData("a_position",o.dom.positionArray),this.shaderInstance.applyUniformData("u_opacity",((void 0!==o.style.opacity?o.style.opacity:1)*r).toFixed(2)),this.shaderInstance.draw()))}this.renderTarget&&this.renderTarget instanceof Yo&&this.renderTarget.clear()},jo.prototype=new ci,jo.prototype.reIndexChildren=function(t){var e=t||this,r=e.children;r=r.filter((function(t){return t}));for(var i=0,n=r.length;i<n;i++)r[i].dom.pindex=i;e.children=r},jo.prototype.applyTransformationMatrix=function(t){this.dom.applyTransformationMatrix(t),this.children.forEach((function(t){t.applyTransformationMatrix(self.dom.transformMatrix)}))},jo.prototype.setAttr=function(t,e){var r=this;if(2===arguments.length)null===e&&null!==this.attr[t]?delete this.attr[t]:this.attr[t]=e,this.dom.setAttr(t,e),"transform"===t&&this.children.length>0&&this.children.forEach((function(t){t.applyTransformationMatrix(r.dom.transformMatrix)}));else if(1===arguments.length&&"object"==typeof t)for(var i in t)null===t[i]&&null!==this.attr[t]?delete this.attr[i]:this.attr[i]=t[i],this.dom.setAttr(i,t[i]),"transform"===t&&this.children.length>0&&this.children.forEach((function(t){t.applyTransformationMatrix(r.dom.transformMatrix)}));return this.BBoxUpdate=!0,In.vDomChanged(this.vDomIndex),this},jo.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),t.length<1?null:(this.attr.transform.scale=[t[0],t[1]?t[1]:t[0]],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,In.vDomChanged(this.vDomIndex),this)},jo.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,In.vDomChanged(this.vDomIndex),this},jo.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,In.vDomChanged(this.vDomIndex),this},jo.prototype.setStyle=function(t,e){if(2===arguments.length)null===e&&null!=this.style[t]?delete this.style[t]:("fill"!==t&&"stroke"!==t||(e=sr.colorToRGB(e)),this.style[t]=e),this.dom.setStyle(t,e);else if(1===arguments.length&&"object"==typeof t)for(var r in t)null===(e=t[r])&&null!=this.style[r]?delete this.style[r]:("fill"!==r&&"stroke"!==r||(e=sr.colorToRGB(e)),this.style[r]=e),this.dom.setStyle(r,e);return In.vDomChanged(this.vDomIndex),this},jo.prototype.setReIndex=function(){this.reindex=!0},jo.prototype.updateBBox=function(){var t;if(this.bbox){for(var e=0,r=this.children.length;e<r;e+=1)this.children[e]&&(t=this.children[e].updateBBox()||t);if(this.BBoxUpdate||t)return this.dom.updateBBox(this.children),this.BBoxUpdate=!1,!0}return!1},jo.prototype.in=function(t){return this.dom.in(t)},jo.prototype.on=function(t,e){if(this.events||(this.events={}),null===e&&null!==this.events[t])delete this.events[t];else if(e)if("function"==typeof e){var r=e.bind(this);this.events[t]=function(t){r(t)}}else"object"==typeof e&&(this.events[t]=e,e.constructor!==zn.constructor&&e.constructor!==Rn.constructor||e.bindMethods(this));return this},jo.prototype.execute=function(){if("none"!==this.style.display)if(!this.dom.shader&&!this.dom.shaderGroup&&this.dom instanceof lo)for(var t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();else if(this.dom.shader&&this.dom instanceof lo)this.reindex&&(this.reIndexChildren(),this.reindex=!1),this.exeCtx&&this.exeCtx(this.ctx),this.dom.shader.execute(this.children);else if(this.dom.shaderGroup&&this.dom instanceof lo)for(var r in this.exeCtx&&this.exeCtx(this.ctx),this.dom.shaderGroup){var i=this.dom.shaderGroup[r];i.reindex&&(this.reIndexChildren(i),i.reindex=!1),i.shader.execute(i.children)}},jo.prototype.child=function(t){var e,r=this;if(r.dom instanceof lo)for(var i=0;i<t.length;i+=1)(e=t[i]).dom.parent=r,r.children[r.children.length]=e,e.dom.pindex=r.children.length-1,e instanceof vo||e.dom instanceof lo||(this.dom.shader?e.el===this.dom.shader.attr.shaderType?e.dom.setShader(this.dom.shader):(console.warn("wrong el type '"+e.el+"' being added to shader group - '"+this.dom.shader.attr.shaderType+"'"),r.children.pop()):(this.dom.shaderGroup||(this.dom.shaderGroup={}),this.dom.shaderGroup[e.el]||(this.dom.shaderGroup[e.el]={children:[],shader:Oo(r.ctx,r.attr,r.style,e.el,r.renderTarget,r.vDomIndex)}),this.dom.shaderGroup[e.el].children[this.dom.shaderGroup[e.el].children.length]=e,e.dom.pindex=this.dom.shaderGroup[e.el].children.length-1,e.dom.setShader(this.dom.shaderGroup[e.el].shader))),r.dom.attr&&r.dom.attr.transform&&e.applyTransformationMatrix(r.dom.transformMatrix);else console.log("Error");return this.BBoxUpdate=!0,In.vDomChanged(this.vDomIndex),r},jo.prototype.createEls=function(t,e){var r=new Wn({type:"WEBGL",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(r.stack),In.vDomChanged(this.vDomIndex),r},jo.prototype.createEl=function(t){var e=new jo(this.ctx,t,jn(),this.vDomIndex);return this.child([e]),In.vDomChanged(this.vDomIndex),e},jo.prototype.createShaderEl=function(t){var e=new vo(this.ctx,t,this.vDomIndex);return this.child([e]),In.vDomChanged(this.vDomIndex),e},jo.prototype.remove=function(){var t=this.dom.parent.children,e=t.indexOf(this);if(-1!==e)if(this.dom.parent.dom.shader)this.dom.parent.dom.shader.indexBased&&this.dom.parent.dom.shader.clear(this.dom.pindex),this.dom.parent.setReIndex(),t[this.dom.pindex]=void 0;else if(this.dom.parent.dom.shaderGroup){var r=this.dom.parent.dom.shaderGroup[this.el];if(r){var i=r.children.indexOf(this);r.reindex=!0,r.shader.indexBased&&(r.shader.clear(this.dom.pindex),this.dom.parent.setReIndex()),r.children[i]=void 0}t[e]=void 0}else t.splice(e,1);this.BBoxUpdate=!0,In.vDomChanged(this.vDomIndex)},jo.prototype.removeChild=function(t){var e=-1;if(this.children.forEach((function(r,i){r===t&&(e=i)})),-1!==e){var r=this.children.splice(e,1)[0];this.dom.removeChild(r.dom)}this.BBoxUpdate=!0,In.vDomChanged(this.vDomIndex)},Uo.prototype.setAttr=function(t,e){if(1===arguments.length)for(var r in t)this[r]=t[r],"src"===r&&("string"==typeof e?(this.image&&this.image instanceof Image||(this.image=No(this)),this.image.src=e):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement||e instanceof Uint8Array?(this.image=e,this.update()):e instanceof ci&&(this.image=e.domEl,this.update())),(t.height||t.width)&&(self.image=Fo(this.width,this.height));else this[t]=e,console.warning("Instead of key, value, pass Object of key,value for optimal rendering"),"src"===t&&("string"==typeof e?(this.image&&this.image instanceof Image||(this.image=No(this)),this.image.src=e):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement||e instanceof Uint8Array?(this.image=e,this.update()):e instanceof ci&&(this.image=e.domEl,this.update()))},Uo.prototype.loadTexture=function(){this.updated&&(this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.texture))},Uo.prototype.clear=function(t){},Uo.prototype.update=function(){var t=this.ctx;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),!this.image||this.image instanceof Uint8Array?t.texImage2D(t.TEXTURE_2D,this.border,t[this.format],this.width,this.height,0,t[this.format],t[this.type],this.image):t.texImage2D(t.TEXTURE_2D,this.border,t[this.format],t[this.format],t[this.type],this.image),this.mipMap?(ao(self.image.width)&&ao(self.image.height)||console.warn("Image dimension not in power of 2"),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[this.magFilter])):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[this.warpS]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[this.warpT]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[this.minFilter])),this.updated=!0},Yo.prototype.setAttr=function(t,e){this[t]=e},Yo.prototype.update=function(){this.texture&&this.texture instanceof Uo&&(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.fbo),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.texture.texture,0),this.ctx.clearColor(0,0,0,0),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT))},Yo.prototype.clear=function(){this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null)},Xo.prototype.setAttr=function(t,e){!e&&this.attributes[t]?delete this.attributes[t]:this.attributes[t]=e},Xo.prototype.setDrawRange=function(t,e){this.drawRange=[t,e]},Xo.prototype.setDrawType=function(t){this.drawType=t},Xo.prototype.setIndex=function(t){this.indexes=t},Go.prototype=new Xo,Go.constructor=Go,Ho.prototype=new Xo,Ho.constructor=Ho,qo.prototype=new Xo,qo.constructor=qo;
/**
    * StackBlur - a fast almost Gaussian Blur For Canvas
    *
    * In case you find this class useful - especially in commercial projects -
    * I am not totally unhappy for a small donation to my PayPal account
    * mario@quasimondo.de
    *
    * Or support me on flattr:
    * {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.
    *
    * @module StackBlur
    * @author Mario Klingemann
    * Contact: mario@quasimondo.com
    * Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}
    * Twitter: @quasimondo
    *
    * @copyright (c) 2010 Mario Klingemann
    *
    * Permission is hereby granted, free of charge, to any person
    * obtaining a copy of this software and associated documentation
    * files (the "Software"), to deal in the Software without
    * restriction, including without limitation the rights to use,
    * copy, modify, merge, publish, distribute, sublicense, and/or sell
    * copies of the Software, and to permit persons to whom the
    * Software is furnished to do so, subject to the following
    * conditions:
    *
    * The above copyright notice and this permission notice shall be
    * included in all copies or substantial portions of the Software.
    *
    * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    * OTHER DEALINGS IN THE SOFTWARE.
    */
var Vo=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Wo=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];var Zo=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},Qo={blur:function(t){return void 0===t&&(t=1),function(e){return function(t,e,r,i,n,o){for(var s,a=t.data,h=2*o+1,c=i-1,u=n-1,l=o+1,f=l*(l+1)/2,d=new Zo,p=d,y=1;y<h;y++)p=p.next=new Zo,y===l&&(s=p);p.next=d;for(var v=null,g=null,x=0,m=0,w=Vo[o],b=Wo[o],A=0;A<n;A++){p=d;for(var B=a[m],E=a[m+1],T=a[m+2],S=a[m+3],_=0;_<l;_++)p.r=B,p.g=E,p.b=T,p.a=S,p=p.next;for(var k=0,M=0,C=0,L=0,D=l*B,P=l*E,I=l*T,z=l*S,R=f*B,O=f*E,j=f*T,N=f*S,F=1;F<l;F++){var U=m+((c<F?c:F)<<2),Y=a[U],X=a[U+1],G=a[U+2],H=a[U+3],q=l-F;R+=(p.r=Y)*q,O+=(p.g=X)*q,j+=(p.b=G)*q,N+=(p.a=H)*q,k+=Y,M+=X,C+=G,L+=H,p=p.next}v=d,g=s;for(var V=0;V<i;V++){var W=N*w>>b;if(a[m+3]=W,0!==W){var Z=255/W;a[m]=(R*w>>b)*Z,a[m+1]=(O*w>>b)*Z,a[m+2]=(j*w>>b)*Z}else a[m]=a[m+1]=a[m+2]=0;R-=D,O-=P,j-=I,N-=z,D-=v.r,P-=v.g,I-=v.b,z-=v.a;var Q=V+o+1;Q=x+(Q<c?Q:c)<<2,R+=k+=v.r=a[Q],O+=M+=v.g=a[Q+1],j+=C+=v.b=a[Q+2],N+=L+=v.a=a[Q+3],v=v.next;var J=g,$=J.r,K=J.g,tt=J.b,et=J.a;D+=$,P+=K,I+=tt,z+=et,k-=$,M-=K,C-=tt,L-=et,g=g.next,m+=4}x+=i}for(var rt=0;rt<i;rt++){var it=a[m=rt<<2],nt=a[m+1],ot=a[m+2],st=a[m+3],at=l*it,ht=l*nt,ct=l*ot,ut=l*st,lt=f*it,ft=f*nt,dt=f*ot,pt=f*st;p=d;for(var yt=0;yt<l;yt++)p.r=it,p.g=nt,p.b=ot,p.a=st,p=p.next;for(var vt=i,gt=0,xt=0,mt=0,wt=0,bt=1;bt<=o;bt++){m=vt+rt<<2;var At=l-bt;lt+=(p.r=it=a[m])*At,ft+=(p.g=nt=a[m+1])*At,dt+=(p.b=ot=a[m+2])*At,pt+=(p.a=st=a[m+3])*At,wt+=it,gt+=nt,xt+=ot,mt+=st,p=p.next,bt<u&&(vt+=i)}m=rt,v=d,g=s;for(var Bt=0;Bt<n;Bt++){var Et=m<<2;a[Et+3]=st=pt*w>>b,st>0?(st=255/st,a[Et]=(lt*w>>b)*st,a[Et+1]=(ft*w>>b)*st,a[Et+2]=(dt*w>>b)*st):a[Et]=a[Et+1]=a[Et+2]=0,lt-=at,ft-=ht,dt-=ct,pt-=ut,at-=v.r,ht-=v.g,ct-=v.b,ut-=v.a,Et=rt+((Et=Bt+l)<u?Et:u)*i<<2,lt+=wt+=v.r=a[Et],ft+=gt+=v.g=a[Et+1],dt+=xt+=v.b=a[Et+2],pt+=mt+=v.a=a[Et+3],v=v.next,at+=it=g.r,ht+=nt=g.g,ct+=ot=g.b,ut+=st=g.a,wt-=it,gt-=nt,xt-=ot,mt-=st,g=g.next,m+=i}}return t}(e,0,0,e.width,e.height,t)}},greyScale:function(t){var e=null;switch(t){case"grey-1":e=function(t){for(var e,r=t.data,i=0,n=r.length;i<n;i+=4)e=parseInt(.299*r[i]+.587*r[i+1]+.114*r[i+2]),t.data[i]=e,t.data[i+1]=e,t.data[i+2]=e;return t};break;case"grey-2":e=function(t){for(var e,r=t.data,i=0,n=r.length;i<n;i+=4)e=parseInt(3*r[i]+4*r[i+1]+r[i+2]>>>3),t.data[i]=e,t.data[i+1]=e,t.data[i+2]=e;return t};break;default:e=function(t){for(var e,r=t.data,i=0,n=r.length;i<n;i+=4)e=parseInt(.2126*r[i]+.715*r[i+1]+.0722*r[i+2]),t.data[i]=e,t.data[i+1]=e,t.data[i+2]=e;return t}}return e}},Jo=Je.instance,$o=Cn.canvasLayer,Ko=Cn.canvasNodeLayer;t.Path=Jo,t.behaviour=Ui,t.canvasLayer=$o,t.canvasNodeLayer=Ko,t.chain=xt,t.color=sr,t.ease=et,t.geometry=U,t.queue=m,t.svgLayer=function(t,e){void 0===e&&(e={});var r=document.querySelector(t),i=r.clientHeight,n=r.clientWidth,o=e.autoUpdate;void 0===o&&(o=!0);var s=e.enableResize;void 0===s&&(s=!0);var a,h=document.createElementNS(Ti.svg,"svg");h.setAttribute("height",i),h.setAttribute("width",n),h.style.position="absolute";var c,u,l,f,d=999999;r&&(r.appendChild(h),a=new w,o&&(d=vi.addVdom(a)));var p=new ki(h,{},xi(),d);p.container=r,p.type="SVG",p.width=n,p.height=i,p.domEl=h;var y=new ar(p);a&&a.rootNode(p),p.setLayerId=function(t){h.setAttribute("id",t)},p.onResize=function(t){l=t},p.onChange=function(t){f=t},p.invokeOnChange=function(){f&&f()},p.setSize=function(t,e){this.dom.setAttribute("height",e),this.dom.setAttribute("width",t),this.width=t,this.height=e,c=e,u=t},p.update=function(){this.execute()},p.setViewBox=function(t,e,r,i){this.dom.setAttribute("viewBox",t+","+e+","+i+","+r)},p.destroy=function(){var e=document.querySelector(t);e&&e.contains(h)&&e.removeChild(h),vi.removeVdom(d)},p.createPattern=function(t){return new Ai(this,t)},p.createClip=function(t){return new bi(this,t)},p.createMask=function(t){return new wi(this,t)};var v=null;return p.dom.addEventListener("pointerdown",(function(t){y.addPointer(t),t.target.drag_&&(t.target.drag_(t,"pointerdown",y),v=t.target)})),p.dom.addEventListener("pointerup",(function(t){v&&(v.drag_(t,"pointerup",y),v=null),y.removePointer(t)})),p.dom.addEventListener("pointermove",(function(t){t.preventDefault(),v&&v.drag_(t,"pointermove",y)})),vi.execute(),s&&pi(p,(function(e){document.querySelector(t)?(i=c||e.height,n=u||e.width,h.setAttribute("height",i),h.setAttribute("width",n),p.width=n,p.height=i,l&&l(),p.update()):yi(p)})),p},t.utility=Qo,t.webglLayer=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r={});var i=t?document.querySelector(t):null,n=i?i.clientHeight:0,o=i?i.clientWidth:0,s=sr.rgba(0,0,0,0),a=r.enableEvents;void 0===a&&(a=!1);var h=r.autoUpdate;void 0===h&&(h=!0);var c=r.enableResize;void 0===c&&(c=!1),(e=e||{premultipliedAlpha:!1,depth:!1,antialias:!1,alpha:!0}).premultipliedAlpha=void 0!==e.premultipliedAlpha&&e.premultipliedAlpha,e.depth=void 0!==e.depth&&e.depth,e.antialias=void 0!==e.antialias&&e.antialias,e.alpha=void 0===e.alpha||e.alpha;var u,l=document.createElement("canvas"),f=l.getContext("webgl2",e),d=function(t){var e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return e<1?1:e}(f);Dn=d>=2?2:Math.floor(d),l.setAttribute("height",n*Dn),l.setAttribute("width",o*Dn),l.style.height=n+"px",l.style.width=o+"px",l.style.position="absolute";var p,y,v=999999;i&&(i.appendChild(l),u=new w,h&&(v=In.addVdom(u)));var g=new jo(f,{el:"group",attr:{id:"rootNode"},ctx:function(t){t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor(s.r,s.g,s.b,s.a)}},jn(),v);u&&u.rootNode(g);var x=g.execute.bind(g);g.container=i,g.domEl=l,g.height=n,g.width=o,g.type="WEBGL",g.ctx.pixelRatio=Dn;var m=function(t){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)};g.execute=function(){m(this.ctx),this.updateBBox(),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),x()},g.update=function(){this.execute()},g.destroy=function(){var e=document.querySelector(t);e&&e.contains(l)&&e.removeChild(l),In.removeVdom(v)},g.getPixels=function(t,e,r,i){var n=new Uint8Array(r*i*4);return this.ctx.readPixels(t,e,r,i,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,n),n},g.putPixels=function(t,e,r){return this.ctx.putImageData(t,e,r)},g.clear=function(){m(this.ctx)},g.setClearColor=function(t){s=t},g.setClear=function(t){m=t};var b=function(t,e,r){t.width=Math.floor(e*Dn),t.height=Math.floor(r*Dn),t.style.height=r+"px",t.style.width=e+"px"};if(g.onResize=function(t){p=t},g.onChange=function(t){y=t},g.invokeOnChange=function(){y&&y()},g.setPixelRatio=function(t){Dn=t,this.ctx.pixelRatio=Dn,b(this.domEl,this.width,this.height)},g.setSize=function(t,e){this.width=t,this.height=e,n=e,o=t,b(this.domEl,this.width,this.height),this.execute()},g.setViewBox=function(t,e,r,i){},g.setStyle=function(t,e){this.domEl.style[t]=e},g.setAttr=function(t,e){"viewBox"===t&&this.setViewBox.apply(this,e.split(",")),l.setAttribute(t,e)},g.setContext=function(t,e){this.ctx[t]&&"function"==typeof this.ctx[t]?this.ctx[t].apply(null,e):this.ctx[t]&&(this.ctx[t]=e)},g.MeshGeometry=function(){return new Go(this.ctx)},g.PointsGeometry=function(){return new Ho(this.ctx)},g.LineGeometry=function(){return new qo(this.ctx)},g.createWebglTexture=function(t){return new Uo(this.ctx,t,this.vDomIndex)},g.RenderTarget=function(t){return new Yo(this.ctx,t,this.vDomIndex)},a){var A=new ar(g);l.addEventListener("mousemove",(function(t){t.preventDefault(),A.mousemoveCheck(t)})),l.addEventListener("mousedown",(function(t){A.mousedownCheck(t)})),l.addEventListener("mouseup",(function(t){A.mouseupCheck(t)})),l.addEventListener("mouseleave",(function(t){A.mouseleaveCheck(t)})),l.addEventListener("contextmenu",(function(t){A.contextmenuCheck(t)})),l.addEventListener("touchstart",(function(t){A.touchstartCheck(t)})),l.addEventListener("touchend",(function(t){A.touchendCheck(t)})),l.addEventListener("touchmove",(function(t){t.preventDefault(),A.touchmoveCheck(t)})),l.addEventListener("touchcancel",(function(t){A.touchcancelCheck(t)})),l.addEventListener("wheel",(function(t){A.wheelEventCheck(t)})),l.addEventListener("pointerdown",(function(t){A.addPointer(t),A.pointerdownCheck(t)})),l.addEventListener("pointerup",(function(t){A.removePointer(t),A.pointerupCheck(t)})),l.addEventListener("pointermove",(function(t){t.preventDefault(),A.pointermoveCheck(t)}))}return In.execute(),c&&g.container&&pi(g,(function(e){document.querySelector(t)?(n=e.height,o=e.width,g.width=o,g.height=n,b(g.domEl,o,n),m(g.ctx),p&&p(),g.execute(),l.style.height=n+"px",l.style.width=o+"px"):yi(g)})),g},Object.defineProperty(t,"__esModule",{value:!0})}));
