/*!
      * i2djs v3.8.0
      * (c) 2023 Narayana Swamy (narayanaswamy14@gmail.com)
      * @license BSD-3-Clause
      */
import t from"pdfkit/js/pdfkit.standalone.js";let e=null,r=[];const n={},i=[];let o,s,a,h=[];function c(t,e,r){this.executable=e,this.duration=e.duration?e.duration:0,this.delay=e.delay?e.delay:0,this.lastTime=0-(e.delay?e.delay:0),this.loopTracker=0,this.loop=e.loop?e.loop:0,this.direction=e.direction,this.easying=r,this.end=e.end?e.end:null,"reverse"===this.direction?this.factor=1:this.factor=0}function l(){}"undefined"==typeof window&&(global.window={setTimeout:setTimeout,clearTimeout:clearTimeout},global.performance={now:function(){return Date.now()}},global.document={}),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)},c.prototype.execute=function(t){this.executable.run(t)},c.prototype.resetCallBack=function(t){"function"==typeof t&&(this.callBack=t)},l.prototype={startAnimeFrames:function(){o||(o=window.requestAnimationFrame(d))},stopAnimeFrame:function(){o&&(window.cancelAnimFrame(o),o=null)},add:function(t,e,n){const i=new c(t,e,n);i.currTime=performance.now(),e.target&&(e.target.animList||(e.target.animList=[]),e.target.animList[e.target.animList.length]=i),r[r.length]=i,this.startAnimeFrames()},remove:function(t){const e=r.indexOf(t);-1!==e&&r.splice(e,1)},onRequestFrame:function(t){if("function"!=typeof t)throw new Error("Wrong input");h.push(t),h.length>0&&!o&&this.startAnimeFrames()},removeRequestFrameCall:function(t){if("function"!=typeof t)throw new Error("Wrong input");const e=h.indexOf(t);-1!==e&&h.splice(e,1)},clearAll:function(){r=[],h=[]}},l.prototype.addVdom=function(t){const e=i.length+1;return n[e]=t,i.push(e),this.startAnimeFrames(),e},l.prototype.removeVdom=function(t){const e=i.indexOf(t);-1!==e&&(i.splice(e,1),n[t].root.destroy(),delete n[t]),0===i.length&&0===r.length&&0===h.length&&this.stopAnimeFrame()},l.prototype.vDomChanged=function(t){if(n[t]&&void 0!==n[t].stateModified)n[t].stateModified=!0,n[t].root.stateModified=!0;else if("string"==typeof t){const e=t.split(":");if(n[e[0]]&&void 0!==n[e[0]].stateModified){n[e[0]].stateModified=!0,n[e[0]].root.stateModified=!0;const t=n[e[0]].root.fetchEl("#"+e[1]);t&&(t.stateModified=!0)}}},l.prototype.execute=function(){this.startAnimeFrames()},l.prototype.vDomUpdates=function(){for(let t=0,e=i.length;t<e;t+=1)if(i[t]&&n[i[t]]&&n[i[t]].stateModified)n[i[t]].execute(),n[i[t]].stateModified=!1;else if(i[t]&&n[i[t]]&&n[i[t]].root&&"NODE"!==n[i[t]].root.ENV){document.getElementById(n[i[t]].root.container.id)||this.removeVdom(i[t])}};const u=Math.abs;let f=0,p=[];function d(){try{p=[],f=0,a=performance.now();for(let t=0;t<r.length;t+=1)s=r[t],s.lastTime+=a-s.currTime,s.currTime=a,s.lastTime<s.duration&&s.lastTime>=0?(s.execute(u(s.factor-s.easying(s.lastTime,s.duration))),p[f++]=s):s.lastTime>s.duration?y(s):p[f++]=s;r=p,h.length>0&&function(){for(let t=0;t<h.length;t+=1)h[t](a)}(),e.vDomUpdates()}catch(t){console.error(t)}finally{o=window.requestAnimationFrame(d)}}function y(t){if(t.loopTracker>=t.loop-1){if(t.execute(1-t.factor),t.end&&t.end(),t.executable.target){const e=t.executable.target.animList;if(e&&e.length>0)if(1===e.length)t.executable.target.animList=[];else if(e.length>1){const r=e.indexOf(t);-1!==r&&e.splice(r,1)}}}else t.loopTracker+=1,t.lastTime=t.lastTime-t.duration,t.lastTime=t.lastTime%t.duration,"alternate"===t.direction?t.factor=1-t.factor:"reverse"===t.direction?t.factor=1:t.factor=0,t.execute(u(t.factor-t.easying(t.lastTime,t.duration))),p[f++]=t}e=new l;var g=e;function x(){}function m(t,e){let r=0,n=0,i=1,o=1;const s=e;if(t.attr.transform&&t.attr.transform.translate&&([r,n]=t.attr.transform.translate,s.x-=r,s.y-=n),t.attr.transform&&t.attr.transform.scale&&(i=void 0!==t.attr.transform.scale[0]?t.attr.transform.scale[0]:1,o=void 0!==t.attr.transform.scale[1]?t.attr.transform.scale[1]:i,s.x/=i,s.y/=o),t.attr.transform&&t.attr.transform.rotate){const e=t.attr.transform.rotate[0],r={x:t.attr.transform.rotate[1],y:t.attr.transform.rotate[2]},n=s.x,i=s.y,o=r.x,l=r.y;var a=Math.PI/180*e,h=Math.cos(a),c=Math.sin(a);s.x=h*(n-o)+c*(i-l)+o,s.y=h*(i-l)-c*(n-o)+l}}x.prototype.execute=function(){this.root.execute(),this.stateModified=!1},x.prototype.rootNode=function(t){this.root=t,this.stateModified=!0},x.prototype.eventsCheck=function(t,e,r){const n=this;let i,o;for(var s=0;s<=t.length-1;s+=1){var a=t[s],h={x:e.x,y:e.y};m(a,h),a.in({x:h.x,y:h.y})&&(a.children&&a.children.length>0?(o=n.eventsCheck(a.children,{x:h.x,y:h.y},r),o&&(i=o)):i=a)}return i},x.prototype.transformCoOr=m;const v=Math.sqrt,w=Math.sin,b=Math.cos,A=Math.abs,B=Math.atan2,E=Math.tan,T=Math.PI,S=Math.ceil,_=Math.max;function k(t,e){let r=1;if(0===e)return r;for(let n=1;n<=e;n+=1)r*=t;return r}function M(t,e){let r=0;for(const n in t)r+=k(e[n]-t[n],2);if(isNaN(r))throw new Error("error");return v(r)}function C(t,e,r){const n=k(r,3),i=k(r,2);return{x:e.ax*n+e.bx*i+e.cx*r+t.x,y:e.ay*n+e.by*i+e.cy*r+t.y}}const L=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){const r=[];let n,i=!0,o=!1;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);i=!0);}catch(t){o=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{o&&console.log("Error -"+n)}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},D=2*T,P=function(t,e,r,n,i,o,s){let{x:a,y:h}=t;a*=e,h*=r;return{x:n*a-i*h+o,y:i*a+n*h+s}},I=function(t,e){const r=4/3*E(e/4),n=b(t),i=w(t),o=b(t+e),s=w(t+e);return[{x:n-i*r,y:i+n*r},{x:o+s*r,y:s-o*r},{x:o,y:s}]},z=function(t,e,r,n){const i=t*n-e*r<0?-1:1;let o=(t*r+e*n)/(v(t*t+e*e)*v(t*t+e*e));return o>1&&(o=1),o<-1&&(o=-1),i*Math.acos(o)};function R(t,e,r,n){const i=t.x,o=t.y,s=e.x,a=e.y;var h=T/180*r,c=b(-h),l=w(-h);return{x:c*(i-s)+l*(o-a)+s,y:c*(o-a)-l*(i-s)+a}}function O(){}O.prototype={pow:k,getAngle:function(t,e){return B(e.x-t.x,e.y-t.y)},getDistance:M,scaleAlongOrigin:function(t,e){const r={};for(const n in t)r[n]=t[n]*e;return r},scaleAlongPoint:function(t,e,r){const n=(t.y-e.y)/(t.x-e.x),i=t.x*r;return{x:i,y:(n*(i-e.x)+e.y)*r}},linearTransitionBetweenPoints:function(t,e,r){return{x:t.x+(e.x-t.x)*r,y:t.y+(e.y-t.y)*r}},bezierTransition:function(t,e,r,n){return{x:(t.x-2*e.x+r.x)*n*n+(2*e.x-2*t.x)*n+t.x,y:(t.y-2*e.y+r.y)*n*n+(2*e.y-2*t.y)*n+t.y}},bezierLength:function(t,e,r){const n={},i={};n.x=t.x+r.x-2*e.x,n.y=t.y+r.y-2*e.y,i.x=2*e.x-2*t.x,i.y=2*e.y-2*t.y;const o=4*(n.x*n.x+n.y*n.y),s=4*(n.x*i.x+n.y*i.y),a=i.x*i.x+i.y*i.y,h=2*v(o+s+a),c=v(o),l=2*o*c,u=2*v(a),f=s/c;let p=(2*c+f+h)/(f+u);return p=isNaN(p)||A(p)===1/0?1:p,(l*h+c*s*(h-u)+(4*a*o-s*s)*Math.log(p))/(4*l)},cubicBezierTransition:C,cubicBezierLength:function(t,e){const r=.001;let n=0;const i=C.bind(null,t,e);let o,s;for(let t=0;t<=1;t+=r)o=i(t),s=i(t+r),n+=v(k((s.x-o.x)/r,2)+k((s.y-o.y)/r,2))*r;return n},cubicBezierCoefficients:function(t){const e=3*(t.cntrl1.x-t.p0.x),r=3*(t.cntrl2.x-t.cntrl1.x)-e,n=t.p1.x-t.p0.x-e-r,i=3*(t.cntrl1.y-t.p0.y),o=3*(t.cntrl2.y-t.cntrl1.y)-i;return{cx:e,bx:r,ax:n,cy:i,by:o,ay:t.p1.y-t.p0.y-i-o}},arcToBezier:function(t){let{px:e,py:r,cx:n,cy:i,rx:o,ry:s}=t;const a=t.xAxisRotation,h=void 0===a?0:a,c=t.largeArcFlag,l=void 0===c?0:c,u=t.sweepFlag,f=void 0===u?0:u,p=[];if(0===o||0===s)return[];const d=w(h*D/360),y=b(h*D/360),g=y*(e-n)/2+d*(r-i)/2,x=-d*(e-n)/2+y*(r-i)/2;if(0===g&&0===x)return[];o=A(o),s=A(s);const m=k(g,2)/k(o,2)+k(x,2)/k(s,2);m>1&&(o*=v(m),s*=v(m));const B=function(t,e,r,n,i,o,s,a,h,c,l,u){const f=k(i,2),p=k(o,2),d=k(l,2),y=k(u,2);let g=f*p-f*y-p*d;g<0&&(g=0),g/=f*y+p*d,g=v(g)*(s===a?-1:1);const x=g*i/o*u,m=g*-o/i*l,w=c*x-h*m+(t+r)/2,b=h*x+c*m+(e+n)/2,A=(l-x)/i,B=(u-m)/o,E=(-l-x)/i,T=(-u-m)/o,S=z(1,0,A,B);let _=z(A,B,E,T);return 0===a&&_>0&&(_-=D),1===a&&_<0&&(_+=D),[w,b,S,_]}(e,r,n,i,o,s,l,f,d,y,g,x),E=L(B,4),T=E[0],M=E[1];let C=E[2],R=E[3];const O=_(S(A(R)/(D/4)),1);R/=O;for(let t=0;t<O;t++)p.push(I(C,R)),C+=R;return p.map((t=>{const e=P(t[0],o,s,y,d,T,M),r=e.x,n=e.y,i=P(t[1],o,s,y,d,T,M),a=i.x,h=i.y,c=P(t[2],o,s,y,d,T,M);return{x1:r,y1:n,x2:a,y2:h,x:c.x,y:c.y}}))},intermediateValue:function(t,e,r){return t+(e-t)*r},toCubicCurves:function(t){if(!t.length)return;const e=t,r=[];for(let t=0;t<e.length;t+=1)if(-1!==["M","C","S","Q"].indexOf(e[t].type))r.push(e[t]);else if(-1!==["V","H","L","Z"].indexOf(e[t].type)){const n={x:(e[t].p0.x+e[t].p1.x)/2,y:(e[t].p0.y+e[t].p1.y)/2};r.push({p0:e[t].p0,cntrl1:n,cntrl2:n,p1:e[t].p1,type:"C",length:e[t].length})}else console.log("wrong cmd type");return r},rotatePoint:R,rotateBBox:function(t,e){let r={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},i={x:t.x,y:t.y+t.height},o={x:t.x+t.width,y:t.y+t.height};const{translate:s,rotate:a}=e,h={x:a[1]||0,y:a[2]||0},c=a[0];s&&s.length>0&&(h.x+=s[0],h.y+=s[1]),r=R(r,h,c,M(r,h)),n=R(n,h,c,M(n,h)),i=R(i,h,c,M(i,h)),o=R(o,h,c,M(o,h));const l=[r.x,n.x,i.x,o.x].sort(((t,e)=>t-e)),u=[r.y,n.y,i.y,o.y].sort(((t,e)=>t-e));return{x:l[0],y:u[0],width:l[3]-l[0],height:u[3]-u[0]}}};var j=new O;const N=j;function F(t,e){return t/e}function U(t,e){const r=t/e;return 1-(1-r)*Math.sin(r*e*.002*Math.PI*2+Math.PI/2)/Math.exp(8*r)}function Y(t,e){const r=t/e,n=r/100;return 1-(1-r)*Math.abs(Math.sin(r*e*n*Math.PI*2+Math.PI/2))/Math.exp(10*r)}function X(t,e){const r=t/e;return r*r}function G(t,e){const r=t/e;return r*(2-r)}function H(t,e){const r=t/e;return r<.5?2*r*r:(4-2*r)*r-1}function q(t,e){const r=t/e;return N.pow(r,3)}function V(t,e){let r=t/e;return r-=1,r*r*r+1}function W(t,e){const r=t/e;return r<.5?4*N.pow(r,3):(r-1)*(2*r-2)*(2*r-2)+1}function Z(t,e){const r=t/e;return 1-Math.cos(r*Math.PI/2)}function $(t,e){const r=t/e;return Math.cos(r*Math.PI/2)}function Q(t,e){const r=t/e;return(1-Math.cos(Math.PI*r))/2}function J(t){let e;if("function"==typeof t)return function(e,r){return t(e/r)};switch(t){case"easeOutQuad":e=G;break;case"easeInQuad":e=X;break;case"easeInOutQuad":e=H;break;case"easeInCubic":e=q;break;case"easeOutCubic":e=V;break;case"easeInOutCubic":e=W;break;case"easeInSin":e=Z;break;case"easeOutSin":e=$;break;case"easeInOutSin":e=Q;break;case"bounce":e=Y;break;case"linear":default:e=F;break;case"elastic":e=U}return e}let K=0,tt=0;function et(){return K+=1,K}function rt(){return tt+=1,tt}const nt=J;function it(t){return this.easying=nt(t),this.transition=t,this}function ot(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.durationP=t,this}function st(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.loopValue=t,this}function at(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.directionV=t,this}function ht(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.data=t,"CANVAS"===this.data.nodeName&&(this.canvasStack=[]),this}function ct(t){return"function"!=typeof t?null:(this.callbckExe=t,this)}function lt(t){return this.end=t,this}function ut(t){return this.endExe=t,this}function ft(){this.start()}function pt(){this.queue=g,this.sequenceQueue=[],this.lengthV=0,this.currPos=0,this.ID=et(),this.loopCounter=0}function dt(){this.queue=g,this.group=[],this.currPos=0,this.ID=et(),this.loopCounter=1}pt.prototype={duration:ot,loop:st,callbck:ct,bind:ht,child:lt,ease:it,end:ut,commit:ft,reset:function(t){return this.resetV=t,this},direction:at},pt.prototype.add=function(t){const e=this;return Array.isArray(t)||"function"==typeof t||(t=[t]),Array.isArray(t)&&t.map((t=>(e.lengthV+=t.length?t.length:0,t))),this.sequenceQueue=this.sequenceQueue.concat(t),this},pt.prototype.easyingGlobal=function(t,e){return t/e},pt.prototype.start=function(){const t=this;if("alternate"===t.directionV)t.factor=t.factor?-1*t.factor:1,t.currPos=t.factor<0?this.sequenceQueue.length-1:0;else if("reverse"===t.directionV){for(let e=0;e<this.sequenceQueue.length;e+=1){const r=this.sequenceQueue[e];r instanceof pt||r instanceof dt||r.run(1),t.currPos=e}t.factor=-1}else t.currPos=0,t.factor=1;this.execute()},pt.prototype.execute=function(){const t=this;let e=this.sequenceQueue[t.currPos];if(e="function"==typeof e?e():e,e)return e instanceof pt||e instanceof dt?e.end(t.triggerEnd.bind(t,e)).commit():(this.currObj=e,this.queue.add(rt(),{run(t){e.run(t)},target:e.target,delay:void 0!==e.delay?e.delay:0,duration:void 0!==e.duration?e.duration:t.durationP,loop:e.loop?e.loop:1,direction:t.factor<0?"reverse":"default",end:t.triggerEnd.bind(t,e)},((t,e)=>t/e))),this},pt.prototype.triggerEnd=function(t){const e=this;if(e.currPos+=e.factor,t.end&&e.triggerChild(t),e.sequenceQueue.length===e.currPos||e.currPos<0)return e.endExe&&e.endExe(),e.loopCounter+=1,void(e.loopCounter<e.loopValue&&e.start());this.execute()},pt.prototype.triggerChild=function(t){t.end instanceof dt||t.end instanceof pt?setTimeout((()=>{t.end.commit()}),0):t.end()},dt.prototype={duration:ot,loop:st,callbck:ct,bind:ht,child:lt,ease:it,end:ut,commit:ft,direction:at},dt.prototype.add=function(t){const e=this;return Array.isArray(t)||(t=[t]),this.group=this.group.concat(t),this.group.forEach((t=>{t.durationP=t.durationP?t.durationP:e.durationP})),this},dt.prototype.execute=function(){const t=this;t.currPos=0;for(let e=0,r=t.group.length;e<r;e++){const r=t.group[e];r instanceof pt||r instanceof dt?r.end(t.triggerEnd.bind(t,r)).commit():t.queue.add(rt(),{run(t){r.run(t)},target:r.target,delay:void 0!==r.delay?r.delay:0,duration:void 0!==r.duration?r.duration:t.durationP,loop:r.loop?r.loop:1,direction:r.direction?r.direction:"default",end:t.triggerEnd.bind(t,r)},r.ease?nt(r.ease):t.easying)}return t},dt.prototype.start=function(){const t=this;"alternate"===t.directionV?t.factor=t.factor?-1*t.factor:1:"reverse"===t.directionV?t.factor=-1:t.factor=1,this.execute()},dt.prototype.triggerEnd=function(t){const e=this;this.currPos+=1,t.end&&this.triggerChild(t.end),this.currPos===this.group.length&&(this.endExe&&this.triggerChild(this.endExe),e.loopCounter+=1,e.loopCounter<e.loopValue&&e.start())},dt.prototype.triggerChild=function(t){t instanceof dt||t instanceof pt?t.commit():"function"==typeof t?t():console.log("wrong type")};var yt={sequenceChain:function(){return new pt},parallelChain:function(){return new dt}};var gt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function xt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mt={exports:{}},vt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},wt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function bt(t){return t>=48&&t<=57}function At(t){return t>=48&&t<=57||43===t||45===t||46===t}function Bt(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function Et(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&wt.indexOf(e)>=0);)t.index++;var e}function Tt(t){var e=t.path.charCodeAt(t.index);return 48===e?(t.param=0,void t.index++):49===e?(t.param=1,void t.index++):void(t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")")}function St(t){var e,r=t.index,n=r,i=t.max,o=!1,s=!1,a=!1,h=!1;if(n>=i)t.err="SvgPath: missed param (at pos "+n+")";else if(43!==(e=t.path.charCodeAt(n))&&45!==e||(e=++n<i?t.path.charCodeAt(n):0),bt(e)||46===e){if(46!==e){if(o=48===e,e=++n<i?t.path.charCodeAt(n):0,o&&n<i&&e&&bt(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+r+")");for(;n<i&&bt(t.path.charCodeAt(n));)n++,s=!0;e=n<i?t.path.charCodeAt(n):0}if(46===e){for(h=!0,n++;bt(t.path.charCodeAt(n));)n++,a=!0;e=n<i?t.path.charCodeAt(n):0}if(101===e||69===e){if(h&&!s&&!a)return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");if(43!==(e=++n<i?t.path.charCodeAt(n):0)&&45!==e||n++,!(n<i&&bt(t.path.charCodeAt(n))))return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");for(;n<i&&bt(t.path.charCodeAt(n));)n++}t.index=n,t.param=parseFloat(t.path.slice(r,n))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")"}function _t(t){var e,r;r=(e=t.path[t.segmentStart]).toLowerCase();var n=t.data;if("m"===r&&n.length>2&&(t.result.push([e,n[0],n[1]]),n=n.slice(2),r="l",e="m"===e?"l":"L"),"r"===r)t.result.push([e].concat(n));else for(;n.length>=vt[r]&&(t.result.push([e].concat(n.splice(0,vt[r]))),vt[r]););}function kt(t){var e,r,n,i,o,s=t.max;if(t.segmentStart=t.index,e=t.path.charCodeAt(t.index),r=97==(32|e),function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(e))if(i=vt[t.path[t.index].toLowerCase()],t.index++,Et(t),t.data=[],i){for(n=!1;;){for(o=i;o>0;o--){if(!r||3!==o&&4!==o?St(t):Tt(t),t.err.length)return;t.data.push(t.param),Et(t),n=!1,t.index<s&&44===t.path.charCodeAt(t.index)&&(t.index++,Et(t),n=!0)}if(!n){if(t.index>=t.max)break;if(!At(t.path.charCodeAt(t.index)))break}}_t(t)}else _t(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}function Mt(){if(!(this instanceof Mt))return new Mt;this.queue=[],this.cache=null}Mt.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},Mt.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},Mt.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},Mt.prototype.rotate=function(t,e,r){var n,i,o;return 0!==t&&(this.translate(e,r),n=t*Math.PI/180,i=Math.cos(n),o=Math.sin(n),this.queue.push([i,o,-o,i,0,0]),this.cache=null,this.translate(-e,-r)),this},Mt.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},Mt.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},Mt.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=(e=this.cache,r=this.queue[t],[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]);var e,r;return this.cache},Mt.prototype.calc=function(t,e,r){var n;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(n=this.cache)[0]+e*n[2]+(r?0:n[4]),t*n[1]+e*n[3]+(r?0:n[5])]):[t,e]};var Ct=Mt,Lt=Ct,Dt={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},Pt=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,It=/[\s,]+/,zt=2*Math.PI;function Rt(t,e,r,n){var i=t*r+e*n;return i>1&&(i=1),i<-1&&(i=-1),(t*n-e*r<0?-1:1)*Math.acos(i)}function Ot(t,e){var r=4/3*Math.tan(e/4),n=Math.cos(t),i=Math.sin(t),o=Math.cos(t+e),s=Math.sin(t+e);return[n,i,n-i*r,i+n*r,o+s*r,s-o*r,o,s]}var jt=Math.PI/180;function Nt(t,e,r){if(!(this instanceof Nt))return new Nt(t,e,r);this.rx=t,this.ry=e,this.ax=r}Nt.prototype.transform=function(t){var e=Math.cos(this.ax*jt),r=Math.sin(this.ax*jt),n=[this.rx*(t[0]*e+t[2]*r),this.rx*(t[1]*e+t[3]*r),this.ry*(-t[0]*r+t[2]*e),this.ry*(-t[1]*r+t[3]*e)],i=n[0]*n[0]+n[2]*n[2],o=n[1]*n[1]+n[3]*n[3],s=((n[0]-n[3])*(n[0]-n[3])+(n[2]+n[1])*(n[2]+n[1]))*((n[0]+n[3])*(n[0]+n[3])+(n[2]-n[1])*(n[2]-n[1])),a=(i+o)/2;if(s<1e-10*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var h=n[0]*n[1]+n[2]*n[3],c=a+(s=Math.sqrt(s))/2,l=a-s/2;return this.ax=Math.abs(h)<1e-10&&Math.abs(c-o)<1e-10?90:180*Math.atan(Math.abs(h)>Math.abs(c-o)?(c-i)/h:h/(c-o))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(l)):(this.ax+=90,this.rx=Math.sqrt(l),this.ry=Math.sqrt(c)),this},Nt.prototype.isDegenerate=function(){return this.rx<1e-10*this.ry||this.ry<1e-10*this.rx};var Ft=function(t){var e=new Bt(t),r=e.max;for(Et(e);e.index<r&&!e.err.length;)kt(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}},Ut=function(t){var e,r,n=new Lt;return t.split(Pt).forEach((function(t){if(t.length)if(void 0===Dt[t])switch(r=t.split(It).map((function(t){return+t||0})),e){case"matrix":return void(6===r.length&&n.matrix(r));case"scale":return void(1===r.length?n.scale(r[0],r[0]):2===r.length&&n.scale(r[0],r[1]));case"rotate":return void(1===r.length?n.rotate(r[0],0,0):3===r.length&&n.rotate(r[0],r[1],r[2]));case"translate":return void(1===r.length?n.translate(r[0],0):2===r.length&&n.translate(r[0],r[1]));case"skewX":return void(1===r.length&&n.skewX(r[0]));case"skewY":return void(1===r.length&&n.skewY(r[0]))}else e=t})),n},Yt=Ct,Xt=function(t,e,r,n,i,o,s,a,h){var c=Math.sin(h*zt/360),l=Math.cos(h*zt/360),u=l*(t-r)/2+c*(e-n)/2,f=-c*(t-r)/2+l*(e-n)/2;if(0===u&&0===f)return[];if(0===s||0===a)return[];s=Math.abs(s),a=Math.abs(a);var p=u*u/(s*s)+f*f/(a*a);p>1&&(s*=Math.sqrt(p),a*=Math.sqrt(p));var d=function(t,e,r,n,i,o,s,a,h,c){var l=c*(t-r)/2+h*(e-n)/2,u=-h*(t-r)/2+c*(e-n)/2,f=s*s,p=a*a,d=l*l,y=u*u,g=f*p-f*y-p*d;g<0&&(g=0),g/=f*y+p*d;var x=(g=Math.sqrt(g)*(i===o?-1:1))*s/a*u,m=g*-a/s*l,v=c*x-h*m+(t+r)/2,w=h*x+c*m+(e+n)/2,b=(l-x)/s,A=(u-m)/a,B=(-l-x)/s,E=(-u-m)/a,T=Rt(1,0,b,A),S=Rt(b,A,B,E);return 0===o&&S>0&&(S-=zt),1===o&&S<0&&(S+=zt),[v,w,T,S]}(t,e,r,n,i,o,s,a,c,l),y=[],g=d[2],x=d[3],m=Math.max(Math.ceil(Math.abs(x)/(zt/4)),1);x/=m;for(var v=0;v<m;v++)y.push(Ot(g,x)),g+=x;return y.map((function(t){for(var e=0;e<t.length;e+=2){var r=t[e+0],n=t[e+1],i=l*(r*=s)-c*(n*=a),o=c*r+l*n;t[e+0]=i+d[0],t[e+1]=o+d[1]}return t}))},Gt=Nt;function Ht(t){if(!(this instanceof Ht))return new Ht(t);var e=Ft(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}Ht.from=function(t){if("string"==typeof t)return new Ht(t);if(t instanceof Ht){var e=new Ht("");return e.err=t.err,e.segments=t.segments.map((function(t){return t.slice()})),e.__stack=t.__stack.map((function(t){return Yt().matrix(t.toArray())})),e}throw new Error("SvgPath.from: invalid param type "+t)},Ht.prototype.__matrix=function(t){var e,r=this;t.queue.length&&this.iterate((function(n,i,o,s){var a,h,c,l;switch(n[0]){case"v":h=0===(a=t.calc(0,n[1],!0))[0]?["v",a[1]]:["l",a[0],a[1]];break;case"V":h=(a=t.calc(o,n[1],!1))[0]===t.calc(o,s,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":h=0===(a=t.calc(n[1],0,!0))[1]?["h",a[0]]:["l",a[0],a[1]];break;case"H":h=(a=t.calc(n[1],s,!1))[1]===t.calc(o,s,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var u=t.toArray(),f=Gt(n[1],n[2],n[3]).transform(u);if(u[0]*u[3]-u[1]*u[2]<0&&(n[5]=n[5]?"0":"1"),a=t.calc(n[6],n[7],"a"===n[0]),"A"===n[0]&&n[6]===o&&n[7]===s||"a"===n[0]&&0===n[6]&&0===n[7]){h=["a"===n[0]?"l":"L",a[0],a[1]];break}h=f.isDegenerate()?["a"===n[0]?"l":"L",a[0],a[1]]:[n[0],f.rx,f.ry,f.ax,n[4],n[5],a[0],a[1]];break;case"m":l=i>0,h=["m",(a=t.calc(n[1],n[2],l))[0],a[1]];break;default:for(h=[c=n[0]],l=c.toLowerCase()===c,e=1;e<n.length;e+=2)a=t.calc(n[e],n[e+1],l),h.push(a[0],a[1])}r.segments[i]=h}),!0)},Ht.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=Yt(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},Ht.prototype.toString=function(){var t="",e="",r=!1;this.__evaluateStack();for(var n=0,i=this.segments.length;n<i;n++){var o=this.segments[n],s=o[0];s!==e||"m"===s||"M"===s?("m"===s&&"z"===e&&(t+=" "),t+=s,r=!1):r=!0;for(var a=1;a<o.length;a++){var h=o[a];1===a?r&&h>=0&&(t+=" "):h>=0&&(t+=" "),t+=h}e=s}return t},Ht.prototype.translate=function(t,e){return this.__stack.push(Yt().translate(t,e||0)),this},Ht.prototype.scale=function(t,e){return this.__stack.push(Yt().scale(t,e||0===e?e:t)),this},Ht.prototype.rotate=function(t,e,r){return this.__stack.push(Yt().rotate(t,e||0,r||0)),this},Ht.prototype.skewX=function(t){return this.__stack.push(Yt().skewX(t)),this},Ht.prototype.skewY=function(t){return this.__stack.push(Yt().skewY(t)),this},Ht.prototype.matrix=function(t){return this.__stack.push(Yt().matrix(t)),this},Ht.prototype.transform=function(t){return t.trim()?(this.__stack.push(Ut(t)),this):this},Ht.prototype.round=function(t){var e,r=0,n=0,i=0,o=0;return t=t||0,this.__evaluateStack(),this.segments.forEach((function(s){var a=s[0].toLowerCase()===s[0];switch(s[0]){case"H":case"h":return a&&(s[1]+=i),i=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"V":case"v":return a&&(s[1]+=o),o=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"Z":case"z":return i=r,void(o=n);case"M":case"m":return a&&(s[1]+=i,s[2]+=o),i=s[1]-s[1].toFixed(t),o=s[2]-s[2].toFixed(t),r=i,n=o,s[1]=+s[1].toFixed(t),void(s[2]=+s[2].toFixed(t));case"A":case"a":return a&&(s[6]+=i,s[7]+=o),i=s[6]-s[6].toFixed(t),o=s[7]-s[7].toFixed(t),s[1]=+s[1].toFixed(t),s[2]=+s[2].toFixed(t),s[3]=+s[3].toFixed(t+2),s[6]=+s[6].toFixed(t),void(s[7]=+s[7].toFixed(t));default:return e=s.length,a&&(s[e-2]+=i,s[e-1]+=o),i=s[e-2]-s[e-2].toFixed(t),o=s[e-1]-s[e-1].toFixed(t),void s.forEach((function(e,r){r&&(s[r]=+s[r].toFixed(t))}))}})),this},Ht.prototype.iterate=function(t,e){var r,n,i,o=this.segments,s={},a=!1,h=0,c=0,l=0,u=0;if(e||this.__evaluateStack(),o.forEach((function(e,r){var n=t(e,r,h,c);Array.isArray(n)&&(s[r]=n,a=!0);var i=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return h=e[1]+(i?h:0),c=e[2]+(i?c:0),l=h,void(u=c);case"h":case"H":return void(h=e[1]+(i?h:0));case"v":case"V":return void(c=e[1]+(i?c:0));case"z":case"Z":return h=l,void(c=u);default:h=e[e.length-2]+(i?h:0),c=e[e.length-1]+(i?c:0)}})),!a)return this;for(i=[],r=0;r<o.length;r++)if(void 0!==s[r])for(n=0;n<s[r].length;n++)i.push(s[r][n]);else i.push(o[r]);return this.segments=i,this},Ht.prototype.abs=function(){return this.iterate((function(t,e,r,n){var i,o=t[0],s=o.toUpperCase();if(o!==s)switch(t[0]=s,o){case"v":return void(t[1]+=n);case"a":return t[6]+=r,void(t[7]+=n);default:for(i=1;i<t.length;i++)t[i]+=i%2?r:n}}),!0),this},Ht.prototype.rel=function(){return this.iterate((function(t,e,r,n){var i,o=t[0],s=o.toLowerCase();if(o!==s&&(0!==e||"M"!==o))switch(t[0]=s,o){case"V":return void(t[1]-=n);case"A":return t[6]-=r,void(t[7]-=n);default:for(i=1;i<t.length;i++)t[i]-=i%2?r:n}}),!0),this},Ht.prototype.unarc=function(){return this.iterate((function(t,e,r,n){var i,o,s,a=[],h=t[0];return"A"!==h&&"a"!==h?null:("a"===h?(o=r+t[6],s=n+t[7]):(o=t[6],s=t[7]),0===(i=Xt(r,n,o,s,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(i.forEach((function(t){a.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])})),a))})),this},Ht.prototype.unshort=function(){var t,e,r,n,i,o=this.segments;return this.iterate((function(s,a,h,c){var l,u=s[0],f=u.toUpperCase();a&&("T"===f?(l="t"===u,"Q"===(r=o[a-1])[0]?(t=r[1]-h,e=r[2]-c):"q"===r[0]?(t=r[1]-r[3],e=r[2]-r[4]):(t=0,e=0),n=-t,i=-e,l||(n+=h,i+=c),o[a]=[l?"q":"Q",n,i,s[1],s[2]]):"S"===f&&(l="s"===u,"C"===(r=o[a-1])[0]?(t=r[3]-h,e=r[4]-c):"c"===r[0]?(t=r[3]-r[5],e=r[4]-r[6]):(t=0,e=0),n=-t,i=-e,l||(n+=h,i+=c),o[a]=[l?"c":"C",n,i,s[1],s[2],s[3],s[4]]))})),this};var qt=xt(mt.exports=Ht),Vt={exports:{}};function Wt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function Zt(t,e,r){return[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]}function $t(t){return"number"==typeof t&&isFinite(t)}!function(t){var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi,n=function(t){var n=[];return t.replace(r,(function(t,r,i){var s=r.toLowerCase();for(i=o(i),"m"===s&&i.length>2&&(n.push([r].concat(i.splice(0,2))),s="l",r="m"===r?"l":"L");i.length>=0;){if(i.length===e[s])return i.unshift(r),n.push(i);if(i.length<e[s])throw new Error("malformed path data");n.push([r].concat(i.splice(0,e[s])))}})),n},i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function o(t){var e=t.match(i);return e?e.map(Number):[]}var s=function(t,e,r,n,i,o,s,h){return new a(t,e,r,n,i,o,s,h)};function a(t,e,r,n,i,o,s,a){this.a={x:t,y:e},this.b={x:r,y:n},this.c={x:i,y:o},this.d={x:s,y:a},null!=s&&null!=a?(this.getArcLength=w,this.getPoint=f,this.getDerivative=c):(this.getArcLength=p,this.getPoint=u,this.getDerivative=h),this.init()}function h(t,e,r){return{x:2*(1-r)*(t[1]-t[0])+2*r*(t[2]-t[1]),y:2*(1-r)*(e[1]-e[0])+2*r*(e[2]-e[1])}}function c(t,e,r){return u([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],r)}function l(t,e,r,n,i){for(var o=1,s=t/e,a=(t-r(n,i,s))/e;o>.001;){var h=r(n,i,s+a),c=r(n,i,s-a),l=Math.abs(t-h)/e,u=Math.abs(t-c)/e;l<o?(o=l,s+=a):u<o?(o=u,s-=a):a/=2}return s}function u(t,e,r){return{x:(1-r)*(1-r)*t[0]+2*(1-r)*r*t[1]+r*r*t[2],y:(1-r)*(1-r)*e[0]+2*(1-r)*r*e[1]+r*r*e[2]}}function f(t,e,r){return{x:(1-r)*(1-r)*(1-r)*t[0]+3*(1-r)*(1-r)*r*t[1]+3*(1-r)*r*r*t[2]+r*r*r*t[3],y:(1-r)*(1-r)*(1-r)*e[0]+3*(1-r)*(1-r)*r*e[1]+3*(1-r)*r*r*e[2]+r*r*r*e[3]}}function p(t,e,r){void 0===r&&(r=1);var n=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],s=2*e[1]-2*e[0],a=4*(n*n+i*i),h=4*(n*o+i*s),c=o*o+s*s;if(0===a)return r*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var l=h/(2*a),u=r+l,f=c/a-l*l;return Math.sqrt(a)/2*(u*Math.sqrt(u*u+f)-l*Math.sqrt(l*l+f)+f*Math.log(Math.abs((u+Math.sqrt(u*u+f))/(l+Math.sqrt(l*l+f)))))}a.prototype={constructor:a,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=l(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(t){var e=l(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),r=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),n=Math.sqrt(r.x*r.x+r.y*r.y);return n>0?{x:r.x/n,y:r.y/n}:{x:0,y:0}},getPropertiesAtLength:function(t){var e,r=l(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],r),i=Math.sqrt(n.x*n.x+n.y*n.y);e=i>0?{x:n.x/i,y:n.y/i}:{x:0,y:0};var o=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],r);return{x:o.x,y:o.y,tangentX:e.x,tangentY:e.y}}};var d=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],y=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],g=[[1],[1,1],[1,2,1],[1,3,3,1]];function x(t,e){return g[t][e]}function m(t,e,r){var n,i,o,s=r.length-1;if(0===s)return 0;if(0===t){for(i=0,o=0;o<=s;o++)i+=x(s,o)*Math.pow(1-e,s-o)*Math.pow(e,o)*r[o];return i}for(n=new Array(s),o=0;o<s;o++)n[o]=s*(r[o+1]-r[o]);return m(t-1,e,n)}function v(t,e,r){var n=m(1,r,t),i=m(1,r,e),o=n*n+i*i;return Math.sqrt(o)}function w(t,e,r){var n,i,o,s;void 0===r&&(r=1);var a=20;for(n=r/2,i=0,o=0;o<a;o++)s=n*d[a][o]+n,i+=y[a][o]*v(t,e,s);return n*i}var b=2*Math.PI;function A(t,e,r,n){var i=t*r+e*n;return i>1&&(i=1),i<-1&&(i=-1),(t*n-e*r<0?-1:1)*Math.acos(i)}function B(t,e,r,n,i,o,s,a,h,c){var l=c*(t-r)/2+h*(e-n)/2,u=-h*(t-r)/2+c*(e-n)/2,f=s*s,p=a*a,d=l*l,y=u*u,g=f*p-f*y-p*d;g<0&&(g=0),g/=f*y+p*d;var x=(g=Math.sqrt(g)*(i===o?-1:1))*s/a*u,m=g*-a/s*l,v=c*x-h*m+(t+r)/2,w=h*x+c*m+(e+n)/2,B=(l-x)/s,E=(u-m)/a,T=(-l-x)/s,S=(-u-m)/a,_=A(1,0,B,E),k=A(B,E,T,S);return 0===o&&k>0&&(k-=b),1===o&&k<0&&(k+=b),[v,w,_,k]}function E(t,e){var r=4/3*Math.tan(e/4),n=Math.cos(t),i=Math.sin(t),o=Math.cos(t+e),s=Math.sin(t+e);return[n,i,n-i*r,i+n*r,o+s*r,s-o*r,o,s]}var T=function(t,e,r,n,i,o,s,a,h){var c=Math.sin(i*b/360),l=Math.cos(i*b/360),u=l*(t-a)/2+c*(e-h)/2,f=-c*(t-a)/2+l*(e-h)/2;if(0===u&&0===f)return[];if(0===r||0===n)return[];r=Math.abs(r),n=Math.abs(n);var p=u*u/(r*r)+f*f/(n*n);p>1&&(r*=Math.sqrt(p),n*=Math.sqrt(p));var d=B(t,e,a,h,o,s,r,n,c,l),y=[],g=d[2],x=d[3],m=Math.max(Math.ceil(Math.abs(x)/(b/4)),1);x/=m;for(var v=0;v<m;v++)y.push(E(g,x)),g+=x;return y.map((function(t){for(var e=0;e<t.length;e+=2){var i=t[e+0],o=t[e+1],s=l*(i*=r)-c*(o*=n),a=c*i+l*o;t[e+0]=s+d[0],t[e+1]=a+d[1]}return t}))},S=function(t,e,r,n,i,o,s,a,h){return new _(t,e,r,n,i,o,s,a,h)};function _(t,e,r,n,i,o,a,h,c){var l=0,u=[],f=[];T(t,e,r,n,i,o,a,h,c).forEach((function(t){var e=new s(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),r=e.getTotalLength();l+=r,u.push(r),f.push(e)})),this.length=l,this.partialLengths=u,this.curves=f}_.prototype={constructor:_,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var r=0,n=0;n<e;n++)r+=this.partialLengths[n];return this.curves[e].getPointAtLength(t-r)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var r=0,n=0;n<e;n++)r+=this.partialLengths[n];return this.curves[e].getTangentAtLength(t-r)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),r=this.getPointAtLength(t);return{x:r.x,y:r.y,tangentX:e.x,tangentY:e.y}}};var k=function(t,e,r,n){return new M(t,e,r,n)};function M(t,e,r,n){this.x0=t,this.x1=e,this.y0=r,this.y1=n}M.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},M.prototype.getPointAtLength=function(t){var e=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),r=(this.x1-this.x0)*e,n=(this.y1-this.y0)*e;return{x:this.x0+r,y:this.y0+n}},M.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},M.prototype.getPropertiesAtLength=function(t){var e=this.getPointAtLength(t),r=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:r.x,tangentY:r.y}};var C=function(t){var e=0,r=[],i=[];function o(t){if(!t)return null;for(var a,h,c=n(t),l=[0,0],u=[0,0],f=0;f<c.length;f++)"M"===c[f][0]?(h=[(l=[c[f][1],c[f][2]])[0],l[1]],i.push(null)):"m"===c[f][0]?(h=[(l=[c[f][1]+l[0],c[f][2]+l[1]])[0],l[1]],i.push(null)):"L"===c[f][0]?(e+=Math.sqrt(Math.pow(l[0]-c[f][1],2)+Math.pow(l[1]-c[f][2],2)),i.push(new k(l[0],c[f][1],l[1],c[f][2])),l=[c[f][1],c[f][2]]):"l"===c[f][0]?(e+=Math.sqrt(Math.pow(c[f][1],2)+Math.pow(c[f][2],2)),i.push(new k(l[0],c[f][1]+l[0],l[1],c[f][2]+l[1])),l=[c[f][1]+l[0],c[f][2]+l[1]]):"H"===c[f][0]?(e+=Math.abs(l[0]-c[f][1]),i.push(new k(l[0],c[f][1],l[1],l[1])),l[0]=c[f][1]):"h"===c[f][0]?(e+=Math.abs(c[f][1]),i.push(new k(l[0],l[0]+c[f][1],l[1],l[1])),l[0]=c[f][1]+l[0]):"V"===c[f][0]?(e+=Math.abs(l[1]-c[f][1]),i.push(new k(l[0],l[0],l[1],c[f][1])),l[1]=c[f][1]):"v"===c[f][0]?(e+=Math.abs(c[f][1]),i.push(new k(l[0],l[0],l[1],l[1]+c[f][1])),l[1]=c[f][1]+l[1]):"z"===c[f][0]||"Z"===c[f][0]?(e+=Math.sqrt(Math.pow(h[0]-l[0],2)+Math.pow(h[1]-l[1],2)),i.push(new k(l[0],h[0],l[1],h[1])),l=[h[0],h[1]]):"C"===c[f][0]?(a=new s(l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4],c[f][5],c[f][6]),e+=a.getTotalLength(),l=[c[f][5],c[f][6]],i.push(a)):"c"===c[f][0]?(a=new s(l[0],l[1],l[0]+c[f][1],l[1]+c[f][2],l[0]+c[f][3],l[1]+c[f][4],l[0]+c[f][5],l[1]+c[f][6]),e+=a.getTotalLength(),l=[c[f][5]+l[0],c[f][6]+l[1]],i.push(a)):"S"===c[f][0]?(a=f>0&&["C","c","S","s"].indexOf(c[f-1][0])>-1?new s(l[0],l[1],2*l[0]-c[f-1][c[f-1].length-4],2*l[1]-c[f-1][c[f-1].length-3],c[f][1],c[f][2],c[f][3],c[f][4]):new s(l[0],l[1],l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4]),e+=a.getTotalLength(),l=[c[f][3],c[f][4]],i.push(a)):"s"===c[f][0]?(a=f>0&&["C","c","S","s"].indexOf(c[f-1][0])>-1?new s(l[0],l[1],l[0]+a.d.x-a.c.x,l[1]+a.d.y-a.c.y,l[0]+c[f][1],l[1]+c[f][2],l[0]+c[f][3],l[1]+c[f][4]):new s(l[0],l[1],l[0],l[1],l[0]+c[f][1],l[1]+c[f][2],l[0]+c[f][3],l[1]+c[f][4]),e+=a.getTotalLength(),l=[c[f][3]+l[0],c[f][4]+l[1]],i.push(a)):"Q"===c[f][0]?(a=l[0]!=c[f][1]&&l[1]!=c[f][2]?new s(l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4]):new k(c[f][1],c[f][3],c[f][2],c[f][4]),e+=a.getTotalLength(),i.push(a),l=[c[f][3],c[f][4]],u=[c[f][1],c[f][2]]):"q"===c[f][0]?(a=0!=c[f][1]||0!=c[f][2]?new s(l[0],l[1],l[0]+c[f][1],l[1]+c[f][2],l[0]+c[f][3],l[1]+c[f][4]):new k(l[0]+c[f][1],l[0]+c[f][3],l[1]+c[f][2],l[1]+c[f][4]),e+=a.getTotalLength(),u=[l[0]+c[f][1],l[1]+c[f][2]],l=[c[f][3]+l[0],c[f][4]+l[1]],i.push(a)):"T"===c[f][0]?(a=f>0&&["Q","q","T","t"].indexOf(c[f-1][0])>-1?new s(l[0],l[1],2*l[0]-u[0],2*l[1]-u[1],c[f][1],c[f][2]):new k(l[0],c[f][1],l[1],c[f][2]),i.push(a),e+=a.getTotalLength(),u=[2*l[0]-u[0],2*l[1]-u[1]],l=[c[f][1],c[f][2]]):"t"===c[f][0]?(a=f>0&&["Q","q","T","t"].indexOf(c[f-1][0])>-1?new s(l[0],l[1],2*l[0]-u[0],2*l[1]-u[1],l[0]+c[f][1],l[1]+c[f][2]):new k(l[0],l[0]+c[f][1],l[1],l[1]+c[f][2]),e+=a.getTotalLength(),u=[2*l[0]-u[0],2*l[1]-u[1]],l=[c[f][1]+l[0],c[f][2]+l[0]],i.push(a)):"A"===c[f][0]?(a=new S(l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4],c[f][5],c[f][6],c[f][7]),e+=a.getTotalLength(),l=[c[f][6],c[f][7]],i.push(a)):"a"===c[f][0]&&(a=new S(l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4],c[f][5],l[0]+c[f][6],l[1]+c[f][7]),e+=a.getTotalLength(),l=[l[0]+c[f][6],l[1]+c[f][7]],i.push(a)),r.push(e);return o}o.getTotalLength=function(){return e},o.getPointAtLength=function(t){var e=a(t);return i[e.i].getPointAtLength(e.fraction)},o.getTangentAtLength=function(t){var e=a(t);return i[e.i].getTangentAtLength(e.fraction)},o.getPropertiesAtLength=function(t){var e=a(t);return i[e.i].getPropertiesAtLength(e.fraction)};var a=function(t){t<0?t=0:t>e&&(t=e);for(var n=r.length-1;r[n]>=t&&r[n]>0;)n--;return n++,{fraction:t-r[n-1],i:n}};return o(t)};t.svgPathProperties=C,t.parse=n,t.Bezier=s,Object.defineProperty(t,"__esModule",{value:!0})}(Vt.exports);const Qt='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n';function Jt(t,e){let r=function(t){return new qt(t).abs()}(t);return function(t){let e=t.segments||[],r=[];if(!e.length||"M"!==e[0][0])return!1;for(let t=0;t<e.length;t++){let[n,i,o]=e[t];if("M"===n&&t||"Z"===n)break;if("M"===n||"L"===n)r.push([i,o]);else if("H"===n)r.push([i,r[r.length-1][1]]);else{if("V"!==n)return!1;r.push([r[r.length-1][0],i])}}return!!r.length&&{ring:r}}(r)||function(t,e){let r,n,i=function(t){return t.toString().split("M").map(((t,e)=>(t=t.trim(),e&&t?"M"+t:t))).filter((t=>t))}(t)[0],o=[],s=3;if(!i)throw new TypeError(Qt);n=function(t){if("undefined"!=typeof window&&window&&window.document)try{let e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e}catch(t){}return Vt.exports.svgPathProperties(t)}(i),r=n.getTotalLength(),e&&$t(e)&&e>0&&(s=Math.max(s,Math.ceil(r/e)));for(let t=0;t<s;t++){let e=n.getPointAtLength(r*t/s);o.push([e.x,e.y])}return{ring:o,skipBisect:!0}}(r,e)}function Kt(t,e){const r=t.length+e,n=function(t){for(var e,r,n=-1,i=t.length,o=t[i-1],s=o[0],a=o[1],h=0;++n<i;)e=s,r=a,e-=s=(o=t[n])[0],r-=a=o[1],h+=Math.sqrt(e*e+r*r);return h}(t)/e;let i=0,o=0,s=n/2;for(;t.length<r;){let e=t[i],r=t[(i+1)%t.length],a=Wt(e,r);s<=o+a?(t.splice(i+1,0,a?Zt(e,r,(s-o)/a):e.slice(0)),s+=n):(o+=a,i++)}}function te(t,e){let r,n,i;if("string"==typeof t){let r=Jt(t,e);t=r.ring,i=r.skipBisect}else if(!Array.isArray(t))throw new TypeError(Qt);if(r=t.slice(0),!function(t){return t.every((function(t){return Array.isArray(t)&&t.length>=2&&$t(t[0])&&$t(t[1])}))}(r))throw new TypeError(Qt);return r.length>1&&function(t,e){return Wt(t,e)<1e-9}(r[0],r[r.length-1])&&r.pop(),n=function(t){for(var e,r=-1,n=t.length,i=t[n-1],o=0;++r<n;)e=i,i=t[r],o+=e[1]*i[0]-e[0]*i[1];return o/2}(r),n>0&&r.reverse(),!i&&e&&$t(e)&&e>0&&function(t,e=1/0){for(let r=0;r<t.length;r++){let n=t[r],i=r===t.length-1?t[0]:t[r+1];for(;Wt(n,i)>e;)i=Zt(n,i,.5),t.splice(r+1,0,i)}}(r,e),r}function ee(t,e,{maxSegmentLength:r=10,string:n=!0}={}){let i=function(t,e,r){let n;return n=t.length-e.length,Kt(t,n<0?-1*n:0),Kt(e,n>0?n:0),function(t,e){let r,n,i,o=t.length,s=1/0;for(let i=0;i<o;i++)n=0,e.forEach((function(e,r){let s=Wt(t[(i+r)%o],e);n+=s*s})),n<s&&(s=n,r=i);r&&(i=t.splice(0,r),t.splice(t.length,0,...i))}(t,e),function(t,e,r){let n=t.map(((t,r)=>function(t,e){return function(r){return t.map(((t,n)=>t+r*(e[n]-t)))}}(t,e[r])));return function(t){let e=n.map((e=>e(t)));return r?"M"+e.join("L")+"Z":e}}(t,e,r)}(te(t,r),te(e,r),n);return!n||"string"!=typeof t&&"string"!=typeof e?i:r=>r<1e-4&&"string"==typeof t?t:1-r<1e-4&&"string"==typeof e?e:i(r)}var re,ne,ie={exports:{}};function oe(t,e,r){r=r||2;var n,i,o,s,a,h,c,l=e&&e.length,u=l?e[0]*r:t.length,f=se(t,0,u,r,!0),p=[];if(!f||f.next===f.prev)return p;if(l&&(f=function(t,e,r,n){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=se(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),a.push(xe(s));for(a.sort(pe),i=0;i<a.length;i++)r=de(a[i],r);return r}(t,e,f,r)),t.length>80*r){n=o=t[0],i=s=t[1];for(var d=r;d<u;d+=r)(a=t[d])<n&&(n=a),(h=t[d+1])<i&&(i=h),a>o&&(o=a),h>s&&(s=h);c=0!==(c=Math.max(o-n,s-i))?32767/c:0}return he(f,p,r,n,i,c,0),p}function se(t,e,r,n,i){var o,s;if(i===Ce(t,e,r,n)>0)for(o=e;o<r;o+=n)s=_e(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=_e(o,t[o],t[o+1],s);return s&&be(s,s.next)&&(ke(s),s=s.next),s}function ae(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!be(n,n.next)&&0!==we(n.prev,n,n.next))n=n.next;else{if(ke(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function he(t,e,r,n,i,o,s){if(t){!s&&o&&function(t,e,r,n){var i=t;do{0===i.z&&(i.z=ge(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,h,c=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<c&&(a++,n=n.nextZ);e++);for(h=c;a>0||h>0&&n;)0!==a&&(0===h||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,h--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,c*=2}while(s>1)}(i)}(t,n,i,o);for(var a,h,c=t;t.prev!==t.next;)if(a=t.prev,h=t.next,o?le(t,n,i,o):ce(t))e.push(a.i/r|0),e.push(t.i/r|0),e.push(h.i/r|0),ke(t),t=h.next,c=h.next;else if((t=h)===c){s?1===s?he(t=ue(ae(t),e,r),e,r,n,i,o,2):2===s&&fe(t,e,r,n,i,o):he(ae(t),e,r,n,i,o,1);break}}}function ce(t){var e=t.prev,r=t,n=t.next;if(we(e,r,n)>=0)return!1;for(var i=e.x,o=r.x,s=n.x,a=e.y,h=r.y,c=n.y,l=i<o?i<s?i:s:o<s?o:s,u=a<h?a<c?a:c:h<c?h:c,f=i>o?i>s?i:s:o>s?o:s,p=a>h?a>c?a:c:h>c?h:c,d=n.next;d!==e;){if(d.x>=l&&d.x<=f&&d.y>=u&&d.y<=p&&me(i,a,o,h,s,c,d.x,d.y)&&we(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function le(t,e,r,n){var i=t.prev,o=t,s=t.next;if(we(i,o,s)>=0)return!1;for(var a=i.x,h=o.x,c=s.x,l=i.y,u=o.y,f=s.y,p=a<h?a<c?a:c:h<c?h:c,d=l<u?l<f?l:f:u<f?u:f,y=a>h?a>c?a:c:h>c?h:c,g=l>u?l>f?l:f:u>f?u:f,x=ge(p,d,e,r,n),m=ge(y,g,e,r,n),v=t.prevZ,w=t.nextZ;v&&v.z>=x&&w&&w.z<=m;){if(v.x>=p&&v.x<=y&&v.y>=d&&v.y<=g&&v!==i&&v!==s&&me(a,l,h,u,c,f,v.x,v.y)&&we(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,w.x>=p&&w.x<=y&&w.y>=d&&w.y<=g&&w!==i&&w!==s&&me(a,l,h,u,c,f,w.x,w.y)&&we(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;v&&v.z>=x;){if(v.x>=p&&v.x<=y&&v.y>=d&&v.y<=g&&v!==i&&v!==s&&me(a,l,h,u,c,f,v.x,v.y)&&we(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;w&&w.z<=m;){if(w.x>=p&&w.x<=y&&w.y>=d&&w.y<=g&&w!==i&&w!==s&&me(a,l,h,u,c,f,w.x,w.y)&&we(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function ue(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!be(i,o)&&Ae(i,n,n.next,o)&&Te(i,o)&&Te(o,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(o.i/r|0),ke(n),ke(n.next),n=t=o),n=n.next}while(n!==t);return ae(n)}function fe(t,e,r,n,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&ve(s,a)){var h=Se(s,a);return s=ae(s,s.next),h=ae(h,h.next),he(s,e,r,n,i,o,0),void he(h,e,r,n,i,o,0)}a=a.next}s=s.next}while(s!==t)}function pe(t,e){return t.x-e.x}function de(t,e){var r=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s&&(s=a,r=n.x<n.next.x?n:n.next,a===i))return r}n=n.next}while(n!==e);if(!r)return null;var h,c=r,l=r.x,u=r.y,f=1/0;n=r;do{i>=n.x&&n.x>=l&&i!==n.x&&me(o<u?i:s,o,l,u,o<u?s:i,o,n.x,n.y)&&(h=Math.abs(o-n.y)/(i-n.x),Te(n,t)&&(h<f||h===f&&(n.x>r.x||n.x===r.x&&ye(r,n)))&&(r=n,f=h)),n=n.next}while(n!==c);return r}(t,e);if(!r)return e;var n=Se(r,t);return ae(n,n.next),ae(r,r.next)}function ye(t,e){return we(t.prev,t,e.prev)<0&&we(e.next,t,t.next)<0}function ge(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function xe(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function me(t,e,r,n,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(n-a)>=(r-s)*(e-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function ve(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Ae(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Te(t,e)&&Te(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(we(t.prev,t,e.prev)||we(t,e.prev,e))||be(t,e)&&we(t.prev,t,t.next)>0&&we(e.prev,e,e.next)>0)}function we(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function be(t,e){return t.x===e.x&&t.y===e.y}function Ae(t,e,r,n){var i=Ee(we(t,e,r)),o=Ee(we(t,e,n)),s=Ee(we(r,n,t)),a=Ee(we(r,n,e));return i!==o&&s!==a||(!(0!==i||!Be(t,r,e))||(!(0!==o||!Be(t,n,e))||(!(0!==s||!Be(r,t,n))||!(0!==a||!Be(r,e,n)))))}function Be(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ee(t){return t>0?1:t<0?-1:0}function Te(t,e){return we(t.prev,t,t.next)<0?we(t,e,t.next)>=0&&we(t,t.prev,e)>=0:we(t,e,t.prev)<0||we(t,t.next,e)<0}function Se(t,e){var r=new Me(t.i,t.x,t.y),n=new Me(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function _e(t,e,r,n){var i=new Me(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function ke(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Me(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ce(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Le(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}ie.exports=oe,ie.exports.default=oe,oe.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(Ce(t,0,o,r));if(i)for(var a=0,h=e.length;a<h;a++){var c=e[a]*r,l=a<h-1?e[a+1]*r:t.length;s-=Math.abs(Ce(t,c,l,r))}var u=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,p=n[a+1]*r,d=n[a+2]*r;u+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},oe.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},1===(re=Le).length&&(ne=re,re=function(t,e){return Le(ne(t),e)});let De=0;const Pe=j,Ie=g,ze=J;function Re(t,e,r,n){let{minX:i,minY:o,maxX:s,maxY:a}=r;if(-1!==["V","H","L","v","h","l"].indexOf(t.type))[t.p0?t.p0:e.p1,t.p1].forEach((function(t){t.x<i&&(i=t.x),t.x>s&&(s=t.x),t.y<o&&(o=t.y),t.y>a&&(a=t.y)}));else if(-1!==["Q","C","q","c"].indexOf(t.type)){const e=Pe.cubicBezierCoefficients(t),r=Pe.cubicBezierTransition.bind(null,t.p0,e);let n,h=0;for(;h<1;)n=r(h),h+=.05,n.x<i&&(i=n.x),n.x>s&&(s=n.x),n.y<o&&(o=n.y),n.y>a&&(a=n.y)}else{const e=t.p0;e.x<i&&(i=e.x),e.x>s&&(s=e.x),e.y<o&&(o=e.y),e.y>a&&(a=e.y)}r.minX=i,r.minY=o,r.maxX=s,r.maxY=a,n.x=i,n.y=o,n.width=s-i,n.height=a-o}function Oe(t,e){return{x:t.x+e.x,y:t.y+e.y}}function je(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ne(t,e,r){return t?r:e}function Fe(t){this.stack=[],this.length=0,this.stackGroup=[],this.BBox={x:0,y:0,width:0,height:0},this.minMax={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},t&&this.parse(t)}function Ue(t){return["S","C","V","L","H","Q"].indexOf(t)>-1}Fe.prototype={z:function(){return this.cp=this.start,this.segmentLength=Pe.getDistance(this.pp,this.cp),this.stack.push({p0:this.pp,p1:this.cp,type:"Z",length:this.segmentLength,pointAt(t){return Pe.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Re(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},m:function(t,e){const r=Ne(t,this.pp?this.pp:{x:0,y:0},{x:0,y:0});return this.cntrl=null,this.cp=Oe(e,r),this.start=this.cp,this.segmentLength=0,this.length=this.segmentLength,0!==this.currPathArr&&this.pp?(this.stackGroup.push(this.stack),this.stack=[]):this.stackGroup.push(this.stack),this.stack.push({type:"M",p0:this.cp,length:this.segmentLength,pointAt(t){return this.p0}}),this.pp=this.cp,Re(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},v:function(t,e){const r=Ne(t,this.pp,{x:this.pp.x,y:0});return this.cntrl=null,this.cp=Oe(e,r),this.segmentLength=Pe.getDistance(this.pp,this.cp),this.stack.push({type:"V",p0:this.pp,p1:this.cp,length:this.segmentLength,pointAt(t){return Pe.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Re(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},h:function(t,e){const r=Ne(t,this.pp,{x:0,y:this.pp.y});return this.cp=Oe(e,r),this.cntrl=null,this.segmentLength=Pe.getDistance(this.pp,this.cp),this.stack.push({type:t?"H":"h",p0:this.pp,p1:this.cp,length:this.segmentLength,relative:{p1:e},pointAt(t){return Pe.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Re(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},l:function(t,e){const r=Ne(t,this.pp,{x:0,y:0});return this.cntrl=null,this.cp=Oe(e,r),this.segmentLength=Pe.getDistance(this.pp,this.cp),this.stack.push({type:t?"L":"l",p0:this.pp,p1:this.cp,relative:{p1:e},length:this.segmentLength,pointAt(t){return Pe.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Re(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},q:function(t,e,r){const n=Ne(t,this.pp,{x:0,y:0}),i=Oe(e,n),o=Oe(r,n);return this.cp=o,this.segmentLength=Pe.bezierLength(this.pp,i,this.cp),this.cp=o,this.stack.push({type:t?"Q":"q",p0:this.pp,cntrl1:i,cntrl2:i,p1:this.cp,relative:{cntrl1:e,p1:r},length:this.segmentLength,pointAt(t){return Pe.bezierTransition(this.p0,this.cntrl1,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this.cntrl=i,Re(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},s:function(t,e,r){const n=Ne(t,this.pp,{x:0,y:0}),i=Oe(e,n),o=this.cntrl?Oe(this.pp,je(this.pp,this.cntrl?this.cntrl:this.pp)):i,s=Oe(r,n);this.cp=s;const a=Pe.cubicBezierCoefficients({p0:this.pp,cntrl1:o,cntrl2:i,p1:s});return this.segmentLength=Pe.cubicBezierLength(this.pp,a),this.stack.push({type:t?"S":"s",p0:this.pp,cntrl1:o,cntrl2:i,p1:this.cp,co:a,length:this.segmentLength,relative:{cntrl2:e,p1:r},pointAt(t){return Pe.cubicBezierTransition(this.p0,this.co,t)}}),Re(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this.length+=this.segmentLength,this.pp=this.cp,this.cntrl=i,this},c:function(t,e,r,n){const i=this,o=Ne(t,this.pp,{x:0,y:0}),s=Oe(e,o),a=Oe(r,o),h=Oe(n,o),c=Pe.cubicBezierCoefficients({p0:this.pp,cntrl1:s,cntrl2:a,p1:h});return this.cntrl=a,this.cp=h,this.segmentLength=Pe.cubicBezierLength(this.pp,c),this.stack.push({type:t?"C":"c",p0:this.pp,cntrl1:s,cntrl2:a,p1:this.cp,length:this.segmentLength,co:c,relative:{cntrl1:e,cntrl2:r,p1:n},pointAt(t){return Pe.cubicBezierTransition(this.p0,this.co,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Re(i.stack[i.stack.length-1],i.stack[i.stack.length-2],i.minMax,i.BBox),this},a:function(t,e,r,n,i,o,s){const a=Ne(t,this.pp,{x:0,y:0}),h=this,c=Oe(s,a);this.cp=c;const l=Pe.arcToBezier({px:this.pp.x,py:this.pp.y,cx:c.x,cy:c.y,rx:e,ry:r,xAxisRotation:n,largeArcFlag:i,sweepFlag:o});return l.forEach(((t,e)=>{const r=0===e?h.pp:{x:l[0].x,y:l[0].y},n={x:t.x1,y:t.y1},i={x:t.x2,y:t.y2},o={x:t.x,y:t.y},s=Pe.cubicBezierLength(r,Pe.cubicBezierCoefficients({p0:r,cntrl1:n,cntrl2:i,p1:o}));h.stack.push({type:"C",p0:r,cntrl1:n,cntrl2:i,p1:o,length:s,pointAt(t){return Pe.bezierTransition(this.p0,this.cntrl1,this.cntrl2,this.p1,t)}}),h.length+=s,Re(h.stack[h.stack.length-1],h.stack[h.stack.length-2],h.minMax,h.BBox)})),this.pp=this.cp,this.cntrl=null,this},fetchXY:function(){return{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:parseFloat(this.pathArr[this.currPathArr+=1])}}},Fe.prototype.points=function(t){if(void 0===this.f&&(this.f=.3),void 0===this.t&&(this.t=.6),0===t.length)return;this.m(!0,{x:t[0].x,y:t[0].y});var e=0,r=0,n=0;let i=0,o=0;for(var s=t[0],a=1;a<t.length;a++){var h=t[a],c=t[a+1];i=0,o=0,c&&(e=(c.y-s.y)/(c.x-s.x),i=(c.x-h.x)*-this.f,o=i*e*this.t),this.c(!0,{x:s.x-r,y:s.y-n},{x:h.x+i,y:h.y+o},{x:h.x,y:h.y}),r=i,n=o,s=h}},Fe.prototype.curveFfactor=function(t){this.f=t},Fe.prototype.curveTfactor=function(t){this.t=t},Fe.prototype.parse=function(t){for(this.path=t,this.currPathArr=-1,this.stack=[],this.length=0,this.pathArr=function(t){let e=t.replace(/e-/g,"$");e=e.replace(/ /g,","),e=e.replace(/-/g,",-"),e=e.split(/([a-zA-Z,])/g).filter((t=>""!==t&&","!==t)).map((t=>t.replace(/\$/g,"e-")));for(let t=0;t<e.length;t+=1)if(e[t].split(".").length>2){const r=e[t].split("."),n=[`${r[0]}.${r[1]}`];for(let t=2;t<r.length;t+=1)n.push(`.${r[t]}`);e.splice(t,1,n[0],n[1])}return e}(this.path),this.stackGroup=[];this.currPathArr<this.pathArr.length-1;)this.case(this.pathArr[this.currPathArr+=1]);return this.stack},Fe.prototype.fetchPathString=function(){let t,e="";for(let r=0;r<this.stack.length;r++)t=this.stack[r],"M"===t.type||"m"===t.type?e+=t.type+" "+t.p0.x+","+t.p0.y+" ":"Z"===t.type||"z"===t.type?e+="z":"C"===t.type?e+=t.type+" "+t.cntrl1.x+","+t.cntrl1.y+" "+t.cntrl2.x+","+t.cntrl2.y+" "+t.p1.x+","+t.p1.y+" ":"c"===t.type?e+=t.type+" "+t.relative.cntrl1.x+","+t.relative.cntrl1.y+" "+t.relative.cntrl2.x+","+t.relative.cntrl2.y+" "+t.relative.p1.x+","+t.relative.p1.y+" ":"Q"===t.type?e+=t.type+" "+t.cntrl1.x+","+t.cntrl1.y+" "+t.p1.x+","+t.p1.y+" ":"q"===t.type?e+=t.type+" "+t.relative.cntrl1.x+","+t.relative.cntrl1.y+" "+t.relative.p1.x+","+t.relative.p1.y+" ":"S"===t.type?e+=t.type+" "+t.cntrl2.x+","+t.cntrl2.y+" "+t.p1.x+","+t.p1.y+" ":"s"===t.type?e+=t.type+" "+t.relative.cntrl2.x+","+t.relative.cntrl2.y+" "+t.relative.p1.x+","+t.relative.p1.y+" ":"V"===t.type?e+=t.type+" "+t.p1.y+" ":"v"===t.type?e+=t.type+" "+t.relative.p1.y+" ":"H"===t.type?e+=t.type+" "+t.p1.x+" ":"h"===t.type?e+=t.type+" "+t.relative.p1.x+" ":"L"===t.type?e+=t.type+" "+t.p1.x+","+t.p1.y+" ":"l"===t.type&&(e+=t.type+" "+t.relative.p1.x+","+t.relative.p1.y+" ");return e},Fe.prototype.getTotalLength=function(){return this.length},Fe.prototype.getAngleAtLength=function(t,e){if(t>this.length)return null;const r=this.getPointAtLength(t),n=this.getPointAtLength(t+("src"===e?-1*t*.01:.01*t));return Math.atan2(n.y-r.y,n.x-r.x)},Fe.prototype.getPointAtLength=function(t){let e={x:0,y:0},r=t;return this.stack.every(((t,n)=>(r-=t.length,Math.floor(r)>=0||(e=t.pointAt((t.length+r)/(0===t.length?1:t.length)),!1)))),e},Fe.prototype.execute=function(t,e){let r;e||t.beginPath();for(let e=0;e<this.stack.length;e++)switch(r=this.stack[e],r.type){case"M":case"m":t.moveTo(r.p0.x,r.p0.y);break;case"Z":case"z":case"L":case"l":case"V":case"v":case"H":case"h":t.lineTo(r.p1.x,r.p1.y);break;case"C":case"c":case"S":case"s":t.bezierCurveTo(r.cntrl1.x,r.cntrl1.y,r.cntrl2.x,r.cntrl2.y,r.p1.x,r.p1.y);break;case"Q":case"q":t.quadraticCurveTo(r.cntrl1.x,r.cntrl1.y,r.p1.x,r.p1.y)}e||t.closePath()},Fe.prototype.getPoints=function(t=.01){const e=[];let r;for(let t=0;t<this.stack.length;t++){r=this.stack[t];const n=.05;let i=0;switch(r.type){case"M":case"m":e[e.length]=r.p0.x,e[e.length]=r.p0.y;break;case"Z":case"z":case"L":case"l":case"V":case"v":case"H":case"h":e[e.length]=r.p1.x,e[e.length]=r.p1.y;break;case"C":case"c":case"S":case"s":case"Q":case"q":for(;i<=1;){const t=r.pointAt(i);e[e.length]=t.x,e[e.length]=t.y,i+=n}}}return e},Fe.prototype.case=function(t){let e,r,n,i,o,s=t;switch(-1!==["m","M","v","V","l","L","h","H","q","Q","c","C","s","S","a","A","z","Z"].indexOf(s)?this.PC=s:(s=this.PC,this.currPathArr=this.currPathArr-1),s){case"m":this.m(!1,this.fetchXY());break;case"M":this.m(!0,this.fetchXY());break;case"v":this.v(!1,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"V":this.v(!0,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"l":this.l(!1,this.fetchXY());break;case"L":this.l(!0,this.fetchXY());break;case"h":this.h(!1,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"H":this.h(!0,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"q":this.q(!1,this.fetchXY(),this.fetchXY());break;case"Q":this.q(!0,this.fetchXY(),this.fetchXY());break;case"c":this.c(!1,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"C":this.c(!0,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"s":this.s(!1,this.fetchXY(),this.fetchXY());break;case"S":this.s(!0,this.fetchXY(),this.fetchXY());break;case"a":e=parseFloat(this.pathArr[this.currPathArr+=1]),r=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),this.a(!1,e,r,n,i,o,this.fetchXY());break;case"A":e=parseFloat(this.pathArr[this.currPathArr+=1]),r=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),this.a(!0,e,r,n,i,o,this.fetchXY());break;case"z":case"Z":this.z()}};const Ye=function(t,e,r,n,i,o){this.type=t,this.p0=e,this.c1_src=r,this.c2_src=n,this.co=i,this.length_src=o};Ye.prototype.execute=function(t){const e=this.co,r=this.p0,n=this.c1_src,i=this.c2_src,o={x:r.x+(n.x-r.x)*t,y:r.y+(n.y-r.y)*t},s=n.x+(i.x-n.x)*t,a=n.y+(i.y-n.y)*t;return this.cntrl1=o,this.cntrl2={x:o.x+(s-o.x)*t,y:o.y+(a-o.y)*t},this.p1={x:e.ax*Pe.pow(t,3)+e.bx*Pe.pow(t,2)+e.cx*t+r.x,y:e.ay*Pe.pow(t,3)+e.by*Pe.pow(t,2)+e.cy*t+r.y},this.length=this.length_src*t,this.relative={cntrl1:Ue(this.type)?this.cntrl1:je(this.cntrl1,this.p0),cntrl2:Ue(this.type)?this.cntrl2:je(this.cntrl2,this.p0),p1:Ue(this.type)?this.p1:je(this.p1,this.p0)},this},Ye.prototype.pointAt=function(t){return Pe.cubicBezierTransition(this.p0,this.co,t)};const Xe=function(t,e,r,n,i,o){this.type=t,this.p0=e,this.p1_src=r,this.p2_src=n,this.length_src=i,this.length=0};Xe.prototype.execute=function(t){const e=this.p0,r=this.p1_src,n=this.p2_src;return this.length=this.length_src*t,this.cntrl1={x:e.x+(r.x-e.x)*t,y:e.y+(r.y-e.y)*t},this.cntrl2=this.cntrl1,this.p1={x:(e.x-2*r.x+n.x)*t*t+(2*r.x-2*e.x)*t+e.x,y:(e.y-2*r.y+n.y)*t*t+(2*r.y-2*e.y)*t+e.y},this.relative={cntrl1:Ue(this.type)?this.cntrl1:je(this.cntrl1,this.p0),p1:Ue(this.type)?this.p1:je(this.p1,this.p0)},this},Xe.prototype.pointAt=function(t){return Pe.bezierTransition(this.p0,this.cntrl1,this.p1,t)};const Ge=function(t,e,r,n,i){this.type=t,this.p0=e,this.p1=e,this.p2_src=r,this.length_src=n,this.length=0};function He(t){return t instanceof Fe}Ge.prototype.execute=function(t){const e=this.p0,r=this.p2_src;return this.p1={x:e.x+(r.x-e.x)*t,y:e.y+(r.y-e.y)*t},this.length=this.length_src*t,this.relative={p1:Ue(this.type)?this.p1:je(this.p1,this.p0)},this},Ge.prototype.pointAt=function(t){return Pe.linearTransitionBetweenPoints(this.p0,this.p1,t)};var qe={instance:function(t){return new Fe(t)},isTypePath:He,animatePathTo:function(t){const e=this,{duration:r,ease:n,end:i,loop:o,direction:s,d:a}=t,h=a||e.attr.d;let c=0;if(e.arrayStack=[],!h)throw Error("Path Not defined");const l=yt.sequenceChain(),u=He(h)?h:new Fe(h),f=u.stackGroup.reduce(((t,e)=>t=t.concat(e)),[]),p=[];for(let t=0;t<f.length;t+=1)if("Z"===f[t].type||"z"===f[t].type)p.push({run(t){u.stack.length=this.id+1,u.stack[this.id]=this.render.execute(t),e.setAttr("d",u)},target:e,id:t,render:new Ge(f[t].type,f[t].p0,f[0].p0,f[t].segmentLength),length:f[t].length}),c+=0;else if(-1!==["V","v","H","h","L","l"].indexOf(f[t].type))p.push({run(t){u.stack.length=this.id+1,u.stack[this.id]=this.render.execute(t),e.setAttr("d",u)},target:e,id:t,render:new Ge(f[t].type,f[t].p0,f[t].p1,f[t].length),length:f[t].length}),c+=f[t].length;else if("Q"===f[t].type||"q"===f[t].type)p.push({run(t){u.stack.length=this.id+1,u.stack[this.id]=this.render.execute(t),e.setAttr("d",u)},target:e,id:t,render:new Xe(f[t].type,f[t].p0,f[t].cntrl1,f[t].p1,f[t].length),length:f[t].length}),c+=f[t].length;else if("C"===f[t].type||"S"===f[t].type||"c"===f[t].type||"s"===f[t].type){const r=Pe.cubicBezierCoefficients(f[t]);p.push({run(t){u.stack.length=this.id+1,u.stack[this.id]=this.render.execute(t),e.setAttr("d",u)},target:e,id:t,co:r,render:new Ye(f[t].type,f[t].p0,f[t].cntrl1,f[t].cntrl2,r,f[t].length),length:f[t].length}),c+=f[t].length}else"M"!==f[t].type&&"m"!==f[t].type||(p.push({run(){u.stack.length=this.id+1,u.stack[this.id]={type:"M",p0:f[t].p0,length:0,pointAt(t){return this.p0}}},target:e,id:t,length:0}),c+=0);return p.forEach((function(t){t.duration=t.length/c*r})),l.add(p).ease(n).loop(o||0).direction(s||"default"),"function"==typeof i&&l.end(i.bind(e)),l.commit(),this},morphTo:function(t){const e=this,{duration:r}=t,{ease:n}=t,i=t.loop?t.loop:0,o=t.direction?t.direction:"default",s=t.attr.d?t.attr.d:e.attr.d,a=ee(He(e.attr.d)?e.attr.d.fetchPathString():e.attr.d,He(s)?s.fetchPathString():s,{maxSegmentLength:25});Ie.add((De+=1,"morph_"+De),{run(t){e.setAttr("d",a(t))},target:e,duration:r,loop:i,direction:o},ze(n))}};const Ve={AliceBlue:"f0f8ff",AntiqueWhite:"faebd7",Aqua:"00ffff",Aquamarine:"7fffd4",Azure:"f0ffff",Beige:"f5f5dc",Bisque:"ffe4c4",Black:"000000",BlanchedAlmond:"ffebcd",Blue:"0000ff",BlueViolet:"8a2be2",Brown:"a52a2a",BurlyWood:"deb887",CadetBlue:"5f9ea0",Chartreuse:"7fff00",Chocolate:"d2691e",Coral:"ff7f50",CornflowerBlue:"6495ed",Cornsilk:"fff8dc",Crimson:"dc143c",Cyan:"00ffff",DarkBlue:"00008b",DarkCyan:"008b8b",DarkGoldenRod:"b8860b",DarkGray:"a9a9a9",DarkGrey:"a9a9a9",DarkGreen:"006400",DarkKhaki:"bdb76b",DarkMagenta:"8b008b",DarkOliveGreen:"556b2f",DarkOrange:"ff8c00",DarkOrchid:"9932cc",DarkRed:"8b0000",DarkSalmon:"e9967a",DarkSeaGreen:"8fbc8f",DarkSlateBlue:"483d8b",DarkSlateGray:"2f4f4f",DarkSlateGrey:"2f4f4f",DarkTurquoise:"00ced1",DarkViolet:"9400d3",DeepPink:"ff1493",DeepSkyBlue:"00bfff",DimGray:"696969",DimGrey:"696969",DodgerBlue:"1e90ff",FireBrick:"b22222",FloralWhite:"fffaf0",ForestGreen:"228b22",Fuchsia:"ff00ff",Gainsboro:"dcdcdc",GhostWhite:"f8f8ff",Gold:"ffd700",GoldenRod:"daa520",Gray:"808080",Grey:"808080",Green:"008000",GreenYellow:"adff2f",HoneyDew:"f0fff0",HotPink:"ff69b4",IndianRed:"cd5c5c",Indigo:"4b0082",Ivory:"fffff0",Khaki:"f0e68c",Lavender:"e6e6fa",LavenderBlush:"fff0f5",LawnGreen:"7cfc00",LemonChiffon:"fffacd",LightBlue:"add8e6",LightCoral:"f08080",LightCyan:"e0ffff",LightGoldenRodYellow:"fafad2",LightGray:"d3d3d3",LightGrey:"d3d3d3",LightGreen:"90ee90",LightPink:"ffb6c1",LightSalmon:"ffa07a",LightSeaGreen:"20b2aa",LightSkyBlue:"87cefa",LightSlateGray:"778899",LightSlateGrey:"778899",LightSteelBlue:"b0c4de",LightYellow:"ffffe0",Lime:"00ff00",LimeGreen:"32cd32",Linen:"faf0e6",Magenta:"ff00ff",Maroon:"800000",MediumAquaMarine:"66cdaa",MediumBlue:"0000cd",MediumOrchid:"ba55d3",MediumPurple:"9370db",MediumSeaGreen:"3cb371",MediumSlateBlue:"7b68ee",MediumSpringGreen:"00fa9a",MediumTurquoise:"48d1cc",MediumVioletRed:"c71585",MidnightBlue:"191970",MintCream:"f5fffa",MistyRose:"ffe4e1",Moccasin:"ffe4b5",NavajoWhite:"ffdead",Navy:"000080",OldLace:"fdf5e6",Olive:"808000",OliveDrab:"6b8e23",Orange:"ffa500",OrangeRed:"ff4500",Orchid:"da70d6",PaleGoldenRod:"eee8aa",PaleGreen:"98fb98",PaleTurquoise:"afeeee",PaleVioletRed:"db7093",PapayaWhip:"ffefd5",PeachPuff:"ffdab9",Peru:"cd853f",Pink:"ffc0cb",Plum:"dda0dd",PowderBlue:"b0e0e6",Purple:"800080",RebeccaPurple:"663399",Red:"ff0000",RosyBrown:"bc8f8f",RoyalBlue:"4169e1",SaddleBrown:"8b4513",Salmon:"fa8072",SandyBrown:"f4a460",SeaGreen:"2e8b57",SeaShell:"fff5ee",Sienna:"a0522d",Silver:"c0c0c0",SkyBlue:"87ceeb",SlateBlue:"6a5acd",SlateGray:"708090",SlateGrey:"708090",Snow:"fffafa",SpringGreen:"00ff7f",SteelBlue:"4682b4",Tan:"d2b48c",Teal:"008080",Thistle:"d8bfd8",Tomato:"ff6347",Turquoise:"40e0d0",Violet:"ee82ee",Wheat:"f5deb3",White:"ffffff",WhiteSmoke:"f5f5f5",Yellow:"ffff00",YellowGreen:"9acd32"},We=Math.round;function Ze(t,e,r,n){this.r=t,this.g=e,this.b=r,this.a=void 0===n?255:n,this.rgba=`rgba(${t},${e},${r},${n})`}function $e(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((t,e,r,n)=>e+e+r+r+n+n));const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return new Ze(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255)}function Qe(t){var e,r,n,i,o,s,a;const h=t.replace(/[^0-9.,]+/g,"").split(",").map((function(t){return parseFloat(t)}));if(o=h[0]/360,s=h[1]/100,a=h[2]/100,i=h[3],0===s)e=r=n=a;else{var c=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},l=a<.5?a*(1+s):a+s-a*s,u=2*a-l;e=255*c(u,l,o+1/3),r=255*c(u,l,o),n=255*c(u,l,o-1/3)}return new Ze(e,r,n,i)}function Je(t){return t instanceof Ze?t:t.startsWith("#")?$e(t):t.startsWith("rgb")?function(t){const e=t.replace(/[^0-9.,]+/g,"").split(","),r={},n=["r","g","b","a"];for(let t=0;t<e.length;t+=1)r[n[t]]=parseFloat(e[t]);return new Ze(r.r,r.g,r.b,r.a)}(t):t.startsWith("hsl")?Qe(t):{r:0,g:0,b:0,a:255}}Ze.prototype.normalize=function(){return this.normalFlag||(this.r/=255,this.g/=255,this.b/=255,this.a/=255,this.normalFlag=!0),this};var Ke={nameToHex:function(t){return Ve[t]?`#${Ve[t]}`:"#000"},hexToRgb:$e,rgbToHex:function(t){const e=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")).split(",");return`#${((1<<24)+(parseInt(e[0],10)<<16)+(parseInt(e[1],10)<<8)+parseInt(e[2],10)).toString(16).slice(1)}`},hslToRgb:Qe,transition:function(t,e){return e=e||"rgba(0,0,0,0)",t=Je(t=t||"rgba(0,0,0,0)"),e=Je(e),function(r){return new Ze(We(t.r+(e.r-t.r)*r),We(t.g+(e.g-t.g)*r),We(t.b+(e.b-t.b)*r),We(t.a+(e.a-t.a)*r))}},colorToRGB:Je,rgba:function(t,e,r,n){return new Ze(t,e,r,n)},isTypeColor:function(t){return t instanceof Ze||t.startsWith("#")||t.startsWith("rgb")||t.startsWith("hsl")},RGBAInstanceCheck:function(t){return t instanceof Ze}};function tr(t){this.vDom=t,this.disable=!1,this.dragNode=null,this.touchNode=null,this.wheelNode=null,this.pointers=[]}function er(t,e,r){if(t.dom.parent)return t.dom.parent.events[e]&&t.dom.parent.events[e](t.dom.parent,r),er(t.dom.parent,e,r)}let rr;tr.prototype.getNode=function(t){},tr.prototype.addPointer=function(t){this.pointers.push(t)},tr.prototype.removePointer=function(t){const e=this,r=this.pointers;let n=-1;for(var i=0;i<r.length;i++)if(t.pointerId===r[i].pointerId){n=i;break}-1!==n&&(e.pointers=[],e.distance=0,this.pointerNode&&this.pointerNode.node.events.zoom&&this.pointerNode.node.events.zoom.onZoomEnd(this.pointerNode.node,t,e))},tr.prototype.clickCheck=function(t){or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"click")},tr.prototype.dblclickCheck=function(t){or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"dblclick")},tr.prototype.pointerdownCheck=function(t){const e=this,r=or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"pointerdown");!r||this.pointerNode&&this.pointerNode.node===r?this.pointerNode&&(this.pointerNode.clickCounter+=1):this.pointerNode={node:r,clickCounter:1,dragCounter:0},r&&(r.events.zoom||r.events.drag)?(r.events.zoom&&r.events.zoom.panFlag&&r.events.zoom.panExecute(r,t,"pointerdown",e),r.events.drag&&r.events.drag.execute(r,t,"pointerdown",e)):r&&"touch"===t.pointerType&&r.events.mouseover.call(r,t)},tr.prototype.pointermoveCheck=function(t){const e=this,r=this.pointerNode?this.pointerNode.node:null;r?(this.pointerNode.dragCounter+=1,r.events.zoom&&(r.events.zoom.panFlag&&r.events.zoom.panExecute(r,t,"pointermove",e),r.events.zoom.zoomPinch(r,t,e)),r.events.drag&&r.events.drag.execute(r,t,"pointermove",e),r.events.mousemove&&r.events.mousemove.call(r,t)):r&&"touch"===t.pointerType&&r.events.mousemove.call(r,t),t.preventDefault()},tr.prototype.pointerupCheck=function(t){const e=this,r=this.pointerNode?this.pointerNode.node:null;r&&(r.events.drag&&r.events.drag.execute(r,t,"pointerup",e),r.events.zoom&&r.events.zoom.panFlag&&r.events.zoom.panExecute(r,t,"pointerup",e),this.pointerNode.dragCounter<=2||"touch"===t.pointerType&&this.pointerNode.dragCounter<=5?(r.events.click&&r.events.click.call(r,t),er(r,"click",t),2===this.pointerNode.clickCounter&&(r.events.dblclick&&r.events.dblclick.call(r,t),er(r,"dblclick",t)),rr&&clearTimeout(rr),rr=setTimeout((function(){e.pointerNode=null,rr=null}),200)):this.pointerNode=null,"touch"===t.pointerType&&r.events.mouseup.call(r,t))},tr.prototype.mousedownCheck=function(t){or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mousedown")},tr.prototype.mousemoveCheck=function(t){const e=or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mousemove");this.selectedNode&&this.selectedNode!==e&&(this.selectedNode.events.mouseout&&this.selectedNode.events.mouseout.call(this.selectedNode,t),this.selectedNode.events.mouseleave&&this.selectedNode.events.mouseleave.call(this.selectedNode,t)),e&&(e.events.mouseover||e.events.mousein)&&this.selectedNode!==e&&(e.events.mouseover&&e.events.mouseover.call(e,t),e.events.mousein&&e.events.mousein.call(e,t)),this.selectedNode=e,t.preventDefault()},tr.prototype.mouseupCheck=function(t){or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mouseup")},tr.prototype.mouseleaveCheck=function(t){or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mouseleave")},tr.prototype.contextmenuCheck=function(t){or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"contextmenu")},tr.prototype.touchstartCheck=function(t){or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"touchstart")},tr.prototype.touchendCheck=function(t){or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"touchend")},tr.prototype.touchmoveCheck=function(t){const e=t.touches;0!==e.length&&or([this.vDom],{x:e[0].clientX,y:e[0].clientY},t,"touchmove")},tr.prototype.touchcancelCheck=function(t){or([this.vDom],{x:t.x,y:t.y},t,"touchcacel")};let nr=0,ir=0;function or(t,e,r,n){let i,o;for(var s=t.length-1;s>=0;s-=1){var a=t[s],h={x:e.x,y:e.y};if(a.bbox&&(sr(a,h),a.in({x:h.x,y:h.y})&&(a.children&&a.children.length>0?(o=or(a.children,{x:h.x,y:h.y},r,n),o&&(i=o)):i=a,a.events[n]&&"function"==typeof a.events[n]&&a.events[n](r),i)))break}return i||"rootNode"!==a.attr.id||(i=a,a.events[n]&&"function"==typeof a.events[n]&&a.events[n](r)),i}function sr(t,e){let r=0,n=0,i=1,o=1;const s=e;if(t.attr.transform&&t.attr.transform.translate&&([r,n]=t.attr.transform.translate,s.x-=r,s.y-=n),t.attr.transform&&t.attr.transform.scale&&(i=void 0!==t.attr.transform.scale[0]?t.attr.transform.scale[0]:1,o=void 0!==t.attr.transform.scale[1]?t.attr.transform.scale[1]:i,s.x/=i,s.y/=o),t.attr.transform&&t.attr.transform.rotate){const e=t.attr.transform.rotate[0],r={x:t.attr.transform.rotate[1],y:t.attr.transform.rotate[2]},n=s.x,i=s.y,o=r.x,l=r.y;var a=Math.PI/180*e,h=Math.cos(a),c=Math.sin(a);s.x=h*(n-o)+c*(i-l)+o,s.y=h*(i-l)-c*(n-o)+l}}tr.prototype.wheelEventCheck=function(t){const e=this;if(this.wheelNode)this.wheelNode.events.zoom.zoomExecute(this.wheelNode,t,e),nr+=1,this.wheelHndl&&(clearTimeout(this.wheelHndl),this.wheelHndl=null,ir=nr),this.wheelHndl=setTimeout((function(){ir!==nr?ir=nr:(e.wheelHndl=null,e.wheelNode.events.zoom.onZoomEnd(e.wheelNode,t,e),e.wheelNode=null,nr=0)}),100);else{let r=or([this.vDom],{x:t.offsetX,y:t.offsetY},t,"wheel");r=r||this.vDom,r&&r.events.zoom&&(r.events.zoom.disableWheel||(r.events.zoom.zoomExecute(r,t,e),this.wheelNode=r))}};var ar,hr=[],cr="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(ar||(ar={}));var lr,ur=function(t){return Object.freeze(t)},fr=function(t,e){this.inlineSize=t,this.blockSize=e,ur(this)},pr=function(){function t(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ur(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),dr=function(t){return t instanceof SVGElement&&"getBBox"in t},yr=function(t){if(dr(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var i=t,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||t.getClientRects().length)},gr=function(t){var e;if(t instanceof Element)return!0;var r=null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},xr="undefined"!=typeof window?window:{},mr=new WeakMap,vr=/auto|scroll/,wr=/^tb|vertical/,br=/msie|trident/i.test(xr.navigator&&xr.navigator.userAgent),Ar=function(t){return parseFloat(t||"0")},Br=function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=!1),new fr((r?e:t)||0,(r?t:e)||0)},Er=ur({devicePixelContentBoxSize:Br(),borderBoxSize:Br(),contentBoxSize:Br(),contentRect:new pr(0,0,0,0)}),Tr=function(t,e){if(void 0===e&&(e=!1),mr.has(t)&&!e)return mr.get(t);if(yr(t))return mr.set(t,Er),Er;var r=getComputedStyle(t),n=dr(t)&&t.ownerSVGElement&&t.getBBox(),i=!br&&"border-box"===r.boxSizing,o=wr.test(r.writingMode||""),s=!n&&vr.test(r.overflowY||""),a=!n&&vr.test(r.overflowX||""),h=n?0:Ar(r.paddingTop),c=n?0:Ar(r.paddingRight),l=n?0:Ar(r.paddingBottom),u=n?0:Ar(r.paddingLeft),f=n?0:Ar(r.borderTopWidth),p=n?0:Ar(r.borderRightWidth),d=n?0:Ar(r.borderBottomWidth),y=u+c,g=h+l,x=(n?0:Ar(r.borderLeftWidth))+p,m=f+d,v=a?t.offsetHeight-m-t.clientHeight:0,w=s?t.offsetWidth-x-t.clientWidth:0,b=i?y+x:0,A=i?g+m:0,B=n?n.width:Ar(r.width)-b-w,E=n?n.height:Ar(r.height)-A-v,T=B+y+w+x,S=E+g+v+m,_=ur({devicePixelContentBoxSize:Br(Math.round(B*devicePixelRatio),Math.round(E*devicePixelRatio),o),borderBoxSize:Br(T,S,o),contentBoxSize:Br(B,E,o),contentRect:new pr(u,h,B,E)});return mr.set(t,_),_},Sr=function(t,e,r){var n=Tr(t,r),i=n.borderBoxSize,o=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case ar.DEVICE_PIXEL_CONTENT_BOX:return s;case ar.BORDER_BOX:return i;default:return o}},_r=function(t){var e=Tr(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=ur([e.borderBoxSize]),this.contentBoxSize=ur([e.contentBoxSize]),this.devicePixelContentBoxSize=ur([e.devicePixelContentBoxSize])},kr=function(t){if(yr(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e},Mr=function(){var t=1/0,e=[];hr.forEach((function(r){if(0!==r.activeTargets.length){var n=[];r.activeTargets.forEach((function(e){var r=new _r(e.target),i=kr(e.target);n.push(r),e.lastReportedSize=Sr(e.target,e.observedBox),i<t&&(t=i)})),e.push((function(){r.callback.call(r.observer,n,r.observer)})),r.activeTargets.splice(0,r.activeTargets.length)}}));for(var r=0,n=e;r<n.length;r++){(0,n[r])()}return t},Cr=function(t){hr.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(r){r.isActive()&&(kr(r.target)>t?e.activeTargets.push(r):e.skippedTargets.push(r))}))}))},Lr=function(){var t=0;for(Cr(t);hr.some((function(t){return t.activeTargets.length>0}));)t=Mr(),Cr(t);return hr.some((function(t){return t.skippedTargets.length>0}))&&function(){var t;"function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:cr}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=cr),window.dispatchEvent(t)}(),t>0},Dr=[],Pr=function(t){if(!lr){var e=0,r=document.createTextNode("");new MutationObserver((function(){return Dr.splice(0).forEach((function(t){return t()}))})).observe(r,{characterData:!0}),lr=function(){r.textContent="".concat(e?e--:e++)}}Dr.push(t),lr()},Ir=0,zr={attributes:!0,characterData:!0,childList:!0,subtree:!0},Rr=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Or=function(t){return void 0===t&&(t=0),Date.now()+t},jr=!1,Nr=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!jr){jr=!0;var r,n=Or(t);r=function(){var r=!1;try{r=Lr()}finally{if(jr=!1,t=n-Or(),!Ir)return;r?e.run(1e3):t>0?e.run(t):e.start()}},Pr((function(){requestAnimationFrame(r)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,zr)};document.body?e():xr.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Rr.forEach((function(e){return xr.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Rr.forEach((function(e){return xr.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),Fr=function(t){!Ir&&t>0&&Nr.start(),!(Ir+=t)&&Nr.stop()},Ur=function(){function t(t,e){this.target=t,this.observedBox=e||ar.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=Sr(this.target,this.observedBox,!0);return t=this.target,dr(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),Yr=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},Xr=new WeakMap,Gr=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},Hr=function(){function t(){}return t.connect=function(t,e){var r=new Yr(t,e);Xr.set(t,r)},t.observe=function(t,e,r){var n=Xr.get(t),i=0===n.observationTargets.length;Gr(n.observationTargets,e)<0&&(i&&hr.push(n),n.observationTargets.push(new Ur(e,r&&r.box)),Fr(1),Nr.schedule())},t.unobserve=function(t,e){var r=Xr.get(t),n=Gr(r.observationTargets,e),i=1===r.observationTargets.length;n>=0&&(i&&hr.splice(hr.indexOf(r),1),r.observationTargets.splice(n,1),Fr(-1))},t.disconnect=function(t){var e=this,r=Xr.get(t);r.observationTargets.slice().forEach((function(r){return e.unobserve(t,r.target)})),r.activeTargets.splice(0,r.activeTargets.length)},t}(),qr=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Hr.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gr(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Hr.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gr(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Hr.unobserve(this,t)},t.prototype.disconnect=function(){Hr.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();let Vr=0;const Wr=j,Zr=J,$r=g,Qr=window.ResizeObserver||qr;const Jr=function(t,e,r){return function(n){t.setAttr(e,r.call(t,n))}},Kr=function(t,e,r){const n=[],i=t.attr.transform;return"function"==typeof r?function(n){t[e](r.call(t,n))}:(r.forEach(((t,r)=>{let o;o=i[e]&&void 0!==i[e][r]?i[e][r]:"scale"===e?1:0,n.push(Wr.intermediateValue.bind(null,o,t))})),function(r){t[e](n.map((t=>t(r))))})},tn=function(t,e,r){const n=t.attr[e];return function(i){t.setAttr(e,Wr.intermediateValue(n,r,i))}},en=function(t,e,r){let n,i,o;if("function"==typeof r)return function(n){t.setStyle(e,r.call(t,t.dataObj,n))};if(n=t.style[e],isNaN(r)){if(Ke.isTypeColor(r)){const i=Ke.transition(n,r);return function(r){t.setStyle(e,i(r))}}n=n.match(/(\d+)/g),o=r.match(/(\d+)/g),i=r.match(/\D+$/),n=parseInt(n.length>0?n[0]:0,10),o=parseInt(o.length>0?o[0]:0,10),i=i.length>0?i[0]:"px"}else n=void 0!==t.style[e]?t.style[e]:1,o=r,i=0;return function(r){t.setStyle(e,Wr.intermediateValue(n,o,r)+i)}},rn=function(t,e){const r=e.attr?e.attr:{},n=e.style?e.style:{},i=[];let o;if("function"!=typeof r)for(const n in r)if("transform"!==n){const o=r[n];"function"==typeof o?i[i.length]=function(e){t.setAttr(n,o.call(t,e))}:"d"===n?t.morphTo(e):i[i.length]=tn(t,n,r[n])}else if(o=r[n],"function"==typeof o)i[i.length]=Jr(t,n,o);else{t.attr.transform||(t.attr.transform={});const e=Object.keys(r.transform);for(let n=0,o=e.length;n<o;n+=1)i[i.length]=Kr(t,e[n],r.transform[e[n]])}else i[i.length]=r.bind(t);if("function"!=typeof n)for(const e in n)i[i.length]=en(t,e,n[e]);else i[i.length]=n.bind(t);return{run(t){for(let e=0,r=i.length;e<r;e+=1)i[e](t)},target:t,duration:e.duration,delay:e.delay?e.delay:0,end:e.end?e.end.bind(t,t.dataObj):null,loop:e.loop?e.loop:0,direction:e.direction?e.direction:"default",ease:e.ease?e.ease:"default"}};function nn(t,e,r){const n=t.map(r),i={new:[],update:[],old:[]};for(let o=0;o<e.length;o+=1){const s=n.indexOf(r(e[o].dataObj,o));-1!==s?(e[o].dataObj=t[s],i.update.push(e[o]),n[s]=null):i.old.push(e[o])}return i.new=t.filter(((t,e)=>{const i=n.indexOf(r(t,e));return-1!==i&&(n[i]=null,!0)})),i}const on={};on.push={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(let e=0,r=t.length;e<r;e++)this.data.push(t[e]);if(this.config.action.enter){const e={};this.selector.split(",").forEach((function(r){e[r]=t})),this.config.action.enter.call(this,e)}},enumerable:!1,configurable:!1,writable:!1},on.pop={value:function(){const t=this,e=this.data.pop();if(this.config.action.exit){const r={};this.selector.split(",").forEach((function(n){r[n]=t.fetchEls(n,[e])})),this.config.action.exit.call(this,r)}},enumerable:!1,configurable:!1,writable:!1},on.remove={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);const e=this;for(let e=0,r=t.length;e<r;e++)-1!==this.data.indexOf(t[e])&&this.data.splice(this.data.indexOf(t[e]),1);if(this.config.action.exit){const r={};this.selector.split(",").forEach((function(n){r[n]=e.fetchEls(n,t)})),this.config.action.exit.call(this,r)}},enumerable:!1,configurable:!0,writable:!1},on.update={value:function(){const t=this;if(this.config.action.update){const e={};this.selector.split(",").forEach((function(r){e[r]=t.fetchEls(r,t.data)})),this.config.action.update.call(this,e)}},enumerable:!1,configurable:!0,writable:!1},on.join={value:function(t){this.data=t,an.call(this,t,this.selector,this.config)},enumerable:!1,configurable:!0,writable:!1};var sn=function(){};function an(t,e,r){const n=this,i=e.split(",");let{joinOn:o}=r;const s={new:{},update:{},old:{}};o||(o=function(t,e){return e});for(let e=0,r=i.length;e<r;e++){const r=i[e],a=nn(t,n.fetchEls(r).stack,o);s.new[r]=a.new,s.update[r]=(new cn).wrapper(a.update),s.old[r]=(new cn).wrapper(a.old)}return r.action&&(r.action.enter&&r.action.enter.call(n,s.new),r.action.exit&&r.action.exit.call(n,s.old),r.action.update&&r.action.update.call(n,s.update)),on.config={value:r,enumerable:!1,configurable:!0,writable:!0},on.selector={value:e,enumerable:!1,configurable:!0,writable:!1},on.data={value:t,enumerable:!1,configurable:!0,writable:!0},Object.create(n,on)}function hn(t,e,r){const n={};let i;for(i in t)"end"!==i&&("function"==typeof t[i]?n[i]=t[i].call(e,e.dataObj,r):n[i]=t[i]);return n}sn.prototype.getAttr=function(t){return this.attr[t]},sn.prototype.getStyle=function(t){return this.style[t]},sn.prototype.exec=function(t){return"function"!=typeof t&&console.error("Wrong Exe type"),t.call(this,this.dataObj),this},sn.prototype.fetchEls=function(t,e){const r=[],n=new cn;if(this.children.length>0)if("."===t.charAt(0)){const n=t.substring(1,t.length);this.children.forEach((t=>{if(!t)return;const i=e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.class===n,o=!e&&t.attr.class===n;(i||o)&&r.push(t)}))}else if("#"===t.charAt(0)){const n=t.substring(1,t.length);this.children.every((t=>{if(!t)return;const i=e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.id===n,o=!e&&t.attr.id===n;return!i&&!o||(r.push(t),!1)}))}else t="group"===t?"g":t,this.children.forEach((n=>{if(!n)return;const i=e&&n.dataObj&&-1!==e.indexOf(n.dataObj)&&n.nodeName===t,o=!e&&n.nodeName===t;(i||o)&&r.push(n)}));return n.wrapper(r)},sn.prototype.fetchEl=function(t,e){let r;if(this.children.length>0)if("."===t.charAt(0)){const n=t.substring(1,t.length);this.children.every((t=>{if(!t)return;const i=e&&t.dataObj&&e===t.dataObj&&t.attr.class===n,o=!e&&t.attr.class===n;return!i&&!o||(r=t,!1)}))}else if("#"===t.charAt(0)){const n=t.substring(1,t.length);this.children.every((t=>{if(!t)return;const i=e&&t.dataObj&&e===t.dataObj&&t.attr.id===n,o=!e&&t.attr.id===n;return!i&&!o||(r=t,!1)}))}else t="group"===t?"g":t,this.children.forEach((n=>{if(!n)return;const i=e&&n.dataObj&&e===n.dataObj&&n.nodeName===t,o=!e&&n.nodeName===t;(i||o)&&(r=n)}));return r},sn.prototype.join=an,sn.prototype.data=function(t){return t?(this.dataObj=t,this):this.dataObj},sn.prototype.interrupt=function(){if(this.animList&&this.animList.length>0)for(var t=this.animList.length-1;t>=0;t--)$r.remove(this.animList[t]);return this.animList=[],this},sn.prototype.animateTo=function(t){return $r.add((Vr+=1,Vr),rn(this,t),Zr(t.ease)),this},sn.prototype.animateExe=function(t){return rn(this,t)};function cn(t,e,r,n){let i,o;e||(e=[]);const s=r&&r.attr?Object.keys(r.attr):[],a=r&&r.style?Object.keys(r.style):[],h=!r||(void 0===r.bbox||r.bbox);return this.stack=e.map(((e,c)=>{const l=this.createNode(t.ctx,{el:r.el,bbox:h},n);for(let t=0,n=a.length;t<n;t+=1)if(o=a[t],"function"==typeof r.style[o]){const t=r.style[o].call(l,e,c);l.setStyle(o,t)}else l.setStyle(o,r.style[o]);for(let t=0,n=s.length;t<n;t+=1)if(o=s[t],"transform"!==o)if("function"==typeof r.attr[o]){const t=r.attr[o].call(l,e,c);l.setAttr(o,t)}else l.setAttr(o,r.attr[o]);else{"function"==typeof r.attr.transform?i=r.attr[o].call(l,e,c):({transform:i}=r.attr);for(const t in i)l[t](i[t])}return l.dataObj=e,l})),this}cn.prototype={createEls:function(t,e){let r;const n=[];let i=t;for(let o=0,s=this.stack.length;o<s;o+=1){let s={};if(r=this.stack[o],"function"==typeof t&&(i=t.call(r,r.dataObj,o)),"function"==typeof e)s=e.call(r,r.dataObj,o);else{const t=Object.keys(e);for(let r=0,n=t.length;r<n;r+=1){const n=t[r];s[n]=e[n]}}n.push(r.createEls(i,s))}const o=new cn;return o.wrapper(n),o},createEl:function(t){let e;const r=[];for(let n=0,i=this.stack.length;n<i;n+=1){let i={};if(e=this.stack[n],"function"==typeof t)i=t.call(e,e.dataObj,n);else{const e=Object.keys(t);for(let r=0,n=e.length;r<n;r+=1){const n=e[r];"object"!=typeof t[n]?i[n]=t[n]:i[n]=JSON.parse(JSON.stringify(t[n]))}}r.push(e.createEl(i))}const n=new cn;return n.wrapper(r),n},forEach:function(t){for(let e=0,r=this.stack.length;e<r;e+=1)t.call(this.stack[e],this.stack[e].dataObj,e);return this},setAttr:function(t,e){let r;for(let n=0,i=this.stack.length;n<i;n+=1)if(r=this.stack[n],arguments.length>1)"function"==typeof e?r.setAttr(t,e.call(r,r.dataObj,n)):r.setAttr(t,e);else if("function"==typeof t)r.setAttr(t.call(r,r.dataObj,n));else{const e=Object.keys(t);for(let i=0,o=e.length;i<o;i+=1){const o=e[i];"function"==typeof t[o]?r.setAttr(o,t[o].call(r,r.dataObj,n)):r.setAttr(o,t[o])}}return this},fetchEls:function(t,e){let r;const n=[];for(let i=0;i<this.stack.length;i+=1)r=this.stack[i],n.push(r.fetchEls(t,e));const i=new cn;return i.wrapper(n),i},setStyle:function(t,e){let r;for(let n=0,i=this.stack.length;n<i;n+=1)if(r=this.stack[n],arguments.length>1)"function"==typeof e?r.setStyle(t,e.call(r,r.dataObj,n)):r.setStyle(t,e);else{if("function"==typeof t)r.setStyle(t.call(r,r.dataObj,n));else{const e=Object.keys(t);for(let i=0,o=e.length;i<o;i+=1){const o=e[i];"function"==typeof t[o]?r.setStyle(o,t[o].call(r,r.dataObj,n)):r.setStyle(o,t[o])}}"function"==typeof t?r.setStyle(t.call(r,r.dataObj,n)):r.setStyle(t)}return this},translate:function(t){let e;for(let r=0,n=this.stack.length;r<n;r+=1)e=this.stack[r],"function"==typeof t?e.translate(t.call(e,e.dataObj,r)):e.translate(t);return this},rotate:function(t){let e;for(let r=0,n=this.stack.length;r<n;r+=1)e=this.stack[r],"function"==typeof t?e.rotate(t.call(e,e.dataObj,r)):e.rotate(t);return this},scale:function(t){let e;for(let r=0,n=this.stack.length;r<n;r+=1)e=this.stack[r],"function"==typeof t?e.scale(t.call(e,e.dataObj,r)):e.scale(t);return this},exec:function(t){let e;if("function"==typeof t){for(let r=0,n=this.stack.length;r<n;r+=1)e=this.stack[r],t.call(e,e.dataObj,r);return this}},animateTo:function(t){let e,r;for(let n=0;n<this.stack.length;n+=1)r={},e=this.stack[n],r=hn(t,e,n),t.attr&&"function"!=typeof t.attr&&(r.attr=hn(t.attr,e,n)),t.style&&"function"!=typeof t.style&&(r.style=hn(t.style,e,n)),t.end&&(r.end=t.end),t.ease&&(r.ease=t.ease),e.animateTo(r);return this},animateExe:function(t){let e,r;const n=[];for(let i=0;i<this.stack.length;i+=1)r={},e=this.stack[i],r=hn(t,e,i),t.attr&&"function"!=typeof t.attr&&(r.attr=hn(t.attr,e,i)),t.style&&"function"!=typeof t.style&&(r.style=hn(t.style,e,i)),t.end&&(r.end=t.end),t.ease&&(r.ease=t.ease),n.push(e.animateExe(r));return n},animatePathTo:function(t){let e;const r=Object.keys(t);for(let n=0,i=this.stack.length;n<i;n+=1){e=this.stack[n];const i={};for(let o=0;o<r.length;o++){let s=t[r[o]];"function"==typeof s&&(s=s.call(e,e.dataObj,n)),i[r[o]]=s}e.animatePathTo(i)}return this},remove:function(){for(let t=0,e=this.stack.length;t<e;t+=1)this.stack[t].remove();return this},interrupt:function(){for(let t=0,e=this.stack.length;t<e;t+=1)this.stack[t].interrupt();return this},text:function(t){let e;if("function"!=typeof t)for(let r=0;r<this.stack.length;r+=1)e=this.stack[r],e.text(t);else for(let r=0;r<this.stack.length;r+=1)e=this.stack[r],e.text(t.call(e,e.dataObj,r));return this},join:function(t,e,r){let n;const i=[];for(let o=0;o<this.stack.length;o+=1)n=this.stack[o],i.push(n.join(t,e,r));const o=new cn;return o.wrapper(i),o},on:function(t,e){for(let r=0,n=this.stack.length;r<n;r+=1)this.stack[r].on(t,e);return this}},cn.prototype.createNode=function(){},cn.prototype.wrapper=function(t){const e=this;if(t)for(let r=0,n=t.length;r<n;r++){const n=t[r];e.stack.push(n)}return this};const ln=function(t){for(const e in t){const r=t[e],n=r.contentRect;r.target.resizeHandler&&r.target.resizeHandler.forEach((function(t){t(n)}))}};function un(t,e){t.ro||(t.ro=new Qr(ln),t.ro.observe(t.container)),t.container.resizeHandler||(t.container.resizeHandler=[]),t.container.resizeHandler.push(e)}function fn(t,e){if(!t.container.resizeHandler)return;const r=t.container.resizeHandler.indexOf(e);-1!==r&&t.container.resizeHandler.splice(r,1),0===t.container.resizeHandler.length&&t.ro&&t.ro.disconnect()}const pn=g;let dn=0;function yn(){return dn+=1,dn}const gn=function(){cn.apply(this,arguments)};function xn(t,e={}){this.pDom=t;const r=e.id?e.id:"mask-"+Math.ceil(1e3*Math.random());this.id=e.id||r,e.id=r,this.defs||(this.defs=t.createEl({el:"defs"})),this.mask=this.defs.createEl({el:"mask",attr:e,style:{}})}function mn(t,e={}){this.pDom=t;const r=e.id?e.id:"clip-"+Math.ceil(1e3*Math.random());this.id=e.id||r,e.id=r,this.defs||(this.defs=t.createEl({el:"defs"})),this.clip=this.defs.createEl({el:"clipPath",attr:e,style:{}})}function vn(t,e={}){this.pDom=t;const r=e.id?e.id:"pattern-"+Math.ceil(1e3*Math.random());this.id=e.id||r,e.id=r,this.defs||(this.defs=t.createEl({el:"defs"})),this.pattern=this.defs.createEl({el:"pattern",attr:e,style:{}})}function wn(t){let e="";for(const r in t)"rotate"===r?e+=`${r}(${t.rotate[0]+" "+(t.rotate[1]||0)+" "+(t.rotate[2]||0)}) `:"skew"===r?(t.skew[0]&&(e+=`skewX(${t[r][0]}) `),t.skew[1]&&(e+=`skewY(${t[r][1]}) `)):t[r].length>1?e+=`${r}(${t[r].join(" ")}) `:e+=`${r}(${t[r]}) `;return e}function bn(t,e,r){this.config=t,this.type=e||"linear",this.pDom=r,this.defs=this.pDom.createEl({el:"defs"})}(gn.prototype=new cn).constructor=gn,gn.prototype.createNode=function(t,e,r){return En(e,r)},xn.prototype.exe=function(){return`url(#${this.id})`},mn.prototype.exe=function(){return`url(#${this.id})`},vn.prototype.exe=function(){return`url(#${this.id})`},bn.prototype.exe=function(){return`url(#${this.config.id})`},bn.prototype.linearGradient=function(){const t=this;return this.linearEl=this.defs.join([1],"linearGradient",{action:{enter(e){const r=this.createEls(e.linearGradient,{el:"linearGradient"}).setAttr({id:t.config.id,x1:`${t.config.x1}%`,y1:`${t.config.y1}%`,x2:`${t.config.x2}%`,y2:`${t.config.y2}%`,spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"});t.config.gradientTransform&&r.setAttr("gradientTransform",wn(t.config.gradientTransform))},exit(t){t.linearGradient.remove()},update(e){e.linearGradient.setAttr({id:t.config.id,x1:`${t.config.x1}%`,y1:`${t.config.y1}%`,x2:`${t.config.x2}%`,y2:`${t.config.y2}%`,spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"}),t.config.gradientTransform&&e.linearGradient.setAttr("gradientTransform",wn(t.config.gradientTransform))}}}),this.linearEl=this.linearEl.fetchEl("linearGradient"),this.linearEl.fetchEls("stop").remove(),this.linearEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:(t,e)=>`${t.value}%`,"stop-color":function(t,e){return t.color}}}),this},bn.prototype.radialGradient=function(){const t=this;return this.defs||(this.defs=this.pDom.createEl({el:"defs"})),this.radialEl=this.defs.join([1],"radialGradient",{action:{enter(e){const r=this.createEls(e.radialGradient,{el:"radialGradient"}).setAttr({id:t.config.id,cx:`${t.config.innerCircle.x}%`,cy:`${t.config.innerCircle.y}%`,r:`${t.config.outerCircle.r}%`,fx:`${t.config.outerCircle.x}%`,fy:`${t.config.outerCircle.y}%`,spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"});t.config.gradientTransform&&r.setAttr("gradientTransform",wn(t.config.gradientTransform))},exit(t){t.radialGradient.remove()},update(e){e.radialGradient.setAttr({id:t.config.id,cx:`${t.config.innerCircle.x}%`,cy:`${t.config.innerCircle.y}%`,r:`${t.config.outerCircle.r}%`,fx:`${t.config.outerCircle.x}%`,fy:`${t.config.outerCircle.y}%`,spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"}),t.config.gradientTransform&&e.radialGradient.setAttr("gradientTransform",wn(t.config.gradientTransform))}}}),this.radialEl=this.radialEl.fetchEl("radialGradient"),this.radialEl.fetchEls("stop").remove(),this.radialEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:(t,e)=>`${t.value}%`,"stop-color":function(t,e){return t.color}}}),this},bn.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,"linear"===this.type?this.linearGradient():"radial"===this.type&&this.radialGradient())};const An={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Bn=function(t){return document.createElementNS(An.svg,t)};function En(t,e){let r=null;const n=t.el.indexOf(":");if(n>=0)i=t.el.slice(0,n),o=t.el.slice(n+1),r=document.createElementNS(An[i],o);else if("group"===t.el)r=Bn("g");else r=Bn(t.el);var i,o;const s=new Tn(r,t,yn(),e);return t.dataObj&&(r.dataObj=t.dataObj),s}const Tn=function(t,e,r,n){this.dom=t,this.nodeName=t.nodeName,this.attr={},this.style={},this.changedAttribute={},this.changedStyles={},this.id=r,this.nodeType="svg",this.dom.nodeId=r,this.children=[],this.vDomIndex=n,this.events={},e.style&&this.setStyle(e.style),e.attr&&this.setAttr(e.attr)};function Sn(t,e){const r=e.indexOf(":"),n=t.changedAttribute[e];r>=0?t.dom.setAttributeNS(An[e.slice(0,r)],e.slice(r+1),n):"text"===e?t.dom.textContent=n:"d"===e?qe.isTypePath(n)?t.dom.setAttribute(e,n.fetchPathString()):t.dom.setAttribute(e,n):"onerror"===e||"onload"===e?t.dom[e]=function(e){n.call(t,e)}:t.dom.setAttribute(e,n)}function _n(t){t.dom.setAttribute("transform",wn(t.attr.transform))}function kn(t){if("[object Array]"===Object.prototype.toString.call(t))return t.reduce((function(t,e){return t+e.x+","+e.y+" "}),"")}function Mn(t,e={}){const r=document.querySelector(t);let n=r.clientHeight,i=r.clientWidth;const{autoUpdate:o=!0,enableResize:s=!0}=e,a=document.createElementNS(An.svg,"svg");let h;a.setAttribute("height",n),a.setAttribute("width",i),a.style.position="absolute";let c,l,u,f,p=999999;r&&(r.appendChild(a),h=new x,o&&(p=pn.addVdom(h)));const d=new Tn(a,{},yn(),p);d.container=r,d.type="SVG",d.width=i,d.height=n,d.domEl=a;const y=new tr(d);h&&h.rootNode(d),d.setLayerId=function(t){a.setAttribute("id",t)};const g=function(e){document.querySelector(t)?(n=c||e.height,i=l||e.width,a.setAttribute("height",n),a.setAttribute("width",i),d.width=i,d.height=n,u&&u(),d.update()):fn(d)};d.onResize=function(t){u=t},d.onChange=function(t){f=t},d.invokeOnChange=function(){f&&f()},d.setSize=function(t,e){this.dom.setAttribute("height",e),this.dom.setAttribute("width",t),this.width=t,this.height=e,c=e,l=t},d.update=function(){this.execute()},d.setViewBox=function(t,e,r,n){this.dom.setAttribute("viewBox",t+","+e+","+n+","+r)},d.destroy=function(){const e=document.querySelector(t);e&&e.contains(a)&&e.removeChild(a),pn.removeVdom(p)},d.createPattern=function(t){return new vn(this,t)},d.createClip=function(t){return new mn(this,t)},d.createMask=function(t){return new xn(this,t)};let m=null;return d.dom.addEventListener("pointerdown",(t=>{y.addPointer(t),t.target.drag_&&(t.target.drag_(t,"pointerdown",y),m=t.target)})),d.dom.addEventListener("pointerup",(t=>{m&&(m.drag_(t,"pointerup",y),m=null),y.removePointer(t)})),d.dom.addEventListener("pointermove",(t=>{t.preventDefault(),m&&m.drag_(t,"pointermove",y)})),pn.execute(),s&&un(d,g),d}Tn.prototype=new sn,Tn.prototype.node=function(){return this.execute(),this.dom},Tn.prototype.transFormAttributes=function(){const t=this;for(const e in t.changedAttribute)"transform"!==e?Sn(t,e):_n(t);this.changedAttribute={}},Tn.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.scale=t,this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Tn.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewX=[t],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Tn.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewY=[t],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Tn.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Tn.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)&&t.length>0?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Tn.prototype.setStyle=function(t,e){if(2===arguments.length)null==e&&null!=this.style[t]?delete this.style[t]:("function"==typeof e&&(e=e.call(this,this.dataObj)),Ke.RGBAInstanceCheck(e)&&(e=e.rgba),this.style[t]=e),this.changedStyles[t]=e;else if(1===arguments.length&&"object"==typeof t)for(const e in t)null==t[e]&&null!=this.style[t]?delete this.style[e]:this.style[e]=t[e],this.changedStyles[e]=t[e];return this.styleChanged=!0,pn.vDomChanged(this.vDomIndex),this},Tn.prototype.setAttr=function(t,e){if(2===arguments.length)"points"===t&&(e=kn(e)),this.attr[t]=e,this.changedAttribute[t]=e;else if(1===arguments.length&&"object"==typeof t)for(const e in t)"points"===e&&(t[e]=kn(t[e])),this.attr[e]=t[e],this.changedAttribute[e]=t[e];return this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Tn.prototype.execute=function(){if(this.styleChanged||this.attrChanged){this.transFormAttributes();for(let t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();for(const t in this.changedStyles)"object"==typeof this.changedStyles[t]&&(this.changedStyles[t]instanceof bn||this.changedStyles[t]instanceof vn||this.changedStyles[t]instanceof mn||this.changedStyles[t]instanceof xn)&&(this.changedStyles[t]=this.changedStyles[t].exe()),this.dom.style.setProperty(t,this.changedStyles[t],"");this.changedStyles={}}else for(let t=0,e=this.children.length;t<e;t+=1)this.children[t].execute()},Tn.prototype.child=function(t){const e=this.dom,r=this;if(t instanceof gn){var n=document.createDocumentFragment();for(let e=0,i=t.stack.length;e<i;e++)n.appendChild(t.stack[e].dom),t.stack[e].parentNode=r,this.children[this.children.length]=t.stack[e];e.appendChild(n)}else t instanceof Tn?(e.appendChild(t.dom),t.parentNode=r,this.children.push(t)):console.log("wrong node type");return this},Tn.prototype.animatePathTo=qe.animatePathTo,Tn.prototype.morphTo=qe.morphTo,Tn.prototype.createRadialGradient=function(t){const e=new bn(t,"radial",this);return e.radialGradient(),e},Tn.prototype.createLinearGradient=function(t){const e=new bn(t,"linear",this);return e.linearGradient(),e},Tn.prototype.on=function(t,e){const r=this;if(r.events[t]&&"drag"!==t&&"zoom"!==t&&(r.dom.removeEventListener(t,r.events[t]),delete r.events[t]),"drag"===t&&delete r.dom.drag_,"zoom"===t&&(r.dom.removeEventListener("wheel",r.events[t]),delete r.dom.drag_),e){if("drag"===t)r.dom.drag_=function(t,n){e.execute(r,t,n)};else if("zoom"===t){let n,i=0,o=0;r.events[t]=function(t){e.disableWheel||(e.zoomExecute(r,t),i+=1,n&&(clearTimeout(n),n=null,o=i),n=setTimeout((function(){o!==i?o=i:(n=null,e.onZoomEnd(r,t),i=0)}),100))},r.dom.addEventListener("wheel",r.events[t]),r.dom.drag_=function(t,n,i){e.panFlag&&e.panExecute(r,t,n,i)}}else{const n=e.bind(r);r.events[t]=function(t){n(t)},r.dom.addEventListener(t,r.events[t])}return this}},Tn.prototype.html=function(t){return arguments.length?(this.dom.innerHTML(t),this):this.dom.innerHTML},Tn.prototype.text=function(t){return arguments.length?(this.attr.text=t,this.changedAttribute.text=t,this):this.attr.text},Tn.prototype.remove=function(){this.parentNode.removeChild(this)},Tn.prototype.createEls=function(t,e){const r=new gn({type:"SVG"},t,e,this.vDomIndex);return this.child(r),pn.vDomChanged(this.vDomIndex),r},Tn.prototype.createEl=function(t){const e=En(t,this.vDomIndex);return this.child(e),pn.vDomChanged(this.vDomIndex),e},Tn.prototype.removeChild=function(t){const{children:e}=this,r=e.indexOf(t);if(-1!==r){const t=e.splice(r,1)[0].dom;if(!this.dom.contains(t))return;this.dom.removeChild(t)}};const Cn=g,Ln=J;let Dn=0;function Pn(){return Dn+=1,Dn}function In(t,{dx:e=0,dy:r=0},n){const i=t.transform.translate,[o,s=o]=t.transform.scale;return function(t,[e,r],n){return n[0]>=t[0][0]*e&&n[0]<=t[1][0]*e&&n[1]>=t[0][1]*r&&n[1]<=t[1][1]*r}(n,[o,s],[i[0]+e,i[1]+r])&&(e/=o,r/=s,t.dx=e,t.dy=r,i[0]/=o,i[1]/=s,i[0]+=e,i[1]+=r,i[0]*=o,i[1]*=s),t}const zn=function(){const t=this;this.dragStartFlag=!1,this.dragExtent=[[-1/0,-1/0],[1/0,1/0]],this.event={x:0,y:0,dx:0,dy:0,transform:{translate:[0,0],scale:[1,1]}},this.onDragStart=function(e,r){t.event.x=r.offsetX,t.event.y=r.offsetY,t.event.dx=0,t.event.dy=0,t.dragStartFlag=!0},this.onDrag=function(){},this.onDragEnd=function(){t.event.x=event.offsetX,t.event.y=event.offsetY,t.event.dx=0,t.event.dy=0,t.dragStartFlag=!1}};function Rn(t,e){return e<=t[0]?t[0]:e>=t[1]?t[1]:e}function On(t,e,r,n){return t.translate[0]/=e,t.translate[1]/=e,t.translate[0]-=n[0]/e-n[0]/r,t.translate[1]-=n[1]/e-n[1]/r,t.scale=[r,r],t.translate[0]*=r,t.translate[1]*=r,t}zn.prototype={dragExtent:function(t){return this.dragExtent=t,this},dragStart:function(t){const e=this;return"function"==typeof t&&(this.onDragStart=function(r,n){e.event.x=n.offsetX,e.event.y=n.offsetY,e.event.dx=0,e.event.dy=0,t.call(r,e.event),e.dragStartFlag=!0}),this},drag:function(t){const e=this;return"function"==typeof t&&(this.onDrag=function(r,n){const i=n.offsetX-e.event.x,o=n.offsetY-e.event.y;e.event.x=n.offsetX,e.event.y=n.offsetY,e.event=In(this.event,{dx:i,dy:o},e.dragExtent),t.call(r,e.event)}),this},dragEnd:function(t){const e=this;return"function"==typeof t&&(this.onDragEnd=function(r,n){e.dragStartFlag=!1,e.event.x=n.offsetX,e.event.y=n.offsetY,e.event.dx=0,e.event.dy=0,t.call(r,e.event)}),this},bindMethods:function(t){const e=this;t.dragTo=function(r,n){e.dragTo(t,r,n)}},execute:function(t,e,r){const n=this;this.event.e=e,e.preventDefault&&e.preventDefault(),this.dragStartFlag||"mousedown"!==r&&"pointerdown"!==r?this.onDragEnd&&this.dragStartFlag&&("mouseup"===r||"mouseleave"===r||"pointerleave"===r||"pointerup"===r)?n.onDragEnd(t,e):this.dragStartFlag&&this.onDrag&&n.onDrag(t,e):n.onDragStart(t,e)}};const jn=function(){const t=this;this.event={x:0,y:0,dx:0,dy:0,distance:0},this.event.pointers=[],this.event.transform={translate:[0,0],scale:[1,1]},this.zoomBy_=.001,this.zoomExtent_=[0,1/0],this.zoomStartFlag=!1,this.zoomDuration=250,this.onZoomStart=function(e,r){t.event.x=r.offsetX,t.event.y=r.offsetY,t.event.dx=0,t.event.dy=0,t.zoomStartFlag=!0,t.event.distance=0},this.onZoom=function(e,r){t.event.x=r.offsetX,t.event.y=r.offsetY},this.onZoomEnd=function(e,r){t.event.x=r.offsetX,t.event.y=r.offsetY,t.event.dx=0,t.event.dy=0,t.zoomStartFlag=!1,t.event.distance=0},this.onPanStart=function(t,e){},this.onPan=function(t,e){},this.onPanEnd=function(){},this.disableWheel=!1,this.disableDbclick=!1};jn.prototype.zoomStart=function(t){const e=this;return"function"==typeof t&&(this.zoomStartExe=t,this.onZoomStart=function(r,n,i){if(i.pointers&&2===i.pointers.length){const t=i.pointers;n={x:t[0].offsetX+.5*(t[1].offsetX-t[0].offsetX),y:t[0].offsetY+.5*(t[1].offsetY-t[0].offsetY)}}e.event.x=n.offsetX,e.event.y=n.offsetY,e.event.dx=0,e.event.dy=0,e.zoomStartFlag||t.call(r,e.event),e.zoomStartFlag=!0,e.event.distance=0}),this},jn.prototype.zoom=function(t){const e=this;return"function"==typeof t&&(this.zoomExe=t,this.onZoom=function(r,n){const i=e.event.transform,o=i.scale[0];let s=o;const a=n.deltaY,h=n.offsetX,c=n.offsetY;s=Rn(e.zoomExtent_,s+-1*a*e.zoomBy_),e.event.transform=On(i,o,s,[h,c]),e.event.x=h,e.event.y=c,t.call(r,e.event)}),this},jn.prototype.zoomEnd=function(t){const e=this;return"function"==typeof t&&(this.zoomEndExe=t,this.onZoomEnd=function(r,n){e.event.x=n.offsetX,e.event.y=n.offsetY,e.event.dx=0,e.event.dy=0,e.zoomStartFlag=!1,t.call(r,e.event),e.event.distance=0}),this},jn.prototype.zoomTransition=function(){},jn.prototype.zoomExecute=function(t,e,r){this.eventType="zoom",e.preventDefault&&e.preventDefault(),this.zoomStartFlag?this.onZoom(t,e):this.onZoomStart(t,e,r)},jn.prototype.zoomPinch=function(t,e,r){const n=r.pointers;if(e.preventDefault&&e.preventDefault(),2===r.pointers.length)if(this.zoomStartFlag){const r=this.event.distance;for(var i=0;i<n.length;i++)if(e.pointerId===n[i].pointerId){n[i]=e;break}const o=j.getDistance({x:n[0].offsetX,y:n[0].offsetY},{x:n[1].offsetX,y:n[1].offsetY}),s={offsetX:this.event.x,offsetY:this.event.y,deltaY:r?r-o:0};this.event.distance=o,this.onZoom(t,s)}else this.onZoomStart(t,e,r)},jn.prototype.scaleBy=function(t,e,r){const n=this,i=n.event.transform,o=e*i.scale[0],s=i.scale[0],a=this.zoomTarget_||r,h=(a[0]-r[0])*s,c=(a[1]-r[1])*s;let l=0;const u={run(e){const a=i.scale[0],u=Rn(n.zoomExtent_,s+(o-s)*e);n.event.transform=On(i,a,u,r),n.event.transform.translate[0]+=h*(e-l)/u,n.event.transform.translate[1]+=c*(e-l)/u,l=e,n.zoomExe&&n.zoomExe.call(t,n.event)},target:t,duration:n.zoomDuration,delay:0,end:function(){n.onZoomEnd&&n.onZoomEnd(t,{})},loop:1,direction:"default",ease:"default"};Cn.add(Pn(),u,Ln(u.ease))},jn.prototype.zoomTarget=function(t){this.zoomTarget_=t},jn.prototype.scaleTo=function(t,e,r){const n=this,i=n.event.transform,o=i.scale[0],s=this.zoomTarget_||r,a=(s[0]-r[0])*o,h=(s[1]-r[1])*o;let c=0;const l={run(s){const l=i.scale[0],u=Rn(n.zoomExtent_,o+(e-o)*s);n.event.transform=On(i,l,u,r),n.event.transform.translate[0]+=a*(s-c)/u,n.event.transform.translate[1]+=h*(s-c)/u,c=s,n.zoomStartFlag||n.onZoomStart(t,{offsetX:r[0],offsetY:r[1]},{}),n.zoomExe&&n.zoomExe.call(t,n.event)},target:t,duration:n.zoomDuration,delay:0,end:function(){n.onZoomEnd&&n.onZoomEnd(t,n.event)},loop:1,direction:"default",ease:"default"};Cn.add(Pn(),l,Ln(l.ease))},jn.prototype.panTo=function(t,e){const r=this,n=r.event.transform,i=e[0]-r.event.x,o=e[1]-r.event.y;let s=0;const a={run(e){const[a]=n.scale;n.translate[0]+=i*(e-s)/a,n.translate[1]+=o*(e-s)/a,s=e,r.zoomExe&&r.zoomExe.call(t,r.event)},target:t,duration:r.zoomDuration,delay:0,end:function(){r.onZoomEnd&&r.onZoomEnd(t,r.event)},loop:1,direction:"default",ease:"default"};Cn.add(Pn(),a,Ln(a.ease))},jn.prototype.bindMethods=function(t){const e=this;t.scaleTo=function(r,n){e.scaleTo(t,r,n)},t.scaleBy=function(r,n){return e.scaleBy(t,r,n),t},t.panTo=function(r,n){return e.panTo(t,r,n),t}},jn.prototype.zoomFactor=function(t){return this.zoomBy_=t,this},jn.prototype.scaleExtent=function(t){return this.zoomExtent_=t,this},jn.prototype.duration=function(t){return this.zoomDuration=t||250,this},jn.prototype.panExtent=function(t){return this.panExtent_=t,this.panFlag=!0,this},jn.prototype.panExecute=function(t,e,r,n){if(1===n.pointers.length){if(this.event.e=e,this.eventType="pan",e.preventDefault&&e.preventDefault(),"touchstart"!==e.type&&"touchmove"!==e.type&&"touchend"!==e.type&&"touchcancel"!==e.type||(e.offsetX=e.touches[0].clientX,e.offsetY=e.touches[0].clientY),this.zoomStartFlag||"mousedown"!==r&&"pointerdown"!==r)if(!this.onZoomEnd||"mouseup"!==r&&"mouseleave"!==r&&"pointerup"!==r&&"pointerleave"!==r){if(this.zoomExe){const r=e.offsetX-this.event.x,n=e.offsetY-this.event.y;this.event.x=e.offsetX,this.event.y=e.offsetY,this.event=In(this.event,{dx:r,dy:n},this.panExtent_),this.zoomExe.call(t,this.event)}}else this.onZoomEnd(t,e);else this.onZoomStart(t,e,{});e.preventDefault&&e.preventDefault()}};var Nn={drag:function(){return new zn},zoom:function(){return new jn}};function Fn(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Un={exports:{}},Yn=Un.exports=function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){if(!a&&Fn)return Fn(s);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[s]={exports:{}};e[s][0].call(c.exports,(function(t){var r=e[s][1][t];return i(r||t)}),c,c.exports,t,e,r,n)}return r[s].exports}for(var o=Fn,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){(function(t){var r=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),i=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=r&&r.prototype.append&&r.prototype.getBlob;function s(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var i=new Uint8Array(r.byteLength);i.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=i.buffer}t[e]=n}}}function a(t,e){e=e||{};var n=new r;s(t);for(var i=0;i<t.length;i++)n.append(t[i]);return e.type?n.getBlob(e.type):n.getBlob()}function h(t,e){return s(t),new Blob(t,e||{})}e.exports=n?i?t.Blob:h:o?a:void 0}).call(this,void 0!==gt?gt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){(function(r){var n=t("stream").Writable,i=t("util"),o=t("blob"),s=r.URL||r.webkitURL||r.mozURL;function a(){if(!(this instanceof a))return new a;n.call(this),this._chunks=[],this._blob=null,this.length=0}i.inherits(a,n),a.prototype._write=function(t,e,r){t instanceof Uint8Array||(t=new Uint8Array(t)),this.length+=t.length,this._chunks.push(t),r()},a.prototype.toBlob=function(t){return t=t||"application/octet-stream",this._blob||(this._blob=new o(this._chunks,{type:t}),this._chunks=[]),this._blob.type!==t&&(this._blob=new o([this._blob],{type:t})),this._blob},a.prototype.toBlobURL=function(t){return s.createObjectURL(this.toBlob(t))},e.exports=a}).call(this,void 0!==gt?gt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{blob:1,stream:22,util:25}],3:[function(t,e,r){
/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var n=t("base64-js"),i=t("ieee754"),o=t("is-array");r.Buffer=a,r.SlowBuffer=a,r.INSPECT_MAX_BYTES=50,a.poolSize=8192;var s=1073741823;function a(t,e,r){if(!(this instanceof a))return new a(t,e,r);var n,i,h,c=typeof t;if("number"===c)n=t>0?t>>>0:0;else if("string"===c)"base64"===e&&(t=M(t)),n=a.byteLength(t,e);else{if("object"!==c||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&o(t.data)&&(t=t.data),n=+t.length>0?Math.floor(+t.length):0}if(this.length>s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");if(a.TYPED_ARRAY_SUPPORT?i=a._augment(new Uint8Array(n)):((i=this).length=n,i._isBuffer=!0),a.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)i._set(t);else if(L(t))if(a.isBuffer(t))for(h=0;h<n;h++)i[h]=t.readUInt8(h);else for(h=0;h<n;h++)i[h]=(t[h]%256+256)%256;else if("string"===c)i.write(t,0,e);else if("number"===c&&!a.TYPED_ARRAY_SUPPORT&&!r)for(h=0;h<n;h++)i[h]=0;return i}function h(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[r+s]=a}return s}function c(t,e,r,n){return O(P(e),t,r,n)}function l(t,e,r,n){return O(I(e),t,r,n)}function u(t,e,r,n){return l(t,e,r,n)}function f(t,e,r,n){return O(R(e),t,r,n)}function p(t,e,r,n){return O(z(e),t,r,n)}function d(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function y(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;o<r;o++)t[o]<=127?(n+=j(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+j(i)}function g(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;i++)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){return g(t,e,r)}function m(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;o++)i+=D(t[o]);return i}function v(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function w(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function b(t,e,r,n,i,o){if(!a.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||e<o)throw new TypeError("value is out of bounds");if(r+n>t.length)throw new TypeError("index out of range")}function A(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function B(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function E(t,e,r,n,i,o){if(e>i||e<o)throw new TypeError("value is out of bounds");if(r+n>t.length)throw new TypeError("index out of range")}function T(t,e,r,n,o){return o||E(t,e,r,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,r,n,23,4),r+4}function S(t,e,r,n,o){return o||E(t,e,r,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,r,n,52,8),r+8}a.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(t){return!1}}(),a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o&&t[i]===e[i];i++);return i!==o&&(r=t[i],n=e[i]),r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!o(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new a(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new a(e),i=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(n,i),i+=s.length}return n},a.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":default:r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=P(t).length;break;case"base64":r=R(t).length}return r},a.prototype.length=void 0,a.prototype.parent=void 0,a.prototype.toString=function(t,e,r){var n=!1;if(t||(t="utf8"),(e>>>=0)<0&&(e=0),(r=void 0===r||r===1/0?this.length:r>>>0)>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return m(this,e,r);case"utf8":case"utf-8":return y(this,e,r);case"ascii":return g(this,e,r);case"binary":return x(this,e,r);case"base64":return d(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===a.compare(this,t)},a.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return a.compare(this,t)},a.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},a.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},a.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var i=n;n=e,e=r,r=i}e=Number(e)||0;var o,s=this.length-e;switch(r?(r=Number(r))>s&&(r=s):r=s,n=String(n||"utf8").toLowerCase()){case"hex":o=h(this,t,e,r);break;case"utf8":case"utf-8":o=c(this,t,e,r);break;case"ascii":o=l(this,t,e,r);break;case"binary":o=u(this,t,e,r);break;case"base64":o=f(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=p(this,t,e,r);break;default:throw new TypeError("Unknown encoding: "+n)}return o},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),a.TYPED_ARRAY_SUPPORT)return a._augment(this.subarray(t,e));for(var n=e-t,i=new a(n,void 0,!0),o=0;o<n;o++)i[o]=this[o+t];return i},a.prototype.readUInt8=function(t,e){return e||w(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||w(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||w(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||w(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readInt8=function(t,e){return e||w(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||w(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){e||w(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return e||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||w(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||w(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||w(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||w(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):A(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):B(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):B(this,t,e,!1),e+4},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):A(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):B(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,r){return T(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return T(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return S(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return S(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),e||(e=0),n!==r&&0!==t.length&&0!==i.length){if(n<r)throw new TypeError("sourceEnd < sourceStart");if(e<0||e>=t.length)throw new TypeError("targetStart out of bounds");if(r<0||r>=i.length)throw new TypeError("sourceStart out of bounds");if(n<0||n>i.length)throw new TypeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o=n-r;if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(var s=0;s<o;s++)t[s+e]=this[s+r];else t._set(this.subarray(r,r+o),e)}},a.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new TypeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new TypeError("start out of bounds");if(r<0||r>this.length)throw new TypeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var i=P(t.toString()),o=i.length;for(n=e;n<r;n++)this[n]=i[n%o]}return this}},a.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(a.TYPED_ARRAY_SUPPORT)return new a(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var _=a.prototype;a._augment=function(t){return t.constructor=a,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=_.get,t.set=_.set,t.write=_.write,t.toString=_.toString,t.toLocaleString=_.toString,t.toJSON=_.toJSON,t.equals=_.equals,t.compare=_.compare,t.copy=_.copy,t.slice=_.slice,t.readUInt8=_.readUInt8,t.readUInt16LE=_.readUInt16LE,t.readUInt16BE=_.readUInt16BE,t.readUInt32LE=_.readUInt32LE,t.readUInt32BE=_.readUInt32BE,t.readInt8=_.readInt8,t.readInt16LE=_.readInt16LE,t.readInt16BE=_.readInt16BE,t.readInt32LE=_.readInt32LE,t.readInt32BE=_.readInt32BE,t.readFloatLE=_.readFloatLE,t.readFloatBE=_.readFloatBE,t.readDoubleLE=_.readDoubleLE,t.readDoubleBE=_.readDoubleBE,t.writeUInt8=_.writeUInt8,t.writeUInt16LE=_.writeUInt16LE,t.writeUInt16BE=_.writeUInt16BE,t.writeUInt32LE=_.writeUInt32LE,t.writeUInt32BE=_.writeUInt32BE,t.writeInt8=_.writeInt8,t.writeInt16LE=_.writeInt16LE,t.writeInt16BE=_.writeInt16BE,t.writeInt32LE=_.writeInt32LE,t.writeInt32BE=_.writeInt32BE,t.writeFloatLE=_.writeFloatLE,t.writeFloatBE=_.writeFloatBE,t.writeDoubleLE=_.writeDoubleLE,t.writeDoubleBE=_.writeDoubleBE,t.fill=_.fill,t.inspect=_.inspect,t.toArrayBuffer=_.toArrayBuffer,t};var k=/[^+\/0-9A-z]/g;function M(t){for(t=C(t).replace(k,"");t.length%4!=0;)t+="=";return t}function C(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function L(t){return o(t)||a.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function P(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);if(n<=127)e.push(n);else{var i=r;n>=55296&&n<=57343&&r++;for(var o=encodeURIComponent(t.slice(i,r+1)).substr(1).split("%"),s=0;s<o.length;s++)e.push(parseInt(o[s],16))}}return e}function I(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function z(t){for(var e,r,n,i=[],o=0;o<t.length;o++)r=(e=t.charCodeAt(o))>>8,n=e%256,i.push(n),i.push(r);return i}function R(t){return n.toByteArray(t)}function O(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}function j(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}},{"base64-js":4,ieee754:5,"is-array":6}],4:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){var e="undefined"!=typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),i="/".charCodeAt(0),o="0".charCodeAt(0),s="a".charCodeAt(0),a="A".charCodeAt(0);function h(t){var e=t.charCodeAt(0);return e===r?62:e===i?63:e<o?-1:e<o+10?e-o+26+26:e<a+26?e-a:e<s+26?e-s+26:void 0}function c(t){var r,n,i,o,s,a;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;s="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,a=new e(3*t.length/4-s),i=s>0?t.length-4:t.length;var l=0;function u(t){a[l++]=t}for(r=0,n=0;r<i;r+=4,n+=3)u((16711680&(o=h(t.charAt(r))<<18|h(t.charAt(r+1))<<12|h(t.charAt(r+2))<<6|h(t.charAt(r+3))))>>16),u((65280&o)>>8),u(255&o);return 2===s?u(255&(o=h(t.charAt(r))<<2|h(t.charAt(r+1))>>4)):1===s&&(u((o=h(t.charAt(r))<<10|h(t.charAt(r+1))<<4|h(t.charAt(r+2))>>2)>>8&255),u(255&o)),a}function l(t){var e,r,i,o=t.length%3,s="";function a(t){return n.charAt(t)}function h(t){return a(t>>18&63)+a(t>>12&63)+a(t>>6&63)+a(63&t)}for(e=0,i=t.length-o;e<i;e+=3)s+=h(r=(t[e]<<16)+(t[e+1]<<8)+t[e+2]);switch(o){case 1:s+=a((r=t[t.length-1])>>2),s+=a(r<<4&63),s+="==";break;case 2:s+=a((r=(t[t.length-2]<<8)+t[t.length-1])>>10),s+=a(r>>4&63),s+=a(r<<2&63),s+="="}return s}t.toByteArray=c,t.fromByteArray=l}(void 0===r?this.base64js={}:r)},{}],5:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,h=(1<<a)-1,c=h>>1,l=-7,u=r?i-1:0,f=r?-1:1,p=t[e+u];for(u+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+u],u+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+u],u+=f,l-=8);if(0===o)o=1-c;else{if(o===h)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,h,c=8*o-i-1,l=(1<<c)-1,u=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+u>=1?f/h:f*Math.pow(2,1-u))*h>=2&&(s++,h/=2),s+u>=l?(a=0,s=l):s+u>=1?(a=(e*h-1)*Math.pow(2,i),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},{}],6:[function(t,e,r){var n=Array.isArray,i=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],7:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,h,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(a(r=this._events[t]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),h=1;h<n;h++)o[h-1]=arguments[h];r.apply(this,o)}else if(s(r)){for(n=arguments.length,o=new Array(n-1),h=1;h<n;h++)o[h-1]=arguments[h];for(n=(c=r.slice()).length,h=0;h<n;h++)c[h].apply(this,o)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var r,n,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(r=this._events[t]).length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(r)){for(a=o;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(r=this._events[t]))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){return t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],8:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],9:[function(t,e,r){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],10:[function(t,e,r){var n=e.exports={};function i(){}n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var n=[];if(e){var i=document.createElement("div");return new MutationObserver((function(){var t=n.slice();n.length=0,t.forEach((function(t){t()}))})).observe(i,{attributes:!0}),function(t){n.length||i.setAttribute("yes","no"),n.push(t)}}return r?(window.addEventListener("message",(function(t){var e=t.source;e!==window&&null!==e||"process-tick"!==t.data||(t.stopPropagation(),n.length>0&&n.shift()())}),!0),function(t){n.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=i,n.addListener=i,n.once=i,n.off=i,n.removeListener=i,n.removeAllListeners=i,n.emit=i,n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],11:[function(t,e,r){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":12}],12:[function(t,e,r){(function(r){e.exports=a;var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},i=t("core-util-is");i.inherits=t("inherits");var o=t("./_stream_readable"),s=t("./_stream_writable");function a(t){if(!(this instanceof a))return new a(t);o.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function c(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}i.inherits(a,o),c(n(s.prototype),(function(t){a.prototype[t]||(a.prototype[t]=s.prototype[t])}))}).call(this,t("_process"))},{"./_stream_readable":14,"./_stream_writable":16,_process:10,"core-util-is":17,inherits:8}],13:[function(t,e,r){e.exports=o;var n=t("./_stream_transform"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=t("inherits"),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":15,"core-util-is":17,inherits:8}],14:[function(t,e,r){(function(r){e.exports=l;var n=t("isarray"),i=t("buffer").Buffer;l.ReadableState=c;var o=t("events").EventEmitter;o.listenerCount||(o.listenerCount=function(t,e){return t.listeners(e).length});var s,a=t("stream"),h=t("core-util-is");function c(e,r){var n=(e=e||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=t("string_decoder/").StringDecoder),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function l(t){if(!(this instanceof l))return new l(t);this._readableState=new c(t),this.readable=!0,a.call(this)}function u(t,e,r,n,i){var o=g(e,r);if(o)t.emit("error",o);else if(null==r)e.reading=!1,e.ended||x(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else e.endEmitted&&i?(s=new Error("stream.unshift() after end event"),t.emit("error",s)):(!e.decoder||i||n||(r=e.decoder.write(r)),e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):(e.reading=!1,e.buffer.push(r)),e.needReadable&&m(t),w(t,e));else i||(e.reading=!1);return f(e)}function f(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}h.inherits=t("inherits"),h.inherits(l,a),l.prototype.push=function(t,e){var r=this._readableState;return"string"!=typeof t||r.objectMode||(e=e||r.defaultEncoding)!==r.encoding&&(t=new i(t,e),e=""),u(this,r,t,e,!1)},l.prototype.unshift=function(t){return u(this,this._readableState,t,"",!0)},l.prototype.setEncoding=function(e){s||(s=t("string_decoder/").StringDecoder),this._readableState.decoder=new s(e),this._readableState.encoding=e};var p=8388608;function d(t){if(t>=p)t=p;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function y(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=d(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function g(t,e){var r=null;return i.isBuffer(e)||"string"==typeof e||null==e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function x(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.length>0?m(t):_(t)}function m(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?r.nextTick((function(){v(t)})):v(t))}function v(t){t.emit("readable")}function w(t,e){e.readingMore||(e.readingMore=!0,r.nextTick((function(){b(t,e)})))}function b(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function A(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&B(t)}}function B(t){var e,r=t._readableState;function n(t,n,i){!1===t.write(e)&&r.awaitDrain++}for(r.awaitDrain=0;r.pipesCount&&null!==(e=t.read());)if(1===r.pipesCount?n(r.pipes):k(r.pipes,n),t.emit("data",e),r.awaitDrain>0)return;if(0===r.pipesCount)return r.flowing=!1,void(o.listenerCount(t,"data")>0&&T(t));r.ranOut=!0}function E(){this._readableState.ranOut&&(this._readableState.ranOut=!1,B(this))}function T(t,e){if(t._readableState.flowing)throw new Error("Cannot switch to old mode now.");var n=e||!1,i=!1;t.readable=!0,t.pipe=a.prototype.pipe,t.on=t.addListener=a.prototype.on,t.on("readable",(function(){var e;for(i=!0;!n&&null!==(e=t.read());)t.emit("data",e);null===e&&(i=!1,t._readableState.needReadable=!0)})),t.pause=function(){n=!0,this.emit("pause")},t.resume=function(){n=!1,i?r.nextTick((function(){t.emit("readable")})):this.read(0),this.emit("resume")},t.emit("readable")}function S(t,e){var r,n=e.buffer,o=e.length,s=!!e.decoder,a=!!e.objectMode;if(0===n.length)return null;if(0===o)r=null;else if(a)r=n.shift();else if(!t||t>=o)r=s?n.join(""):i.concat(n,o),n.length=0;else if(t<n[0].length)r=(u=n[0]).slice(0,t),n[0]=u.slice(t);else if(t===n[0].length)r=n.shift();else{r=s?"":new i(t);for(var h=0,c=0,l=n.length;c<l&&h<t;c++){var u=n[0],f=Math.min(t-h,u.length);s?r+=u.slice(0,f):u.copy(r,h,0,f),f<u.length?n[0]=u.slice(f):n.shift(),h+=f}}return r}function _(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,r.nextTick((function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))})))}function k(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}function M(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}l.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var r,n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return m(this),null;if(0===(t=y(t,e))&&e.ended)return r=null,e.length>0&&e.decoder&&(r=S(t,e),e.length-=r.length),0===e.length&&_(this),r;var i=e.needReadable;return e.length-t<=e.highWaterMark&&(i=!0),(e.ended||e.reading)&&(i=!1),i&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=y(n,e)),null===(r=t>0?S(t,e):null)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&_(this),r},l.prototype._read=function(t){this.emit("error",new Error("not implemented"))},l.prototype.pipe=function(t,e){var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1;var a=e&&!1===e.end||t===r.stdout||t===r.stderr?u:c;function h(t){t===i&&u()}function c(){t.end()}s.endEmitted?r.nextTick(a):i.once("end",a),t.on("unpipe",h);var l=A(i);function u(){t.removeListener("close",p),t.removeListener("finish",d),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",h),i.removeListener("end",c),i.removeListener("end",u),t._writableState&&!t._writableState.needDrain||l()}function f(e){y(),t.removeListener("error",f),0===o.listenerCount(t,"error")&&t.emit("error",e)}function p(){t.removeListener("finish",d),y()}function d(){t.removeListener("close",p),y()}function y(){i.unpipe(t)}return t.on("drain",l),t._events&&t._events.error?n(t._events.error)?t._events.error.unshift(f):t._events.error=[f,t._events.error]:t.on("error",f),t.once("close",p),t.once("finish",d),t.emit("pipe",i),s.flowing||(this.on("readable",E),s.flowing=!0,r.nextTick((function(){B(i)}))),t},l.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",E),e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",E),e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}return-1===(i=M(e.pipes,t))||(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},l.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||T(this),"readable"===t&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&m(this):this.read(0))}return r},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){T(this),this.read(0),this.emit("resume")},l.prototype.pause=function(){T(this,!0),this.emit("pause")},l.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;for(var i in t.on("end",(function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)})),t.on("data",(function(i){e.decoder&&(i=e.decoder.write(i)),e.objectMode&&null==i||(e.objectMode||i&&i.length)&&(n.push(i)||(r=!0,t.pause()))})),t)"function"==typeof t[i]&&void 0===this[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return k(["error","close","destroy","pause","resume"],(function(e){t.on(e,n.emit.bind(n,e))})),n._read=function(e){r&&(r=!1,t.resume())},n},l._fromList=S}).call(this,t("_process"))},{_process:10,buffer:3,"core-util-is":17,events:7,inherits:8,isarray:9,stream:22,"string_decoder/":23}],15:[function(t,e,r){e.exports=a;var n=t("./_stream_duplex"),i=t("core-util-is");function o(t,e){this.afterTransform=function(t,r){return s(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function s(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&t.push(r),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState=new o(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",(function(){"function"==typeof this._flush?this._flush((function(t){h(e,t)})):h(e)}))}function h(t,e){if(e)return t.emit("error",e);var r=t._writableState;t._readableState;var n=t._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,r){throw new Error("not implemented")},a.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":12,"core-util-is":17,inherits:8}],16:[function(t,e,r){(function(r){e.exports=h;var n=t("buffer").Buffer;h.WritableState=a;var i=t("core-util-is");i.inherits=t("inherits");var o=t("stream");function s(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function a(t,e){var r=(t=t||{}).highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=!1===t.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){g(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function h(e){var r=t("./_stream_duplex");if(!(this instanceof h||this instanceof r))return new h(e);this._writableState=new a(e,this),this.writable=!0,o.call(this)}function c(t,e,n){var i=new Error("write after end");t.emit("error",i),r.nextTick((function(){n(i)}))}function l(t,e,i,o){var s=!0;if(!n.isBuffer(i)&&"string"!=typeof i&&null!=i&&!e.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),r.nextTick((function(){o(a)})),s=!1}return s}function u(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=new n(e,r)),e}function f(t,e,r,i,o){r=u(e,r,i),n.isBuffer(r)&&(i="buffer");var a=e.objectMode?1:r.length;e.length+=a;var h=e.length<e.highWaterMark;return h||(e.needDrain=!0),e.writing?e.buffer.push(new s(r,i,o)):p(t,e,a,r,i,o),h}function p(t,e,r,n,i,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,t._write(n,i,e.onwrite),e.sync=!1}function d(t,e,n,i,o){n?r.nextTick((function(){o(i)})):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function y(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function g(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if(y(n),e)d(t,n,i,e,o);else{var s=w(t,n);s||n.bufferProcessing||!n.buffer.length||v(t,n),i?r.nextTick((function(){x(t,n,s,o)})):x(t,n,s,o)}}function x(t,e,r,n){r||m(t,e),n(),r&&b(t,e)}function m(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){e.bufferProcessing=!0;for(var r=0;r<e.buffer.length;r++){var n=e.buffer[r],i=n.chunk,o=n.encoding,s=n.callback;if(p(t,e,e.objectMode?1:i.length,i,o,s),e.writing){r++;break}}e.bufferProcessing=!1,r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}function w(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function b(t,e){var r=w(t,e);return r&&(e.finished=!0,t.emit("finish")),r}function A(t,e,n){e.ending=!0,b(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n)),e.ended=!0}i.inherits(h,o),h.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},h.prototype.write=function(t,e,r){var i=this._writableState,o=!1;return"function"==typeof e&&(r=e,e=null),n.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=function(){}),i.ended?c(this,i,r):l(this,i,t,r)&&(o=f(this,i,t,e,r)),o},h.prototype._write=function(t,e,r){r(new Error("not implemented"))},h.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.ending||n.finished||A(this,n,r)}}).call(this,t("_process"))},{"./_stream_duplex":12,_process:10,buffer:3,"core-util-is":17,inherits:8,stream:22}],17:[function(t,e,r){(function(t){function e(t){return Array.isArray(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function h(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return u(t)&&"[object RegExp]"===x(t)}function u(t){return"object"==typeof t&&null!==t}function f(t){return u(t)&&"[object Date]"===x(t)}function p(t){return u(t)&&("[object Error]"===x(t)||t instanceof Error)}function d(t){return"function"==typeof t}function y(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function g(e){return t.isBuffer(e)}function x(t){return Object.prototype.toString.call(t)}r.isArray=e,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=h,r.isUndefined=c,r.isRegExp=l,r.isObject=u,r.isDate=f,r.isError=p,r.isFunction=d,r.isPrimitive=y,r.isBuffer=g}).call(this,t("buffer").Buffer)},{buffer:3}],18:[function(t,e,r){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":13}],19:[function(t,e,r){var n=t("stream");(r=e.exports=t("./lib/_stream_readable.js")).Stream=n,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":12,"./lib/_stream_passthrough.js":13,"./lib/_stream_readable.js":14,"./lib/_stream_transform.js":15,"./lib/_stream_writable.js":16,stream:22}],20:[function(t,e,r){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":15}],21:[function(t,e,r){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":16}],22:[function(t,e,r){e.exports=i;var n=t("events").EventEmitter;function i(){n.call(this)}t("inherits")(i,n),i.Readable=t("readable-stream/readable.js"),i.Writable=t("readable-stream/writable.js"),i.Duplex=t("readable-stream/duplex.js"),i.Transform=t("readable-stream/transform.js"),i.PassThrough=t("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",h));var s=!1;function a(){s||(s=!0,t.end())}function h(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===n.listenerCount(this,"error"))throw t}function l(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",h),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("error",c),t.on("error",c),r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t}},{events:7,inherits:8,"readable-stream/duplex.js":11,"readable-stream/passthrough.js":18,"readable-stream/readable.js":19,"readable-stream/transform.js":20,"readable-stream/writable.js":21}],23:[function(t,e,r){var n=t("buffer").Buffer,i=n.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){if(t&&!i(t))throw new Error("Unknown encoding: "+t)}var s=r.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),o(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=h;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=c;break;default:return void(this.write=a)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function a(t){return t.toString(this.encoding)}function h(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function c(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}s.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(t=t.slice(r,t.length),!((n=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var n,i=t.length;if(this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),i=(e+=t.toString(this.encoding,0,i)).length-1,(n=e.charCodeAt(i))>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},s.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e},s.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},{buffer:3}],24:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],25:[function(t,e,r){(function(e,n){var i=/%[sdj%]/g;r.format=function(t){if(!A(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(a(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),h=n[r];r<o;h=n[++r])v(h)||!S(h)?s+=" "+h:s+=" "+a(h);return s},r.deprecate=function(t,i){if(E(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;function s(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}return s};var o,s={};function a(t,e){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(e)?n.showHidden=e:e&&r._extend(n,e),E(n.showHidden)&&(n.showHidden=!1),E(n.depth)&&(n.depth=2),E(n.colors)&&(n.colors=!1),E(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=h),u(n,t,n.depth)}function h(t,e){var r=a.styles[e];return r?"["+a.colors[r][0]+"m"+t+"["+a.colors[r][1]+"m":t}function c(t,e){return t}function l(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}function u(t,e,n){if(t.customInspect&&e&&M(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return A(i)||(i=u(t,i,n)),i}var o=f(t,e);if(o)return o;var s=Object.keys(e),a=l(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),k(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(e);if(0===s.length){if(M(e)){var h=e.name?": "+e.name:"";return t.stylize("[Function"+h+"]","special")}if(T(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(_(e))return t.stylize(Date.prototype.toString.call(e),"date");if(k(e))return p(e)}var c,m="",v=!1,w=["{","}"];return x(e)&&(v=!0,w=["[","]"]),M(e)&&(m=" [Function"+(e.name?": "+e.name:"")+"]"),T(e)&&(m=" "+RegExp.prototype.toString.call(e)),_(e)&&(m=" "+Date.prototype.toUTCString.call(e)),k(e)&&(m=" "+p(e)),0!==s.length||v&&0!=e.length?n<0?T(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=v?d(t,e,n,a,s):s.map((function(r){return y(t,e,n,a,r,v)})),t.seen.pop(),g(c,m,w)):w[0]+m+w[1]}function f(t,e){if(E(e))return t.stylize("undefined","undefined");if(A(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return b(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)z(e,String(s))?o.push(y(t,e,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(y(t,e,r,n,i,!0))})),o}function y(t,e,r,n,i,o){var s,a,h;if((h=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),z(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(h.value)<0?(a=v(r)?u(t,h.value,null):u(t,h.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),E(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function g(t,e,r){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function x(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function v(t){return null===t}function w(t){return null==t}function b(t){return"number"==typeof t}function A(t){return"string"==typeof t}function B(t){return"symbol"==typeof t}function E(t){return void 0===t}function T(t){return S(t)&&"[object RegExp]"===L(t)}function S(t){return"object"==typeof t&&null!==t}function _(t){return S(t)&&"[object Date]"===L(t)}function k(t){return S(t)&&("[object Error]"===L(t)||t instanceof Error)}function M(t){return"function"==typeof t}function C(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function L(t){return Object.prototype.toString.call(t)}function D(t){return t<10?"0"+t.toString(10):t.toString(10)}r.debuglog=function(t){if(E(o)&&(o=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=e.pid;s[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else s[t]=function(){};return s[t]},r.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=x,r.isBoolean=m,r.isNull=v,r.isNullOrUndefined=w,r.isNumber=b,r.isString=A,r.isSymbol=B,r.isUndefined=E,r.isRegExp=T,r.isObject=S,r.isDate=_,r.isError=k,r.isFunction=M,r.isPrimitive=C,r.isBuffer=t("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var t=new Date,e=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r.log=function(){console.log("%s - %s",I(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!S(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),void 0!==gt?gt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":24,_process:10,inherits:8}]},{},[2])(2);const Xn={fillStyle:"fillColor",strokeStyle:"strokeColor",globalAlpha:"opacity"},Gn=j,Hn=g;let qn=0;const Vn=Nn.zoom(),Wn=Nn.drag();function Zn(){return qn+=1,qn}const $n=function(){cn.apply(this,arguments)};function Qn(t){const e={translateX:0,translateY:0,scaleX:1,scaleY:1};return t&&(t.translate&&t.translate.length>0&&(e.translateX=t.translate[0],e.translateY=t.translate[1]),t.scale&&t.scale.length>0&&(e.scaleX=t.scale[0],e.scaleY=t.scale[1]||e.scaleX)),e}function Jn(){const t=this,{transform:e,points:r=[]}=t.attr,{translateX:n,translateY:i,scaleX:o,scaleY:s}=Qn(e);if(r&&r.length>0){let e=r[0].x,a=r[0].x,h=r[0].y,c=r[0].y;for(let t=1;t<r.length;t+=1)e>r[t].x&&(e=r[t].x),a<r[t].x&&(a=r[t].x),h>r[t].y&&(h=r[t].y),c<r[t].y&&(c=r[t].y);t.BBox={x:n+e*o,y:i+h*s,width:(a-e)*o,height:(c-h)*s}}else t.BBox={x:0,y:0,width:0,height:0};e&&e.rotate?t.BBoxHit=Gn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox}function Kn(t,e){this.config=t,this.type=e||"linear",this.mode=this.config.mode&&"percent"!==this.config.mode?"absolute":"percent"}function ti(t,e,r){this.imageData=t,this.width=e,this.height=r}function ei(t,e={}){const r=e.id?e.id:"mask-"+Math.ceil(1e3*Math.random());this.config=e,this.mask=new wi(t.dom.ctx,{el:"g",attr:{id:r}},Zn(),t.vDomIndex)}function ri(t){return new ei(this,t)}function ni(t,e={}){const r=e.id?e.id:"clip-"+Math.ceil(1e3*Math.random());this.clip=new wi(t.dom.ctx,{el:"g",attr:{id:r}},Zn(),t.vDomIndex)}function ii(t){return new ni(this,t)}function oi(t,e={},r=0,n=0){const i=this,o=e.id?e.id:"pattern-"+Math.ceil(1e3*Math.random());this.repeatInd=e.repeat?e.repeat:"repeat","NODE"===t.ENV||(i.pattern=Si(null,{},{enableEvents:!1,enableResize:!1}),i.pattern.setSize(r,n)),i.pattern.setAttr("id",o),t.prependChild([i.pattern]),i.pattern.vDomIndex=t.vDomIndex+":"+o,i.pattern.onChange((function(){i.patternObj=t.ctx.createPattern(i.pattern.domEl,i.repeatInd)}))}function si(t,e=0,r=0){return new oi(this,t,e,r)}function ai(){this.BBox={x:0,y:0,width:0,height:0},this.BBoxHit={x:0,y:0,width:0,height:0}}function hi(t,e,r,n,i,o){const s=this;s.ctx=t,s.attr=e,s.style=r,s.nodeName="Image",s.nodeExe=o;for(const t in e)this.setAttr(t,e[t]);Hn.vDomChanged(o.vDomIndex),s.stack=[s]}function ci(t,e,r){const n=this;n.ctx=t,n.attr=e,n.style=r,n.nodeName="text",n.stack=[n],n.attr.width&&this.fitWidth()}($n.prototype=new cn).constructor=$n,$n.prototype.createNode=function(t,e,r){return new wi(t,e,Zn(),r)},Kn.prototype.exe=function(t,e){return"linear"===this.type&&"percent"===this.mode?this.linearGradient(t,e):"linear"===this.type&&"absolute"===this.mode?this.absoluteLinearGradient(t):"radial"===this.type&&"percent"===this.mode?this.radialGradient(t,e):"radial"===this.type&&"absolute"===this.mode?this.absoluteRadialGradient(t):void console.error("wrong Gradiant type")},Kn.prototype.linearGradient=function(t,e){const r=t.createLinearGradient(e.x+e.width*(this.config.x1/100),e.y+e.height*(this.config.y1/100),e.x+e.width*(this.config.x2/100),e.y+e.height*(this.config.y2/100));return this.config.colorStops.forEach((t=>{r.addColorStop(t.value/100,t.color)})),r},Kn.prototype.absoluteLinearGradient=function(t){const e=t.createLinearGradient(this.config.x1,this.config.y1,this.config.x2,this.config.y2);return this.config.colorStops.forEach((t=>{e.addColorStop(t.value,t.color)})),e},Kn.prototype.radialGradient=function(t,e){const r=t.createRadialGradient(e.x+e.width*(this.config.innerCircle.x/100),e.y+e.height*(this.config.innerCircle.y/100),e.width>e.height?e.width*this.config.innerCircle.r/100:e.height*this.config.innerCircle.r/100,e.x+e.width*(this.config.outerCircle.x/100),e.y+e.height*(this.config.outerCircle.y/100),e.width>e.height?e.width*this.config.outerCircle.r/100:e.height*this.config.outerCircle.r/100);return this.config.colorStops.forEach((t=>{r.addColorStop(t.value/100,t.color)})),r},Kn.prototype.absoluteRadialGradient=function(t,e){const r=t.createRadialGradient(this.config.innerCircle.x,this.config.innerCircle.y,this.config.innerCircle.r,this.config.outerCircle.x,this.config.outerCircle.y,this.config.outerCircle.r);return this.config.colorStops.forEach((t=>{r.addColorStop(t.value/100,t.color)})),r},Kn.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,this)},ti.prototype.get=function(t){const e=this.imageData?this.imageData.pixels:[],r=(t.y-1)*(4*this.width)+4*(t.x-1);return"rgba("+e[r]+", "+e[r+1]+", "+e[r+2]+", "+e[r+3]+")"},ti.prototype.put=function(t,e){const r=(t.y-1)*(4*this.width)+4*(t.x-1);return this.imageData.pixels[r]=e[0],this.imageData.pixels[r+1]=e[1],this.imageData.pixels[r+2]=e[2],this.imageData.pixels[r+3]=e[3],this},ei.prototype.setAttr=function(t,e){this.config[t]=e},ei.prototype.exe=function(){return this.mask.execute(),this.mask.dom.ctx.globalCompositeOperation=this.config.globalCompositeOperation||"destination-atop",!0},ni.prototype.exe=function(){return this.clip.execute(),this.clip.dom.ctx.clip(),!0},oi.prototype.repeat=function(t){this.repeatInd=t},oi.prototype.exe=function(){return this.patternObj},ai.prototype={render:function(t){const e=this;if(t.transform){const{transform:r}=t,{scale:n=[1,1],skew:i=[0,0],translate:o=[0,0]}=r,[s=1,a=s]=n,[h=0,c=h]=i,[l=0,u=l]=o;e.ctx.transform(s,h,c,a,l,u),r.rotate&&r.rotate.length>0&&(e.ctx.translate(r.rotate[1]||0,r.rotate[2]||0),e.ctx.rotate(r.rotate[0]*(Math.PI/180)),e.ctx.translate(-r.rotate[1]||0,-r.rotate[2]||0))}for(let t=0;t<e.stack.length;t+=1)e.stack[t].execute()},renderPdf:function(t,e){const r=this;if(t.transform){const{transform:r}=t,{scale:n=[1,1],skew:i=[0,0],translate:o=[0,0]}=r,[s=1,a=s]=n,[h=0,c=h]=i,[l=0,u=l]=o;e.transform(s,h,c,a,l,u),r.rotate&&r.rotate.length>0&&(e.translate(r.rotate[1]||0,r.rotate[2]||0),e.rotate(r.rotate[0]*(Math.PI/180)),e.translate(-r.rotate[1]||0,-r.rotate[2]||0))}for(let t=0;t<r.stack.length;t+=1)r.stack[t].executePdf(e)},setAttr:function(t,e){null==e&&null!=this.attr[t]?delete this.attr[t]:this.attr[t]=e},setStyle:function(t,e){null==e&&null!=this.style[t]?delete this.style[t]:this.style[t]=e},applyStyles:function(){"#000000"!==this.ctx.fillStyle&&this.ctx.fill(),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke()},applyStylesPdf:function(t){this.style.fillStyle&&this.style.strokeStyle?t.fillAndStroke(this.style.fillStyle,this.style.strokeStyle):this.style.fillStyle?t.fill(this.style.fillStyle):this.style.strokeStyle&&t.stroke(this.style.strokeStyle)}},hi.prototype=new ai,hi.prototype.constructor=hi,hi.prototype.setAttr=function(t,e){const r=this;"src"===t&&("string"==typeof e?(r.image=r.image?r.image:function(t){const e=new Image;return e.crossOrigin="anonymous",e.onload=function(){t.attr.height=t.attr.height?t.attr.height:this.height,t.attr.width=t.attr.width?t.attr.width:this.width,t.imageObj=this,t.nodeExe.attr.onload&&"function"==typeof t.nodeExe.attr.onload&&t.nodeExe.attr.onload.call(t.nodeExe,t.image),t.nodeExe.BBoxUpdate=!0,Hn.vDomChanged(t.nodeExe.vDomIndex)},e.onerror=function(e){t.nodeExe.attr.onerror&&"function"==typeof t.nodeExe.attr.onerror&&t.nodeExe.attr.onerror.call(t.nodeExe,e)},e}(r),r.image.src!==e&&(r.image.src=e)):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement?(r.imageObj=e,r.attr.height=r.attr.height?r.attr.height:e.height,r.attr.width=r.attr.width?r.attr.width:e.width):(e instanceof wi||e instanceof Ti)&&(r.imageObj=e.domEl,r.attr.height=r.attr.height?r.attr.height:e.attr.height,r.attr.width=r.attr.width?r.attr.width:e.attr.width)),this.attr[t]=e,Hn.vDomChanged(this.nodeExe.vDomIndex)},hi.prototype.updateBBox=function(){const t=this,{transform:e,x:r=0,y:n=0,width:i=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(e);t.BBox={x:(s+r)*h,y:(a+n)*c,width:i*h,height:o*c},e&&e.rotate?t.BBoxHit=Gn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},hi.prototype.execute=function(){const{width:t=0,height:e=0,x:r=0,y:n=0}=this.attr;this.imageObj&&this.ctx.drawImage(this.imageObj,r,n,t,e)},hi.prototype.applyStyles=function(){},hi.prototype.in=function(t){const{width:e=0,height:r=0,x:n=0,y:i=0}=this.attr;return t.x>=n&&t.x<=n+e&&t.y>=i&&t.y<=i+r},ci.prototype=new ai,ci.prototype.constructor=ci,ci.prototype.fitWidth=function(){this.style.font&&(this.ctx.font=this.style.font);const t=this.attr.width,e=[];let r="",n=0;const i=this.attr.text.split("\n").reduce((function(t,e){return(t=t.concat(e.split(" "))).push("\n"),t}),[]);for(;n<i.length;)0!==n&&(r+=" "),"\n"===i[n]?(e.push(r),r=" "):this.ctx.measureText(r+i[n]).width<t?r+=i[n]:(r&&r.length>0&&e.push(r),r=i[n]),n++;e.push(r),this.textList=e},ci.prototype.text=function(t){this.attr.text=t,this.attr.width&&this.fitWidth()},ci.prototype.updateBBox=function(){const t=this;let e=1,r=0,{x:n=0,y:i=0,transform:o}=t.attr;const{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(o);this.style.font&&(this.ctx.font=this.style.font,e=parseInt(this.style.font.replace(/[^\d.]/g,""),10)||1,t.textHeight=e+3),this.attr.width&&this.textList&&this.textList.length>0?(r=this.attr.width,e*=this.textList.length):r=this.ctx.measureText(this.attr.text).width,"center"===this.style.textAlign?n-=r/2:"right"===this.style.textAlign&&(n-=r),t.width=r,t.height=e,t.x=n,t.y=i,t.BBox={x:(s+n)*h,y:(a+i)*c,width:r*h,height:e*c},o&&o.rotate?t.BBoxHit=Gn.rotateBBox(this.BBox,o):t.BBoxHit=this.BBox},ci.prototype.execute=function(){if(void 0!==this.attr.text&&null!==this.attr.text)if(this.textList&&this.textList.length>0)for(var t=0;t<this.textList.length;t++)"#000000"!==this.ctx.fillStyle&&this.ctx.fillText(this.textList[t],this.attr.x,this.attr.y+this.textHeight*(t+1)),"#000000"!==this.ctx.strokeStyle&&this.ctx.strokeText(this.textList[t],this.attr.x,this.attr.y+this.textHeight*(t+1));else"#000000"!==this.ctx.fillStyle&&this.ctx.fillText(this.attr.text,this.attr.x,this.attr.y+this.height),"#000000"!==this.ctx.strokeStyle&&this.ctx.strokeText(this.attr.text,this.attr.x,this.attr.y+this.height)},ci.prototype.executePdf=function(t){if(void 0!==this.attr.text&&null!==this.attr.text)if(this.textList&&this.textList.length>0)for(var e=0;e<this.textList.length;e++)this.style.fillStyle&&(t.text(this.textList[e],this.attr.x,this.attr.y+this.textHeight*(e+1)),t.fill()),this.ctx.strokeStyle&&(t.text(this.textList[e],this.attr.x,this.attr.y+this.textHeight*(e+1)),t.stroke());else this.style.fillStyle&&t.text(this.attr.text,this.attr.x,this.attr.y+this.height),this.style.strokeStyle&&t.strokeText(this.attr.text,this.attr.x,this.attr.y+this.height)},ci.prototype.applyStyles=function(){},ci.prototype.in=function(t){const{x:e=0,y:r=0,width:n=0,height:i=0}=this;return t.x>=e&&t.x<=e+n&&t.y>=r&&t.y<=r+i};const li=function(t,e,r){const n=this;n.ctx=t,n.attr=e,n.style=r,n.nodeName="circle",n.stack=[n]};(li.prototype=new ai).constructor=li,li.prototype.updateBBox=function(){const t=this,{transform:e,r:r=0,cx:n=0,cy:i=0}=t.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Qn(e);t.BBox={x:o+(n-r)*a,y:s+(i-r)*h,width:2*r*a,height:2*r*h},e&&e.rotate?t.BBoxHit=Gn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},li.prototype.execute=function(){const{r:t=0,cx:e=0,cy:r=0}=this.attr;this.ctx.beginPath(),this.ctx.arc(e,r,t,0,2*Math.PI,!1),this.applyStyles(),this.ctx.closePath()},li.prototype.executePdf=function(t){const{r:e=0,cx:r=0,cy:n=0}=this.attr;t.circle(parseInt(r),parseInt(n),parseInt(e)),this.applyStylesPdf(t)},li.prototype.in=function(t,e){const{r:r=0,cx:n=0,cy:i=0}=this.attr;return Math.sqrt((t.x-n)*(t.x-n)+(t.y-i)*(t.y-i))<=r};const ui=function(t,e,r){const n=this;n.ctx=t,n.attr=e,n.style=r,n.nodeName="line",n.stack=[n]};function fi(t,e,r){const n=this;n.ctx=t,n.attr=e,n.style=r,n.nodeName="polyline",n.stack=[n]}(ui.prototype=new ai).constructor=ui,ui.prototype.updateBBox=function(){const t=this,{transform:e,x1:r=0,y1:n=0,x2:i=0,y2:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(e);t.BBox={x:s+(r<i?r:i)*h,y:a+(n<o?n:o)*c,width:Math.abs(i-r)*h,height:Math.abs(o-n)*c},e&&e.rotate?t.BBoxHit=Gn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},ui.prototype.execute=function(){const{ctx:t}=this,{x1:e=0,y1:r=0,x2:n=0,y2:i=0}=this.attr;t.beginPath(),t.moveTo(e,r),t.lineTo(n,i),this.applyStyles(),t.closePath()},ui.prototype.executePdf=function(t){const{x1:e=0,y1:r=0,x2:n=0,y2:i=0}=this.attr;t.moveTo(e,r),t.lineTo(n,i),this.applyStylesPdf(t)},ui.prototype.in=function(t){const{x1:e=0,y1:r=0,x2:n=0,y2:i=0}=this.attr;return parseFloat(Gn.getDistance({x:e,y:r},t)+Gn.getDistance(t,{x:n,y:i})).toFixed(1)===parseFloat(Gn.getDistance({x:e,y:r},{x:n,y:i})).toFixed(1)},fi.prototype=new ai,fi.constructor=fi,fi.prototype.execute=function(){const t=this;let e;if(this.attr.points&&0!==this.attr.points.length){this.ctx.beginPath(),t.ctx.moveTo(this.attr.points[0].x,this.attr.points[0].y);for(var r=1;r<this.attr.points.length;r++)e=this.attr.points[r],t.ctx.lineTo(e.x,e.y);this.applyStyles(),this.ctx.closePath()}},fi.prototype.executePdf=function(t){let e;if(this.attr.points&&0!==this.attr.points.length){t.moveTo(this.attr.points[0].x,this.attr.points[0].y);for(var r=1;r<this.attr.points.length;r++)e=this.attr.points[r],t.lineTo(e.x,e.y);this.applyStylesPdf(t)}},fi.prototype.updateBBox=Jn,fi.prototype.in=function(t){let e=!1;for(let r=0,n=this.attr.points.length;r<=n-2;r++){const n=this.attr.points[r],i=this.attr.points[r+1];e=e||parseFloat(Gn.getDistance({x:n.x,y:n.y},t)+Gn.getDistance(t,{x:i.x,y:i.y})).toFixed(1)===parseFloat(Gn.getDistance({x:n.x,y:n.y},{x:i.x,y:i.y})).toFixed(1)}return e};const pi=function(t,e,r){const n=this;return n.ctx=t,n.angle=0,n.nodeName="path",n.attr=e,n.style=r,n.attr.d&&(qe.isTypePath(n.attr.d)?(n.path=n.attr.d,n.attr.d=n.attr.d.fetchPathString()):n.path=qe.instance(n.attr.d),n.pathNode=new Path2D(n.attr.d)),n.stack=[n],n};function di(t){if("[object Array]"!==Object.prototype.toString.call(t))return void console.error("Points expected as array [{x: , y:}]");if(t&&0===t.length)return;const e=new Path2D;e.moveTo(t[0].x,t[0].y);for(let r=1;r<t.length;r++)e.lineTo(t[r].x,t[r].y);return e.closePath(),{path:e,points:t,rawPoints:t.map((t=>[t.x,t.y])),execute:function(t){t.beginPath();const e=this.points;t.moveTo(e[0].x,e[0].y);for(let r=1;r<e.length;r++)t.lineTo(e[r].x,e[r].y);t.closePath()}}}(pi.prototype=new ai).constructor=pi,pi.prototype.updateBBox=function(){const t=this,{transform:e}=t.attr,{translateX:r,translateY:n,scaleX:i,scaleY:o}=Qn(e);t.BBox=t.path?t.path.BBox:{x:0,y:0,width:0,height:0},t.BBox.x=r+t.BBox.x*i,t.BBox.y=n+t.BBox.y*o,t.BBox.width*=i,t.BBox.height*=o,e&&e.rotate?t.BBoxHit=Gn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},pi.prototype.setAttr=function(t,e){this.attr[t]=e,"d"===t&&(qe.isTypePath(e)?(this.path=e,this.attr.d=e.fetchPathString()):this.path=qe.instance(this.attr.d),this.pathNode=new Path2D(this.attr.d))},pi.prototype.getPointAtLength=function(t){return this.path?this.path.getPointAtLength(t):{x:0,y:0}},pi.prototype.getAngleAtLength=function(t){return this.path?this.path.getAngleAtLength(t):0},pi.prototype.getTotalLength=function(){return this.path?this.path.getTotalLength():0},pi.prototype.execute=function(){this.attr.d&&("#000000"!==this.ctx.fillStyle||"#000000"!==this.ctx.strokeStyle?("#000000"!==this.ctx.fillStyle&&this.ctx.fill(this.pathNode),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke(this.pathNode)):this.path.execute(this.ctx))},pi.prototype.executePdf=function(t){this.attr.d&&t.path(this.attr.d),this.applyStylesPdf(t)},pi.prototype.applyStyles=function(){},pi.prototype.in=function(t){let e=!1;return this.attr.d&&this.pathNode?(this.ctx.save(),this.ctx.scale(1/this.ctx.pixelRatio,1/this.ctx.pixelRatio),e=this.ctx.isPointInPath(this.pathNode,t.x,t.y),this.ctx.restore(),e):e};const yi=function(t,e,r){const n=this;return n.ctx=t,n.nodeName="polygon",n.attr=e,n.style=r,n.stack=[n],n.attr.points&&(n.polygon=di(n.attr.points)),this};(yi.prototype=new ai).constructor=yi,yi.prototype.setAttr=function(t,e){this.attr[t]=e,"points"===t&&(this.polygon=di(this.attr.points),this.polygon&&(this.attr.points=this.polygon.points))},yi.prototype.updateBBox=Jn,yi.prototype.execute=function(){this.polygon&&("#000000"!==this.ctx.fillStyle||"#000000"!==this.ctx.strokeStyle?("#000000"!==this.ctx.fillStyle&&this.ctx.fill(this.polygon.path),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke(this.polygon.path)):this.polygon.execute(this.ctx))},yi.prototype.executePdf=function(t){this.polygon&&((this.style.fillStyle||this.style.strokeStyle)&&t.polygon(...this.polygon.rawPoints),this.applyStylesPdf(t))},yi.prototype.applyStyles=function(){},yi.prototype.in=function(t){let e=!1;return!!this.polygon&&(this.ctx.save(),this.ctx.scale(1/this.ctx.pixelRatio,1/this.ctx.pixelRatio),e=this.style.fillStyle?this.ctx.isPointInPath(this.polygon.path,t.x,t.y):e,this.ctx.restore(),e)};const gi=function(t,e,r){const n=this;return n.ctx=t,n.nodeName="ellipse",n.attr=e,n.style=r,n.stack=[n],this};(gi.prototype=new ai).constructor=gi,gi.prototype.updateBBox=function(){const t=this,{transform:e,cx:r=0,cy:n=0,rx:i=0,ry:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(e);t.BBox={x:s+(r-i)*h,y:a+(n-o)*c,width:2*i*h,height:2*o*c},e&&e.rotate?t.BBoxHit=Gn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},gi.prototype.execute=function(){const t=this.ctx,{cx:e=0,cy:r=0,rx:n=0,ry:i=0}=this.attr;t.beginPath(),t.ellipse(e,r,n,i,0,0,2*Math.PI),this.applyStyles(),t.closePath()},gi.prototype.executePdf=function(t){const{cx:e=0,cy:r=0,rx:n=0,ry:i=0}=this.attr;t.ellipse(e,r,n,i),this.applyStylesPdf(t)},gi.prototype.in=function(t){const{cx:e=0,cy:r=0,rx:n=0,ry:i=0}=this.attr;return(t.x-e)*(t.x-e)/(n*n)+(t.y-r)*(t.y-r)/(i*i)<=1};const xi=function(t,e,r){const n=this;return n.ctx=t,n.nodeName="rect",n.attr=e,n.style=r,n.stack=[n],this};function mi(t,e){const{x:r=0,y:n=0,width:i=0,height:o=0,rx:s=0,ry:a=0}=e;t.beginPath&&t.beginPath(),t.moveTo(r+s,n),t.lineTo(r+i-s,n),t.quadraticCurveTo(r+i,n,r+i,n+a),t.lineTo(r+i,n+o-a),t.quadraticCurveTo(r+i,n+o,r+i-s,n+o),t.lineTo(r+s,n+o),t.quadraticCurveTo(r,n+o,r,n+o-a),t.lineTo(r,n+a),t.quadraticCurveTo(r,n,r+s,n),t.closePath&&t.closePath()}(xi.prototype=new ai).constructor=xi,xi.prototype.updateBBox=function(){const t=this,{transform:e,x:r=0,y:n=0,width:i=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(e);t.BBox={x:s+r*h,y:a+n*c,width:i*h,height:o*c},e&&e.rotate?t.BBoxHit=Gn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},xi.prototype.applyStyles=function(){},xi.prototype.executePdf=function(t){const{x:e=0,y:r=0,width:n=0,height:i=0,rx:o=0,ry:s=0}=this.attr,{fillStyle:a,strokeStyle:h}=this.style;a||h?(a&&(o||s?mi(t,{x:e,y:r,width:n,height:i,rx:o,ry:s}):t.rect(e,r,n,i)),h&&(o||s?mi(t,{x:e,y:r,width:n,height:i,rx:o,ry:s}):t.rect(e,r,n,i))):t.rect(e,r,n,i),this.applyStylesPdf(t)},xi.prototype.execute=function(){const t=this.ctx,{x:e=0,y:r=0,width:n=0,height:i=0,rx:o=0,ry:s=0}=this.attr;"#000000"!==t.fillStyle||"#000000"!==t.strokeStyle?("#000000"!==t.fillStyle&&(o||s?(mi(t,{x:e,y:r,width:n,height:i,rx:o,ry:s}),t.fill()):t.fillRect(e,r,n,i)),"#000000"!==t.strokeStyle&&(o||s?(mi(t,{x:e,y:r,width:n,height:i,rx:o,ry:s}),t.stroke()):t.strokeRect(e,r,n,i))):t.rect(e,r,n,i)},xi.prototype.in=function(t){const{x:e=0,y:r=0,width:n=0,height:i=0}=this.attr;return t.x>=e&&t.x<=e+n&&t.y>=r&&t.y<=r+i};const vi=function(t,e,r){const n=this;return n.nodeName="g",n.ctx=t,n.attr=e,n.style=r,n.stack=new Array(0),this};(vi.prototype=new ai).constructor=vi,vi.prototype.updateBBox=function(t){const e=this;let r,n,i,o;const{transform:s}=e.attr,{translateX:a,translateY:h,scaleX:c,scaleY:l}=Qn(s);if(e.BBox={},t&&t.length>0){let e,s,a;for(let h=0;h<t.length;h+=1)e=t[h],s=e.dom.BBoxHit.x,a=e.dom.BBoxHit.y,r=void 0===r||r>s?s:r,i=void 0===i||i>a?a:i,n=void 0===n||n<s+e.dom.BBoxHit.width?s+e.dom.BBoxHit.width:n,o=void 0===o||o<a+e.dom.BBoxHit.height?a+e.dom.BBoxHit.height:o}r=void 0===r?0:r,i=void 0===i?0:i,n=void 0===n?0:n,o=void 0===o?0:o,e.BBox.x=a+r*c,e.BBox.y=h+i*l,e.BBox.width=Math.abs(n-r)*c,e.BBox.height=Math.abs(o-i)*l,e.attr.transform&&e.attr.transform.rotate?e.BBoxHit=Gn.rotateBBox(this.BBox,this.attr.transform):e.BBoxHit=this.BBox},vi.prototype.child=function(t){const e=this,r=t;r instanceof wi?(r.dom.parent=e,e.stack[e.stack.length]=r):r instanceof $n?r.stack.forEach((t=>{t.dom.parent=e,e.stack[e.stack.length]=t})):console.log("wrong Object")},vi.prototype.in=function(t){const e=t.x,r=t.y,{BBox:n}=this,{transform:i}=this.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Qn(i);return e>=(n.x-o)/a&&e<=(n.x-o+n.width)/a&&r>=(n.y-s)/h&&r<=(n.y-s+n.height)/h};const wi=function(t,e,r,n){switch(this.style=e.style||{},this.setStyle(e.style),this.attr=e.attr||{},this.id=r,this.nodeName=e.el,this.nodeType="CANVAS",this.children=[],this.events={},this.ctx=t,this.vDomIndex=n,this.bbox=void 0===e.bbox||e.bbox,e.el){case"circle":this.dom=new li(this.ctx,this.attr,this.style);break;case"rect":this.dom=new xi(this.ctx,this.attr,this.style);break;case"line":this.dom=new ui(this.ctx,this.attr,this.style);break;case"polyline":this.dom=new fi(this.ctx,this.attr,this.style);break;case"path":this.dom=new pi(this.ctx,this.attr,this.style);break;case"group":case"g":this.dom=new vi(this.ctx,this.attr,this.style);break;case"text":this.dom=new ci(this.ctx,this.attr,this.style);break;case"image":this.dom=new hi(this.ctx,this.attr,this.style,e.onload,e.onerror,this);break;case"polygon":this.dom=new yi(this.ctx,this.attr,this.style);break;case"ellipse":this.dom=new gi(this.ctx,this.attr,this.style);break;default:this.dom=null}this.dom.nodeExe=this,this.BBoxUpdate=!0};function bi(t){return Ke.RGBAInstanceCheck(t)&&(t=t.rgba),"#000"===t||"#000000"===t||"black"===t?"rgb(1, 1, 1)":t}function Ai(t,e){const r=document.createElement("canvas");r.setAttribute("height",e),r.setAttribute("width",t),this.canvas=r,this.context=this.canvas.getContext("2d")}function Bi(t,e){const r=new Image;return r.crossOrigin="anonymous",r.src=e,t?(r.onload=function(){t&&(t.attr&&(t.attr.height=t.attr.height?t.attr.height:this.naturalHeight,t.attr.width=t.attr.width?t.attr.width:this.naturalWidth),t instanceof Ti&&t.setSize(t.attr.width,t.attr.height),t.imageObj=this,t.attr&&t.attr.onload&&"function"==typeof t.attr.onload&&t.attr.onload.call(t,t.image),t.asyncOnLoad&&"function"==typeof t.asyncOnLoad&&t.asyncOnLoad(t.image),Ei(t))},r.onerror=function(e){console.error(e),t.nodeExe.attr.onerror&&"function"==typeof t.nodeExe.attr.onerror&&t.nodeExe.attr.onerror.call(t.nodeExe,e),t.asyncOnLoad&&"function"==typeof t.asyncOnLoad&&t.asyncOnLoad(t.image)},r):r}function Ei(t){t.imageObj&&(t.attr&&t.attr.clip?function(t){const e=t.ctx,{clip:r,width:n=0,height:i=0}=t.attr,{sx:o=0,sy:s=0,swidth:a=n,sheight:h=i}=r;e.clearRect(0,0,n,i),e.drawImage(t.imageObj,o,s,a,h,0,0,n,i)}(t):t.execute(),t.attr&&t.attr.filter&&function(t){const e=t.ctx,{width:r=0,height:n=0}=t.attr,i=e.getImageData(0,0,r,n);e.putImageData(t.attr.filter(i),0,0)}(t),Hn.vDomChanged(t.nodeExe.vDomIndex))}function Ti(t,e={}){const r=this;r.attr=Object.assign({},e.attr)||{},r.style=Object.assign({},e.style)||{};const n=r.attr.scale||1;r.rImageObj=new Ai((r.attr.width||1)*n,(r.attr.height||1)*n),r.ctx=r.rImageObj.context,r.domEl=r.rImageObj.canvas,r.imageArray=[],r.seekIndex=0,r.nodeName="Sprite",r.nodeExe=t;for(const t in r.attr)r.setAttr(t,r.attr[t]);Hn.vDomChanged(t.vDomIndex)}function Si(e,r={},n={}){const i=e?document.querySelector(e):null;let o=i?i.clientHeight:0,s=i?i.clientWidth:0;const a=document.createElement("canvas"),h=a.getContext("2d",r);let{enableEvents:c=!0,autoUpdate:l=!0,enableResize:u=!0}=n,f=function(t){const e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return e<1?1:e}(h);h.pixelRatio=f;let p,d=function(t){t.clearRect(0,0,s*f,o*f)};a.setAttribute("height",o*f),a.setAttribute("width",s*f),a.style.height=`${o}px`,a.style.width=`${s}px`,a.style.position="absolute";let y,g,m,v,w=999999;i?(i.appendChild(a),p=new x,l&&(w=Hn.addVdom(p))):c=!1;const b=new wi(h,{el:"g",attr:{id:"rootNode"}},Zn(),w);p&&p.rootNode(b);const A=b.execute.bind(b),B=b.executePdf.bind(b);b.container=i,b.domEl=a,b.height=o,b.width=s,b.type="CANVAS",b.ctx=h,b.setClear=function(t){d=t},b.setAttr=function(t,e){"viewBox"===t&&this.setViewBox.apply(this,e.split(",")),a.setAttribute(t,e),this.attr[t]=e},b.enableEvents=function(t){c=t},b.setStyle=function(t,e){this.domEl.style[t]=e},b.addDependentLayer=function(t){if(!(t instanceof wi))return;const e=t.attr.id?t.attr.id:"dep-"+Math.ceil(1e3*Math.random());t.setAttr("id",e),t.vDomIndex=this.vDomIndex+":"+e,this.prependChild([t])};const E=function(t){document.querySelector(e)?(o=y||t.height,s=g||t.width,b.width=s,b.height=o,T(b.domEl,s,o),m&&m(),b.execute()):fn(b)},T=function(t,e,r){t.setAttribute("height",r*f),t.setAttribute("width",e*f),t.style.height=`${r}px`,t.style.width=`${e}px`};if(b.setPixelRatio=function(t){f=t,this.ctx.pixelRatio=f,T(this.domEl,this.width,this.height)},b.onResize=function(t){m=t},b.onChange=function(t){v=t},b.exportPdf=function(e){const r=new t({size:[this.width,this.height]}),n=r.pipe(Yn());B(r),r.end(),n.on("finish",(function(){e(n.toBlobURL("application/pdf"))}))},b.toDataURL=function(t){return this.domEl.toDataURL(t)},b.invokeOnChange=function(){},b.setSize=function(t,e){y=e,g=t,s=t,o=e,this.width=s,this.height=o,T(this.domEl,s,o),this.execute()},b.setViewBox=function(t,e,r,n){},b.getPixels=function(t,e,r,n){return new ti(this.ctx.getImageData(t,e,r,n),r,n)},b.putPixels=function(t,e,r){if(t instanceof ti)return this.ctx.putImageData(t.imageData,e,r)},b.clear=function(){d()},b.setContext=function(t,e){this.ctx[t]&&"function"==typeof this.ctx[t]?this.ctx[t].apply(null,e):this.ctx[t]&&(this.ctx[t]=e)},b.createPattern=si,b.createClip=ii,b.createMask=ri,b.execute=function(){d(h),h.setTransform(f,0,0,f,0,0),this.updateBBox(),A(),v&&this.stateModified&&v(),this.stateModified=!1},b.update=function(){this.execute()},b.createTexture=function(t){return new Ti(this,t)},b.createAsyncTexture=function(t){return new Promise(((e,r)=>{const n=new Ti(this,t);n.onLoad((function(){e(n)}))}))},b.destroy=function(){const t=document.querySelector(e);t&&t.contains(a)&&t.removeChild(a),Hn.removeVdom(w),fn(b,E)},c){const t=new tr(b);a.addEventListener("mousemove",(e=>{e.preventDefault(),t.mousemoveCheck(e)})),a.addEventListener("mousedown",(e=>{t.mousedownCheck(e)})),a.addEventListener("mouseup",(e=>{t.mouseupCheck(e)})),a.addEventListener("mouseleave",(e=>{t.mouseleaveCheck(e)})),a.addEventListener("contextmenu",(e=>{t.contextmenuCheck(e)})),a.addEventListener("touchstart",(e=>{t.touchstartCheck(e)})),a.addEventListener("touchend",(e=>{t.touchendCheck(e)})),a.addEventListener("touchmove",(e=>{e.preventDefault(),t.touchmoveCheck(e)})),a.addEventListener("touchcancel",(e=>{t.touchcancelCheck(e)})),a.addEventListener("wheel",(e=>{t.wheelEventCheck(e)})),a.addEventListener("pointerdown",(e=>{t.addPointer(e),t.pointerdownCheck(e)})),a.addEventListener("pointerup",(e=>{t.removePointer(e),t.pointerupCheck(e)})),a.addEventListener("pointermove",(e=>{e.preventDefault(),t.pointermoveCheck(e)}))}return Hn.execute(),u&&b.container&&un(b,E),b}wi.prototype=new sn,wi.prototype.node=function(){return this.updateBBox(),this.dom},wi.prototype.stylesExe=function(){let t,e;const r=this.style;for(e in this.resolvedStyle={},r)"string"==typeof r[e]||"number"==typeof r[e]?t=r[e]:"object"==typeof r[e]?t=r[e]instanceof Kn||r[e]instanceof oi||r[e]instanceof ni||r[e]instanceof ei?r[e].exe(this.ctx,this.dom.BBox):r[e]:"function"==typeof r[e]?(r[e]=r[e].call(this,this.dataObj),t=r[e]):console.log("unkonwn Style"),"function"!=typeof this.ctx[e]?this.ctx[e]=t:"function"==typeof this.ctx[e]?this.ctx[e](t):console.log("junk comp"),this.resolvedStyle[e]=t},wi.prototype.stylesExePdf=function(t){if(t)for(const e in this.resolvedStyle)"function"!=typeof t[Xn[e]]?t[Xn[e]]=this.resolvedStyle[e]:"function"==typeof t[Xn[e]]?t[Xn[e]](this.resolvedStyle[e]):console.log("junk comp")},wi.prototype.remove=function(){const{children:t}=this.dom.parent,e=t.indexOf(this);-1!==e&&t.splice(e,1),this.dom.parent.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex)},wi.prototype.attributesExe=function(){this.dom.render(this.attr)},wi.prototype.attributesExePdf=function(t){this.dom.renderPdf(this.attr,t)},wi.prototype.setStyle=function(t,e){if(2===arguments.length)null==e&&null!=this.style[t]?delete this.style[t]:this.style[t]=bi(e);else if(1===arguments.length&&"object"==typeof t){const e=Object.keys(t);for(let r=0,n=e.length;r<n;r+=1)null==t[e[r]]&&null!=this.style[e[r]]?delete this.style[e[r]]:this.style[e[r]]=bi(t[e[r]])}return Hn.vDomChanged(this.vDomIndex),this},wi.prototype.setAttr=function(t,e){if(2===arguments.length)null==e&&null!=this.attr[t]?delete this.attr[t]:this.attr[t]=e,this.dom.setAttr(t,e);else if(1===arguments.length&&"object"==typeof t){const e=Object.keys(t);for(let r=0;r<e.length;r+=1)null==t[e[r]]&&null!=this.attr[e[r]]?delete this.attr[e[r]]:this.attr[e[r]]=t[e[r]],this.dom.setAttr(e[r],t[e[r]])}return this.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex),this},wi.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex),this},wi.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),t.length<1?null:(this.attr.transform.scale=[t[0],t[1]?t[1]:t[0]],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex),this)},wi.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex),this},wi.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skew||(this.attr.transform.skew=[]),this.attr.transform.skew[0]=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex),this},wi.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skew||(this.attr.transform.skew=[]),this.attr.transform.skew[1]=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex),this},wi.prototype.execute=function(){if("none"!==this.style.display){if(this.ctx.save(),this.stylesExe(),this.attributesExe(),this.dom instanceof vi)for(let t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();this.ctx.restore()}},wi.prototype.executePdf=function(t){if("none"!==this.style.display){if(t.save(),this.stylesExePdf(t),this.attributesExePdf(t),this.dom instanceof vi)for(let e=0,r=this.children.length;e<r;e+=1)this.children[e].executePdf(t);t.restore()}},wi.prototype.prependChild=function(t){const e=this,r=t;if(e.dom instanceof vi)for(let t=0;t<r.length;t+=1)r[t].dom.parent=e,e.children.unshift(r[t]);else console.error("Trying to insert child to nonGroup Element");return this.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex),e},wi.prototype.child=function(t){const e=this,r=t;if(e.dom instanceof vi)for(let t=0;t<r.length;t+=1)r[t].dom.parent=e,e.children[e.children.length]=r[t];else console.error("Trying to insert child to nonGroup Element");return this.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex),e},wi.prototype.updateBBox=function(){let t;if(this.bbox){for(let e=0,r=this.children.length;e<r;e+=1)this.children[e]&&(t=this.children[e].updateBBox()||t);if(this.BBoxUpdate||t)return this.dom.updateBBox(this.children),this.BBoxUpdate=!1,!0}return!1},wi.prototype.in=function(t){return this.dom.in(t)},wi.prototype.on=function(t,e){const r=this;if(this.events||(this.events={}),!e&&this.events[t])delete this.events[t];else if(e)if("function"==typeof e){const n=e.bind(r);this.events[t]=function(t){n(t)}}else"object"==typeof e&&(this.events[t]=e,e.constructor!==Vn.constructor&&e.constructor!==Wn.constructor||e.bindMethods(this));return this},wi.prototype.animatePathTo=qe.animatePathTo,wi.prototype.morphTo=qe.morphTo,wi.prototype.vDomIndex=null,wi.prototype.createRadialGradient=function(t){return new Kn(t,"radial")},wi.prototype.createLinearGradient=function(t){return new Kn(t,"linear")},wi.prototype.createEls=function(t,e){const r=new $n({type:"CANVAS",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(r.stack),Hn.vDomChanged(this.vDomIndex),r},wi.prototype.text=function(t){return this.dom instanceof ci&&this.dom.text(t),Hn.vDomChanged(this.vDomIndex),this},wi.prototype.createEl=function(t){const e=new wi(this.dom.ctx,t,Zn(),this.vDomIndex);return this.child([e]),Hn.vDomChanged(this.vDomIndex),e},wi.prototype.removeChild=function(t){let e=-1;if(this.children.forEach(((r,n)=>{r===t&&(e=n)})),-1!==e){const t=this.children.splice(e,1)[0];this.dom.removeChild(t.dom)}this.BBoxUpdate=!0,Hn.vDomChanged(this.vDomIndex)},wi.prototype.getBBox=function(){return{x:this.dom.BBox.x,y:this.dom.BBox.y,width:this.dom.BBox.width,height:this.dom.BBox.height}},wi.prototype.getPixels=function(){return new ti(this.ctx.getImageData(this.dom.BBox.x,this.dom.BBox.y,this.dom.BBox.width,this.dom.BBox.height),this.dom.BBox.width,this.dom.BBox.height)},wi.prototype.putPixels=function(t){if(t instanceof ti)return this.ctx.putImageData(t.imageData,this.dom.BBox.x,this.dom.BBox.y)},Ai.prototype.setAttr=function(t,e){"height"===t?this.canvas.setAttribute("height",e):"width"===t&&this.canvas.setAttribute("width",e)},Ti.prototype=new sn,Ti.prototype.constructor=Ti,Ti.prototype.setSize=function(t,e){const r=this.attr.scale||1;this.rImageObj.setAttr("width",t*r),this.rImageObj.setAttr("height",e*r),Ei(this)},Ti.prototype.setAttr=function(t,e){const r=this;if("src"===t)if(Array.isArray(e)){const t=e.map((function(t){return new Promise(((e,r)=>{const n=Bi(null,t);n.onload=function(){e(this)},n.onerror=function(t){r(t)}}))}));Promise.all(t).then((function(t){r.image=t,r.imageObj=t[r.seekIndex],r.attr&&r.attr.onload&&"function"==typeof r.attr.onload&&r.attr.onload.call(r,t),r.asyncOnLoad&&"function"==typeof r.asyncOnLoad&&r.asyncOnLoad(t),Ei(r)}))}else"string"==typeof e?(r.image||(r.image=Bi(r,e)),r.image.src!==e&&(r.image.src=e)):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement?(r.imageObj=e,r.attr.height=r.attr.height?r.attr.height:e.height,r.attr.width=r.attr.width?r.attr.width:e.width,Ei(r)):(e instanceof wi||e instanceof Ti)&&(r.imageObj=e.domEl,r.attr.height=r.attr.height?r.attr.height:e.attr.height,r.attr.width=r.attr.width?r.attr.width:e.attr.width,Ei(r));return this.attr[t]=e,"height"!==t&&"width"!==t||(this.rImageObj.setAttr(t,e),Ei(r)),"clip"!==t&&"filter"!==t||Ei(r),r},Ti.prototype.onLoad=function(t){this.asyncOnLoad=t},Ti.prototype.clone=function(){const t=Object.assign({},this.attr),e=Object.assign({},this.style);return t.src=this,new Ti(this.nodeExe,{attr:t,style:e})},Ti.prototype.execute=function(){const{width:t=0,height:e=0}=this.attr,r=this.attr.draw||{},n=this.attr.scale||1;this.ctx.clearRect(0,0,t*n,e*n),this.ctx.drawImage(this.imageObj,r.x||0,r.y||0,(r.width||t)*n,(r.height||e)*n)},Ti.prototype.exportAsDataUrl=function(t="image/png",e=1){return this.rImageObj?this.rImageObj.toDataURL(t,e):this},Ti.prototype.next=function(t){Array.isArray(this.image)&&(t<this.image.length&&t>=0?this.seekIndex=t:this.seekIndex<this.image.length-1&&this.seekIndex++,this.imageObj=this.image[this.seekIndex],Ei(this))};var _i={canvasLayer:Si,pdfLayer:function(t,e=0,r=0){}};function ki(t){let e;switch(t){case"point":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in float a_size;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      gl_PointSize = a_size;\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                        fragColor = v_color;\n                    }\n                    "};break;case"circle":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in float a_radius;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      gl_PointSize = a_radius; // * a_transform.z * u_transform.z;\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                      float r = 0.0, delta = 0.0, alpha = 1.0;\n                      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n                      r = dot(cxy, cxy);\n                      if(r > 1.0) {\n                        discard;\n                      }\n                      delta = 0.09;\n                      alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n                      fragColor = v_color * alpha;\n                    }\n                    "};break;case"image":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec2 a_texCoord;\n                    uniform mat3 u_transformMatrix;\n                    out vec2 v_texCoord;\n\n                    void main() {\n                      gl_Position = vec4(u_transformMatrix * vec3(a_position, 1), 1);\n                      v_texCoord = a_texCoord;\n                    }\n          ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    uniform sampler2D u_image;\n                    uniform float u_opacity;\n                    in vec2 v_texCoord;\n                    out vec4 fragColor;\n                    void main() {\n                      vec4 col = texture(u_image, v_texCoord);\n                      if (col.a == 0.0) {\n                        discard;\n                      } else {\n                        fragColor = col;\n                        fragColor.a *= u_opacity;\n                      }\n                    }\n                    "};break;case"polyline":case"polygon":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    uniform mat3 u_transformMatrix;\n\n                    void main() {\n                      gl_Position = vec4(u_transformMatrix * vec3(a_position, 1), 1);\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    uniform vec4 u_color;\n                    out vec4 fragColor;\n                    void main() {\n                        fragColor = u_color;\n                    }\n                    "};break;case"rect":default:e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                      fragColor = v_color;\n                    }\n                    "};break;case"line":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                        fragColor = v_color;\n                    }\n                    "}}return e}const Mi=j;let Ci;const Li=g,Di=Nn.zoom(),Pi=Nn.drag();let Ii=0;function zi(){return Ii+=1,Ii}function Ri(t){const e={translateX:0,translateY:0,scaleX:1,scaleY:1,angle:0};return t&&(t.translate&&t.translate.length>0&&(e.translateX=t.translate[0],e.translateY=t.translate[1]),t.scale&&t.scale.length>0&&(e.scaleX=t.scale[0],e.scaleY=t.scale[1]||e.scaleX),t.rotate&&t.rotate.length>0&&(e.angle=t.rotate[0])),e}function Oi(){const t=this,{transform:e,points:r=[]}=t.attr,{translateX:n,translateY:i,scaleX:o,scaleY:s}=Ri(e);if(r&&r.length>0){let e=r[0].x,a=r[0].x,h=r[0].y,c=r[0].y;for(let t=1;t<r.length;t+=1)e>r[t].x&&(e=r[t].x),a<r[t].x&&(a=r[t].x),h>r[t].y&&(h=r[t].y),c<r[t].y&&(c=r[t].y);t.BBox={x:n+e*o,y:i+h*s,width:(a-e)*o,height:(c-h)*s}}else t.BBox={x:0,y:0,width:0,height:0};e&&e.rotate?t.BBoxHit=Mi.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox}var ji=function(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],h=t[6],c=t[7],l=t[8],u=e[0],f=e[1],p=e[2],d=e[3],y=e[4],g=e[5],x=e[6],m=e[7],v=e[8];return[u*r+f*o+p*h,u*n+f*s+p*c,u*i+f*a+p*l,d*r+y*o+g*h,d*n+y*s+g*c,d*i+y*a+g*l,x*r+m*o+v*h,x*n+m*s+v*c,x*i+m*a+v*l]},Ni=function(t,e,r){return r&&r[6]===t&&r[7]===e?r:[1,0,0,0,1,0,t,e,1]},Fi=function(t){var e=Math.cos(t),r=Math.sin(t);return[e,-r,0,r,e,0,0,0,1]},Ui=function(t,e){return[t,0,0,0,e,0,0,0,1]},Yi=function(){return[1,0,0,0,1,0,0,0,1]},Xi=function(t,e){return[2/t,0,0,0,-2/e,0,-1,1,1]};function Gi(t){const e=this.attr.transform;let r=t||this.projectionMatrix;if(e&&e.translate&&(this.translationMatrix=Ni(e.translate[0],e.translate[1],this.translationMatrix),r=ji(r,this.translationMatrix)),e&&e.rotate){const t=Math.PI/180*e.rotate[0];this.rotationMatrix=Fi(t),this.rotationCentric=Ni(e.rotate[1]||0,e.rotate[2]||0,this.rotationCentric),r=ji(r,this.rotationMatrix)}e&&e.scale&&(this.scaleMatrix=Ui(e.scale[0],e.scale[1]),r=ji(r,this.scaleMatrix)),this.rotationCentric&&(r=ji(r,this.rotationCentric)),this.transformMatrix=r}const Hi=function(){cn.apply(this,arguments)};function qi(t,e,r){var n=t.createShader(r);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(n);return console.error("*** Error compiling shader '"+n+"':"+i),t.deleteShader(n),null}return n}function Vi(t,e){return function(t,e){var r=t.createProgram();if(e.forEach((function(e){t.attachShader(r,e)})),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var n=t.getProgramInfoLog(r);return console.error("Error in program linking:"+n),t.deleteProgram(r),null}return r}(t,[qi(t,e.vertexShader,t.VERTEX_SHADER),qi(t,e.fragmentShader,t.FRAGMENT_SHADER)])}function Wi(){this.BBox={x:0,y:0,width:0,height:0},this.BBoxHit={x:0,y:0,width:0,height:0}}function Zi(t,e,r){this.ctx=t,this.attr=e||{},this.style=r||{},this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null)}function $i(t,e,r){this.ctx=t,this.attr=e||{},this.style=r||{},this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null)}function Qi(t,e,r){const n=this;this.ctx=t,this.attr=e,this.style=r,this.pointsGeometry=[],this.transform=[0,0,1,1],this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),n.attr.d&&(qe.isTypePath(n.attr.d)?(n.path=n.attr.d,n.attr.d=n.attr.d.fetchPathString()):n.path=qe.instance(n.attr.d),this.points=new Float32Array(this.path.getPoints())),this.style.stroke&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255])),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null)}function Ji(t,e,r){this.ctx=t,this.attr=e||{},this.style=r||{},this.points=[],this.transform=[0,0,1,1];const n=[];if(this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),this.attr.points){const t=this.attr.points;for(let e=0,r=t.length;e<r;e++)n[2*e]=t[e].x,n[2*e+1]=t[e].y;this.points=new Float32Array(n)}this.style.stroke&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255])),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null)}function Ki(t,e,r){this.ctx=t,this.attr=e||{},this.style=r||{},this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null)}function to(t){return ie.exports(t.reduce((function(t,e){return t[t.length]=e.x,t[t.length]=e.y,t}),[])).map((function(e){return t[e]}))}function eo(t,e,r){this.ctx=t,this.attr=e,this.style=r,this.positionArray=[],this.transform=[0,0,1,1];const n=[];if(this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),this.attr.points){const t=to(this.attr.points);for(let e=0,r=t.length;e<r;e++)n[2*e]=t[e].x,n[2*e+1]=t[e].y;this.points=new Float32Array(n)}this.style.fill&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255])),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null)}function ro(t,e,r){this.ctx=t,this.attr=e,this.style=r,this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null)}(Hi.prototype=new cn).constructor=Hi,Hi.prototype.createNode=function(t,e,r){return new zo(t,e,zi(),r)},Wi.prototype.exec=function(t,e){"function"!=typeof t&&console.error("Wrong Exe type"),t.call(this,e)},Wi.prototype.setStyle=function(t,e){e?(this.style[t]=e,this.shader&&"fill"===t&&(void 0!==this.style.opacity&&(e.a*=this.style.opacity),this.shader.indexBased&&this.shader.updateColor(this.pindex,e)),this.shader&&"opacity"===t&&(void 0!==this.style.fill&&(this.style.fill.a*=this.style.opacity),this.shader.updateColor(this.pindex,this.style.fill))):this.style[t]&&delete this.style[t]},Wi.prototype.getAttr=function(t){return this.attr[t]},Wi.prototype.getStyle=function(t){return this.style[t]},Zi.prototype=new Wi,Zi.prototype.constructor=Zi,Zi.prototype.setShader=function(t){this.shader=t,this.shader&&(this.shader.addVertex(this.attr.x||0,this.attr.y||0,this.pindex),this.shader.addColors(this.style.fill||co,this.pindex),this.shader.addSize(this.attr.size||0,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},Zi.prototype.setAttr=function(t,e){this.attr[t]=e,"transform"===t&&this.exec(Gi,this.p_matrix),this.shader&&("x"===t||"y"===t?this.shader.updateVertex(this.pindex,this.attr.x,this.attr.y):"size"===t?this.shader.updateSize(this.pindex,this.attr.size||0):"transform"===t&&this.shader.updateTransform(this.pindex,this.transformMatrix))},Zi.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},Zi.prototype.in=function(t){const{x:e=0,y:r=0,size:n=0}=this.attr;return t.x>=e&&t.x<=e+n&&t.y>=r&&t.y<=r+n},Zi.prototype.updateBBox=function(){const t=this,{transform:e,x:r=0,y:n=0,size:i=0}=t.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Ri(e);t.BBox={x:o+r*a,y:s+n*h,width:i*a,height:i*h},e&&e.rotate?t.BBoxHit=Mi.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},$i.prototype=new Wi,$i.prototype.constructor=$i,$i.prototype.setShader=function(t){this.shader=t,this.shader&&(this.shader.addVertex(this.attr.x||0,this.attr.y||0,this.attr.width||0,this.attr.height||0,this.pindex),this.shader.addColors(this.style.fill||co,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},$i.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},$i.prototype.setAttr=function(t,e){this.attr[t]=e,"transform"===t&&this.exec(Gi,this.p_matrix),this.shader&&("x"===t||"width"===t||"y"===t||"height"===t?this.shader.updateVertex(this.pindex,this.attr.x||0,this.attr.y||0,this.attr.width||0,this.attr.height||0):"transform"===t&&this.shader.updateTransform(this.pindex,this.transformMatrix))},$i.prototype.in=function(t){const{x:e=0,y:r=0,width:n=0,height:i=0}=this.attr;return t.x>=e&&t.x<=e+n&&t.y>=r&&t.y<=r+i},$i.prototype.updateBBox=function(){const t=this,{transform:e,x:r=0,y:n=0,width:i=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Ri(e);t.BBox={x:s+r*h,y:a+n*c,width:i*h,height:o*c},e&&e.rotate?t.BBoxHit=Mi.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},Qi.prototype=new Wi,Qi.prototype.constructor=Qi,Qi.prototype.setShader=function(t){this.shader=t},Qi.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t)},Qi.prototype.setAttr=function(t,e){this.attr[t]=e,null!==e?"d"===t?(qe.isTypePath(e)?(this.path=e,this.attr.d=e.fetchPathString()):this.path=qe.instance(this.attr.d),this.points=new Float32Array(this.path.getPoints())):"transform"===t&&this.exec(Gi,this.p_matrix):delete this.attr[t]},Qi.prototype.updateBBox=function(){const t=this,{transform:e}=t.attr,{translateX:r,translateY:n,scaleX:i,scaleY:o}=Ri(e);t.BBox=t.path?t.path.BBox:{x:0,y:0,width:0,height:0},t.BBox.x=r+t.BBox.x*i,t.BBox.y=n+t.BBox.y*o,t.BBox.width*=i,t.BBox.height*=o,e&&e.rotate?t.BBoxHit=Mi.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},Ji.prototype=new Wi,Ji.prototype.constructor=Ji,Ji.prototype.setShader=function(t){this.shader=t},Ji.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t)},Ji.prototype.setAttr=function(t,e){if(this.attr[t]=e,"points"===t){const t=this.attr.points,e=[];for(let r=0,n=t.length;r<n;r++)e[2*r]=t[r].x,e[2*r+1]=t[r].y;this.points=new Float32Array(e)}else"transform"===t&&this.exec(Gi,this.p_matrix)},Ji.prototype.updateBBox=Oi,Ji.prototype.setStyle=function(t,e){this.style[t]=e,"stroke"===t&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255]))},Ki.prototype=new Wi,Ki.prototype.constructor=Ki,Ki.prototype.setShader=function(t){this.shader=t;const{x1:e=0,y1:r=0,x2:n=e,y2:i=r}=this.attr;this.shader&&(this.shader.addVertex(e,r,n,i,this.pindex),this.shader.addColors(this.style.stroke||co,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},Ki.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},Ki.prototype.setAttr=function(t,e){this.attr[t]=e,null!==e||null===this.attr[t]?("transform"===t&&this.exec(Gi,this.p_matrix),!this.shader||"x1"!==t&&"y1"!==t&&"x2"!==t&&"y2"!==t?this.shader&&"transform"===t&&this.shader.updateTransform(this.pindex,this.transformMatrix):this.shader.updateVertex(this.pindex,this.attr.x1,this.attr.y1,this.attr.x2,this.attr.y2)):delete this.attr[t]},Ki.prototype.updateBBox=function(){const t=this,{transform:e,x1:r=0,y1:n=0,x2:i=0,y2:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Ri(e);t.BBox={x:s+(r<i?r:i)*h,y:a+(n<o?n:o)*c,width:Math.abs(i-r)*h,height:Math.abs(o-n)*c},e&&e.rotate?t.BBoxHit=Mi.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},eo.prototype=new Wi,eo.prototype.constructor=eo,eo.prototype.setShader=function(t){this.shader=t},eo.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t)},eo.prototype.setAttr=function(t,e){if(this.attr[t]=e,null!==e)if("points"===t){const t=[],r=to(e);for(let e=0,n=r.length;e<n;e++)t[2*e]=r[e].x,t[2*e+1]=r[e].y;this.points=new Float32Array(t)}else"transform"===t&&this.exec(Gi,this.p_matrix);else delete this.attr[t]},eo.prototype.setStyle=function(t,e){this.style[t]=e,"fill"===t&&(this.color=new Float32Array([this.style.fill.r/255,this.style.fill.g/255,this.style.fill.b/255,void 0===this.style.fill.a?1:this.style.fill.a/255]))},eo.prototype.updateBBox=Oi,ro.prototype=new Wi,ro.prototype.constructor=ro,ro.prototype.setShader=function(t){this.shader=t,this.shader&&(this.shader.addVertex(this.attr.cx||0,this.attr.cy||0,this.pindex),this.shader.addColors(this.style.fill||co,this.pindex),this.shader.addSize(this.attr.r||0,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},ro.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},ro.prototype.setAttr=function(t,e){this.attr[t]=e,null!==e?("transform"===t&&this.exec(Gi,this.p_matrix),"cx"!==t&&"cy"!==t||!this.shader?"r"===t&&this.shader?this.shader.updateSize(this.pindex,this.attr.r||0):"transform"===t&&this.shader&&this.shader.updateTransform(this.pindex,this.transformMatrix):this.shader.updateVertex(this.pindex,this.attr.cx,this.attr.cy)):delete this.attr[t]},ro.prototype.in=function(t,e){const{r:r=0,cx:n=0,cy:i=0}=this.attr;return Math.sqrt((t.x-n)*(t.x-n)+(t.y-i)*(t.y-i))<=r},ro.prototype.updateBBox=function(){const t=this,{transform:e,r:r=0,cx:n=0,cy:i=0}=t.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Ri(e);t.BBox={x:o+(n-r)*a,y:s+(i-r)*h,width:2*r*a,height:2*r*h},e&&e.rotate?t.BBoxHit=Mi.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox};const no={};function io(t){return 0==(t&t-1)}function oo(t,e){const r=document.createElement("canvas"),n=r.getContext("2d");(e=e||{fill:"#fff"}).font||(e.font="10px Arial");const i=parseFloat(e.font,10)||12;n.font=e.font;const o=n.measureText(t).width,s=i;r.setAttribute("height",s*Ci),r.setAttribute("width",o*Ci),r.style.width=o,r.style.height=s,e.font=i*Ci+(isNaN(parseFloat(e.font,10))?e.font:e.font.substring(i.toString().length));for(const t in e)n[t]=e[t];return n.fillText(t,0,.75*s*Ci),{dom:r,ctx:n,width:o,height:s,ratio:Ci,style:e,str:t,updateText:function(){!function(t,e,r,n){t.clearRect(0,0,e*n,r*n)}(this.ctx,this.width,this.height,this.ratio);for(const t in this.style)this.ctx[t]=this.style[t];this.ctx.fillText(this.str,0,.75*this.height)}}}function so(t,e,r,n){const i=this;this.ctx=t,this.attr=e,this.style=r,this.vDomIndex=n,this.positionArray=new Float32Array(12),this.transform=[0,0,1,1],this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null),i.attr.text&&"string"==typeof i.attr.text&&(this.text=oo(i.attr.text,i.style),this.attr.width=this.text.width,this.attr.height=this.text.height),this.text&&(this.textureNode=new No(t,{src:this.text.dom},this.vDomIndex))}function ao(t,e,r,n){const i=this;if(this.ctx=t,this.attr=e,this.style=r,this.vDomIndex=n,this.positionArray=new Float32Array(12),this.transform=[0,0,1,1],this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null),i.attr.src&&"string"==typeof i.attr.src&&!no[i.attr.src]?(this.textureNode=new No(t,{src:this.attr.src},this.vDomIndex),no[i.attr.src]=this.textureNode):i.attr.src&&i.attr.src instanceof sn?this.textureNode=new No(t,{src:this.attr.src},this.vDomIndex):"string"==typeof i.attr.src&&no[i.attr.src]?this.textureNode=no[i.attr.src]:i.attr.src&&i.attr.src instanceof No&&(this.textureNode=i.attr.src),this.attr.x||this.attr.y||this.attr.width||this.attr.height){const t=this.attr.x||0,e=this.attr.y||0,r=t+(this.attr.width||0),n=e+(this.attr.height||0);this.positionArray[0]=this.positionArray[4]=this.positionArray[6]=t,this.positionArray[1]=this.positionArray[3]=this.positionArray[9]=e,this.positionArray[2]=this.positionArray[8]=this.positionArray[10]=r,this.positionArray[5]=this.positionArray[7]=this.positionArray[11]=n}}function ho(t,e,r,n,i){this.ctx=t,this.attr=e,this.style=r,this.renderTarget=n,this.vDomIndex=i,e.shaderType&&(this.shader=Io(t,e,r,e.shaderType,this.renderTarget,i)),this.projectionMatrix=Xi(this.ctx.canvas.width/Ci,this.ctx.canvas.height/Ci),this.transformMatrix=ji(this.projectionMatrix,Yi()),this.attr.transform&&this.exec(Gi,null)}so.prototype=new Wi,so.prototype.constructor=so,so.prototype.setShader=function(t){this.shader=t},so.prototype.setAttr=function(t,e){if(this.attr[t]=e,null!==e){if("text"===t&&"string"==typeof e&&(this.text?this.text=oo(this.attr.text,this.style):this.text=oo(e,this.style),this.attr.width=this.text.width,this.attr.height=this.text.height,this.textureNode?this.textureNode.setAttr("src",this.text.dom):this.textureNode=new No(this.ctx,{src:this.text.dom},this.vDomIndex)),"transform"===t)this.exec(Gi,this.p_matrix);else if("x"===t||"y"===t){const t=this.attr.x||0,e=this.attr.y||0,r=t+(this.attr.width||0),n=e+(this.attr.height||0);this.positionArray[0]=this.positionArray[4]=this.positionArray[6]=t,this.positionArray[1]=this.positionArray[3]=this.positionArray[9]=e,this.positionArray[2]=this.positionArray[8]=this.positionArray[10]=r,this.positionArray[5]=this.positionArray[7]=this.positionArray[11]=n}}else delete this.attr[t]},so.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t)},so.prototype.setStyle=function(t,e){if(this.style[t]=e,this.text)if(this.text.style[t]=e,"font"===t){const t=parseFloat(e,10)||12;this.text.ctx.font=e;const r=this.text.ctx.measureText(this.attr.text).width,n=t;this.text.style.font=t*Ci+(isNaN(parseFloat(e,10))?this.style.font:this.style.font.substring(t.toString().length)),this.text.updateText(),this.text.dom.setAttribute("height",n*Ci),this.text.dom.setAttribute("width",r*Ci),this.attr.width=r,this.attr.height=n,this.shader.updateVertexX(this.pindex,this.attr.x||0,this.attr.width||0),this.shader.updateVertexY(this.pindex,this.attr.y||0,this.attr.height||0)}else this.text.style[t]=e,this.text.updateText(),this.textureNode.setAttr("src",this.text.dom)},so.prototype.getAttr=function(t){return this.attr[t]},so.prototype.getStyle=function(t){return this.style[t]},so.prototype.in=function(t){const{width:e=0,height:r=0,x:n=0,y:i=0}=this.attr;return t.x>=n&&t.x<=n+e&&t.y>=i&&t.y<=i+r},so.prototype.updateBBox=function(){const t=this,{transform:e,x:r=0,y:n=0,width:i=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Ri(e);t.BBox={x:(s+r)*h,y:(a+n)*c,width:i*h,height:o*c},e&&e.rotate?t.BBoxHit=Mi.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},ao.prototype=new Wi,ao.prototype.constructor=ao,ao.prototype.setShader=function(t){this.shader=t},ao.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t)},ao.prototype.setAttr=function(t,e){if(this.attr[t]=e,null!==e)if("src"===t&&"string"==typeof e)e&&!no[e]?(this.textureNode=new No(this.ctx,{src:e},this.vDomIndex),no[e]=this.textureNode):e&&no[e]&&(this.textureNode=no[e]);else if("src"===t&&e instanceof sn)this.textureNode=new No(this.ctx,{src:e},this.vDomIndex);else if("src"===t&&e instanceof No)this.textureNode=e;else if("x"===t||"width"===t||"y"===t||"height"===t){const t=this.attr.x||0,e=this.attr.y||0,r=t+(this.attr.width||0),n=e+(this.attr.height||0);this.positionArray[0]=this.positionArray[4]=this.positionArray[6]=t,this.positionArray[1]=this.positionArray[3]=this.positionArray[9]=e,this.positionArray[2]=this.positionArray[8]=this.positionArray[10]=r,this.positionArray[5]=this.positionArray[7]=this.positionArray[11]=n}else"transform"===t&&this.exec(Gi,this.p_matrix);else delete this.attr[t]},ao.prototype.setStyle=function(t,e){e?this.style[t]=e:this.style[t]&&delete this.style[t]},ao.prototype.getAttr=function(t){return this.attr[t]},ao.prototype.getStyle=function(t){return this.style[t]},ao.prototype.in=function(t){const{width:e=0,height:r=0,x:n=0,y:i=0}=this.attr;return t.x>=n&&t.x<=n+e&&t.y>=i&&t.y<=i+r},ao.prototype.updateBBox=function(){const t=this,{transform:e,x:r=0,y:n=0,width:i=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Ri(e);t.BBox={x:(s+r)*h,y:(a+n)*c,width:i*h,height:o*c},e&&e.rotate?t.BBoxHit=Mi.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},ho.prototype=new Wi,ho.prototype.constructor=ho,ho.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec(Gi,t),this.transformMatrix=ji(this.transformMatrix,t)},ho.prototype.setAttr=function(t,e){this.attr[t]=e,"shaderType"===t&&(this.shader=Io(this.ctx,this.attr,this.style,e,this.renderTarget,this.vDomIndex)),"transform"===t&&this.exec(Gi,this.p_matrix)},ho.prototype.setShader=function(){},ho.prototype.in=function(t){const e=t.x,r=t.y,{BBox:n}=this,{transform:i}=this.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Ri(i);return e>=(n.x-o)/a&&e<=(n.x-o+n.width)/a&&r>=(n.y-s)/h&&r<=(n.y-s+n.height)/h},ho.prototype.updateBBox=function(t){const e=this;let r,n,i,o;const{transform:s}=e.attr,{translateX:a,translateY:h,scaleX:c,scaleY:l}=Ri(s);if(e.BBox={},t&&t.length>0){let e,s,a;for(let h=0;h<t.length;h+=1)e=t[h],e&&(s=e.dom.BBoxHit.x,a=e.dom.BBoxHit.y,r=void 0===r||r>s?s:r,i=void 0===i||i>a?a:i,n=void 0===n||n<s+e.dom.BBoxHit.width?s+e.dom.BBoxHit.width:n,o=void 0===o||o<a+e.dom.BBoxHit.height?a+e.dom.BBoxHit.height:o)}r=void 0===r?0:r,i=void 0===i?0:i,n=void 0===n?0:n,o=void 0===o?0:o,e.BBox.x=a+r*c,e.BBox.y=h+i*l,e.BBox.width=Math.abs(n-r)*c,e.BBox.height=Math.abs(o-i)*l,e.attr.transform&&e.attr.transform.rotate?e.BBoxHit=Mi.rotateBBox(this.BBox,this.attr.transform):e.BBoxHit=this.BBox};const co=Ke.rgba(0,0,0,255);function lo(t,e,r,n){let i=n.type;i||(i="FLOAT",n.value instanceof Float32Array?i="FLOAT":n.value instanceof Int8Array?i="BYTE":n.value instanceof Int16Array?i="SHORT":n.value instanceof Uint8Array?i="UNSIGNED_BYTE":n.value instanceof Uint16Array&&(i="UNSIGNED_SHORT"));const o=t.createBuffer();return{bufferType:t.ARRAY_BUFFER,buffer:o,drawType:t.STATIC_DRAW,valueType:t[i],size:n.size,attributeLocation:t.getAttribLocation(e,r),value:n.value,attr:r}}function uo(t,e,r,n){let i;const o=n.size?n.size:n.value.length;return n.matrix?Number.isInteger(Math.sqrt(n.value.length))?i="uniformMatrix"+Math.sqrt(n.value.length)+"fv":console.error("Not Square Matrix"):n.value instanceof No?i="uniform1i":n.value instanceof Float32Array?i="uniform"+o+"fv":n.value instanceof Int8Array||n.value instanceof Int16Array||n.value instanceof Uint8Array?i="uniform"+o+"iv":Number.isInteger(n.value)?Number.isInteger(n.value)&&(i="uniform1i"):i="uniform1f",{matrix:n.matrix,transpose:void 0!==n.transpose&&n.transpose,type:i,value:n.value,uniformLocation:t.getUniformLocation(e,r)}}function fo(t,e,r){this.ctx=t,this.dom={BBoxHit:{x:0,y:0,height:0,width:0}},this.shader=e,this.vDomIndex=r,this.program=Vi(t,e),this.uniforms={},this.attr={},this.attrObjs={},this.indexesObj=null,this.preDraw=e.preDraw,this.postDraw=e.postDraw,this.geometry=e.geometry,this.renderTarget=e.renderTarget,this.vao=t.createVertexArray();for(const r in e.uniforms)this.uniforms[r]=uo(t,this.program,r,e.uniforms[r]);this.geometry&&(this.geometry instanceof Yo||this.geometry instanceof Xo||this.geometry instanceof Go?(this.attributes=this.geometry.attributes,this.indexes=this.geometry.indexes):console.error("Wrong Geometry type"));for(const e in this.attributes)this.attrObjs[e]=lo(t,this.program,e,this.attributes[e]),this.applyAttributeToVao(e,this.attrObjs[e]);this.indexes&&(this.indexesObj=function(t,e,r){let n="FLOAT";return r.value instanceof Float32Array?n="FLOAT":r.value instanceof Int8Array?n="BYTE":r.value instanceof Int16Array?n="SHORT":r.value instanceof Uint8Array?n="UNSIGNED_BYTE":r.value instanceof Uint16Array&&(n="UNSIGNED_SHORT"),{bufferType:t.ELEMENT_ARRAY_BUFFER,buffer:t.createBuffer(),drawType:t.STATIC_DRAW,valueType:t[n],value:r.value,count:r.count,offset:r.offset}}(t,this.program,this.indexes))}function po(){}function yo(t,e,r,n){t.transform=t.transformTyped&&t.transformTyped.length>0?Array.from(t.transformTyped):t.transform,t.transformTyped=null;const i=e*r*9;let o=0;for(;o<r;)t.transform[i+9*o]=n[0],t.transform[i+9*o+1]=n[1],t.transform[i+9*o+2]=n[2],t.transform[i+9*o+3]=n[3],t.transform[i+9*o+4]=n[4],t.transform[i+9*o+5]=n[5],t.transform[i+9*o+6]=n[6],t.transform[i+9*o+7]=n[7],t.transform[i+9*o+8]=n[8],o++;t.addTransform_=!0,t.transformUpdate=!0}function go(t,e,r,n){const i=t.addTransform_?t.transform:t.transformTyped,o=e*r*9;let s=0;for(;s<r;)i[o+9*s]=n[0],i[o+9*s+1]=n[1],i[o+9*s+2]=n[2],i[o+9*s+3]=n[3],i[o+9*s+4]=n[4],i[o+9*s+5]=n[5],i[o+9*s+6]=n[6],i[o+9*s+7]=n[7],i[o+9*s+8]=n[8],s++;t.updateTransform_=!0}function xo(t,e,r){const n=t.addTransform_?t.transform:t.transformTyped,i=e*r*9;let o=0;for(;o<r;)n[i+9*o]=void 0,n[i+9*o+1]=void 0,n[i+9*o+2]=void 0,n[i+9*o+3]=void 0,n[i+9*o+4]=void 0,n[i+9*o+5]=void 0,n[i+9*o+6]=void 0,n[i+9*o+7]=void 0,n[i+9*o+8]=void 0,o++;t.clearTransform_=!0,t.filterTransformUpdate=!0}function mo(t){t.addTransform_&&(t.clearTransform_&&(t.transform=t.transform.filter((function(t){return!isNaN(t)})),t.clearTransform_=!1),t.transformTyped=new Float32Array(t.transform),t.transform=[],t.addTransform_=!1,t.updateTransform_=!1,t.shaderInstance.setAttributeData("a_transformMatrix",t.transformTyped)),t.clearTransform_&&(t.transformTyped=t.transformTyped.filter((function(t){return!isNaN(t)})),t.clearTransform_=!1,t.shaderInstance.setAttributeData("a_transformMatrix",t.transformTyped)),t.updateTransform_&&(t.shaderInstance.setAttributeData("a_transformMatrix",t.transformTyped),t.updateTransform_=!1)}function vo(t,e,r,n){t.positionArray=t.typedPositionArray&&t.typedPositionArray.length>0?Array.from(t.typedPositionArray):t.positionArray,t.typedPositionArray=null;const i=e*r*2;let o=0;for(;o<n.length;)t.positionArray[i+o]=n[o],o++;t.addVertex_=!0}function wo(t,e,r,n){const i=t.addVertex_?t.positionArray:t.typedPositionArray,o=e*r*2;let s=0;for(isNaN(i[o])&&console.log("overriding Nan");s<n.length;)i[o+s]=n[s],s++;t.updateVertex_=!0}function bo(t,e,r){const n=t.addVertex_?t.positionArray:t.typedPositionArray,i=e*r*2;let o=0;for(;o<r;)n[i+2*o]=void 0,n[i+2*o+1]=void 0,o++;t.filterVertex_=!0}function Ao(t){t.addVertex_&&(t.filterVertex_&&(t.positionArray=t.positionArray.filter((function(t){return!isNaN(t)})),t.filterVertex_=!1),t.typedPositionArray=new Float32Array(t.positionArray),t.positionArray=[],t.addVertex_=!1,t.updateVertex_=!1,t.shaderInstance.setAttributeData("a_position",t.typedPositionArray)),t.filterVertex_&&(t.typedPositionArray=t.typedPositionArray.filter((function(t){return!isNaN(t)})),t.filterVertex_=!1,t.shaderInstance.setAttributeData("a_position",t.typedPositionArray)),t.updateVertex_&&(t.shaderInstance.setAttributeData("a_position",t.typedPositionArray),t.updateVertex_=!1)}function Bo(t,e,r,n){t.colorArray=t.typedColorArray&&t.typedColorArray.length>0?Array.from(t.typedColorArray):t.colorArray,t.typedColorArray=null;const i=e*r*4;let o=0;for(n=Ke.colorToRGB(n);o<r;)t.colorArray[i+4*o]=n.r/255,t.colorArray[i+4*o+1]=n.g/255,t.colorArray[i+4*o+2]=n.b/255,t.colorArray[i+4*o+3]=void 0===n.a?1:n.a/255,o++;t.addColor_=!0}function Eo(t,e,r,n){const i=t.addColor_?t.colorArray:t.typedColorArray;isNaN(i[e*r*4])&&console.log("overriding Nan");const o=e*r*4;let s=0;for(;s<r;)i[o+4*s]=n.r/255,i[o+4*s+1]=n.g/255,i[o+4*s+2]=n.b/255,i[o+4*s+3]=void 0===n.a?1:n.a/255,s++;t.updateColor_=!0}function To(t,e,r){const n=t.addColor_?t.colorArray:t.typedColorArray;isNaN(n[e*r*4])&&console.log("overriding Nan");const i=e*r*4;let o=0;for(;o<r;)n[i+4*o]=void 0,n[i+4*o+1]=void 0,n[i+4*o+2]=void 0,n[i+4*o+3]=void 0,o++;t.filterColor_=!0}function So(t){t.addColor_&&(t.filterColor_&&(t.colorArray=t.colorArray.filter((function(t){return!isNaN(t)})),t.filterColor_=!1),t.typedColorArray=new Float32Array(t.colorArray),t.colorArray=[],t.addColor_=!1,t.updateColor_=!1,t.shaderInstance.setAttributeData("a_color",t.typedColorArray)),t.filterColor_&&(t.typedColorArray=t.typedColorArray.filter((function(t){return!isNaN(t)})),t.shaderInstance.setAttributeData("a_color",t.typedColorArray),t.filterColor_=!1),t.updateColor_&&(t.shaderInstance.setAttributeData("a_color",t.typedColorArray),t.updateColor_=!1)}function _o(t,e,r,n){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=n,this.indexBased=!0,this.transform=[],this.selftransform=[0,0,1,1],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Xo,this.geometry.setAttr("a_color",{value:new Float32Array([]),size:4}),this.geometry.setAttr("a_size",{value:new Float32Array([]),size:1}),this.geometry.setAttr("a_position",{value:new Float32Array([]),size:2}),this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.shaderInstance=new fo(t,{fragmentShader:ki("point").fragmentShader,vertexShader:ki("point").vertexShader,uniforms:{},geometry:this.geometry},n),this.positionArray=[],this.colorArray=[],this.pointsSize=[],this.transform=[],this.vertexUpdate=!0,this.colorUpdate=!0,this.sizeUpdate=!0,this.transformUpdate=!0}function ko(t,e,r,n,i){this.ctx=t,this.dom={},this.positionArray=[],this.colorArray=[],this.transform=[],this.rotate=[],this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.renderTarget=n,this.indexBased=!0,this.selftransform=[0,0,1,1],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Yo,this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.geometry.setAttr("a_color",{value:new Float32Array(this.colorArray),size:4}),this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setDrawRange(0,this.positionArray.length/2),this.shaderInstance=new fo(t,{fragmentShader:ki("rect").fragmentShader,vertexShader:ki("rect").vertexShader,uniforms:{},geometry:this.geometry},i)}function Mo(t,e,r,n,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.positionArray=[],this.colorArray=[],this.transform=[],this.vertexUpdate=!0,this.colorUpdate=!0,this.renderTarget=n,this.indexBased=!0,this.selftransform=new Float32Array([0,0,1,1]),this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Go,this.geometry.setAttr("a_color",{value:new Float32Array(this.colorArray),size:4}),this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.geometry.setDrawRange(0,this.positionArray.length/2),this.shaderInstance=new fo(t,{fragmentShader:ki("line").fragmentShader,vertexShader:ki("line").vertexShader,uniforms:{},geometry:this.geometry},i)}function Co(t,e,r,n,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.positionArray=[],this.colorArray=[],this.renderTarget=n,this.indexBased=!1,this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]});const{translateX:o,translateY:s,scaleX:a,scaleY:h}=Ri(this.attr.transform);this.transform=new Float32Array([o,s,a,h]),this.geometry=new Go,this.geometry.drawType="LINE_STRIP",this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setDrawRange(0,this.positionArray.length/2),this.shaderInstance=new fo(t,{fragmentShader:ki("polyline").fragmentShader,vertexShader:ki("polyline").vertexShader,uniforms:{u_transformMatrix:{value:new Float32Array(Yi()),matrix:!0},u_color:{value:new Float32Array(4)}},geometry:this.geometry},i)}function Lo(t,e,r,n,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.colorArray=[],this.positionArray=[],this.renderTarget=n,this.indexBased=!1,this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]});const{translateX:o,translateY:s,scaleX:a,scaleY:h}=Ri(this.attr.transform);this.transform=new Float32Array([o,s,a,h]),this.geometry=new Yo,this.geometry.setAttr("a_position",{value:new Float32Array([]),size:2}),this.shaderInstance=new fo(t,{fragmentShader:ki("polygon").fragmentShader,vertexShader:ki("polygon").vertexShader,uniforms:{u_transformMatrix:{value:new Float32Array(Yi()),matrix:!0},u_color:{value:new Float32Array(4)}},geometry:this.geometry},i)}function Do(t,e,r,n,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.positionArray=[],this.colorArray=[],this.transform=[],this.pointsSize=[],this.renderTarget=n,this.indexBased=!0,this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Xo,this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.geometry.setAttr("a_color",{value:new Float32Array(this.colorArray),size:4}),this.geometry.setAttr("a_radius",{value:new Float32Array(this.pointsSize),size:1}),this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setDrawRange(0,0),this.shaderInstance=new fo(t,{fragmentShader:ki("circle").fragmentShader,vertexShader:ki("circle").vertexShader,uniforms:{},geometry:this.geometry},i)}function Po(t,e,r,n,i){this.ctx=t,this.dom={},this.attr=e||{},this.style=r||{},this.vDomIndex=i,this.textCoor=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),this.renderTarget=n,this.indexBased=!1,this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Yo,this.geometry.setAttr("a_texCoord",{value:this.textCoor,size:2}),this.geometry.setAttr("a_position",{value:new Float32Array([0,0]),size:2}),this.geometry.setDrawRange(0,6),this.shaderInstance=new fo(t,{fragmentShader:ki("image").fragmentShader,vertexShader:ki("image").vertexShader,uniforms:{u_transformMatrix:{value:new Float32Array(Yi()),matrix:!0},u_image:{value:new No(this.ctx,{},this.vDomIndex)},u_opacity:{value:1..toFixed(2)}},geometry:this.geometry},i),this.positionArray=[],this.vertexUpdate=!0}function Io(t,e,r,n,i,o){let s;switch(n){case"rect":s=new ko(t,e,r,i,o);break;case"point":s=new _o(t,e,r,i);break;case"line":s=new Mo(t,e,r,i,o);break;case"polyline":case"path":s=new Co(t,e,r,i,o);break;case"polygon":s=new Lo(t,e,r,i,o);break;case"circle":s=new Do(t,e,r,i,o);break;case"image":case"text":s=new Po(t,e,r,i,o);break;default:s=null}return s}function zo(t,e,r,n){switch(this.ctx=t,this.style=e.style||{},this.attr=e.attr||{},this.id=r,this.nodeName=e.el,this.nodeType="WEBGL",this.children=[],this.ctx=t,this.vDomIndex=n,this.el=e.el,this.shaderType=e.shaderType,this.exeCtx=e.ctx,this.bbox=void 0===e.bbox||e.bbox,this.events={},e.el){case"point":this.dom=new Zi(this.ctx,this.attr,this.style);break;case"rect":this.dom=new $i(this.ctx,this.attr,this.style);break;case"line":this.dom=new Ki(this.ctx,this.attr,this.style);break;case"polyline":this.dom=new Ji(this.ctx,this.attr,this.style);break;case"polygon":this.dom=new eo(this.ctx,this.attr,this.style);break;case"path":this.dom=new Qi(this.ctx,this.attr,this.style);break;case"circle":this.dom=new ro(this.ctx,this.attr,this.style);break;case"image":this.dom=new ao(this.ctx,this.attr,this.style,n);break;case"text":this.dom=new so(this.ctx,this.attr,this.style,n);break;case"group":this.dom=new ho(this.ctx,this.attr,this.style,e.renderTarget,n);break;default:this.dom=null}this.dom.nodeExe=this,this.dom instanceof ho||(delete this.createEl,delete this.createEls)}function Ro(t,e={},r={}){const n=t?document.querySelector(t):null;let i=n?n.clientHeight:0,o=n?n.clientWidth:0,s=Ke.rgba(0,0,0,0);const{enableEvents:a=!1,autoUpdate:h=!0,enableResize:c=!1}=r;(e=e||{premultipliedAlpha:!1,depth:!1,antialias:!1,alpha:!0}).premultipliedAlpha=void 0!==e.premultipliedAlpha&&e.premultipliedAlpha,e.depth=void 0!==e.depth&&e.depth,e.antialias=void 0!==e.antialias&&e.antialias,e.alpha=void 0===e.alpha||e.alpha;const l=document.createElement("canvas"),u=l.getContext("webgl2",e),f=function(t){const e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return e<1?1:e}(u);let p;Ci=f>=2?2:Math.floor(f),l.setAttribute("height",i*Ci),l.setAttribute("width",o*Ci),l.style.height=`${i}px`,l.style.width=`${o}px`,l.style.position="absolute";let d,y,g=999999;n&&(n.appendChild(l),p=new x,h&&(g=Li.addVdom(p)));const m=new zo(u,{el:"group",attr:{id:"rootNode"},ctx:function(t){t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor(s.r,s.g,s.b,s.a)}},zi(),g);p&&p.rootNode(m);const v=m.execute.bind(m);m.container=n,m.domEl=l,m.height=i,m.width=o,m.type="WEBGL",m.ctx.pixelRatio=Ci;let w=function(t){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)};m.execute=function(){w(this.ctx),this.updateBBox(),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),v()},m.update=function(){this.execute()},m.destroy=function(){const e=document.querySelector(t);e&&e.contains(l)&&e.removeChild(l),Li.removeVdom(g)},m.getPixels=function(t,e,r,n){const i=new Uint8Array(r*n*4);return this.ctx.readPixels(t,e,r,n,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,i),i},m.putPixels=function(t,e,r){return this.ctx.putImageData(t,e,r)},m.clear=function(){w(this.ctx)},m.setClearColor=function(t){s=t},m.setClear=function(t){w=t};const b=function(e){document.querySelector(t)?(i=e.height,o=e.width,m.width=o,m.height=i,A(m.domEl,o,i),w(m.ctx),d&&d(),m.execute(),l.style.height=`${i}px`,l.style.width=`${o}px`):fn(m)},A=function(t,e,r){t.width=Math.floor(e*Ci),t.height=Math.floor(r*Ci),t.style.height=r+"px",t.style.width=e+"px"};if(m.onResize=function(t){d=t},m.onChange=function(t){y=t},m.invokeOnChange=function(){y&&y()},m.setPixelRatio=function(t){Ci=t,this.ctx.pixelRatio=Ci,A(this.domEl,this.width,this.height)},m.setSize=function(t,e){this.width=t,this.height=e,i=e,o=t,A(this.domEl,this.width,this.height),this.execute()},m.setViewBox=function(t,e,r,n){},m.setStyle=function(t,e){this.domEl.style[t]=e},m.setAttr=function(t,e){"viewBox"===t&&this.setViewBox.apply(this,e.split(",")),l.setAttribute(t,e)},m.setContext=function(t,e){this.ctx[t]&&"function"==typeof this.ctx[t]?this.ctx[t].apply(null,e):this.ctx[t]&&(this.ctx[t]=e)},m.MeshGeometry=function(){return new Yo(this.ctx)},m.PointsGeometry=function(){return new Xo(this.ctx)},m.LineGeometry=function(){return new Go(this.ctx)},m.createWebglTexture=function(t){return new No(this.ctx,t,this.vDomIndex)},m.RenderTarget=function(t){return new Fo(this.ctx,t,this.vDomIndex)},a){const t=new tr(m);l.addEventListener("mousemove",(e=>{e.preventDefault(),t.mousemoveCheck(e)})),l.addEventListener("mousedown",(e=>{t.mousedownCheck(e)})),l.addEventListener("mouseup",(e=>{t.mouseupCheck(e)})),l.addEventListener("mouseleave",(e=>{t.mouseleaveCheck(e)})),l.addEventListener("contextmenu",(e=>{t.contextmenuCheck(e)})),l.addEventListener("touchstart",(e=>{t.touchstartCheck(e)})),l.addEventListener("touchend",(e=>{t.touchendCheck(e)})),l.addEventListener("touchmove",(e=>{e.preventDefault(),t.touchmoveCheck(e)})),l.addEventListener("touchcancel",(e=>{t.touchcancelCheck(e)})),l.addEventListener("wheel",(e=>{t.wheelEventCheck(e)})),l.addEventListener("pointerdown",(e=>{t.addPointer(e),t.pointerdownCheck(e)})),l.addEventListener("pointerup",(e=>{t.removePointer(e),t.pointerupCheck(e)})),l.addEventListener("pointermove",(e=>{e.preventDefault(),t.pointermoveCheck(e)}))}return Li.execute(),c&&m.container&&un(m,b),m}function Oo(t){const e=new Image;return e.crossOrigin="anonymous",e.onload=function(){t.update(),t.updated=!0,Li.vDomChanged(t.vDomIndex)},e.onerror=function(t){},e}function jo(t,e){return new Uint8Array(new ArrayBuffer(t*e*4))}function No(t,e,r){const n=this,i=t.getParameter(t.MAX_TEXTURE_SIZE);this.ctx=t,this.texture=t.createTexture(),this.type="TEXTURE_2D",this.width=e.width>i?i:e.width,this.height=e.height>i?i:e.height,this.border=e.border?e.border:0,this.format=e.format?e.format:"RGBA",this.type=e.type?e.type:"UNSIGNED_BYTE",this.warpS=e.warpS?e.warpS:"CLAMP_TO_EDGE",this.warpT=e.warpT?e.warpT:"CLAMP_TO_EDGE",this.magFilter=e.magFilter?e.magFilter:"LINEAR",this.minFilter=e.minFilter?e.minFilter:"LINEAR",this.mipMap=e.mipMap,this.updated=!1,this.image=null,this.vDomIndex=r,"string"==typeof e.src?(n.image=Oo(n),n.image.src=e.src):e.src instanceof HTMLImageElement||e.src instanceof SVGImageElement||e.src instanceof HTMLCanvasElement||e.src instanceof Uint8Array?(n.image=e.src,n.update(),n.updated=!0):e.src instanceof sn?(n.image=e.src.domEl,n.update(),n.updated=!0):(this.width&&this.height&&(n.image=jo(this.width,this.height),n.update()),n.updated=!0),Li.vDomChanged(n.vDomIndex)}function Fo(t,e){this.ctx=t,this.fbo=t.createFramebuffer(),this.texture=e.texture,this.texture.updated||this.texture.update()}function Uo(){}function Yo(t){this.attributes={},this.drawType="TRIANGLES",this.indexes=null,this.drawRange=[0,0]}function Xo(t){this.attributes={},this.drawType="POINTS",this.indexes=null,this.drawRange=[0,0]}function Go(t){this.attributes={},this.drawType="LINES",this.indexes=null,this.drawRange=[0,0]}fo.prototype=new po,fo.prototype.constructor=fo,fo.prototype.applyAttributeToVao=function(t,e){this.ctx.bindVertexArray(this.vao),"a_transformMatrix"===t?(this.ctx.enableVertexAttribArray(e.attributeLocation+0),this.ctx.enableVertexAttribArray(e.attributeLocation+1),this.ctx.enableVertexAttribArray(e.attributeLocation+2),this.ctx.bindBuffer(e.bufferType,e.buffer),this.ctx.bufferData(e.bufferType,e.value,e.drawType),this.ctx.vertexAttribPointer(e.attributeLocation+0,e.size,e.valueType,!1,4*e.size*3,0),this.ctx.vertexAttribPointer(e.attributeLocation+1,e.size,e.valueType,!1,4*e.size*3,12),this.ctx.vertexAttribPointer(e.attributeLocation+2,e.size,e.valueType,!1,4*e.size*3,24)):(this.ctx.enableVertexAttribArray(e.attributeLocation),this.ctx.bindBuffer(e.bufferType,e.buffer),this.ctx.bufferData(e.bufferType,e.value,e.drawType),this.ctx.vertexAttribPointer(e.attributeLocation,e.size,e.valueType,!1,0,0))},fo.prototype.useProgram=function(){this.ctx.useProgram(this.program)},fo.prototype.applyUniforms=function(){for(const t in this.uniforms)this.uniforms[t].matrix?this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].transpose,this.uniforms[t].value):this.uniforms[t].value instanceof No?(this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].value.texture),this.uniforms[t].value.loadTexture()):this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].value)},fo.prototype.applyIndexes=function(){const t=this.indexesObj;this.ctx.bindBuffer(t.bufferType,t.buffer),this.ctx.bufferData(t.bufferType,t.value,t.drawType)},fo.prototype.draw=function(){this.ctx.drawArrays(this.ctx[this.geometry.drawType],this.geometry.drawRange[0],this.geometry.drawRange[1])},fo.prototype.drawElements=function(){this.ctx.drawElements(this.ctx[this.geometry.drawType],this.indexesObj.count,this.indexesObj.type?this.indexesObj.type:this.ctx.UNSIGNED_SHORT,this.indexesObj.offset)},fo.prototype.updateBBox=function(t){return!0},fo.prototype.execute=function(){this.ctx.useProgram(this.program),this.applyUniforms(),this.ctx.bindVertexArray(this.vao),this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.update(),this.indexesObj?(this.applyIndexes(),this.drawElements()):this.draw(),this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.clear()},fo.prototype.addUniform=function(t,e){this.uniforms[t]=uo(this.ctx,this.program,t,e),Li.vDomChanged(this.vDomIndex)},fo.prototype.addAttribute=function(t,e){this.attributes[t]=e,this.attrObjs[t]=lo(this.ctx,this.program,t,e),this.applyAttributeToVao(t,this.attrObjs[t]),Li.vDomChanged(this.vDomIndex)},fo.prototype.setAttributeData=function(t,e){const r=this.attrObjs[t];this.attributes[t].value=e,this.attrObjs[t].value=e,this.ctx.bindBuffer(r.bufferType,r.buffer),this.ctx.bufferData(r.bufferType,r.value,r.drawType),Li.vDomChanged(this.vDomIndex)},fo.prototype.applyAttributeData=function(t,e){this.attributes[t].value=e,this.attrObjs[t].value=e;const r=this.attrObjs[t];this.ctx.bindBuffer(r.bufferType,r.buffer),this.ctx.bufferData(r.bufferType,this.attributes[r.attr].value,r.drawType),this.ctx.enableVertexAttribArray(r.attributeLocation),this.ctx.vertexAttribPointer(r.attributeLocation,r.size,r.valueType,!1,0,0)},fo.prototype.setUniformData=function(t,e){this.uniforms[t].value=e,Li.vDomChanged(this.vDomIndex)},fo.prototype.applyUniformData=function(t,e){this.uniforms[t].value=e,this.uniforms[t].matrix?this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].transpose,this.uniforms[t].value):this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].value)},po.prototype.setAttr=function(t,e){if(this.attr[t]=e,"transform"===t){const{translateX:t,translateY:e,scaleX:r,scaleY:n}=Ri(this.attr.transform);this.selftransform=new Float32Array([t,e,r,n])}},po.prototype.translate=function(t){this.attr.transform.translate=t},po.prototype.scale=function(t){this.attr.transform.scale=t},po.prototype.rotate=function(t){this.attr.transform.rotate=t},_o.prototype=new po,_o.prototype.constructor=_o,_o.prototype.clear=function(t){To(this,t,1),bo(this,t,1),xo(this,t,1);(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=void 0,this.filterSizeFlag=!0},_o.prototype.addTransform=function(t,e){yo(this,e,1,t)},_o.prototype.updateTransform=function(t,e){go(this,t,1,e)},_o.prototype.updateVertex=function(t,e,r){wo(this,t,1,[e,r])},_o.prototype.updateSize=function(t,e){(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=e},_o.prototype.updateColor=function(t,e){Eo(this,t,1,e)},_o.prototype.addVertex=function(t,e,r){vo(this,r,1,[t,e])},_o.prototype.addSize=function(t,e){this.pointsSize=this.typedSizeArray&&this.typedSizeArray.length>0?Array.from(this.typedSizeArray):this.pointsSize,this.pointsSize[e]=t,this.sizeUpdate=!0},_o.prototype.addColors=function(t,e){Bo(this,e,1,t)},_o.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.update(),Ao(this),So(this),mo(this),this.sizeUpdate&&(this.filterSizeFlag&&(this.pointsSize=this.pointsSize.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.typedSizeArray=new Float32Array(this.pointsSize),this.pointsSize=[],this.sizeUpdate=!1),this.filterSizeFlag&&(this.typedSizeArray=this.typedSizeArray.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.shaderInstance.setAttributeData("a_size",this.typedSizeArray),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.update()},ko.prototype=new po,ko.prototype.constructor=ko,ko.prototype.clear=function(t){To(this,t,6),bo(this,t,6),xo(this,t,6)},ko.prototype.updateVertex=function(t,e,r,n,i){const o=e+n,s=r+i;wo(this,t,6,[e,r,o,r,e,s,e,s,o,r,o,s])},ko.prototype.updateTransform=function(t,e){go(this,t,6,e)},ko.prototype.addTransform=function(t,e){yo(this,e,6,t)},ko.prototype.updateColor=function(t,e){Eo(this,t,6,e)},ko.prototype.addVertex=function(t,e,r,n,i){const o=t+r,s=e+n;vo(this,i,6,[t,e,o,e,t,s,t,s,o,e,o,s])},ko.prototype.addColors=function(t,e){Bo(this,e,6,t)},ko.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.update(),So(this),mo(this),Ao(this),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.clear()},Mo.prototype=new po,Mo.prototype.constructor=Mo,Mo.prototype.clear=function(t){To(this,t,2),bo(this,t,2)},Mo.prototype.updateTransform=function(t,e){go(this,t,2,e)},Mo.prototype.addTransform=function(t,e){yo(this,e,2,t)},Mo.prototype.updateVertex=function(t,e,r,n,i){wo(this,t,2,[e,r,n,i])},Mo.prototype.updateColor=function(t,e){Eo(this,t,2,e)},Mo.prototype.addVertex=function(t,e,r,n,i){vo(this,i,2,[t,e,r,n])},Mo.prototype.addColors=function(t,e){Bo(this,e,2,t)},Mo.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.update(),Ao(this),So(this),mo(this),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.clear()},Co.prototype=new po,Co.prototype.constructor=Co,Co.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.update();for(let e=0,r=t.length;e<r;e++)this.shaderInstance.setUniformData("u_transformMatrix",t[e].dom.transformMatrix),this.shaderInstance.setAttributeData("a_position",t[e].dom.points),this.shaderInstance.setUniformData("u_color",t[e].dom.color),this.geometry.setDrawRange(0,t[e].dom.points.length/2),this.shaderInstance.execute();this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.clear()},Lo.prototype=new po,Lo.prototype.constructor=Lo,Lo.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.update(),this.shaderInstance.useProgram();for(let e=0,r=t.length;e<r;e++)this.shaderInstance.setUniformData("u_transformMatrix",t[e].dom.transformMatrix),this.shaderInstance.setAttributeData("a_position",t[e].dom.points),this.shaderInstance.setUniformData("u_color",t[e].dom.color),this.geometry.setDrawRange(0,t[e].dom.points.length/2),this.shaderInstance.execute();this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.clear()},Do.prototype=new po,Do.prototype.constructor=Do,Do.prototype.clear=function(t){To(this,t,1),bo(this,t,1),xo(this,t,1);(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=void 0,this.filterSizeFlag=!0},Do.prototype.updateTransform=function(t,e){go(this,t,1,e)},Do.prototype.addTransform=function(t,e){yo(this,e,1,t)},Do.prototype.updateVertex=function(t,e,r){wo(this,t,1,[e,r])},Do.prototype.updateColor=function(t,e){Eo(this,t,1,e)},Do.prototype.updateSize=function(t,e){(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=e},Do.prototype.addVertex=function(t,e,r){vo(this,r,1,[t,e])},Do.prototype.addSize=function(t,e){this.pointsSize=this.typedSizeArray&&this.typedSizeArray.length>0?Array.from(this.typedSizeArray):this.pointsSize,this.pointsSize[e]=t,this.sizeUpdate=!0},Do.prototype.addColors=function(t,e){Bo(this,e,1,t)},Do.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.update(),Ao(this),So(this),mo(this),this.sizeUpdate&&(this.filterSizeFlag&&(this.pointsSize=this.pointsSize.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.typedSizeArray=new Float32Array(this.pointsSize),this.pointsSize=[],this.sizeUpdate=!1),this.filterSizeFlag&&(this.typedSizeArray=this.typedSizeArray.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.shaderInstance.setAttributeData("a_radius",this.typedSizeArray),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.clear()},Po.prototype=new po,Po.prototype.constructor=Po,Po.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.update(),this.shaderInstance.useProgram(),this.shaderInstance.applyAttributeData("a_texCoord",this.textCoor);const e=void 0!==this.style.opacity?this.style.opacity:1;let r;for(let n=0,i=t.length;n<i;n++){const i=t[n];i.dom.textureNode&&i.dom.textureNode.updated&&("none"!==i.style.display&&(this.shaderInstance.applyUniformData("u_transformMatrix",i.dom.transformMatrix),i.dom.textureNode!==r&&(i.dom.textureNode.loadTexture(),r=i.dom.textureNode,this.shaderInstance.applyUniformData("u_image",i.dom.textureNode)),this.shaderInstance.applyAttributeData("a_position",i.dom.positionArray),this.shaderInstance.applyUniformData("u_opacity",((void 0!==i.style.opacity?i.style.opacity:1)*e).toFixed(2)),this.shaderInstance.draw()))}this.renderTarget&&this.renderTarget instanceof Fo&&this.renderTarget.clear()},zo.prototype=new sn,zo.prototype.reIndexChildren=function(t){const e=t||this;let r=e.children;r=r.filter((function(t){return t}));for(var n=0,i=r.length;n<i;n++)r[n].dom.pindex=n;e.children=r},zo.prototype.applyTransformationMatrix=function(t){this.dom.applyTransformationMatrix(t),this.children.forEach((function(t){t.applyTransformationMatrix(self.dom.transformMatrix)}))},zo.prototype.setAttr=function(t,e){const r=this;if(2===arguments.length)null===e&&null!==this.attr[t]?delete this.attr[t]:this.attr[t]=e,this.dom.setAttr(t,e),"transform"===t&&this.children.length>0&&this.children.forEach((function(t){t.applyTransformationMatrix(r.dom.transformMatrix)}));else if(1===arguments.length&&"object"==typeof t)for(const e in t)null===t[e]&&null!==this.attr[t]?delete this.attr[e]:this.attr[e]=t[e],this.dom.setAttr(e,t[e]),"transform"===t&&this.children.length>0&&this.children.forEach((function(t){t.applyTransformationMatrix(r.dom.transformMatrix)}));return this.BBoxUpdate=!0,Li.vDomChanged(this.vDomIndex),this},zo.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),t.length<1?null:(this.attr.transform.scale=[t[0],t[1]?t[1]:t[0]],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Li.vDomChanged(this.vDomIndex),this)},zo.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Li.vDomChanged(this.vDomIndex),this},zo.prototype.rotate=function(t,e,r){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,r||0],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Li.vDomChanged(this.vDomIndex),this},zo.prototype.setStyle=function(t,e){if(2===arguments.length)null===e&&null!=this.style[t]?delete this.style[t]:("fill"!==t&&"stroke"!==t||(e=Ke.colorToRGB(e)),this.style[t]=e),this.dom.setStyle(t,e);else if(1===arguments.length&&"object"==typeof t)for(const r in t)null===(e=t[r])&&null!=this.style[r]?delete this.style[r]:("fill"!==r&&"stroke"!==r||(e=Ke.colorToRGB(e)),this.style[r]=e),this.dom.setStyle(r,e);return Li.vDomChanged(this.vDomIndex),this},zo.prototype.setReIndex=function(){this.reindex=!0},zo.prototype.updateBBox=function(){let t;if(this.bbox){for(let e=0,r=this.children.length;e<r;e+=1)this.children[e]&&(t=this.children[e].updateBBox()||t);if(this.BBoxUpdate||t)return this.dom.updateBBox(this.children),this.BBoxUpdate=!1,!0}return!1},zo.prototype.in=function(t){return this.dom.in(t)},zo.prototype.on=function(t,e){const r=this;if(this.events||(this.events={}),null===e&&null!==this.events[t])delete this.events[t];else if(e)if("function"==typeof e){const n=e.bind(r);this.events[t]=function(t){n(t)}}else"object"==typeof e&&(this.events[t]=e,e.constructor!==Di.constructor&&e.constructor!==Pi.constructor||e.bindMethods(this));return this},zo.prototype.execute=function(){if("none"!==this.style.display)if(!this.dom.shader&&!this.dom.shaderGroup&&this.dom instanceof ho)for(let t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();else if(this.dom.shader&&this.dom instanceof ho)this.reindex&&(this.reIndexChildren(),this.reindex=!1),this.exeCtx&&this.exeCtx(this.ctx),this.dom.shader.execute(this.children);else if(this.dom.shaderGroup&&this.dom instanceof ho){this.exeCtx&&this.exeCtx(this.ctx);for(const t in this.dom.shaderGroup){const e=this.dom.shaderGroup[t];e.reindex&&(this.reIndexChildren(e),e.reindex=!1),e.shader.execute(e.children)}}},zo.prototype.child=function(t){const e=this;let r;if(e.dom instanceof ho)for(let n=0;n<t.length;n+=1)r=t[n],r.dom.parent=e,e.children[e.children.length]=r,r.dom.pindex=e.children.length-1,r instanceof fo||r.dom instanceof ho||(this.dom.shader?r.el===this.dom.shader.attr.shaderType?r.dom.setShader(this.dom.shader):(console.warn("wrong el type '"+r.el+"' being added to shader group - '"+this.dom.shader.attr.shaderType+"'"),e.children.pop()):(this.dom.shaderGroup||(this.dom.shaderGroup={}),this.dom.shaderGroup[r.el]||(this.dom.shaderGroup[r.el]={children:[],shader:Io(e.ctx,e.attr,e.style,r.el,e.renderTarget,e.vDomIndex)}),this.dom.shaderGroup[r.el].children[this.dom.shaderGroup[r.el].children.length]=r,r.dom.pindex=this.dom.shaderGroup[r.el].children.length-1,r.dom.setShader(this.dom.shaderGroup[r.el].shader))),e.dom.attr&&e.dom.attr.transform&&r.applyTransformationMatrix(e.dom.transformMatrix);else console.log("Error");return this.BBoxUpdate=!0,Li.vDomChanged(this.vDomIndex),e},zo.prototype.createEls=function(t,e){const r=new Hi({type:"WEBGL",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(r.stack),Li.vDomChanged(this.vDomIndex),r},zo.prototype.createEl=function(t){const e=new zo(this.ctx,t,zi(),this.vDomIndex);return this.child([e]),Li.vDomChanged(this.vDomIndex),e},zo.prototype.createShaderEl=function(t){const e=new fo(this.ctx,t,this.vDomIndex);return this.child([e]),Li.vDomChanged(this.vDomIndex),e},zo.prototype.remove=function(){const{children:t}=this.dom.parent,e=t.indexOf(this);if(-1!==e)if(this.dom.parent.dom.shader)this.dom.parent.dom.shader.indexBased&&this.dom.parent.dom.shader.clear(this.dom.pindex),this.dom.parent.setReIndex(),t[this.dom.pindex]=void 0;else if(this.dom.parent.dom.shaderGroup){const r=this.dom.parent.dom.shaderGroup[this.el];if(r){const t=r.children.indexOf(this);r.reindex=!0,r.shader.indexBased&&(r.shader.clear(this.dom.pindex),this.dom.parent.setReIndex()),r.children[t]=void 0}t[e]=void 0}else t.splice(e,1);this.BBoxUpdate=!0,Li.vDomChanged(this.vDomIndex)},zo.prototype.removeChild=function(t){let e=-1;if(this.children.forEach(((r,n)=>{r===t&&(e=n)})),-1!==e){const t=this.children.splice(e,1)[0];this.dom.removeChild(t.dom)}this.BBoxUpdate=!0,Li.vDomChanged(this.vDomIndex)},No.prototype.setAttr=function(t,e){if(1===arguments.length)for(const r in t)this[r]=t[r],"src"===r&&("string"==typeof e?(this.image&&this.image instanceof Image||(this.image=Oo(this)),this.image.src=e):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement||e instanceof Uint8Array?(this.image=e,this.update()):e instanceof sn&&(this.image=e.domEl,this.update())),(t.height||t.width)&&(self.image=jo(this.width,this.height));else this[t]=e,console.warning("Instead of key, value, pass Object of key,value for optimal rendering"),"src"===t&&("string"==typeof e?(this.image&&this.image instanceof Image||(this.image=Oo(this)),this.image.src=e):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement||e instanceof Uint8Array?(this.image=e,this.update()):e instanceof sn&&(this.image=e.domEl,this.update()))},No.prototype.loadTexture=function(){this.updated&&(this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.texture))},No.prototype.clear=function(t){},No.prototype.update=function(){const t=this.ctx;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),!this.image||this.image instanceof Uint8Array?t.texImage2D(t.TEXTURE_2D,this.border,t[this.format],this.width,this.height,0,t[this.format],t[this.type],this.image):t.texImage2D(t.TEXTURE_2D,this.border,t[this.format],t[this.format],t[this.type],this.image),this.mipMap?(io(self.image.width)&&io(self.image.height)||console.warn("Image dimension not in power of 2"),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[this.magFilter])):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[this.warpS]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[this.warpT]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[this.minFilter])),this.updated=!0},Fo.prototype.setAttr=function(t,e){this[t]=e},Fo.prototype.update=function(){this.texture&&this.texture instanceof No&&(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.fbo),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.texture.texture,0),this.ctx.clearColor(0,0,0,0),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT))},Fo.prototype.clear=function(){this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null)},Uo.prototype.setAttr=function(t,e){!e&&this.attributes[t]?delete this.attributes[t]:this.attributes[t]=e},Uo.prototype.setDrawRange=function(t,e){this.drawRange=[t,e]},Uo.prototype.setDrawType=function(t){this.drawType=t},Uo.prototype.setIndex=function(t){this.indexes=t},Yo.prototype=new Uo,Yo.constructor=Yo,Xo.prototype=new Uo,Xo.constructor=Xo,Go.prototype=new Uo,Go.constructor=Go;
/**
* StackBlur - a fast almost Gaussian Blur For Canvas
*
* In case you find this class useful - especially in commercial projects -
* I am not totally unhappy for a small donation to my PayPal account
* mario@quasimondo.de
*
* Or support me on flattr:
* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.
*
* @module StackBlur
* @author Mario Klingemann
* Contact: mario@quasimondo.com
* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}
* Twitter: @quasimondo
*
* @copyright (c) 2010 Mario Klingemann
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/
var Ho=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],qo=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];var Vo=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},Wo={blur:function(t=1){return function(e){return function(t,e,r,n,i,o){for(var s,a=t.data,h=2*o+1,c=n-1,l=i-1,u=o+1,f=u*(u+1)/2,p=new Vo,d=p,y=1;y<h;y++)d=d.next=new Vo,y===u&&(s=d);d.next=p;for(var g=null,x=null,m=0,v=0,w=Ho[o],b=qo[o],A=0;A<i;A++){d=p;for(var B=a[v],E=a[v+1],T=a[v+2],S=a[v+3],_=0;_<u;_++)d.r=B,d.g=E,d.b=T,d.a=S,d=d.next;for(var k=0,M=0,C=0,L=0,D=u*B,P=u*E,I=u*T,z=u*S,R=f*B,O=f*E,j=f*T,N=f*S,F=1;F<u;F++){var U=v+((c<F?c:F)<<2),Y=a[U],X=a[U+1],G=a[U+2],H=a[U+3],q=u-F;R+=(d.r=Y)*q,O+=(d.g=X)*q,j+=(d.b=G)*q,N+=(d.a=H)*q,k+=Y,M+=X,C+=G,L+=H,d=d.next}g=p,x=s;for(var V=0;V<n;V++){var W=N*w>>b;if(a[v+3]=W,0!==W){var Z=255/W;a[v]=(R*w>>b)*Z,a[v+1]=(O*w>>b)*Z,a[v+2]=(j*w>>b)*Z}else a[v]=a[v+1]=a[v+2]=0;R-=D,O-=P,j-=I,N-=z,D-=g.r,P-=g.g,I-=g.b,z-=g.a;var $=V+o+1;$=m+($<c?$:c)<<2,R+=k+=g.r=a[$],O+=M+=g.g=a[$+1],j+=C+=g.b=a[$+2],N+=L+=g.a=a[$+3],g=g.next;var Q=x,J=Q.r,K=Q.g,tt=Q.b,et=Q.a;D+=J,P+=K,I+=tt,z+=et,k-=J,M-=K,C-=tt,L-=et,x=x.next,v+=4}m+=n}for(var rt=0;rt<n;rt++){var nt=a[v=rt<<2],it=a[v+1],ot=a[v+2],st=a[v+3],at=u*nt,ht=u*it,ct=u*ot,lt=u*st,ut=f*nt,ft=f*it,pt=f*ot,dt=f*st;d=p;for(var yt=0;yt<u;yt++)d.r=nt,d.g=it,d.b=ot,d.a=st,d=d.next;for(var gt=n,xt=0,mt=0,vt=0,wt=0,bt=1;bt<=o;bt++){v=gt+rt<<2;var At=u-bt;ut+=(d.r=nt=a[v])*At,ft+=(d.g=it=a[v+1])*At,pt+=(d.b=ot=a[v+2])*At,dt+=(d.a=st=a[v+3])*At,wt+=nt,xt+=it,mt+=ot,vt+=st,d=d.next,bt<l&&(gt+=n)}v=rt,g=p,x=s;for(var Bt=0;Bt<i;Bt++){var Et=v<<2;a[Et+3]=st=dt*w>>b,st>0?(st=255/st,a[Et]=(ut*w>>b)*st,a[Et+1]=(ft*w>>b)*st,a[Et+2]=(pt*w>>b)*st):a[Et]=a[Et+1]=a[Et+2]=0,ut-=at,ft-=ht,pt-=ct,dt-=lt,at-=g.r,ht-=g.g,ct-=g.b,lt-=g.a,Et=rt+((Et=Bt+u)<l?Et:l)*n<<2,ut+=wt+=g.r=a[Et],ft+=xt+=g.g=a[Et+1],pt+=mt+=g.b=a[Et+2],dt+=vt+=g.a=a[Et+3],g=g.next,at+=nt=x.r,ht+=it=x.g,ct+=ot=x.b,lt+=st=x.a,wt-=nt,xt-=it,mt-=ot,vt-=st,x=x.next,v+=n}}return t}(e,0,0,e.width,e.height,t)}},greyScale:function(t){let e=null;switch(t){case"grey-1":e=function(t){const e=t.data;let r;for(let n=0,i=e.length;n<i;n+=4)r=parseInt(.299*e[n]+.587*e[n+1]+.114*e[n+2]),t.data[n]=r,t.data[n+1]=r,t.data[n+2]=r;return t};break;case"grey-2":e=function(t){const e=t.data;let r;for(let n=0,i=e.length;n<i;n+=4)r=parseInt(3*e[n]+4*e[n+1]+e[n+2]>>>3),t.data[n]=r,t.data[n+1]=r,t.data[n+2]=r;return t};break;default:e=function(t){const e=t.data;let r;for(let n=0,i=e.length;n<i;n+=4)r=parseInt(.2126*e[n]+.715*e[n+1]+.0722*e[n+2]),t.data[n]=r,t.data[n+1]=r,t.data[n+2]=r;return t}}return e}};const Zo=qe.instance,$o=_i.canvasLayer,Qo=_i.canvasNodeLayer;export{Zo as Path,Nn as behaviour,$o as canvasLayer,Qo as canvasNodeLayer,yt as chain,Ke as color,J as ease,j as geometry,g as queue,Mn as svgLayer,Wo as utility,Ro as webglLayer};