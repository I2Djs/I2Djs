/*!
      * i2djs
      * (c) 2024 Narayana Swamy (narayanaswamy14@gmail.com)
      * @license BSD-3-Clause
      */
import t from"blob-stream-i2d/blob-stream.js";import e from"pdfkit/js/pdfkit.standalone.js";let i=null,n=[];const r={},o=[];let s,a,h,c=[];function l(t,e,i){this.executable=e,this.duration=e.duration?e.duration:0,this.delay=e.delay?e.delay:0,this.lastTime=0-(e.delay?e.delay:0),this.loopTracker=0,this.loop=e.loop?e.loop:0,this.direction=e.direction,this.easying=i,this.end=e.end?e.end:null,"reverse"===this.direction?this.factor=1:this.factor=0}function u(){}"undefined"==typeof window&&(global.window={setTimeout:setTimeout,clearTimeout:clearTimeout},global.performance={now:function(){return Date.now()}},global.document={}),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)},l.prototype.execute=function(t){this.executable.run(t)},l.prototype.resetCallBack=function(t){"function"==typeof t&&(this.callBack=t)},u.prototype={startAnimeFrames:function(){s||(s=window.requestAnimationFrame(y))},stopAnimeFrame:function(){s&&(window.cancelAnimFrame(s),s=null)},add:function(t,e,i){const r=new l(t,e,i);r.currTime=performance.now(),e.target&&(e.target.animList||(e.target.animList=[]),e.target.animList[e.target.animList.length]=r),n[n.length]=r,this.startAnimeFrames()},remove:function(t){const e=n.indexOf(t);-1!==e&&n.splice(e,1)},onRequestFrame:function(t){if("function"!=typeof t)throw new Error("Wrong input");c.push(t),c.length>0&&!s&&this.startAnimeFrames()},removeRequestFrameCall:function(t){if("function"!=typeof t)throw new Error("Wrong input");const e=c.indexOf(t);-1!==e&&c.splice(e,1)},clearAll:function(){n=[],c=[]}},u.prototype.addVdom=function(t){const e=o.length+1;return r[e]=t,o.push(e),this.startAnimeFrames(),e},u.prototype.removeVdom=function(t){const e=o.indexOf(t);-1!==e&&(o.splice(e,1),r[t].root.destroy(),delete r[t]),0===o.length&&0===n.length&&0===c.length&&this.stopAnimeFrame()},u.prototype.vDomChanged=function(t){if(r[t]&&void 0!==r[t].stateModified)r[t].stateModified=!0,r[t].root.stateModified=!0;else if("string"==typeof t){const e=t.split(":");if(r[e[0]]&&void 0!==r[e[0]].stateModified){r[e[0]].stateModified=!0,r[e[0]].root.stateModified=!0;const t=r[e[0]].root.fetchEl("#"+e[1]);t&&(t.stateModified=!0)}}},u.prototype.execute=function(){this.startAnimeFrames()},u.prototype.vDomUpdates=function(){for(let t=0,e=o.length;t<e;t+=1)if(o[t]&&r[o[t]]&&r[o[t]].stateModified)r[o[t]].execute(),r[o[t]].stateModified=!1;else if(o[t]&&r[o[t]]&&r[o[t]].root&&"NODE"!==r[o[t]].root.ENV){document.getElementById(r[o[t]].root.container.id)||this.removeVdom(o[t])}};const f=Math.abs;let d=0,p=[];function y(){try{p=[],d=0,h=performance.now();for(let t=0;t<n.length;t+=1)a=n[t],a.lastTime+=h-a.currTime,a.currTime=h,a.lastTime<a.duration&&a.lastTime>=0?(a.execute(f(a.factor-a.easying(a.lastTime,a.duration))),p[d++]=a):a.lastTime>a.duration?x(a):p[d++]=a;n=p,c.length>0&&function(){for(let t=0;t<c.length;t+=1)c[t](h)}(),i.vDomUpdates()}catch(t){console.error(t)}finally{s=window.requestAnimationFrame(y)}}function x(t){if(t.loopTracker>=t.loop-1){if(t.execute(1-t.factor),t.end&&t.end(),t.executable.target){const e=t.executable.target.animList;if(e&&e.length>0)if(1===e.length)t.executable.target.animList=[];else if(e.length>1){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}}}else t.loopTracker+=1,t.lastTime=t.lastTime-t.duration,t.lastTime=t.lastTime%t.duration,"alternate"===t.direction?t.factor=1-t.factor:"reverse"===t.direction?t.factor=1:t.factor=0,t.execute(f(t.factor-t.easying(t.lastTime,t.duration))),p[d++]=t}i=new u;var g=i;function m(){}function v(t,e){let i=0,n=0,r=1,o=1;const s=e;if(t.attr.transform&&t.attr.transform.translate&&([i,n]=t.attr.transform.translate,s.x-=i,s.y-=n),t.attr.transform&&t.attr.transform.scale&&(r=void 0!==t.attr.transform.scale[0]?t.attr.transform.scale[0]:1,o=void 0!==t.attr.transform.scale[1]?t.attr.transform.scale[1]:r,s.x/=r,s.y/=o),t.attr.transform&&t.attr.transform.rotate){const e=t.attr.transform.rotate[0],i={x:t.attr.transform.rotate[1],y:t.attr.transform.rotate[2]},n=s.x,r=s.y,o=i.x,l=i.y;var a=Math.PI/180*e,h=Math.cos(a),c=Math.sin(a);s.x=h*(n-o)+c*(r-l)+o,s.y=h*(r-l)-c*(n-o)+l}}m.prototype.execute=function(){this.root.execute(),this.stateModified=!1},m.prototype.rootNode=function(t){this.root=t,this.stateModified=!0},m.prototype.eventsCheck=function(t,e,i){const n=this;let r,o;for(var s=0;s<=t.length-1;s+=1){var a=t[s],h={x:e.x,y:e.y};v(a,h),a.in({x:h.x,y:h.y})&&(a.children&&a.children.length>0?(o=n.eventsCheck(a.children,{x:h.x,y:h.y},i),o&&(r=o)):r=a)}return r},m.prototype.transformCoOr=v;const w=Math.sqrt,b=Math.sin,B=Math.cos,A=Math.abs,T=Math.atan2,k=Math.tan,S=Math.PI,E=Math.ceil,M=Math.max;function C(t,e){let i=1;if(0===e)return i;for(let n=1;n<=e;n+=1)i*=t;return i}function D(t,e){let i=0;for(const n in t)i+=C(e[n]-t[n],2);if(isNaN(i))throw new Error("error");return w(i)}function P(t,e,i){const n=C(i,3),r=C(i,2);return{x:e.ax*n+e.bx*r+e.cx*i+t.x,y:e.ay*n+e.by*r+e.cy*i+t.y}}const _=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){const i=[];let n,r=!0,o=!1;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){o=!0,n=t}finally{try{!r&&a.return&&a.return()}finally{o&&console.log("Error -"+n)}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=2*S,L=function(t,e,i,n,r,o,s){let{x:a,y:h}=t;a*=e,h*=i;return{x:n*a-r*h+o,y:r*a+n*h+s}},z=function(t,e){const i=4/3*k(e/4),n=B(t),r=b(t),o=B(t+e),s=b(t+e);return[{x:n-r*i,y:r+n*i},{x:o+s*i,y:s-o*i},{x:o,y:s}]},O=function(t,e,i,n){const r=t*n-e*i<0?-1:1;let o=(t*i+e*n)/(w(t*t+e*e)*w(t*t+e*e));return o>1&&(o=1),o<-1&&(o=-1),r*Math.acos(o)};function F(t,e,i,n){const r=t.x,o=t.y,s=e.x,a=e.y;var h=S/180*i,c=B(-h),l=b(-h);return{x:c*(r-s)+l*(o-a)+s,y:c*(o-a)-l*(r-s)+a}}function N(){}N.prototype={pow:C,getAngle:function(t,e){return T(e.x-t.x,e.y-t.y)},getDistance:D,scaleAlongOrigin:function(t,e){const i={};for(const n in t)i[n]=t[n]*e;return i},scaleAlongPoint:function(t,e,i){const n=(t.y-e.y)/(t.x-e.x),r=t.x*i;return{x:r,y:(n*(r-e.x)+e.y)*i}},linearTransitionBetweenPoints:function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}},bezierTransition:function(t,e,i,n){return{x:(t.x-2*e.x+i.x)*n*n+(2*e.x-2*t.x)*n+t.x,y:(t.y-2*e.y+i.y)*n*n+(2*e.y-2*t.y)*n+t.y}},bezierLength:function(t,e,i){const n={},r={};n.x=t.x+i.x-2*e.x,n.y=t.y+i.y-2*e.y,r.x=2*e.x-2*t.x,r.y=2*e.y-2*t.y;const o=4*(n.x*n.x+n.y*n.y),s=4*(n.x*r.x+n.y*r.y),a=r.x*r.x+r.y*r.y,h=2*w(o+s+a),c=w(o),l=2*o*c,u=2*w(a),f=s/c;let d=(2*c+f+h)/(f+u);return d=isNaN(d)||A(d)===1/0?1:d,(l*h+c*s*(h-u)+(4*a*o-s*s)*Math.log(d))/(4*l)},cubicBezierTransition:P,cubicBezierLength:function(t,e){const i=.001;let n=0;const r=P.bind(null,t,e);let o,s;for(let t=0;t<=1;t+=i)o=r(t),s=r(t+i),n+=w(C((s.x-o.x)/i,2)+C((s.y-o.y)/i,2))*i;return n},cubicBezierCoefficients:function(t){const e=3*(t.cntrl1.x-t.p0.x),i=3*(t.cntrl2.x-t.cntrl1.x)-e,n=t.p1.x-t.p0.x-e-i,r=3*(t.cntrl1.y-t.p0.y),o=3*(t.cntrl2.y-t.cntrl1.y)-r;return{cx:e,bx:i,ax:n,cy:r,by:o,ay:t.p1.y-t.p0.y-r-o}},arcToBezier:function(t){let{px:e,py:i,cx:n,cy:r,rx:o,ry:s}=t;const a=t.xAxisRotation,h=void 0===a?0:a,c=t.largeArcFlag,l=void 0===c?0:c,u=t.sweepFlag,f=void 0===u?0:u,d=[];if(0===o||0===s)return[];const p=b(h*I/360),y=B(h*I/360),x=y*(e-n)/2+p*(i-r)/2,g=-p*(e-n)/2+y*(i-r)/2;if(0===x&&0===g)return[];o=A(o),s=A(s);const m=C(x,2)/C(o,2)+C(g,2)/C(s,2);m>1&&(o*=w(m),s*=w(m));const v=function(t,e,i,n,r,o,s,a,h,c,l,u){const f=C(r,2),d=C(o,2),p=C(l,2),y=C(u,2);let x=f*d-f*y-d*p;x<0&&(x=0),x/=f*y+d*p,x=w(x)*(s===a?-1:1);const g=x*r/o*u,m=x*-o/r*l,v=c*g-h*m+(t+i)/2,b=h*g+c*m+(e+n)/2,B=(l-g)/r,A=(u-m)/o,T=(-l-g)/r,k=(-u-m)/o,S=O(1,0,B,A);let E=O(B,A,T,k);return 0===a&&E>0&&(E-=I),1===a&&E<0&&(E+=I),[v,b,S,E]}(e,i,n,r,o,s,l,f,p,y,x,g),T=_(v,4),k=T[0],S=T[1];let D=T[2],P=T[3];const F=M(E(A(P)/(I/4)),1);P/=F;for(let t=0;t<F;t++)d.push(z(D,P)),D+=P;return d.map((t=>{const e=L(t[0],o,s,y,p,k,S),i=e.x,n=e.y,r=L(t[1],o,s,y,p,k,S),a=r.x,h=r.y,c=L(t[2],o,s,y,p,k,S);return{x1:i,y1:n,x2:a,y2:h,x:c.x,y:c.y}}))},intermediateValue:function(t,e,i){return t+(e-t)*i},toCubicCurves:function(t){if(!t.length)return;const e=t,i=[];for(let t=0;t<e.length;t+=1)if(-1!==["M","C","S","Q"].indexOf(e[t].type))i.push(e[t]);else if(-1!==["V","H","L","Z"].indexOf(e[t].type)){const n={x:(e[t].p0.x+e[t].p1.x)/2,y:(e[t].p0.y+e[t].p1.y)/2};i.push({p0:e[t].p0,cntrl1:n,cntrl2:n,p1:e[t].p1,type:"C",length:e[t].length})}else console.log("wrong cmd type");return i},rotatePoint:F,rotateBBox:function(t,e){let i={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},r={x:t.x,y:t.y+t.height},o={x:t.x+t.width,y:t.y+t.height};const{translate:s,rotate:a}=e,h={x:a[1]||0,y:a[2]||0},c=a[0];s&&s.length>0&&(h.x+=s[0],h.y+=s[1]),i=F(i,h,c,D(i,h)),n=F(n,h,c,D(n,h)),r=F(r,h,c,D(r,h)),o=F(o,h,c,D(o,h));const l=[i.x,n.x,r.x,o.x].sort(((t,e)=>t-e)),u=[i.y,n.y,r.y,o.y].sort(((t,e)=>t-e));return{x:l[0],y:u[0],width:l[3]-l[0],height:u[3]-u[0]}}};var R=new N;const j=R;function G(t,e){return t/e}function X(t,e){const i=t/e;return 1-(1-i)*Math.sin(i*e*.002*Math.PI*2+Math.PI/2)/Math.exp(8*i)}function Y(t,e){const i=t/e,n=i/100;return 1-(1-i)*Math.abs(Math.sin(i*e*n*Math.PI*2+Math.PI/2))/Math.exp(10*i)}function H(t,e){const i=t/e;return i*i}function U(t,e){const i=t/e;return i*(2-i)}function V(t,e){const i=t/e;return i<.5?2*i*i:(4-2*i)*i-1}function q(t,e){const i=t/e;return j.pow(i,3)}function Z(t,e){let i=t/e;return i-=1,i*i*i+1}function W(t,e){const i=t/e;return i<.5?4*j.pow(i,3):(i-1)*(2*i-2)*(2*i-2)+1}function $(t,e){const i=t/e;return 1-Math.cos(i*Math.PI/2)}function Q(t,e){const i=t/e;return Math.cos(i*Math.PI/2)}function J(t,e){const i=t/e;return(1-Math.cos(Math.PI*i))/2}function K(t){let e;if("function"==typeof t)return function(e,i){return t(e/i)};switch(t){case"easeOutQuad":e=U;break;case"easeInQuad":e=H;break;case"easeInOutQuad":e=V;break;case"easeInCubic":e=q;break;case"easeOutCubic":e=Z;break;case"easeInOutCubic":e=W;break;case"easeInSin":e=$;break;case"easeOutSin":e=Q;break;case"easeInOutSin":e=J;break;case"bounce":e=Y;break;case"linear":default:e=G;break;case"elastic":e=X}return e}let tt=0,et=0;function it(){return tt+=1,tt}function nt(){return et+=1,et}const rt=K;function ot(t){return this.easying=rt(t),this.transition=t,this}function st(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.durationP=t,this}function at(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.loopValue=t,this}function ht(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.directionV=t,this}function ct(t){if(1!==arguments.length)throw new Error("arguments mis match");return this.data=t,"CANVAS"===this.data.nodeName&&(this.canvasStack=[]),this}function lt(t){return"function"!=typeof t?null:(this.callbckExe=t,this)}function ut(t){return this.end=t,this}function ft(t){return this.endExe=t,this}function dt(){this.start()}function pt(){this.queue=g,this.sequenceQueue=[],this.lengthV=0,this.currPos=0,this.ID=it(),this.loopCounter=0}function yt(){this.queue=g,this.group=[],this.currPos=0,this.ID=it(),this.loopCounter=1}pt.prototype={duration:st,loop:at,callbck:lt,bind:ct,child:ut,ease:ot,end:ft,commit:dt,reset:function(t){return this.resetV=t,this},direction:ht},pt.prototype.add=function(t){const e=this;return Array.isArray(t)||"function"==typeof t||(t=[t]),Array.isArray(t)&&t.map((t=>(e.lengthV+=t.length?t.length:0,t))),this.sequenceQueue=this.sequenceQueue.concat(t),this},pt.prototype.easyingGlobal=function(t,e){return t/e},pt.prototype.start=function(){const t=this;if("alternate"===t.directionV)t.factor=t.factor?-1*t.factor:1,t.currPos=t.factor<0?this.sequenceQueue.length-1:0;else if("reverse"===t.directionV){for(let e=0;e<this.sequenceQueue.length;e+=1){const i=this.sequenceQueue[e];i instanceof pt||i instanceof yt||i.run(1),t.currPos=e}t.factor=-1}else t.currPos=0,t.factor=1;this.execute()},pt.prototype.execute=function(){const t=this;let e=this.sequenceQueue[t.currPos];if(e="function"==typeof e?e():e,e)return e instanceof pt||e instanceof yt?e.end(t.triggerEnd.bind(t,e)).commit():(this.currObj=e,this.queue.add(nt(),{run(t){e.run(t)},target:e.target,delay:void 0!==e.delay?e.delay:0,duration:void 0!==e.duration?e.duration:t.durationP,loop:e.loop?e.loop:1,direction:t.factor<0?"reverse":"default",end:t.triggerEnd.bind(t,e)},((t,e)=>t/e))),this},pt.prototype.triggerEnd=function(t){const e=this;if(e.currPos+=e.factor,t.end&&e.triggerChild(t),e.sequenceQueue.length===e.currPos||e.currPos<0)return e.endExe&&e.endExe(),e.loopCounter+=1,void(e.loopCounter<e.loopValue&&e.start());this.execute()},pt.prototype.triggerChild=function(t){t.end instanceof yt||t.end instanceof pt?setTimeout((()=>{t.end.commit()}),0):t.end()},yt.prototype={duration:st,loop:at,callbck:lt,bind:ct,child:ut,ease:ot,end:ft,commit:dt,direction:ht},yt.prototype.add=function(t){const e=this;return Array.isArray(t)||(t=[t]),this.group=this.group.concat(t),this.group.forEach((t=>{t.durationP=t.durationP?t.durationP:e.durationP})),this},yt.prototype.execute=function(){const t=this;t.currPos=0;for(let e=0,i=t.group.length;e<i;e++){const i=t.group[e];i instanceof pt||i instanceof yt?i.end(t.triggerEnd.bind(t,i)).commit():t.queue.add(nt(),{run(t){i.run(t)},target:i.target,delay:void 0!==i.delay?i.delay:0,duration:void 0!==i.duration?i.duration:t.durationP,loop:i.loop?i.loop:1,direction:i.direction?i.direction:"default",end:t.triggerEnd.bind(t,i)},i.ease?rt(i.ease):t.easying)}return t},yt.prototype.start=function(){const t=this;"alternate"===t.directionV?t.factor=t.factor?-1*t.factor:1:"reverse"===t.directionV?t.factor=-1:t.factor=1,this.execute()},yt.prototype.triggerEnd=function(t){const e=this;this.currPos+=1,t.end&&this.triggerChild(t.end),this.currPos===this.group.length&&(this.endExe&&this.triggerChild(this.endExe),e.loopCounter+=1,e.loopCounter<e.loopValue&&e.start())},yt.prototype.triggerChild=function(t){t instanceof yt||t instanceof pt?t.commit():"function"==typeof t?t():console.log("wrong type")};var xt={sequenceChain:function(){return new pt},parallelChain:function(){return new yt}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mt={exports:{}},vt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},wt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function bt(t){return t>=48&&t<=57}function Bt(t){return t>=48&&t<=57||43===t||45===t||46===t}function At(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function Tt(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&wt.indexOf(e)>=0);)t.index++;var e}function kt(t){var e=t.path.charCodeAt(t.index);return 48===e?(t.param=0,void t.index++):49===e?(t.param=1,void t.index++):void(t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")")}function St(t){var e,i=t.index,n=i,r=t.max,o=!1,s=!1,a=!1,h=!1;if(n>=r)t.err="SvgPath: missed param (at pos "+n+")";else if(43!==(e=t.path.charCodeAt(n))&&45!==e||(e=++n<r?t.path.charCodeAt(n):0),bt(e)||46===e){if(46!==e){if(o=48===e,e=++n<r?t.path.charCodeAt(n):0,o&&n<r&&e&&bt(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+i+")");for(;n<r&&bt(t.path.charCodeAt(n));)n++,s=!0;e=n<r?t.path.charCodeAt(n):0}if(46===e){for(h=!0,n++;bt(t.path.charCodeAt(n));)n++,a=!0;e=n<r?t.path.charCodeAt(n):0}if(101===e||69===e){if(h&&!s&&!a)return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");if(43!==(e=++n<r?t.path.charCodeAt(n):0)&&45!==e||n++,!(n<r&&bt(t.path.charCodeAt(n))))return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");for(;n<r&&bt(t.path.charCodeAt(n));)n++}t.index=n,t.param=parseFloat(t.path.slice(i,n))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")"}function Et(t){var e,i;i=(e=t.path[t.segmentStart]).toLowerCase();var n=t.data;if("m"===i&&n.length>2&&(t.result.push([e,n[0],n[1]]),n=n.slice(2),i="l",e="m"===e?"l":"L"),"r"===i)t.result.push([e].concat(n));else for(;n.length>=vt[i]&&(t.result.push([e].concat(n.splice(0,vt[i]))),vt[i]););}function Mt(t){var e,i,n,r,o,s=t.max;if(t.segmentStart=t.index,e=t.path.charCodeAt(t.index),i=97==(32|e),function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(e))if(r=vt[t.path[t.index].toLowerCase()],t.index++,Tt(t),t.data=[],r){for(n=!1;;){for(o=r;o>0;o--){if(!i||3!==o&&4!==o?St(t):kt(t),t.err.length)return;t.data.push(t.param),Tt(t),n=!1,t.index<s&&44===t.path.charCodeAt(t.index)&&(t.index++,Tt(t),n=!0)}if(!n){if(t.index>=t.max)break;if(!Bt(t.path.charCodeAt(t.index)))break}}Et(t)}else Et(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}function Ct(){if(!(this instanceof Ct))return new Ct;this.queue=[],this.cache=null}Ct.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},Ct.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},Ct.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},Ct.prototype.rotate=function(t,e,i){var n,r,o;return 0!==t&&(this.translate(e,i),n=t*Math.PI/180,r=Math.cos(n),o=Math.sin(n),this.queue.push([r,o,-o,r,0,0]),this.cache=null,this.translate(-e,-i)),this},Ct.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},Ct.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},Ct.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=(e=this.cache,i=this.queue[t],[e[0]*i[0]+e[2]*i[1],e[1]*i[0]+e[3]*i[1],e[0]*i[2]+e[2]*i[3],e[1]*i[2]+e[3]*i[3],e[0]*i[4]+e[2]*i[5]+e[4],e[1]*i[4]+e[3]*i[5]+e[5]]);var e,i;return this.cache},Ct.prototype.calc=function(t,e,i){var n;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(n=this.cache)[0]+e*n[2]+(i?0:n[4]),t*n[1]+e*n[3]+(i?0:n[5])]):[t,e]};var Dt=Ct,Pt=Dt,_t={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},It=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,Lt=/[\s,]+/,zt=2*Math.PI;function Ot(t,e,i,n){var r=t*i+e*n;return r>1&&(r=1),r<-1&&(r=-1),(t*n-e*i<0?-1:1)*Math.acos(r)}function Ft(t,e){var i=4/3*Math.tan(e/4),n=Math.cos(t),r=Math.sin(t),o=Math.cos(t+e),s=Math.sin(t+e);return[n,r,n-r*i,r+n*i,o+s*i,s-o*i,o,s]}var Nt=Math.PI/180;function Rt(t,e,i){if(!(this instanceof Rt))return new Rt(t,e,i);this.rx=t,this.ry=e,this.ax=i}Rt.prototype.transform=function(t){var e=Math.cos(this.ax*Nt),i=Math.sin(this.ax*Nt),n=[this.rx*(t[0]*e+t[2]*i),this.rx*(t[1]*e+t[3]*i),this.ry*(-t[0]*i+t[2]*e),this.ry*(-t[1]*i+t[3]*e)],r=n[0]*n[0]+n[2]*n[2],o=n[1]*n[1]+n[3]*n[3],s=((n[0]-n[3])*(n[0]-n[3])+(n[2]+n[1])*(n[2]+n[1]))*((n[0]+n[3])*(n[0]+n[3])+(n[2]-n[1])*(n[2]-n[1])),a=(r+o)/2;if(s<1e-10*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var h=n[0]*n[1]+n[2]*n[3],c=a+(s=Math.sqrt(s))/2,l=a-s/2;return this.ax=Math.abs(h)<1e-10&&Math.abs(c-o)<1e-10?90:180*Math.atan(Math.abs(h)>Math.abs(c-o)?(c-r)/h:h/(c-o))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(l)):(this.ax+=90,this.rx=Math.sqrt(l),this.ry=Math.sqrt(c)),this},Rt.prototype.isDegenerate=function(){return this.rx<1e-10*this.ry||this.ry<1e-10*this.rx};var jt=function(t){var e=new At(t),i=e.max;for(Tt(e);e.index<i&&!e.err.length;)Mt(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}},Gt=function(t){var e,i,n=new Pt;return t.split(It).forEach((function(t){if(t.length)if(void 0===_t[t])switch(i=t.split(Lt).map((function(t){return+t||0})),e){case"matrix":return void(6===i.length&&n.matrix(i));case"scale":return void(1===i.length?n.scale(i[0],i[0]):2===i.length&&n.scale(i[0],i[1]));case"rotate":return void(1===i.length?n.rotate(i[0],0,0):3===i.length&&n.rotate(i[0],i[1],i[2]));case"translate":return void(1===i.length?n.translate(i[0],0):2===i.length&&n.translate(i[0],i[1]));case"skewX":return void(1===i.length&&n.skewX(i[0]));case"skewY":return void(1===i.length&&n.skewY(i[0]))}else e=t})),n},Xt=Dt,Yt=function(t,e,i,n,r,o,s,a,h){var c=Math.sin(h*zt/360),l=Math.cos(h*zt/360),u=l*(t-i)/2+c*(e-n)/2,f=-c*(t-i)/2+l*(e-n)/2;if(0===u&&0===f)return[];if(0===s||0===a)return[];s=Math.abs(s),a=Math.abs(a);var d=u*u/(s*s)+f*f/(a*a);d>1&&(s*=Math.sqrt(d),a*=Math.sqrt(d));var p=function(t,e,i,n,r,o,s,a,h,c){var l=c*(t-i)/2+h*(e-n)/2,u=-h*(t-i)/2+c*(e-n)/2,f=s*s,d=a*a,p=l*l,y=u*u,x=f*d-f*y-d*p;x<0&&(x=0),x/=f*y+d*p;var g=(x=Math.sqrt(x)*(r===o?-1:1))*s/a*u,m=x*-a/s*l,v=c*g-h*m+(t+i)/2,w=h*g+c*m+(e+n)/2,b=(l-g)/s,B=(u-m)/a,A=(-l-g)/s,T=(-u-m)/a,k=Ot(1,0,b,B),S=Ot(b,B,A,T);return 0===o&&S>0&&(S-=zt),1===o&&S<0&&(S+=zt),[v,w,k,S]}(t,e,i,n,r,o,s,a,c,l),y=[],x=p[2],g=p[3],m=Math.max(Math.ceil(Math.abs(g)/(zt/4)),1);g/=m;for(var v=0;v<m;v++)y.push(Ft(x,g)),x+=g;return y.map((function(t){for(var e=0;e<t.length;e+=2){var i=t[e+0],n=t[e+1],r=l*(i*=s)-c*(n*=a),o=c*i+l*n;t[e+0]=r+p[0],t[e+1]=o+p[1]}return t}))},Ht=Rt;function Ut(t){if(!(this instanceof Ut))return new Ut(t);var e=jt(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}Ut.from=function(t){if("string"==typeof t)return new Ut(t);if(t instanceof Ut){var e=new Ut("");return e.err=t.err,e.segments=t.segments.map((function(t){return t.slice()})),e.__stack=t.__stack.map((function(t){return Xt().matrix(t.toArray())})),e}throw new Error("SvgPath.from: invalid param type "+t)},Ut.prototype.__matrix=function(t){var e,i=this;t.queue.length&&this.iterate((function(n,r,o,s){var a,h,c,l;switch(n[0]){case"v":h=0===(a=t.calc(0,n[1],!0))[0]?["v",a[1]]:["l",a[0],a[1]];break;case"V":h=(a=t.calc(o,n[1],!1))[0]===t.calc(o,s,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":h=0===(a=t.calc(n[1],0,!0))[1]?["h",a[0]]:["l",a[0],a[1]];break;case"H":h=(a=t.calc(n[1],s,!1))[1]===t.calc(o,s,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var u=t.toArray(),f=Ht(n[1],n[2],n[3]).transform(u);if(u[0]*u[3]-u[1]*u[2]<0&&(n[5]=n[5]?"0":"1"),a=t.calc(n[6],n[7],"a"===n[0]),"A"===n[0]&&n[6]===o&&n[7]===s||"a"===n[0]&&0===n[6]&&0===n[7]){h=["a"===n[0]?"l":"L",a[0],a[1]];break}h=f.isDegenerate()?["a"===n[0]?"l":"L",a[0],a[1]]:[n[0],f.rx,f.ry,f.ax,n[4],n[5],a[0],a[1]];break;case"m":l=r>0,h=["m",(a=t.calc(n[1],n[2],l))[0],a[1]];break;default:for(h=[c=n[0]],l=c.toLowerCase()===c,e=1;e<n.length;e+=2)a=t.calc(n[e],n[e+1],l),h.push(a[0],a[1])}i.segments[r]=h}),!0)},Ut.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=Xt(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},Ut.prototype.toString=function(){var t="",e="",i=!1;this.__evaluateStack();for(var n=0,r=this.segments.length;n<r;n++){var o=this.segments[n],s=o[0];s!==e||"m"===s||"M"===s?("m"===s&&"z"===e&&(t+=" "),t+=s,i=!1):i=!0;for(var a=1;a<o.length;a++){var h=o[a];1===a?i&&h>=0&&(t+=" "):h>=0&&(t+=" "),t+=h}e=s}return t},Ut.prototype.translate=function(t,e){return this.__stack.push(Xt().translate(t,e||0)),this},Ut.prototype.scale=function(t,e){return this.__stack.push(Xt().scale(t,e||0===e?e:t)),this},Ut.prototype.rotate=function(t,e,i){return this.__stack.push(Xt().rotate(t,e||0,i||0)),this},Ut.prototype.skewX=function(t){return this.__stack.push(Xt().skewX(t)),this},Ut.prototype.skewY=function(t){return this.__stack.push(Xt().skewY(t)),this},Ut.prototype.matrix=function(t){return this.__stack.push(Xt().matrix(t)),this},Ut.prototype.transform=function(t){return t.trim()?(this.__stack.push(Gt(t)),this):this},Ut.prototype.round=function(t){var e,i=0,n=0,r=0,o=0;return t=t||0,this.__evaluateStack(),this.segments.forEach((function(s){var a=s[0].toLowerCase()===s[0];switch(s[0]){case"H":case"h":return a&&(s[1]+=r),r=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"V":case"v":return a&&(s[1]+=o),o=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"Z":case"z":return r=i,void(o=n);case"M":case"m":return a&&(s[1]+=r,s[2]+=o),r=s[1]-s[1].toFixed(t),o=s[2]-s[2].toFixed(t),i=r,n=o,s[1]=+s[1].toFixed(t),void(s[2]=+s[2].toFixed(t));case"A":case"a":return a&&(s[6]+=r,s[7]+=o),r=s[6]-s[6].toFixed(t),o=s[7]-s[7].toFixed(t),s[1]=+s[1].toFixed(t),s[2]=+s[2].toFixed(t),s[3]=+s[3].toFixed(t+2),s[6]=+s[6].toFixed(t),void(s[7]=+s[7].toFixed(t));default:return e=s.length,a&&(s[e-2]+=r,s[e-1]+=o),r=s[e-2]-s[e-2].toFixed(t),o=s[e-1]-s[e-1].toFixed(t),void s.forEach((function(e,i){i&&(s[i]=+s[i].toFixed(t))}))}})),this},Ut.prototype.iterate=function(t,e){var i,n,r,o=this.segments,s={},a=!1,h=0,c=0,l=0,u=0;if(e||this.__evaluateStack(),o.forEach((function(e,i){var n=t(e,i,h,c);Array.isArray(n)&&(s[i]=n,a=!0);var r=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return h=e[1]+(r?h:0),c=e[2]+(r?c:0),l=h,void(u=c);case"h":case"H":return void(h=e[1]+(r?h:0));case"v":case"V":return void(c=e[1]+(r?c:0));case"z":case"Z":return h=l,void(c=u);default:h=e[e.length-2]+(r?h:0),c=e[e.length-1]+(r?c:0)}})),!a)return this;for(r=[],i=0;i<o.length;i++)if(void 0!==s[i])for(n=0;n<s[i].length;n++)r.push(s[i][n]);else r.push(o[i]);return this.segments=r,this},Ut.prototype.abs=function(){return this.iterate((function(t,e,i,n){var r,o=t[0],s=o.toUpperCase();if(o!==s)switch(t[0]=s,o){case"v":return void(t[1]+=n);case"a":return t[6]+=i,void(t[7]+=n);default:for(r=1;r<t.length;r++)t[r]+=r%2?i:n}}),!0),this},Ut.prototype.rel=function(){return this.iterate((function(t,e,i,n){var r,o=t[0],s=o.toLowerCase();if(o!==s&&(0!==e||"M"!==o))switch(t[0]=s,o){case"V":return void(t[1]-=n);case"A":return t[6]-=i,void(t[7]-=n);default:for(r=1;r<t.length;r++)t[r]-=r%2?i:n}}),!0),this},Ut.prototype.unarc=function(){return this.iterate((function(t,e,i,n){var r,o,s,a=[],h=t[0];return"A"!==h&&"a"!==h?null:("a"===h?(o=i+t[6],s=n+t[7]):(o=t[6],s=t[7]),0===(r=Yt(i,n,o,s,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(r.forEach((function(t){a.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])})),a))})),this},Ut.prototype.unshort=function(){var t,e,i,n,r,o=this.segments;return this.iterate((function(s,a,h,c){var l,u=s[0],f=u.toUpperCase();a&&("T"===f?(l="t"===u,"Q"===(i=o[a-1])[0]?(t=i[1]-h,e=i[2]-c):"q"===i[0]?(t=i[1]-i[3],e=i[2]-i[4]):(t=0,e=0),n=-t,r=-e,l||(n+=h,r+=c),o[a]=[l?"q":"Q",n,r,s[1],s[2]]):"S"===f&&(l="s"===u,"C"===(i=o[a-1])[0]?(t=i[3]-h,e=i[4]-c):"c"===i[0]?(t=i[3]-i[5],e=i[4]-i[6]):(t=0,e=0),n=-t,r=-e,l||(n+=h,r+=c),o[a]=[l?"c":"C",n,r,s[1],s[2],s[3],s[4]]))})),this};var Vt=gt(mt.exports=Ut),qt={exports:{}};function Zt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function Wt(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function $t(t){return"number"==typeof t&&isFinite(t)}!function(t){var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi,n=function(t){var n=[];return t.replace(i,(function(t,i,r){var s=i.toLowerCase();for(r=o(r),"m"===s&&r.length>2&&(n.push([i].concat(r.splice(0,2))),s="l",i="m"===i?"l":"L");r.length>=0;){if(r.length===e[s])return r.unshift(i),n.push(r);if(r.length<e[s])throw new Error("malformed path data");n.push([i].concat(r.splice(0,e[s])))}})),n},r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function o(t){var e=t.match(r);return e?e.map(Number):[]}var s=function(t,e,i,n,r,o,s,h){return new a(t,e,i,n,r,o,s,h)};function a(t,e,i,n,r,o,s,a){this.a={x:t,y:e},this.b={x:i,y:n},this.c={x:r,y:o},this.d={x:s,y:a},null!=s&&null!=a?(this.getArcLength=w,this.getPoint=f,this.getDerivative=c):(this.getArcLength=d,this.getPoint=u,this.getDerivative=h),this.init()}function h(t,e,i){return{x:2*(1-i)*(t[1]-t[0])+2*i*(t[2]-t[1]),y:2*(1-i)*(e[1]-e[0])+2*i*(e[2]-e[1])}}function c(t,e,i){return u([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],i)}function l(t,e,i,n,r){for(var o=1,s=t/e,a=(t-i(n,r,s))/e;o>.001;){var h=i(n,r,s+a),c=i(n,r,s-a),l=Math.abs(t-h)/e,u=Math.abs(t-c)/e;l<o?(o=l,s+=a):u<o?(o=u,s-=a):a/=2}return s}function u(t,e,i){return{x:(1-i)*(1-i)*t[0]+2*(1-i)*i*t[1]+i*i*t[2],y:(1-i)*(1-i)*e[0]+2*(1-i)*i*e[1]+i*i*e[2]}}function f(t,e,i){return{x:(1-i)*(1-i)*(1-i)*t[0]+3*(1-i)*(1-i)*i*t[1]+3*(1-i)*i*i*t[2]+i*i*i*t[3],y:(1-i)*(1-i)*(1-i)*e[0]+3*(1-i)*(1-i)*i*e[1]+3*(1-i)*i*i*e[2]+i*i*i*e[3]}}function d(t,e,i){void 0===i&&(i=1);var n=t[0]-2*t[1]+t[2],r=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],s=2*e[1]-2*e[0],a=4*(n*n+r*r),h=4*(n*o+r*s),c=o*o+s*s;if(0===a)return i*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var l=h/(2*a),u=i+l,f=c/a-l*l;return Math.sqrt(a)/2*(u*Math.sqrt(u*u+f)-l*Math.sqrt(l*l+f)+f*Math.log(Math.abs((u+Math.sqrt(u*u+f))/(l+Math.sqrt(l*l+f)))))}a.prototype={constructor:a,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=l(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(t){var e=l(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),i=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),n=Math.sqrt(i.x*i.x+i.y*i.y);return n>0?{x:i.x/n,y:i.y/n}:{x:0,y:0}},getPropertiesAtLength:function(t){var e,i=l(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i),r=Math.sqrt(n.x*n.x+n.y*n.y);e=r>0?{x:n.x/r,y:n.y/r}:{x:0,y:0};var o=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i);return{x:o.x,y:o.y,tangentX:e.x,tangentY:e.y}}};var p=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],y=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],x=[[1],[1,1],[1,2,1],[1,3,3,1]];function g(t,e){return x[t][e]}function m(t,e,i){var n,r,o,s=i.length-1;if(0===s)return 0;if(0===t){for(r=0,o=0;o<=s;o++)r+=g(s,o)*Math.pow(1-e,s-o)*Math.pow(e,o)*i[o];return r}for(n=new Array(s),o=0;o<s;o++)n[o]=s*(i[o+1]-i[o]);return m(t-1,e,n)}function v(t,e,i){var n=m(1,i,t),r=m(1,i,e),o=n*n+r*r;return Math.sqrt(o)}function w(t,e,i){var n,r,o,s;void 0===i&&(i=1);var a=20;for(n=i/2,r=0,o=0;o<a;o++)s=n*p[a][o]+n,r+=y[a][o]*v(t,e,s);return n*r}var b=2*Math.PI;function B(t,e,i,n){var r=t*i+e*n;return r>1&&(r=1),r<-1&&(r=-1),(t*n-e*i<0?-1:1)*Math.acos(r)}function A(t,e,i,n,r,o,s,a,h,c){var l=c*(t-i)/2+h*(e-n)/2,u=-h*(t-i)/2+c*(e-n)/2,f=s*s,d=a*a,p=l*l,y=u*u,x=f*d-f*y-d*p;x<0&&(x=0),x/=f*y+d*p;var g=(x=Math.sqrt(x)*(r===o?-1:1))*s/a*u,m=x*-a/s*l,v=c*g-h*m+(t+i)/2,w=h*g+c*m+(e+n)/2,A=(l-g)/s,T=(u-m)/a,k=(-l-g)/s,S=(-u-m)/a,E=B(1,0,A,T),M=B(A,T,k,S);return 0===o&&M>0&&(M-=b),1===o&&M<0&&(M+=b),[v,w,E,M]}function T(t,e){var i=4/3*Math.tan(e/4),n=Math.cos(t),r=Math.sin(t),o=Math.cos(t+e),s=Math.sin(t+e);return[n,r,n-r*i,r+n*i,o+s*i,s-o*i,o,s]}var k=function(t,e,i,n,r,o,s,a,h){var c=Math.sin(r*b/360),l=Math.cos(r*b/360),u=l*(t-a)/2+c*(e-h)/2,f=-c*(t-a)/2+l*(e-h)/2;if(0===u&&0===f)return[];if(0===i||0===n)return[];i=Math.abs(i),n=Math.abs(n);var d=u*u/(i*i)+f*f/(n*n);d>1&&(i*=Math.sqrt(d),n*=Math.sqrt(d));var p=A(t,e,a,h,o,s,i,n,c,l),y=[],x=p[2],g=p[3],m=Math.max(Math.ceil(Math.abs(g)/(b/4)),1);g/=m;for(var v=0;v<m;v++)y.push(T(x,g)),x+=g;return y.map((function(t){for(var e=0;e<t.length;e+=2){var r=t[e+0],o=t[e+1],s=l*(r*=i)-c*(o*=n),a=c*r+l*o;t[e+0]=s+p[0],t[e+1]=a+p[1]}return t}))},S=function(t,e,i,n,r,o,s,a,h){return new E(t,e,i,n,r,o,s,a,h)};function E(t,e,i,n,r,o,a,h,c){var l=0,u=[],f=[];k(t,e,i,n,r,o,a,h,c).forEach((function(t){var e=new s(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),i=e.getTotalLength();l+=i,u.push(i),f.push(e)})),this.length=l,this.partialLengths=u,this.curves=f}E.prototype={constructor:E,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var i=0,n=0;n<e;n++)i+=this.partialLengths[n];return this.curves[e].getPointAtLength(t-i)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var i=0,n=0;n<e;n++)i+=this.partialLengths[n];return this.curves[e].getTangentAtLength(t-i)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),i=this.getPointAtLength(t);return{x:i.x,y:i.y,tangentX:e.x,tangentY:e.y}}};var M=function(t,e,i,n){return new C(t,e,i,n)};function C(t,e,i,n){this.x0=t,this.x1=e,this.y0=i,this.y1=n}C.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},C.prototype.getPointAtLength=function(t){var e=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),i=(this.x1-this.x0)*e,n=(this.y1-this.y0)*e;return{x:this.x0+i,y:this.y0+n}},C.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},C.prototype.getPropertiesAtLength=function(t){var e=this.getPointAtLength(t),i=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:i.x,tangentY:i.y}};var D=function(t){var e=0,i=[],r=[];function o(t){if(!t)return null;for(var a,h,c=n(t),l=[0,0],u=[0,0],f=0;f<c.length;f++)"M"===c[f][0]?(h=[(l=[c[f][1],c[f][2]])[0],l[1]],r.push(null)):"m"===c[f][0]?(h=[(l=[c[f][1]+l[0],c[f][2]+l[1]])[0],l[1]],r.push(null)):"L"===c[f][0]?(e+=Math.sqrt(Math.pow(l[0]-c[f][1],2)+Math.pow(l[1]-c[f][2],2)),r.push(new M(l[0],c[f][1],l[1],c[f][2])),l=[c[f][1],c[f][2]]):"l"===c[f][0]?(e+=Math.sqrt(Math.pow(c[f][1],2)+Math.pow(c[f][2],2)),r.push(new M(l[0],c[f][1]+l[0],l[1],c[f][2]+l[1])),l=[c[f][1]+l[0],c[f][2]+l[1]]):"H"===c[f][0]?(e+=Math.abs(l[0]-c[f][1]),r.push(new M(l[0],c[f][1],l[1],l[1])),l[0]=c[f][1]):"h"===c[f][0]?(e+=Math.abs(c[f][1]),r.push(new M(l[0],l[0]+c[f][1],l[1],l[1])),l[0]=c[f][1]+l[0]):"V"===c[f][0]?(e+=Math.abs(l[1]-c[f][1]),r.push(new M(l[0],l[0],l[1],c[f][1])),l[1]=c[f][1]):"v"===c[f][0]?(e+=Math.abs(c[f][1]),r.push(new M(l[0],l[0],l[1],l[1]+c[f][1])),l[1]=c[f][1]+l[1]):"z"===c[f][0]||"Z"===c[f][0]?(e+=Math.sqrt(Math.pow(h[0]-l[0],2)+Math.pow(h[1]-l[1],2)),r.push(new M(l[0],h[0],l[1],h[1])),l=[h[0],h[1]]):"C"===c[f][0]?(a=new s(l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4],c[f][5],c[f][6]),e+=a.getTotalLength(),l=[c[f][5],c[f][6]],r.push(a)):"c"===c[f][0]?(a=new s(l[0],l[1],l[0]+c[f][1],l[1]+c[f][2],l[0]+c[f][3],l[1]+c[f][4],l[0]+c[f][5],l[1]+c[f][6]),e+=a.getTotalLength(),l=[c[f][5]+l[0],c[f][6]+l[1]],r.push(a)):"S"===c[f][0]?(a=f>0&&["C","c","S","s"].indexOf(c[f-1][0])>-1?new s(l[0],l[1],2*l[0]-c[f-1][c[f-1].length-4],2*l[1]-c[f-1][c[f-1].length-3],c[f][1],c[f][2],c[f][3],c[f][4]):new s(l[0],l[1],l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4]),e+=a.getTotalLength(),l=[c[f][3],c[f][4]],r.push(a)):"s"===c[f][0]?(a=f>0&&["C","c","S","s"].indexOf(c[f-1][0])>-1?new s(l[0],l[1],l[0]+a.d.x-a.c.x,l[1]+a.d.y-a.c.y,l[0]+c[f][1],l[1]+c[f][2],l[0]+c[f][3],l[1]+c[f][4]):new s(l[0],l[1],l[0],l[1],l[0]+c[f][1],l[1]+c[f][2],l[0]+c[f][3],l[1]+c[f][4]),e+=a.getTotalLength(),l=[c[f][3]+l[0],c[f][4]+l[1]],r.push(a)):"Q"===c[f][0]?(a=l[0]!=c[f][1]&&l[1]!=c[f][2]?new s(l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4]):new M(c[f][1],c[f][3],c[f][2],c[f][4]),e+=a.getTotalLength(),r.push(a),l=[c[f][3],c[f][4]],u=[c[f][1],c[f][2]]):"q"===c[f][0]?(a=0!=c[f][1]||0!=c[f][2]?new s(l[0],l[1],l[0]+c[f][1],l[1]+c[f][2],l[0]+c[f][3],l[1]+c[f][4]):new M(l[0]+c[f][1],l[0]+c[f][3],l[1]+c[f][2],l[1]+c[f][4]),e+=a.getTotalLength(),u=[l[0]+c[f][1],l[1]+c[f][2]],l=[c[f][3]+l[0],c[f][4]+l[1]],r.push(a)):"T"===c[f][0]?(a=f>0&&["Q","q","T","t"].indexOf(c[f-1][0])>-1?new s(l[0],l[1],2*l[0]-u[0],2*l[1]-u[1],c[f][1],c[f][2]):new M(l[0],c[f][1],l[1],c[f][2]),r.push(a),e+=a.getTotalLength(),u=[2*l[0]-u[0],2*l[1]-u[1]],l=[c[f][1],c[f][2]]):"t"===c[f][0]?(a=f>0&&["Q","q","T","t"].indexOf(c[f-1][0])>-1?new s(l[0],l[1],2*l[0]-u[0],2*l[1]-u[1],l[0]+c[f][1],l[1]+c[f][2]):new M(l[0],l[0]+c[f][1],l[1],l[1]+c[f][2]),e+=a.getTotalLength(),u=[2*l[0]-u[0],2*l[1]-u[1]],l=[c[f][1]+l[0],c[f][2]+l[0]],r.push(a)):"A"===c[f][0]?(a=new S(l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4],c[f][5],c[f][6],c[f][7]),e+=a.getTotalLength(),l=[c[f][6],c[f][7]],r.push(a)):"a"===c[f][0]&&(a=new S(l[0],l[1],c[f][1],c[f][2],c[f][3],c[f][4],c[f][5],l[0]+c[f][6],l[1]+c[f][7]),e+=a.getTotalLength(),l=[l[0]+c[f][6],l[1]+c[f][7]],r.push(a)),i.push(e);return o}o.getTotalLength=function(){return e},o.getPointAtLength=function(t){var e=a(t);return r[e.i].getPointAtLength(e.fraction)},o.getTangentAtLength=function(t){var e=a(t);return r[e.i].getTangentAtLength(e.fraction)},o.getPropertiesAtLength=function(t){var e=a(t);return r[e.i].getPropertiesAtLength(e.fraction)};var a=function(t){t<0?t=0:t>e&&(t=e);for(var n=i.length-1;i[n]>=t&&i[n]>0;)n--;return n++,{fraction:t-i[n-1],i:n}};return o(t)};t.svgPathProperties=D,t.parse=n,t.Bezier=s,Object.defineProperty(t,"__esModule",{value:!0})}(qt.exports);const Qt='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n';function Jt(t,e){let i=function(t){return new Vt(t).abs()}(t);return function(t){let e=t.segments||[],i=[];if(!e.length||"M"!==e[0][0])return!1;for(let t=0;t<e.length;t++){let[n,r,o]=e[t];if("M"===n&&t||"Z"===n)break;if("M"===n||"L"===n)i.push([r,o]);else if("H"===n)i.push([r,i[i.length-1][1]]);else{if("V"!==n)return!1;i.push([i[i.length-1][0],r])}}return!!i.length&&{ring:i}}(i)||function(t,e){let i,n,r=function(t){return t.toString().split("M").map(((t,e)=>(t=t.trim(),e&&t?"M"+t:t))).filter((t=>t))}(t)[0],o=[],s=3;if(!r)throw new TypeError(Qt);n=function(t){if("undefined"!=typeof window&&window&&window.document)try{let e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e}catch(t){}return qt.exports.svgPathProperties(t)}(r),i=n.getTotalLength(),e&&$t(e)&&e>0&&(s=Math.max(s,Math.ceil(i/e)));for(let t=0;t<s;t++){let e=n.getPointAtLength(i*t/s);o.push([e.x,e.y])}return{ring:o,skipBisect:!0}}(i,e)}function Kt(t,e){const i=t.length+e,n=function(t){for(var e,i,n=-1,r=t.length,o=t[r-1],s=o[0],a=o[1],h=0;++n<r;)e=s,i=a,e-=s=(o=t[n])[0],i-=a=o[1],h+=Math.sqrt(e*e+i*i);return h}(t)/e;let r=0,o=0,s=n/2;for(;t.length<i;){let e=t[r],i=t[(r+1)%t.length],a=Zt(e,i);s<=o+a?(t.splice(r+1,0,a?Wt(e,i,(s-o)/a):e.slice(0)),s+=n):(o+=a,r++)}}function te(t,e){let i,n,r;if("string"==typeof t){let i=Jt(t,e);t=i.ring,r=i.skipBisect}else if(!Array.isArray(t))throw new TypeError(Qt);if(i=t.slice(0),!function(t){return t.every((function(t){return Array.isArray(t)&&t.length>=2&&$t(t[0])&&$t(t[1])}))}(i))throw new TypeError(Qt);return i.length>1&&function(t,e){return Zt(t,e)<1e-9}(i[0],i[i.length-1])&&i.pop(),n=function(t){for(var e,i=-1,n=t.length,r=t[n-1],o=0;++i<n;)e=r,r=t[i],o+=e[1]*r[0]-e[0]*r[1];return o/2}(i),n>0&&i.reverse(),!r&&e&&$t(e)&&e>0&&function(t,e=1/0){for(let i=0;i<t.length;i++){let n=t[i],r=i===t.length-1?t[0]:t[i+1];for(;Zt(n,r)>e;)r=Wt(n,r,.5),t.splice(i+1,0,r)}}(i,e),i}function ee(t,e,{maxSegmentLength:i=10,string:n=!0}={}){let r=function(t,e,i){let n;return n=t.length-e.length,Kt(t,n<0?-1*n:0),Kt(e,n>0?n:0),function(t,e){let i,n,r,o=t.length,s=1/0;for(let r=0;r<o;r++)n=0,e.forEach((function(e,i){let s=Zt(t[(r+i)%o],e);n+=s*s})),n<s&&(s=n,i=r);i&&(r=t.splice(0,i),t.splice(t.length,0,...r))}(t,e),function(t,e,i){let n=t.map(((t,i)=>function(t,e){return function(i){return t.map(((t,n)=>t+i*(e[n]-t)))}}(t,e[i])));return function(t){let e=n.map((e=>e(t)));return i?"M"+e.join("L")+"Z":e}}(t,e,i)}(te(t,i),te(e,i),n);return!n||"string"!=typeof t&&"string"!=typeof e?r:i=>i<1e-4&&"string"==typeof t?t:1-i<1e-4&&"string"==typeof e?e:r(i)}var ie,ne,re={exports:{}};function oe(t,e,i){i=i||2;var n,r,o,s,a,h,c,l=e&&e.length,u=l?e[0]*i:t.length,f=se(t,0,u,i,!0),d=[];if(!f||f.next===f.prev)return d;if(l&&(f=function(t,e,i,n){var r,o,s,a=[];for(r=0,o=e.length;r<o;r++)(s=se(t,e[r]*n,r<o-1?e[r+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),a.push(ge(s));for(a.sort(de),r=0;r<a.length;r++)i=pe(a[r],i);return i}(t,e,f,i)),t.length>80*i){n=o=t[0],r=s=t[1];for(var p=i;p<u;p+=i)(a=t[p])<n&&(n=a),(h=t[p+1])<r&&(r=h),a>o&&(o=a),h>s&&(s=h);c=0!==(c=Math.max(o-n,s-r))?32767/c:0}return he(f,d,i,n,r,c,0),d}function se(t,e,i,n,r){var o,s;if(r===De(t,e,i,n)>0)for(o=e;o<i;o+=n)s=Ee(o,t[o],t[o+1],s);else for(o=i-n;o>=e;o-=n)s=Ee(o,t[o],t[o+1],s);return s&&be(s,s.next)&&(Me(s),s=s.next),s}function ae(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!be(n,n.next)&&0!==we(n.prev,n,n.next))n=n.next;else{if(Me(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function he(t,e,i,n,r,o,s){if(t){!s&&o&&function(t,e,i,n){var r=t;do{0===r.z&&(r.z=xe(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,s,a,h,c=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<c&&(a++,n=n.nextZ);e++);for(h=c;a>0||h>0&&n;)0!==a&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(s>1)}(r)}(t,n,r,o);for(var a,h,c=t;t.prev!==t.next;)if(a=t.prev,h=t.next,o?le(t,n,r,o):ce(t))e.push(a.i/i|0),e.push(t.i/i|0),e.push(h.i/i|0),Me(t),t=h.next,c=h.next;else if((t=h)===c){s?1===s?he(t=ue(ae(t),e,i),e,i,n,r,o,2):2===s&&fe(t,e,i,n,r,o):he(ae(t),e,i,n,r,o,1);break}}}function ce(t){var e=t.prev,i=t,n=t.next;if(we(e,i,n)>=0)return!1;for(var r=e.x,o=i.x,s=n.x,a=e.y,h=i.y,c=n.y,l=r<o?r<s?r:s:o<s?o:s,u=a<h?a<c?a:c:h<c?h:c,f=r>o?r>s?r:s:o>s?o:s,d=a>h?a>c?a:c:h>c?h:c,p=n.next;p!==e;){if(p.x>=l&&p.x<=f&&p.y>=u&&p.y<=d&&me(r,a,o,h,s,c,p.x,p.y)&&we(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function le(t,e,i,n){var r=t.prev,o=t,s=t.next;if(we(r,o,s)>=0)return!1;for(var a=r.x,h=o.x,c=s.x,l=r.y,u=o.y,f=s.y,d=a<h?a<c?a:c:h<c?h:c,p=l<u?l<f?l:f:u<f?u:f,y=a>h?a>c?a:c:h>c?h:c,x=l>u?l>f?l:f:u>f?u:f,g=xe(d,p,e,i,n),m=xe(y,x,e,i,n),v=t.prevZ,w=t.nextZ;v&&v.z>=g&&w&&w.z<=m;){if(v.x>=d&&v.x<=y&&v.y>=p&&v.y<=x&&v!==r&&v!==s&&me(a,l,h,u,c,f,v.x,v.y)&&we(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,w.x>=d&&w.x<=y&&w.y>=p&&w.y<=x&&w!==r&&w!==s&&me(a,l,h,u,c,f,w.x,w.y)&&we(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;v&&v.z>=g;){if(v.x>=d&&v.x<=y&&v.y>=p&&v.y<=x&&v!==r&&v!==s&&me(a,l,h,u,c,f,v.x,v.y)&&we(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;w&&w.z<=m;){if(w.x>=d&&w.x<=y&&w.y>=p&&w.y<=x&&w!==r&&w!==s&&me(a,l,h,u,c,f,w.x,w.y)&&we(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function ue(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!be(r,o)&&Be(r,n,n.next,o)&&ke(r,o)&&ke(o,r)&&(e.push(r.i/i|0),e.push(n.i/i|0),e.push(o.i/i|0),Me(n),Me(n.next),n=t=o),n=n.next}while(n!==t);return ae(n)}function fe(t,e,i,n,r,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&ve(s,a)){var h=Se(s,a);return s=ae(s,s.next),h=ae(h,h.next),he(s,e,i,n,r,o,0),void he(h,e,i,n,r,o,0)}a=a.next}s=s.next}while(s!==t)}function de(t,e){return t.x-e.x}function pe(t,e){var i=function(t,e){var i,n=e,r=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,i=n.x<n.next.x?n:n.next,a===r))return i}n=n.next}while(n!==e);if(!i)return null;var h,c=i,l=i.x,u=i.y,f=1/0;n=i;do{r>=n.x&&n.x>=l&&r!==n.x&&me(o<u?r:s,o,l,u,o<u?s:r,o,n.x,n.y)&&(h=Math.abs(o-n.y)/(r-n.x),ke(n,t)&&(h<f||h===f&&(n.x>i.x||n.x===i.x&&ye(i,n)))&&(i=n,f=h)),n=n.next}while(n!==c);return i}(t,e);if(!i)return e;var n=Se(i,t);return ae(n,n.next),ae(i,i.next)}function ye(t,e){return we(t.prev,t,e.prev)<0&&we(e.next,t,t.next)<0}function xe(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ge(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function me(t,e,i,n,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(n-a)>=(i-s)*(e-a)&&(i-s)*(o-a)>=(r-s)*(n-a)}function ve(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Be(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(ke(t,e)&&ke(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(we(t.prev,t,e.prev)||we(t,e.prev,e))||be(t,e)&&we(t.prev,t,t.next)>0&&we(e.prev,e,e.next)>0)}function we(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function be(t,e){return t.x===e.x&&t.y===e.y}function Be(t,e,i,n){var r=Te(we(t,e,i)),o=Te(we(t,e,n)),s=Te(we(i,n,t)),a=Te(we(i,n,e));return r!==o&&s!==a||(!(0!==r||!Ae(t,i,e))||(!(0!==o||!Ae(t,n,e))||(!(0!==s||!Ae(i,t,n))||!(0!==a||!Ae(i,e,n)))))}function Ae(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Te(t){return t>0?1:t<0?-1:0}function ke(t,e){return we(t.prev,t,t.next)<0?we(t,e,t.next)>=0&&we(t,t.prev,e)>=0:we(t,e,t.prev)<0||we(t,t.next,e)<0}function Se(t,e){var i=new Ce(t.i,t.x,t.y),n=new Ce(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function Ee(t,e,i,n){var r=new Ce(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Me(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ce(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function De(t,e,i,n){for(var r=0,o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}function Pe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}re.exports=oe,re.exports.default=oe,oe.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,s=Math.abs(De(t,0,o,i));if(r)for(var a=0,h=e.length;a<h;a++){var c=e[a]*i,l=a<h-1?e[a+1]*i:t.length;s-=Math.abs(De(t,c,l,i))}var u=0;for(a=0;a<n.length;a+=3){var f=n[a]*i,d=n[a+1]*i,p=n[a+2]*i;u+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},oe.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i},1===(ie=Pe).length&&(ne=ie,ie=function(t,e){return Pe(ne(t),e)});let _e=0;const Ie=R,Le=g,ze=K;function Oe(t,e,i,n){let{minX:r,minY:o,maxX:s,maxY:a}=i;if(-1!==["V","H","L","v","h","l"].indexOf(t.type))[t.p0?t.p0:e.p1,t.p1].forEach((function(t){t.x<r&&(r=t.x),t.x>s&&(s=t.x),t.y<o&&(o=t.y),t.y>a&&(a=t.y)}));else if(-1!==["Q","C","q","c"].indexOf(t.type)){const e=Ie.cubicBezierCoefficients(t),i=Ie.cubicBezierTransition.bind(null,t.p0,e);let n,h=0;for(;h<1;)n=i(h),h+=.05,n.x<r&&(r=n.x),n.x>s&&(s=n.x),n.y<o&&(o=n.y),n.y>a&&(a=n.y)}else{const e=t.p0;e.x<r&&(r=e.x),e.x>s&&(s=e.x),e.y<o&&(o=e.y),e.y>a&&(a=e.y)}i.minX=r,i.minY=o,i.maxX=s,i.maxY=a,n.x=r,n.y=o,n.width=s-r,n.height=a-o}function Fe(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Ne(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Re(t,e,i){return t?i:e}function je(t){this.stack=[],this.length=0,this.stackGroup=[],this.BBox={x:0,y:0,width:0,height:0},this.minMax={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},t&&this.parse(t)}function Ge(t){return["S","C","V","L","H","Q"].indexOf(t)>-1}je.prototype={z:function(){return this.cp=this.start,this.segmentLength=Ie.getDistance(this.pp,this.cp),this.stack.push({p0:this.pp,p1:this.cp,type:"Z",length:this.segmentLength,pointAt(t){return Ie.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Oe(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},m:function(t,e){const i=Re(t,this.pp?this.pp:{x:0,y:0},{x:0,y:0});return this.cntrl=null,this.cp=Fe(e,i),this.start=this.cp,this.segmentLength=0,this.length=this.segmentLength,0!==this.currPathArr&&this.pp?(this.stackGroup.push(this.stack),this.stack=[]):this.stackGroup.push(this.stack),this.stack.push({type:"M",p0:this.cp,length:this.segmentLength,pointAt(t){return this.p0}}),this.pp=this.cp,Oe(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},v:function(t,e){const i=Re(t,this.pp,{x:this.pp.x,y:0});return this.cntrl=null,this.cp=Fe(e,i),this.segmentLength=Ie.getDistance(this.pp,this.cp),this.stack.push({type:"V",p0:this.pp,p1:this.cp,length:this.segmentLength,pointAt(t){return Ie.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Oe(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},h:function(t,e){const i=Re(t,this.pp,{x:0,y:this.pp.y});return this.cp=Fe(e,i),this.cntrl=null,this.segmentLength=Ie.getDistance(this.pp,this.cp),this.stack.push({type:t?"H":"h",p0:this.pp,p1:this.cp,length:this.segmentLength,relative:{p1:e},pointAt(t){return Ie.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Oe(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},l:function(t,e){const i=Re(t,this.pp,{x:0,y:0});return this.cntrl=null,this.cp=Fe(e,i),this.segmentLength=Ie.getDistance(this.pp,this.cp),this.stack.push({type:t?"L":"l",p0:this.pp,p1:this.cp,relative:{p1:e},length:this.segmentLength,pointAt(t){return Ie.linearTransitionBetweenPoints(this.p0,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Oe(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},q:function(t,e,i){const n=Re(t,this.pp,{x:0,y:0}),r=Fe(e,n),o=Fe(i,n);return this.cp=o,this.segmentLength=Ie.bezierLength(this.pp,r,this.cp),this.cp=o,this.stack.push({type:t?"Q":"q",p0:this.pp,cntrl1:r,cntrl2:r,p1:this.cp,relative:{cntrl1:e,p1:i},length:this.segmentLength,pointAt(t){return Ie.bezierTransition(this.p0,this.cntrl1,this.p1,t)}}),this.length+=this.segmentLength,this.pp=this.cp,this.cntrl=r,Oe(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this},s:function(t,e,i){const n=Re(t,this.pp,{x:0,y:0}),r=Fe(e,n),o=this.cntrl?Fe(this.pp,Ne(this.pp,this.cntrl?this.cntrl:this.pp)):r,s=Fe(i,n);this.cp=s;const a=Ie.cubicBezierCoefficients({p0:this.pp,cntrl1:o,cntrl2:r,p1:s});return this.segmentLength=Ie.cubicBezierLength(this.pp,a),this.stack.push({type:t?"S":"s",p0:this.pp,cntrl1:o,cntrl2:r,p1:this.cp,co:a,length:this.segmentLength,relative:{cntrl2:e,p1:i},pointAt(t){return Ie.cubicBezierTransition(this.p0,this.co,t)}}),Oe(this.stack[this.stack.length-1],this.stack[this.stack.length-2],this.minMax,this.BBox),this.length+=this.segmentLength,this.pp=this.cp,this.cntrl=r,this},c:function(t,e,i,n){const r=this,o=Re(t,this.pp,{x:0,y:0}),s=Fe(e,o),a=Fe(i,o),h=Fe(n,o),c=Ie.cubicBezierCoefficients({p0:this.pp,cntrl1:s,cntrl2:a,p1:h});return this.cntrl=a,this.cp=h,this.segmentLength=Ie.cubicBezierLength(this.pp,c),this.stack.push({type:t?"C":"c",p0:this.pp,cntrl1:s,cntrl2:a,p1:this.cp,length:this.segmentLength,co:c,relative:{cntrl1:e,cntrl2:i,p1:n},pointAt(t){return Ie.cubicBezierTransition(this.p0,this.co,t)}}),this.length+=this.segmentLength,this.pp=this.cp,Oe(r.stack[r.stack.length-1],r.stack[r.stack.length-2],r.minMax,r.BBox),this},a:function(t,e,i,n,r,o,s){const a=Re(t,this.pp,{x:0,y:0}),h=this,c=Fe(s,a);this.cp=c;const l=Ie.arcToBezier({px:this.pp.x,py:this.pp.y,cx:c.x,cy:c.y,rx:e,ry:i,xAxisRotation:n,largeArcFlag:r,sweepFlag:o});return l.forEach(((t,e)=>{const i=0===e?h.pp:{x:l[0].x,y:l[0].y},n={x:t.x1,y:t.y1},r={x:t.x2,y:t.y2},o={x:t.x,y:t.y},s=Ie.cubicBezierLength(i,Ie.cubicBezierCoefficients({p0:i,cntrl1:n,cntrl2:r,p1:o}));h.stack.push({type:"C",p0:i,cntrl1:n,cntrl2:r,p1:o,length:s,pointAt(t){return Ie.bezierTransition(this.p0,this.cntrl1,this.cntrl2,this.p1,t)}}),h.length+=s,Oe(h.stack[h.stack.length-1],h.stack[h.stack.length-2],h.minMax,h.BBox)})),this.pp=this.cp,this.cntrl=null,this},fetchXY:function(){return{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:parseFloat(this.pathArr[this.currPathArr+=1])}}},je.prototype.points=function(t){if(void 0===this.f&&(this.f=.3),void 0===this.t&&(this.t=.6),0===t.length)return;this.m(!0,{x:t[0].x,y:t[0].y});var e=0,i=0,n=0;let r=0,o=0;for(var s=t[0],a=1;a<t.length;a++){var h=t[a],c=t[a+1];r=0,o=0,c&&(e=(c.y-s.y)/(c.x-s.x),r=(c.x-h.x)*-this.f,o=r*e*this.t),this.c(!0,{x:s.x-i,y:s.y-n},{x:h.x+r,y:h.y+o},{x:h.x,y:h.y}),i=r,n=o,s=h}},je.prototype.curveFfactor=function(t){this.f=t},je.prototype.curveTfactor=function(t){this.t=t},je.prototype.parse=function(t){for(this.path=t,this.currPathArr=-1,this.stack=[],this.length=0,this.pathArr=function(t){let e=t.replace(/e-/g,"$");e=e.replace(/ /g,","),e=e.replace(/-/g,",-"),e=e.split(/([a-zA-Z,])/g).filter((t=>""!==t&&","!==t)).map((t=>t.replace(/\$/g,"e-")));for(let t=0;t<e.length;t+=1)if(e[t].split(".").length>2){const i=e[t].split("."),n=[`${i[0]}.${i[1]}`];for(let t=2;t<i.length;t+=1)n.push(`.${i[t]}`);e.splice(t,1,n[0],n[1])}return e}(this.path),this.stackGroup=[];this.currPathArr<this.pathArr.length-1;)this.case(this.pathArr[this.currPathArr+=1]);return this.stack},je.prototype.fetchPathString=function(){let t,e="";for(let i=0;i<this.stack.length;i++)t=this.stack[i],"M"===t.type||"m"===t.type?e+=t.type+" "+t.p0.x+","+t.p0.y+" ":"Z"===t.type||"z"===t.type?e+="z":"C"===t.type?e+=t.type+" "+t.cntrl1.x+","+t.cntrl1.y+" "+t.cntrl2.x+","+t.cntrl2.y+" "+t.p1.x+","+t.p1.y+" ":"c"===t.type?e+=t.type+" "+t.relative.cntrl1.x+","+t.relative.cntrl1.y+" "+t.relative.cntrl2.x+","+t.relative.cntrl2.y+" "+t.relative.p1.x+","+t.relative.p1.y+" ":"Q"===t.type?e+=t.type+" "+t.cntrl1.x+","+t.cntrl1.y+" "+t.p1.x+","+t.p1.y+" ":"q"===t.type?e+=t.type+" "+t.relative.cntrl1.x+","+t.relative.cntrl1.y+" "+t.relative.p1.x+","+t.relative.p1.y+" ":"S"===t.type?e+=t.type+" "+t.cntrl2.x+","+t.cntrl2.y+" "+t.p1.x+","+t.p1.y+" ":"s"===t.type?e+=t.type+" "+t.relative.cntrl2.x+","+t.relative.cntrl2.y+" "+t.relative.p1.x+","+t.relative.p1.y+" ":"V"===t.type?e+=t.type+" "+t.p1.y+" ":"v"===t.type?e+=t.type+" "+t.relative.p1.y+" ":"H"===t.type?e+=t.type+" "+t.p1.x+" ":"h"===t.type?e+=t.type+" "+t.relative.p1.x+" ":"L"===t.type?e+=t.type+" "+t.p1.x+","+t.p1.y+" ":"l"===t.type&&(e+=t.type+" "+t.relative.p1.x+","+t.relative.p1.y+" ");return e},je.prototype.getTotalLength=function(){return this.length},je.prototype.getAngleAtLength=function(t,e){if(t>this.length)return null;const i=this.getPointAtLength(t),n=this.getPointAtLength(t+("src"===e?-1*t*.01:.01*t));return Math.atan2(n.y-i.y,n.x-i.x)},je.prototype.getPointAtLength=function(t){let e={x:0,y:0},i=t;return this.stack.every(((t,n)=>(i-=t.length,Math.floor(i)>=0||(e=t.pointAt((t.length+i)/(0===t.length?1:t.length)),!1)))),e},je.prototype.execute=function(t,e){let i;e||t.beginPath();for(let e=0;e<this.stack.length;e++)switch(i=this.stack[e],i.type){case"M":case"m":t.moveTo(i.p0.x,i.p0.y);break;case"Z":case"z":case"L":case"l":case"V":case"v":case"H":case"h":t.lineTo(i.p1.x,i.p1.y);break;case"C":case"c":case"S":case"s":t.bezierCurveTo(i.cntrl1.x,i.cntrl1.y,i.cntrl2.x,i.cntrl2.y,i.p1.x,i.p1.y);break;case"Q":case"q":t.quadraticCurveTo(i.cntrl1.x,i.cntrl1.y,i.p1.x,i.p1.y)}e||t.closePath()},je.prototype.getPoints=function(t=.01){const e=[];let i;for(let t=0;t<this.stack.length;t++){i=this.stack[t];const n=.05;let r=0;switch(i.type){case"M":case"m":e[e.length]=i.p0.x,e[e.length]=i.p0.y;break;case"Z":case"z":case"L":case"l":case"V":case"v":case"H":case"h":e[e.length]=i.p1.x,e[e.length]=i.p1.y;break;case"C":case"c":case"S":case"s":case"Q":case"q":for(;r<=1;){const t=i.pointAt(r);e[e.length]=t.x,e[e.length]=t.y,r+=n}}}return e},je.prototype.case=function(t){let e,i,n,r,o,s=t;switch(-1!==["m","M","v","V","l","L","h","H","q","Q","c","C","s","S","a","A","z","Z"].indexOf(s)?this.PC=s:(s=this.PC,this.currPathArr=this.currPathArr-1),s){case"m":this.m(!1,this.fetchXY());break;case"M":this.m(!0,this.fetchXY());break;case"v":this.v(!1,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"V":this.v(!0,{x:0,y:parseFloat(this.pathArr[this.currPathArr+=1])});break;case"l":this.l(!1,this.fetchXY());break;case"L":this.l(!0,this.fetchXY());break;case"h":this.h(!1,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"H":this.h(!0,{x:parseFloat(this.pathArr[this.currPathArr+=1]),y:0});break;case"q":this.q(!1,this.fetchXY(),this.fetchXY());break;case"Q":this.q(!0,this.fetchXY(),this.fetchXY());break;case"c":this.c(!1,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"C":this.c(!0,this.fetchXY(),this.fetchXY(),this.fetchXY());break;case"s":this.s(!1,this.fetchXY(),this.fetchXY());break;case"S":this.s(!0,this.fetchXY(),this.fetchXY());break;case"a":e=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),r=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),this.a(!1,e,i,n,r,o,this.fetchXY());break;case"A":e=parseFloat(this.pathArr[this.currPathArr+=1]),i=parseFloat(this.pathArr[this.currPathArr+=1]),n=parseFloat(this.pathArr[this.currPathArr+=1]),r=parseFloat(this.pathArr[this.currPathArr+=1]),o=parseFloat(this.pathArr[this.currPathArr+=1]),this.a(!0,e,i,n,r,o,this.fetchXY());break;case"z":case"Z":this.z()}};const Xe=function(t,e,i,n,r,o){this.type=t,this.p0=e,this.c1_src=i,this.c2_src=n,this.co=r,this.length_src=o};Xe.prototype.execute=function(t){const e=this.co,i=this.p0,n=this.c1_src,r=this.c2_src,o={x:i.x+(n.x-i.x)*t,y:i.y+(n.y-i.y)*t},s=n.x+(r.x-n.x)*t,a=n.y+(r.y-n.y)*t;return this.cntrl1=o,this.cntrl2={x:o.x+(s-o.x)*t,y:o.y+(a-o.y)*t},this.p1={x:e.ax*Ie.pow(t,3)+e.bx*Ie.pow(t,2)+e.cx*t+i.x,y:e.ay*Ie.pow(t,3)+e.by*Ie.pow(t,2)+e.cy*t+i.y},this.length=this.length_src*t,this.relative={cntrl1:Ge(this.type)?this.cntrl1:Ne(this.cntrl1,this.p0),cntrl2:Ge(this.type)?this.cntrl2:Ne(this.cntrl2,this.p0),p1:Ge(this.type)?this.p1:Ne(this.p1,this.p0)},this},Xe.prototype.pointAt=function(t){return Ie.cubicBezierTransition(this.p0,this.co,t)};const Ye=function(t,e,i,n,r,o){this.type=t,this.p0=e,this.p1_src=i,this.p2_src=n,this.length_src=r,this.length=0};Ye.prototype.execute=function(t){const e=this.p0,i=this.p1_src,n=this.p2_src;return this.length=this.length_src*t,this.cntrl1={x:e.x+(i.x-e.x)*t,y:e.y+(i.y-e.y)*t},this.cntrl2=this.cntrl1,this.p1={x:(e.x-2*i.x+n.x)*t*t+(2*i.x-2*e.x)*t+e.x,y:(e.y-2*i.y+n.y)*t*t+(2*i.y-2*e.y)*t+e.y},this.relative={cntrl1:Ge(this.type)?this.cntrl1:Ne(this.cntrl1,this.p0),p1:Ge(this.type)?this.p1:Ne(this.p1,this.p0)},this},Ye.prototype.pointAt=function(t){return Ie.bezierTransition(this.p0,this.cntrl1,this.p1,t)};const He=function(t,e,i,n,r){this.type=t,this.p0=e,this.p1=e,this.p2_src=i,this.length_src=n,this.length=0};function Ue(t){return t instanceof je}He.prototype.execute=function(t){const e=this.p0,i=this.p2_src;return this.p1={x:e.x+(i.x-e.x)*t,y:e.y+(i.y-e.y)*t},this.length=this.length_src*t,this.relative={p1:Ge(this.type)?this.p1:Ne(this.p1,this.p0)},this},He.prototype.pointAt=function(t){return Ie.linearTransitionBetweenPoints(this.p0,this.p1,t)};var Ve={instance:function(t){return new je(t)},isTypePath:Ue,animatePathTo:function(t,e){const i=this,{duration:n,ease:r,end:o,loop:s,direction:a,attr:h}=t,c=(e||i)?.attr?.d??(h.d||"");let l=0;if(i.arrayStack=[],!c)throw Error("Path Not defined");const u=xt.sequenceChain(),f=Ue(c)?c:new je(c),d=f.stackGroup.reduce(((t,e)=>t=t.concat(e)),[]),p=[];for(let t=0;t<d.length;t+=1)if("Z"===d[t].type||"z"===d[t].type)p.push({run(t){f.stack.length=this.id+1,f.stack[this.id]=this.render.execute(t),i.setAttr("d",f)},target:i,id:t,render:new He(d[t].type,d[t].p0,d[0].p0,d[t].segmentLength),length:d[t].length}),l+=0;else if(-1!==["V","v","H","h","L","l"].indexOf(d[t].type))p.push({run(t){f.stack.length=this.id+1,f.stack[this.id]=this.render.execute(t),i.setAttr("d",f)},target:i,id:t,render:new He(d[t].type,d[t].p0,d[t].p1,d[t].length),length:d[t].length}),l+=d[t].length;else if("Q"===d[t].type||"q"===d[t].type)p.push({run(t){f.stack.length=this.id+1,f.stack[this.id]=this.render.execute(t),i.setAttr("d",f)},target:i,id:t,render:new Ye(d[t].type,d[t].p0,d[t].cntrl1,d[t].p1,d[t].length),length:d[t].length}),l+=d[t].length;else if("C"===d[t].type||"S"===d[t].type||"c"===d[t].type||"s"===d[t].type){const e=Ie.cubicBezierCoefficients(d[t]);p.push({run(t){f.stack.length=this.id+1,f.stack[this.id]=this.render.execute(t),i.setAttr("d",f)},target:i,id:t,co:e,render:new Xe(d[t].type,d[t].p0,d[t].cntrl1,d[t].cntrl2,e,d[t].length),length:d[t].length}),l+=d[t].length}else"M"!==d[t].type&&"m"!==d[t].type||(p.push({run(){f.stack.length=this.id+1,f.stack[this.id]={type:"M",p0:d[t].p0,length:0,pointAt(t){return this.p0}}},target:i,id:t,length:0}),l+=0);return p.forEach((function(t){t.duration=t.length/l*n})),u.add(p).ease(r).loop(s||0).direction(a||"default"),"function"==typeof o&&u.end(o.bind(i)),u.commit(),this},morphTo:function(t){const e=this,{duration:i}=t,{ease:n}=t,r=t.loop?t.loop:0,o=t.direction?t.direction:"default",s=t.attr.d?t.attr.d:e.attr.d,a=ee(Ue(e.attr.d)?e.attr.d.fetchPathString():e.attr.d,Ue(s)?s.fetchPathString():s,{maxSegmentLength:25});Le.add((_e+=1,"morph_"+_e),{run(t){e.setAttr("d",a(t))},target:e,duration:i,loop:r,direction:o},ze(n))}};const qe={AliceBlue:"f0f8ff",AntiqueWhite:"faebd7",Aqua:"00ffff",Aquamarine:"7fffd4",Azure:"f0ffff",Beige:"f5f5dc",Bisque:"ffe4c4",Black:"000000",BlanchedAlmond:"ffebcd",Blue:"0000ff",BlueViolet:"8a2be2",Brown:"a52a2a",BurlyWood:"deb887",CadetBlue:"5f9ea0",Chartreuse:"7fff00",Chocolate:"d2691e",Coral:"ff7f50",CornflowerBlue:"6495ed",Cornsilk:"fff8dc",Crimson:"dc143c",Cyan:"00ffff",DarkBlue:"00008b",DarkCyan:"008b8b",DarkGoldenRod:"b8860b",DarkGray:"a9a9a9",DarkGrey:"a9a9a9",DarkGreen:"006400",DarkKhaki:"bdb76b",DarkMagenta:"8b008b",DarkOliveGreen:"556b2f",DarkOrange:"ff8c00",DarkOrchid:"9932cc",DarkRed:"8b0000",DarkSalmon:"e9967a",DarkSeaGreen:"8fbc8f",DarkSlateBlue:"483d8b",DarkSlateGray:"2f4f4f",DarkSlateGrey:"2f4f4f",DarkTurquoise:"00ced1",DarkViolet:"9400d3",DeepPink:"ff1493",DeepSkyBlue:"00bfff",DimGray:"696969",DimGrey:"696969",DodgerBlue:"1e90ff",FireBrick:"b22222",FloralWhite:"fffaf0",ForestGreen:"228b22",Fuchsia:"ff00ff",Gainsboro:"dcdcdc",GhostWhite:"f8f8ff",Gold:"ffd700",GoldenRod:"daa520",Gray:"808080",Grey:"808080",Green:"008000",GreenYellow:"adff2f",HoneyDew:"f0fff0",HotPink:"ff69b4",IndianRed:"cd5c5c",Indigo:"4b0082",Ivory:"fffff0",Khaki:"f0e68c",Lavender:"e6e6fa",LavenderBlush:"fff0f5",LawnGreen:"7cfc00",LemonChiffon:"fffacd",LightBlue:"add8e6",LightCoral:"f08080",LightCyan:"e0ffff",LightGoldenRodYellow:"fafad2",LightGray:"d3d3d3",LightGrey:"d3d3d3",LightGreen:"90ee90",LightPink:"ffb6c1",LightSalmon:"ffa07a",LightSeaGreen:"20b2aa",LightSkyBlue:"87cefa",LightSlateGray:"778899",LightSlateGrey:"778899",LightSteelBlue:"b0c4de",LightYellow:"ffffe0",Lime:"00ff00",LimeGreen:"32cd32",Linen:"faf0e6",Magenta:"ff00ff",Maroon:"800000",MediumAquaMarine:"66cdaa",MediumBlue:"0000cd",MediumOrchid:"ba55d3",MediumPurple:"9370db",MediumSeaGreen:"3cb371",MediumSlateBlue:"7b68ee",MediumSpringGreen:"00fa9a",MediumTurquoise:"48d1cc",MediumVioletRed:"c71585",MidnightBlue:"191970",MintCream:"f5fffa",MistyRose:"ffe4e1",Moccasin:"ffe4b5",NavajoWhite:"ffdead",Navy:"000080",OldLace:"fdf5e6",Olive:"808000",OliveDrab:"6b8e23",Orange:"ffa500",OrangeRed:"ff4500",Orchid:"da70d6",PaleGoldenRod:"eee8aa",PaleGreen:"98fb98",PaleTurquoise:"afeeee",PaleVioletRed:"db7093",PapayaWhip:"ffefd5",PeachPuff:"ffdab9",Peru:"cd853f",Pink:"ffc0cb",Plum:"dda0dd",PowderBlue:"b0e0e6",Purple:"800080",RebeccaPurple:"663399",Red:"ff0000",RosyBrown:"bc8f8f",RoyalBlue:"4169e1",SaddleBrown:"8b4513",Salmon:"fa8072",SandyBrown:"f4a460",SeaGreen:"2e8b57",SeaShell:"fff5ee",Sienna:"a0522d",Silver:"c0c0c0",SkyBlue:"87ceeb",SlateBlue:"6a5acd",SlateGray:"708090",SlateGrey:"708090",Snow:"fffafa",SpringGreen:"00ff7f",SteelBlue:"4682b4",Tan:"d2b48c",Teal:"008080",Thistle:"d8bfd8",Tomato:"ff6347",Turquoise:"40e0d0",Violet:"ee82ee",Wheat:"f5deb3",White:"ffffff",WhiteSmoke:"f5f5f5",Yellow:"ffff00",YellowGreen:"9acd32"},Ze=Math.round;function We(t,e,i,n){this.r=t,this.g=e,this.b=i,this.a=void 0===n?255:n,this.rgba=`rgba(${t},${e},${i},${n})`}function $e(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((t,e,i,n)=>e+e+i+i+n+n));const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return new We(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255)}function Qe(t){const e=t.replace(/[^0-9.,]+/g,"").split(","),i={},n=["r","g","b","a"];for(let t=0;t<e.length;t+=1)i[n[t]]=parseFloat(e[t]);return new We(i.r,i.g,i.b,i.a)}function Je(t){var e,i,n,r,o,s,a;const h=t.replace(/[^0-9.,]+/g,"").split(",").map((function(t){return parseFloat(t)}));if(o=h[0]/360,s=h[1]/100,a=h[2]/100,r=h[3],0===s)e=i=n=a;else{var c=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},l=a<.5?a*(1+s):a+s-a*s,u=2*a-l;e=255*c(u,l,o+1/3),i=255*c(u,l,o),n=255*c(u,l,o-1/3)}return new We(e,i,n,r)}function Ke(t){return t instanceof We?t:t.startsWith("#")?$e(t):t.startsWith("rgb")?Qe(t):t.startsWith("hsl")?Je(t):{r:0,g:0,b:0,a:255}}We.prototype.normalize=function(){return this.normalFlag||(this.r/=255,this.g/=255,this.b/=255,this.a/=255,this.normalFlag=!0),this};var ti={nameToHex:function(t){return qe[t]?`#${qe[t]}`:"#000"},hexToRgb:$e,rgbToHex:function(t){const e=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")).split(",");return`#${((1<<24)+(parseInt(e[0],10)<<16)+(parseInt(e[1],10)<<8)+parseInt(e[2],10)).toString(16).slice(1)}`},hslToRgb:Je,transition:function(t,e){return e=e||"rgba(0,0,0,0)",t=Ke(t=t||"rgba(0,0,0,0)"),e=Ke(e),function(i){return new We(Ze(t.r+(e.r-t.r)*i),Ze(t.g+(e.g-t.g)*i),Ze(t.b+(e.b-t.b)*i),Ze(t.a+(e.a-t.a)*i))}},colorToRGB:Ke,rgba:function(t,e,i,n){return new We(t,e,i,n)},isTypeColor:function(t){return t instanceof We||t.startsWith("#")||t.startsWith("rgb")||t.startsWith("hsl")},RGBAInstanceCheck:function(t){return t instanceof We},colorToRGBPdf:function(t){const e=t instanceof We?t:t.startsWith("#")?$e(t):t.startsWith("rgb")?Qe(t):t.startsWith("hsl")?Je(t):{r:0,g:0,b:0,a:255};return[e.r,e.g,e.b]}};function ei(t){this.vDom=t,this.disable=!1,this.dragNode=null,this.touchNode=null,this.wheelNode=null,this.pointers=[]}function ii(t,e,i){if(t.dom.parent)return t.dom.parent.events[e]&&t.dom.parent.events[e](t.dom.parent,i),ii(t.dom.parent,e,i)}let ni;ei.prototype.getNode=function(t){},ei.prototype.addPointer=function(t){this.pointers.push(t)},ei.prototype.removePointer=function(t){const e=this,i=this.pointers;let n=-1;for(var r=0;r<i.length;r++)if(t.pointerId===i[r].pointerId){n=r;break}-1!==n&&(e.pointers=[],e.distance=0,this.pointerNode&&this.pointerNode.node.events.zoom&&this.pointerNode.node.events.zoom.onZoomEnd(this.pointerNode.node,t,e))},ei.prototype.clickCheck=function(t){si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"click")},ei.prototype.dblclickCheck=function(t){si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"dblclick")},ei.prototype.pointerdownCheck=function(t){const e=this,i=si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"pointerdown");!i||this.pointerNode&&this.pointerNode.node===i?this.pointerNode&&(this.pointerNode.clickCounter+=1):this.pointerNode={node:i,clickCounter:1,dragCounter:0},i&&(i.events.zoom||i.events.drag)?(i.events.zoom&&i.events.zoom.panFlag&&i.events.zoom.panExecute(i,t,"pointerdown",e),i.events.drag&&i.events.drag.execute(i,t,"pointerdown",e)):i&&"touch"===t.pointerType&&i.events.mouseover.call(i,t)},ei.prototype.pointermoveCheck=function(t){const e=this,i=this.pointerNode?this.pointerNode.node:null;i?(this.pointerNode.dragCounter+=1,i.events.zoom&&(i.events.zoom.panFlag&&i.events.zoom.panExecute(i,t,"pointermove",e),i.events.zoom.zoomPinch(i,t,e)),i.events.drag&&i.events.drag.execute(i,t,"pointermove",e),i.events.mousemove&&i.events.mousemove.call(i,t)):i&&"touch"===t.pointerType&&i.events.mousemove.call(i,t),t.preventDefault()},ei.prototype.pointerupCheck=function(t){const e=this,i=this.pointerNode?this.pointerNode.node:null;i&&(i.events.drag&&i.events.drag.execute(i,t,"pointerup",e),i.events.zoom&&i.events.zoom.panFlag&&i.events.zoom.panExecute(i,t,"pointerup",e),this.pointerNode.dragCounter<=2||"touch"===t.pointerType&&this.pointerNode.dragCounter<=5?(i.events.click&&i.events.click.call(i,t),ii(i,"click",t),2===this.pointerNode.clickCounter&&(i.events.dblclick&&i.events.dblclick.call(i,t),ii(i,"dblclick",t)),ni&&clearTimeout(ni),ni=setTimeout((function(){e.pointerNode=null,ni=null}),200)):this.pointerNode=null,"touch"===t.pointerType&&i.events.mouseup.call(i,t))},ei.prototype.mousedownCheck=function(t){si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mousedown")},ei.prototype.mousemoveCheck=function(t){const e=si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mousemove");this.selectedNode&&this.selectedNode!==e&&(this.selectedNode.events.mouseout&&this.selectedNode.events.mouseout.call(this.selectedNode,t),this.selectedNode.events.mouseleave&&this.selectedNode.events.mouseleave.call(this.selectedNode,t)),e&&(e.events.mouseover||e.events.mousein)&&this.selectedNode!==e&&(e.events.mouseover&&e.events.mouseover.call(e,t),e.events.mousein&&e.events.mousein.call(e,t)),this.selectedNode=e,t.preventDefault()},ei.prototype.mouseupCheck=function(t){si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mouseup")},ei.prototype.mouseleaveCheck=function(t){si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"mouseleave")},ei.prototype.contextmenuCheck=function(t){si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"contextmenu")},ei.prototype.touchstartCheck=function(t){si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"touchstart")},ei.prototype.touchendCheck=function(t){si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"touchend")},ei.prototype.touchmoveCheck=function(t){const e=t.touches;0!==e.length&&si([this.vDom],{x:e[0].clientX,y:e[0].clientY},t,"touchmove")},ei.prototype.touchcancelCheck=function(t){si([this.vDom],{x:t.x,y:t.y},t,"touchcacel")};let ri=0,oi=0;function si(t,e,i,n){let r,o;for(var s=t.length-1;s>=0;s-=1){var a=t[s],h={x:e.x,y:e.y};if(a.bbox&&(ai(a,h),a.in({x:h.x,y:h.y})&&(a.children&&a.children.length>0?(o=si(a.children,{x:h.x,y:h.y},i,n),o&&(r=o)):r=a,a.events[n]&&"function"==typeof a.events[n]&&a.events[n](i),r)))break}return r||"rootNode"!==a.attr.id||(r=a,a.events[n]&&"function"==typeof a.events[n]&&a.events[n](i)),r}function ai(t,e){let i=0,n=0,r=1,o=1;const s=e;if(t.attr.transform&&t.attr.transform.translate&&([i,n]=t.attr.transform.translate,s.x-=i,s.y-=n),t.attr.transform&&t.attr.transform.scale&&(r=void 0!==t.attr.transform.scale[0]?t.attr.transform.scale[0]:1,o=void 0!==t.attr.transform.scale[1]?t.attr.transform.scale[1]:r,s.x/=r,s.y/=o),t.attr.transform&&t.attr.transform.rotate){const e=t.attr.transform.rotate[0],i={x:t.attr.transform.rotate[1],y:t.attr.transform.rotate[2]},n=s.x,r=s.y,o=i.x,l=i.y;var a=Math.PI/180*e,h=Math.cos(a),c=Math.sin(a);s.x=h*(n-o)+c*(r-l)+o,s.y=h*(r-l)-c*(n-o)+l}}ei.prototype.wheelEventCheck=function(t){const e=this;if(this.wheelNode)this.wheelNode.events.zoom.zoomExecute(this.wheelNode,t,e),ri+=1,this.wheelHndl&&(clearTimeout(this.wheelHndl),this.wheelHndl=null,oi=ri),this.wheelHndl=setTimeout((function(){oi!==ri?oi=ri:(e.wheelHndl=null,e.wheelNode.events.zoom.onZoomEnd(e.wheelNode,t,e),e.wheelNode=null,ri=0)}),100);else{let i=si([this.vDom],{x:t.offsetX,y:t.offsetY},t,"wheel");i=i||this.vDom,i&&i.events.zoom&&(i.events.zoom.disableWheel||(i.events.zoom.zoomExecute(i,t,e),this.wheelNode=i))}};var hi,ci=[],li="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(hi||(hi={}));var ui,fi=function(t){return Object.freeze(t)},di=function(t,e){this.inlineSize=t,this.blockSize=e,fi(this)},pi=function(){function t(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,fi(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),yi=function(t){return t instanceof SVGElement&&"getBBox"in t},xi=function(t){if(yi(t)){var e=t.getBBox(),i=e.width,n=e.height;return!i&&!n}var r=t,o=r.offsetWidth,s=r.offsetHeight;return!(o||s||t.getClientRects().length)},gi=function(t){var e;if(t instanceof Element)return!0;var i=null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(i&&t instanceof i.Element)},mi="undefined"!=typeof window?window:{},vi=new WeakMap,wi=/auto|scroll/,bi=/^tb|vertical/,Bi=/msie|trident/i.test(mi.navigator&&mi.navigator.userAgent),Ai=function(t){return parseFloat(t||"0")},Ti=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),new di((i?e:t)||0,(i?t:e)||0)},ki=fi({devicePixelContentBoxSize:Ti(),borderBoxSize:Ti(),contentBoxSize:Ti(),contentRect:new pi(0,0,0,0)}),Si=function(t,e){if(void 0===e&&(e=!1),vi.has(t)&&!e)return vi.get(t);if(xi(t))return vi.set(t,ki),ki;var i=getComputedStyle(t),n=yi(t)&&t.ownerSVGElement&&t.getBBox(),r=!Bi&&"border-box"===i.boxSizing,o=bi.test(i.writingMode||""),s=!n&&wi.test(i.overflowY||""),a=!n&&wi.test(i.overflowX||""),h=n?0:Ai(i.paddingTop),c=n?0:Ai(i.paddingRight),l=n?0:Ai(i.paddingBottom),u=n?0:Ai(i.paddingLeft),f=n?0:Ai(i.borderTopWidth),d=n?0:Ai(i.borderRightWidth),p=n?0:Ai(i.borderBottomWidth),y=u+c,x=h+l,g=(n?0:Ai(i.borderLeftWidth))+d,m=f+p,v=a?t.offsetHeight-m-t.clientHeight:0,w=s?t.offsetWidth-g-t.clientWidth:0,b=r?y+g:0,B=r?x+m:0,A=n?n.width:Ai(i.width)-b-w,T=n?n.height:Ai(i.height)-B-v,k=A+y+w+g,S=T+x+v+m,E=fi({devicePixelContentBoxSize:Ti(Math.round(A*devicePixelRatio),Math.round(T*devicePixelRatio),o),borderBoxSize:Ti(k,S,o),contentBoxSize:Ti(A,T,o),contentRect:new pi(u,h,A,T)});return vi.set(t,E),E},Ei=function(t,e,i){var n=Si(t,i),r=n.borderBoxSize,o=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case hi.DEVICE_PIXEL_CONTENT_BOX:return s;case hi.BORDER_BOX:return r;default:return o}},Mi=function(t){var e=Si(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=fi([e.borderBoxSize]),this.contentBoxSize=fi([e.contentBoxSize]),this.devicePixelContentBoxSize=fi([e.devicePixelContentBoxSize])},Ci=function(t){if(xi(t))return 1/0;for(var e=0,i=t.parentNode;i;)e+=1,i=i.parentNode;return e},Di=function(){var t=1/0,e=[];ci.forEach((function(i){if(0!==i.activeTargets.length){var n=[];i.activeTargets.forEach((function(e){var i=new Mi(e.target),r=Ci(e.target);n.push(i),e.lastReportedSize=Ei(e.target,e.observedBox),r<t&&(t=r)})),e.push((function(){i.callback.call(i.observer,n,i.observer)})),i.activeTargets.splice(0,i.activeTargets.length)}}));for(var i=0,n=e;i<n.length;i++){(0,n[i])()}return t},Pi=function(t){ci.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(i){i.isActive()&&(Ci(i.target)>t?e.activeTargets.push(i):e.skippedTargets.push(i))}))}))},_i=function(){var t=0;for(Pi(t);ci.some((function(t){return t.activeTargets.length>0}));)t=Di(),Pi(t);return ci.some((function(t){return t.skippedTargets.length>0}))&&function(){var t;"function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:li}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=li),window.dispatchEvent(t)}(),t>0},Ii=[],Li=function(t){if(!ui){var e=0,i=document.createTextNode("");new MutationObserver((function(){return Ii.splice(0).forEach((function(t){return t()}))})).observe(i,{characterData:!0}),ui=function(){i.textContent="".concat(e?e--:e++)}}Ii.push(t),ui()},zi=0,Oi={attributes:!0,characterData:!0,childList:!0,subtree:!0},Fi=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Ni=function(t){return void 0===t&&(t=0),Date.now()+t},Ri=!1,ji=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!Ri){Ri=!0;var i,n=Ni(t);i=function(){var i=!1;try{i=_i()}finally{if(Ri=!1,t=n-Ni(),!zi)return;i?e.run(1e3):t>0?e.run(t):e.start()}},Li((function(){requestAnimationFrame(i)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,Oi)};document.body?e():mi.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Fi.forEach((function(e){return mi.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Fi.forEach((function(e){return mi.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),Gi=function(t){!zi&&t>0&&ji.start(),!(zi+=t)&&ji.stop()},Xi=function(){function t(t,e){this.target=t,this.observedBox=e||hi.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=Ei(this.target,this.observedBox,!0);return t=this.target,yi(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),Yi=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},Hi=new WeakMap,Ui=function(t,e){for(var i=0;i<t.length;i+=1)if(t[i].target===e)return i;return-1},Vi=function(){function t(){}return t.connect=function(t,e){var i=new Yi(t,e);Hi.set(t,i)},t.observe=function(t,e,i){var n=Hi.get(t),r=0===n.observationTargets.length;Ui(n.observationTargets,e)<0&&(r&&ci.push(n),n.observationTargets.push(new Xi(e,i&&i.box)),Gi(1),ji.schedule())},t.unobserve=function(t,e){var i=Hi.get(t),n=Ui(i.observationTargets,e),r=1===i.observationTargets.length;n>=0&&(r&&ci.splice(ci.indexOf(i),1),i.observationTargets.splice(n,1),Gi(-1))},t.disconnect=function(t){var e=this,i=Hi.get(t);i.observationTargets.slice().forEach((function(i){return e.unobserve(t,i.target)})),i.activeTargets.splice(0,i.activeTargets.length)},t}(),qi=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Vi.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gi(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Vi.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gi(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Vi.unobserve(this,t)},t.prototype.disconnect=function(){Vi.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();let Zi=0;const Wi=R,$i=K,Qi=g,Ji=window.ResizeObserver||qi;const Ki=function(t,e,i){return function(n){t.setAttr(e,i.call(t,n))}},tn=function(t,e,i,n){const r=[];return"function"==typeof n?function(i){t[e](n.call(t,i))}:(n.forEach(((t,n)=>{let o;o=i&&void 0!==i[n]?i[n]:"scale"===e?1:0,r.push(Wi.intermediateValue.bind(null,o,t))})),function(i){t[e](r.map((t=>t(i))))})},en=function(t,e,i,n){return function(r){t.setAttr(e,Wi.intermediateValue(i,n,r))}},nn=function(t,e,i,n){let r,o,s;if("function"==typeof n)return function(i){t.setStyle(e,n.call(t,t.dataObj,i))};if(r=i,isNaN(n)){if(ti.isTypeColor(n)){const i=ti.transition(r,n);return function(n){t.setStyle(e,i(n))}}r=r.match(/(\d+)/g),s=n.match(/(\d+)/g),o=n.match(/\D+$/),r=parseInt(r.length>0?r[0]:0,10),s=parseInt(s.length>0?s[0]:0,10),o=o.length>0?o[0]:"px"}else r=void 0!==i?i:1,s=n,o=0;return function(i){t.setStyle(e,Wi.intermediateValue(r,s,i)+o)}},rn=function(t,e,i){const n=i.attr?i.attr:{},r=i.style?i.style:{},o=e.attr?e.attr:{},s=e.style?e.style:{},a=[];if("function"!=typeof n)for(const e in n)if("transform"!==e){const r=n[e];"function"==typeof r?a[a.length]=function(i){t.setAttr(e,r.call(t,i))}:"d"===e?t.morphTo(i):"points"===e?console.log("write points mapper"):a[a.length]=en(t,e,o[e],n[e])}else if("function"==typeof n[e])a[a.length]=Ki(t,e,n[e]);else{let e=o.transform;e||(t.setAttr("transform",{}),e={});const i=Object.keys(n.transform);for(let r=0,o=i.length;r<o;r+=1)a[a.length]=tn(t,i[r],e[i[r]],n.transform[i[r]])}else a[a.length]=n.bind(t);if("function"!=typeof r)for(const e in r)a[a.length]=nn(t,e,s[e],r[e]);else a[a.length]=r.bind(t);return{run(t){for(let e=0,i=a.length;e<i;e+=1)a[e](t)},target:t,duration:i.duration||0,delay:i.delay||0,end:i.end?i.end.bind(t,t.dataObj):null,loop:i.loop||0,direction:i.direction||"default",ease:i.ease||"default"}};function on(t,e,i){const n=t.map(i),r={new:[],update:[],old:[]};for(let o=0;o<e.length;o+=1){const s=n.indexOf(i(e[o].dataObj,o));-1!==s?(e[o].dataObj=t[s],r.update.push(e[o]),n[s]=null):r.old.push(e[o])}return r.new=t.filter(((t,e)=>{const r=n.indexOf(i(t,e));return-1!==r&&(n[r]=null,!0)})),r}const sn={};sn.push={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(let e=0,i=t.length;e<i;e++)this.data.push(t[e]);if(this.config.action.enter){const e={};this.selector.split(",").forEach((function(i){e[i]=t})),this.config.action.enter.call(this,e)}},enumerable:!1,configurable:!1,writable:!1},sn.pop={value:function(){const t=this,e=this.data.pop();if(this.config.action.exit){const i={};this.selector.split(",").forEach((function(n){i[n]=t.fetchEls(n,[e])})),this.config.action.exit.call(this,i)}},enumerable:!1,configurable:!1,writable:!1},sn.remove={value:function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);const e=this;for(let e=0,i=t.length;e<i;e++)-1!==this.data.indexOf(t[e])&&this.data.splice(this.data.indexOf(t[e]),1);if(this.config.action.exit){const i={};this.selector.split(",").forEach((function(n){i[n]=e.fetchEls(n,t)})),this.config.action.exit.call(this,i)}},enumerable:!1,configurable:!0,writable:!1},sn.update={value:function(){const t=this;if(this.config.action.update){const e={};this.selector.split(",").forEach((function(i){e[i]=t.fetchEls(i,t.data)})),this.config.action.update.call(this,e)}},enumerable:!1,configurable:!0,writable:!1},sn.join={value:function(t){this.data=t,hn.call(this,t,this.selector,this.config)},enumerable:!1,configurable:!0,writable:!1};var an=function(){};function hn(t,e,i){const n=this,r=e.split(",");let{joinOn:o}=i;const s={new:{},update:{},old:{}};o||(o=function(t,e){return e});for(let e=0,i=r.length;e<i;e++){const i=r[e],a=on(t,n.fetchEls(i).stack,o);s.new[i]=a.new,s.update[i]=(new ln).wrapper(a.update),s.old[i]=(new ln).wrapper(a.old)}return i.action&&(i.action.enter&&i.action.enter.call(n,s.new),i.action.exit&&i.action.exit.call(n,s.old),i.action.update&&i.action.update.call(n,s.update)),sn.config={value:i,enumerable:!1,configurable:!0,writable:!0},sn.selector={value:e,enumerable:!1,configurable:!0,writable:!1},sn.data={value:t,enumerable:!1,configurable:!0,writable:!0},Object.create(n,sn)}function cn(t,e,i){const n={};let r;for(r in t)"end"!==r&&("function"==typeof t[r]?n[r]=t[r].call(e,e.dataObj,i):n[r]=t[r]);return n}an.prototype.getAttr=function(t){return this.attr[t]},an.prototype.getStyle=function(t){return this.style[t]},an.prototype.exec=function(t){return"function"!=typeof t&&console.error("Wrong Exe type"),t.call(this,this.dataObj),this},an.prototype.fetchEls=function(t,e){const i=[],n=new ln;if(this.children.length>0)if("."===t.charAt(0)){const n=t.substring(1,t.length);this.children.forEach((t=>{if(!t)return;const r=e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.class===n,o=!e&&t.attr.class===n;(r||o)&&i.push(t)}))}else if("#"===t.charAt(0)){const n=t.substring(1,t.length);this.children.every((t=>{if(!t)return;const r=e&&t.dataObj&&-1!==e.indexOf(t.dataObj)&&t.attr.id===n,o=!e&&t.attr.id===n;return!r&&!o||(i.push(t),!1)}))}else t="group"===t?"g":t,this.children.forEach((n=>{if(!n)return;const r=e&&n.dataObj&&-1!==e.indexOf(n.dataObj)&&n.nodeName===t,o=!e&&n.nodeName===t;(r||o)&&i.push(n)}));return n.wrapper(i)},an.prototype.fetchEl=function(t,e){let i;if(this.children.length>0)if("."===t.charAt(0)){const n=t.substring(1,t.length);this.children.every((t=>{if(!t)return;const r=e&&t.dataObj&&e===t.dataObj&&t.attr.class===n,o=!e&&t.attr.class===n;return!r&&!o||(i=t,!1)}))}else if("#"===t.charAt(0)){const n=t.substring(1,t.length);this.children.every((t=>{if(!t)return;const r=e&&t.dataObj&&e===t.dataObj&&t.attr.id===n,o=!e&&t.attr.id===n;return!r&&!o||(i=t,!1)}))}else t="group"===t?"g":t,this.children.forEach((n=>{if(!n)return;const r=e&&n.dataObj&&e===n.dataObj&&n.nodeName===t,o=!e&&n.nodeName===t;(r||o)&&(i=n)}));return i},an.prototype.join=hn,an.prototype.data=function(t){return t?(this.dataObj=t,this):this.dataObj},an.prototype.interrupt=function(){if(this.animList&&this.animList.length>0)for(var t=this.animList.length-1;t>=0;t--)Qi.remove(this.animList[t]);return this.animList=[],this},an.prototype.animateTo=function(t,e){return Qi.add((Zi+=1,Zi),rn(this,e||this,t),$i(t.ease)),this},an.prototype.animateExe=function(t,e){return rn(this,e||this,t)};function ln(t,e,i,n){let r,o;e||(e=[]);const s=i&&i.attr?Object.keys(i.attr):[],a=i&&i.style?Object.keys(i.style):[],h=!i||(void 0===i.bbox||i.bbox);return this.stack=e.map(((e,c)=>{const l=this.createNode(t.ctx,{el:i.el,bbox:h},n);for(let t=0,n=a.length;t<n;t+=1)if(o=a[t],"function"==typeof i.style[o]){const t=i.style[o].call(l,e,c);l.setStyle(o,t)}else l.setStyle(o,i.style[o]);for(let t=0,n=s.length;t<n;t+=1)if(o=s[t],"transform"!==o)if("function"==typeof i.attr[o]){const t=i.attr[o].call(l,e,c);l.setAttr(o,t)}else l.setAttr(o,i.attr[o]);else{"function"==typeof i.attr.transform?r=i.attr[o].call(l,e,c):({transform:r}=i.attr);for(const t in r)l[t](r[t])}return l.dataObj=e,l})),this}ln.prototype={createEls:function(t,e){let i;const n=[];let r=t;for(let o=0,s=this.stack.length;o<s;o+=1){let s={};if(i=this.stack[o],"function"==typeof t&&(r=t.call(i,i.dataObj,o)),"function"==typeof e)s=e.call(i,i.dataObj,o);else{const t=Object.keys(e);for(let i=0,n=t.length;i<n;i+=1){const n=t[i];s[n]=e[n]}}n.push(i.createEls(r,s))}const o=new ln;return o.wrapper(n),o},createEl:function(t){let e;const i=[];for(let n=0,r=this.stack.length;n<r;n+=1){let r={};if(e=this.stack[n],"function"==typeof t)r=t.call(e,e.dataObj,n);else{const e=Object.keys(t);for(let i=0,n=e.length;i<n;i+=1){const n=e[i];"object"!=typeof t[n]?r[n]=t[n]:r[n]=JSON.parse(JSON.stringify(t[n]))}}i.push(e.createEl(r))}const n=new ln;return n.wrapper(i),n},forEach:function(t){for(let e=0,i=this.stack.length;e<i;e+=1)t.call(this.stack[e],this.stack[e].dataObj,e);return this},setAttr:function(t,e){let i;for(let n=0,r=this.stack.length;n<r;n+=1)if(i=this.stack[n],arguments.length>1)"function"==typeof e?i.setAttr(t,e.call(i,i.dataObj,n)):i.setAttr(t,e);else if("function"==typeof t)i.setAttr(t.call(i,i.dataObj,n));else{const e=Object.keys(t);for(let r=0,o=e.length;r<o;r+=1){const o=e[r];"function"==typeof t[o]?i.setAttr(o,t[o].call(i,i.dataObj,n)):i.setAttr(o,t[o])}}return this},fetchEls:function(t,e){let i;const n=[];for(let r=0;r<this.stack.length;r+=1)i=this.stack[r],n.push(i.fetchEls(t,e));const r=new ln;return r.wrapper(n),r},setStyle:function(t,e){let i;for(let n=0,r=this.stack.length;n<r;n+=1)if(i=this.stack[n],arguments.length>1)"function"==typeof e?i.setStyle(t,e.call(i,i.dataObj,n)):i.setStyle(t,e);else{if("function"==typeof t)i.setStyle(t.call(i,i.dataObj,n));else{const e=Object.keys(t);for(let r=0,o=e.length;r<o;r+=1){const o=e[r];"function"==typeof t[o]?i.setStyle(o,t[o].call(i,i.dataObj,n)):i.setStyle(o,t[o])}}"function"==typeof t?i.setStyle(t.call(i,i.dataObj,n)):i.setStyle(t)}return this},translate:function(t){let e;for(let i=0,n=this.stack.length;i<n;i+=1)e=this.stack[i],"function"==typeof t?e.translate(t.call(e,e.dataObj,i)):e.translate(t);return this},rotate:function(t){let e;for(let i=0,n=this.stack.length;i<n;i+=1)e=this.stack[i],"function"==typeof t?e.rotate(t.call(e,e.dataObj,i)):e.rotate(t);return this},scale:function(t){let e;for(let i=0,n=this.stack.length;i<n;i+=1)e=this.stack[i],"function"==typeof t?e.scale(t.call(e,e.dataObj,i)):e.scale(t);return this},exec:function(t){let e;if("function"==typeof t){for(let i=0,n=this.stack.length;i<n;i+=1)e=this.stack[i],t.call(e,e.dataObj,i);return this}},animateTo:function(t){let e,i;for(let n=0;n<this.stack.length;n+=1)i={},e=this.stack[n],i=cn(t,e,n),t.attr&&"function"!=typeof t.attr&&(i.attr=cn(t.attr,e,n)),t.style&&"function"!=typeof t.style&&(i.style=cn(t.style,e,n)),t.end&&(i.end=t.end),t.ease&&(i.ease=t.ease),e.animateTo(i);return this},animateExe:function(t){let e,i;const n=[];for(let r=0;r<this.stack.length;r+=1)i={},e=this.stack[r],i=cn(t,e,r),t.attr&&"function"!=typeof t.attr&&(i.attr=cn(t.attr,e,r)),t.style&&"function"!=typeof t.style&&(i.style=cn(t.style,e,r)),t.end&&(i.end=t.end),t.ease&&(i.ease=t.ease),n.push(e.animateExe(i));return n},animatePathTo:function(t){let e;const i=Object.keys(t);for(let n=0,r=this.stack.length;n<r;n+=1){e=this.stack[n];const r={};for(let o=0;o<i.length;o++){let s=t[i[o]];"function"==typeof s&&(s=s.call(e,e.dataObj,n)),r[i[o]]=s}e.animatePathTo(r)}return this},remove:function(){for(let t=0,e=this.stack.length;t<e;t+=1)this.stack[t].remove();return this},interrupt:function(){for(let t=0,e=this.stack.length;t<e;t+=1)this.stack[t].interrupt();return this},text:function(t){let e;if("function"!=typeof t)for(let i=0;i<this.stack.length;i+=1)e=this.stack[i],e.text(t);else for(let i=0;i<this.stack.length;i+=1)e=this.stack[i],e.text(t.call(e,e.dataObj,i));return this},join:function(t,e,i){let n;const r=[];for(let o=0;o<this.stack.length;o+=1)n=this.stack[o],r.push(n.join(t,e,i));const o=new ln;return o.wrapper(r),o},on:function(t,e){for(let i=0,n=this.stack.length;i<n;i+=1)this.stack[i].on(t,e);return this}},ln.prototype.createNode=function(){},ln.prototype.wrapper=function(t){const e=this;if(t)for(let i=0,n=t.length;i<n;i++){const n=t[i];e.stack.push(n)}return this};const un=function(t){for(const e in t){const i=t[e],n=i.contentRect;i.target.resizeHandler&&i.target.resizeHandler.forEach((function(t){t(n)}))}};function fn(t,e){t.ro||(t.ro=new Ji(un),t.ro.observe(t.container)),t.container.resizeHandler||(t.container.resizeHandler=[]),t.container.resizeHandler.push(e)}function dn(t,e){if(!t.container.resizeHandler)return;const i=t.container.resizeHandler.indexOf(e);-1!==i&&t.container.resizeHandler.splice(i,1),0===t.container.resizeHandler.length&&t.ro&&t.ro.disconnect()}const pn=g;let yn=0;function xn(){return yn+=1,yn}const gn=function(){ln.apply(this,arguments)};function mn(t,e={}){this.pDom=t;const i=e.id?e.id:"mask-"+Math.ceil(1e3*Math.random());this.id=e.id||i,e.id=i,this.defs||(this.defs=t.createEl({el:"defs"})),this.mask=this.defs.createEl({el:"mask",attr:e,style:{}})}function vn(t,e={}){this.pDom=t;const i=e.id?e.id:"clip-"+Math.ceil(1e3*Math.random());this.id=e.id||i,e.id=i,this.defs||(this.defs=t.createEl({el:"defs"})),this.clip=this.defs.createEl({el:"clipPath",attr:e,style:{}})}function wn(t,e={}){this.pDom=t;const i=e.id?e.id:"pattern-"+Math.ceil(1e3*Math.random());this.id=e.id||i,e.id=i,this.defs||(this.defs=t.createEl({el:"defs"})),this.pattern=this.defs.createEl({el:"pattern",attr:e,style:{}})}function bn(t){let e="";for(const i in t)"rotate"===i?e+=`${i}(${t.rotate[0]+" "+(t.rotate[1]||0)+" "+(t.rotate[2]||0)}) `:"skew"===i?(t.skew[0]&&(e+=`skewX(${t[i][0]}) `),t.skew[1]&&(e+=`skewY(${t[i][1]}) `)):t[i].length>1?e+=`${i}(${t[i].join(" ")}) `:e+=`${i}(${t[i]}) `;return e}function Bn(t,e,i){this.config=t,this.type=e||"linear",this.pDom=i,this.defs=this.pDom.createEl({el:"defs"})}(gn.prototype=new ln).constructor=gn,gn.prototype.createNode=function(t,e,i){return kn(e,i)},mn.prototype.exe=function(){return`url(#${this.id})`},vn.prototype.exe=function(){return`url(#${this.id})`},wn.prototype.exe=function(){return`url(#${this.id})`},Bn.prototype.exe=function(){return`url(#${this.config.id})`},Bn.prototype.linearGradient=function(){const t=this;return this.linearEl=this.defs.join([1],"linearGradient",{action:{enter(e){const i=this.createEls(e.linearGradient,{el:"linearGradient"}).setAttr({id:t.config.id,x1:`${t.config.x1}%`,y1:`${t.config.y1}%`,x2:`${t.config.x2}%`,y2:`${t.config.y2}%`,spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"});t.config.gradientTransform&&i.setAttr("gradientTransform",bn(t.config.gradientTransform))},exit(t){t.linearGradient.remove()},update(e){e.linearGradient.setAttr({id:t.config.id,x1:`${t.config.x1}%`,y1:`${t.config.y1}%`,x2:`${t.config.x2}%`,y2:`${t.config.y2}%`,spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"}),t.config.gradientTransform&&e.linearGradient.setAttr("gradientTransform",bn(t.config.gradientTransform))}}}),this.linearEl=this.linearEl.fetchEl("linearGradient"),this.linearEl.fetchEls("stop").remove(),this.linearEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:(t,e)=>`${t.offset}%`,"stop-color":function(t,e){return t.color}}}),this},Bn.prototype.radialGradient=function(){const t=this,{innerCircle:e={},outerCircle:i={}}=this.config;return this.defs||(this.defs=this.pDom.createEl({el:"defs"})),this.radialEl=this.defs.join([1],"radialGradient",{action:{enter(n){const r=this.createEls(n.radialGradient,{el:"radialGradient"}).setAttr({id:t.config.id,cx:`${e.x}%`,cy:`${e.y}%`,r:`${e.r}%`,fx:`${i.x}%`,fy:`${i.y}%`,spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"});t.config.gradientTransform&&r.setAttr("gradientTransform",bn(t.config.gradientTransform))},exit(t){t.radialGradient.remove()},update(n){n.radialGradient.setAttr({id:t.config.id,cx:`${e.x}%`,cy:`${e.y}%`,r:`${e.r}%`,fx:`${i.x}%`,fy:`${i.y}%`,spreadMethod:t.config.spreadMethod||"pad",gradientUnits:t.config.gradientUnits||"objectBoundingBox"}),t.config.gradientTransform&&n.radialGradient.setAttr("gradientTransform",bn(t.config.gradientTransform))}}}),this.radialEl=this.radialEl.fetchEl("radialGradient"),this.radialEl.fetchEls("stop").remove(),this.radialEl.createEls(this.config.colorStops,{el:"stop",attr:{offset:(t,e)=>`${t.offset}%`,"stop-color":function(t,e){return t.color}}}),this},Bn.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,"linear"===this.type?this.linearGradient():"radial"===this.type&&this.radialGradient())};const An={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Tn=function(t){return document.createElementNS(An.svg,t)};function kn(t,e){let i=null;const n=t.el.indexOf(":");if(n>=0)r=t.el.slice(0,n),o=t.el.slice(n+1),i=document.createElementNS(An[r],o);else if("group"===t.el)i=Tn("g");else i=Tn(t.el);var r,o;const s=new Sn(i,t,xn(),e);return t.dataObj&&(i.dataObj=t.dataObj),s}const Sn=function(t,e,i,n){this.dom=t,this.nodeName=t.nodeName,this.attr={},this.style={},this.changedAttribute={},this.changedStyles={},this.id=i,this.nodeType="svg",this.dom.nodeId=i,this.children=[],this.vDomIndex=n,this.events={},e.style&&this.setStyle(e.style),e.attr&&this.setAttr(e.attr)};function En(t,e){const i=e.indexOf(":"),n=t.changedAttribute[e];i>=0?t.dom.setAttributeNS(An[e.slice(0,i)],e.slice(i+1),n):"text"===e?t.dom.textContent=n:"d"===e?Ve.isTypePath(n)?t.dom.setAttribute(e,n.fetchPathString()):t.dom.setAttribute(e,n):"onerror"===e||"onload"===e?t.dom[e]=function(e){n.call(t,e)}:t.dom.setAttribute(e,n)}function Mn(t){t.dom.setAttribute("transform",bn(t.attr.transform))}function Cn(t){if("[object Array]"===Object.prototype.toString.call(t))return t.reduce((function(t,e){return t+e.x+","+e.y+" "}),"")}function Dn(t,e={}){const i=t instanceof HTMLElement?t:"string"==typeof t||t instanceof String?document.querySelector(t):null;let n=i.clientHeight,r=i.clientWidth;const{autoUpdate:o=!0,enableResize:s=!0}=e,a=document.createElementNS(An.svg,"svg");let h;a.setAttribute("height",n),a.setAttribute("width",r),a.style.position="absolute";let c,l,u,f,d=999999;i&&(i.appendChild(a),h=new m,o&&(d=pn.addVdom(h)));const p=new Sn(a,{},xn(),d);p.container=i,p.type="SVG",p.width=r,p.height=n,p.domEl=a;const y=new ei(p);h&&h.rootNode(p),p.setLayerId=function(t){a.setAttribute("id",t)};const x=function(e){if(t instanceof HTMLElement&&!document.body.contains(t)||t instanceof String&&!document.querySelector(t))return dn(p),void p.destroy();n=c||e.height,r=l||e.width,a.setAttribute("height",n),a.setAttribute("width",r),p.width=r,p.height=n,u&&u(),p.update()};p.onResize=function(t){u=t},p.onChange=function(t){f=t},p.invokeOnChange=function(){f&&f()},p.setSize=function(t,e){this.dom.setAttribute("height",e),this.dom.setAttribute("width",t),this.width=t,this.height=e,c=e,l=t},p.update=function(){this.execute()},p.setViewBox=function(t,e,i,n){this.dom.setAttribute("viewBox",t+","+e+","+n+","+i)},p.destroy=function(){document.body.contains(this.container)&&this.container.contains(this.domEl)&&this.container.removeChild(this.domEl),pn.removeVdom(d),dn(p,x)},p.createPattern=function(t){return new wn(this,t)},p.createClip=function(t){return new vn(this,t)},p.createMask=function(t){return new mn(this,t)};let g=null;return p.dom.addEventListener("pointerdown",(t=>{y.addPointer(t),t.target.drag_&&(t.target.drag_(t,"pointerdown",y),g=t.target)})),p.dom.addEventListener("pointerup",(t=>{g&&(g.drag_(t,"pointerup",y),g=null),y.removePointer(t)})),p.dom.addEventListener("pointermove",(t=>{t.preventDefault(),g&&g.drag_(t,"pointermove",y)})),pn.execute(),s&&fn(p,x),p}Sn.prototype=new an,Sn.prototype.node=function(){return this.execute(),this.dom},Sn.prototype.transFormAttributes=function(){const t=this;for(const e in t.changedAttribute)"transform"!==e?En(t,e):Mn(t);this.changedAttribute={}},Sn.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.scale=t,this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Sn.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewX=[t],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Sn.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skewY=[t],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Sn.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Sn.prototype.rotate=function(t,e,i){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)&&t.length>0?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,i||0],this.changedAttribute.transform=this.attr.transform,this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Sn.prototype.setStyle=function(t,e){if(2===arguments.length)null==e&&null!=this.style[t]?delete this.style[t]:("function"==typeof e&&(e=e.call(this,this.dataObj)),ti.RGBAInstanceCheck(e)&&(e=e.rgba),this.style[t]=e),this.changedStyles[t]=e;else if(1===arguments.length&&"object"==typeof t)for(const e in t)null==t[e]&&null!=this.style[t]?delete this.style[e]:this.style[e]=t[e],this.changedStyles[e]=t[e];return this.styleChanged=!0,pn.vDomChanged(this.vDomIndex),this},Sn.prototype.setAttr=function(t,e){if(2===arguments.length)"points"===t&&(e=Cn(e)),this.attr[t]=e,this.changedAttribute[t]=e;else if(1===arguments.length&&"object"==typeof t)for(const e in t)"points"===e&&(t[e]=Cn(t[e])),this.attr[e]=t[e],this.changedAttribute[e]=t[e];return this.attrChanged=!0,pn.vDomChanged(this.vDomIndex),this},Sn.prototype.execute=function(){if(this.styleChanged||this.attrChanged){this.transFormAttributes();for(let t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();for(const t in this.changedStyles)"object"==typeof this.changedStyles[t]&&(this.changedStyles[t]instanceof Bn||this.changedStyles[t]instanceof wn||this.changedStyles[t]instanceof vn||this.changedStyles[t]instanceof mn)&&(this.changedStyles[t]=this.changedStyles[t].exe()),this.dom.style.setProperty(t,this.changedStyles[t],"");this.changedStyles={}}else for(let t=0,e=this.children.length;t<e;t+=1)this.children[t].execute()},Sn.prototype.child=function(t){const e=this.dom,i=this;if(t instanceof gn){var n=document.createDocumentFragment();for(let e=0,r=t.stack.length;e<r;e++)n.appendChild(t.stack[e].dom),t.stack[e].parentNode=i,t.stack[e].vDomIndex=i.vDomIndex,this.children[this.children.length]=t.stack[e];e.appendChild(n)}else t instanceof Sn?(e.appendChild(t.dom),t.parentNode=i,this.children.push(t)):console.log("wrong node type");return this},Sn.prototype.animatePathTo=Ve.animatePathTo,Sn.prototype.morphTo=Ve.morphTo,Sn.prototype.createRadialGradient=function(t){const e=new Bn(t,"radial",this);return e.radialGradient(),e},Sn.prototype.createLinearGradient=function(t){const e=new Bn(t,"linear",this);return e.linearGradient(),e},Sn.prototype.on=function(t,e){const i=this;if(i.events[t]&&"drag"!==t&&"zoom"!==t&&(i.dom.removeEventListener(t,i.events[t]),delete i.events[t]),"drag"===t&&delete i.dom.drag_,"zoom"===t&&(i.dom.removeEventListener("wheel",i.events[t]),delete i.dom.drag_),e){if("drag"===t)i.dom.drag_=function(t,n){e.execute(i,t,n)};else if("zoom"===t){let n,r=0,o=0;i.events[t]=function(t){e.disableWheel||(e.zoomExecute(i,t),r+=1,n&&(clearTimeout(n),n=null,o=r),n=setTimeout((function(){o!==r?o=r:(n=null,e.onZoomEnd(i,t),r=0)}),100))},i.dom.addEventListener("wheel",i.events[t]),i.dom.drag_=function(t,n,r){e.panFlag&&e.panExecute(i,t,n,r)}}else{const n=e.bind(i);i.events[t]=function(t){n(t)},i.dom.addEventListener(t,i.events[t])}return this}},Sn.prototype.html=function(t){return arguments.length?(this.dom.innerHTML(t),this):this.dom.innerHTML},Sn.prototype.text=function(t){return arguments.length?(this.attr.text=t,this.changedAttribute.text=t,this):this.attr.text},Sn.prototype.remove=function(){this.parentNode.removeChild(this)},Sn.prototype.createEls=function(t,e){const i=new gn({type:"SVG"},t,e,this.vDomIndex);return this.child(i),pn.vDomChanged(this.vDomIndex),i},Sn.prototype.createEl=function(t){const e=kn(t,this.vDomIndex);return this.child(e),pn.vDomChanged(this.vDomIndex),e},Sn.prototype.removeChild=function(t){const{children:e}=this,i=e.indexOf(t);if(-1!==i){const t=e.splice(i,1)[0].dom;if(!this.dom.contains(t))return;this.dom.removeChild(t)}};const Pn=g,_n=K;let In=0;function Ln(){return In+=1,In}function zn(t,{dx:e=0,dy:i=0},n){const r=t.transform.translate,[o,s=o]=t.transform.scale;return function(t,[e,i],n){return n[0]>=t[0][0]*e&&n[0]<=t[1][0]*e&&n[1]>=t[0][1]*i&&n[1]<=t[1][1]*i}(n,[o,s],[r[0]+e,r[1]+i])&&(e/=o,i/=s,t.dx=e,t.dy=i,r[0]/=o,r[1]/=s,r[0]+=e,r[1]+=i,r[0]*=o,r[1]*=s),t}const On=function(){const t=this;this.dragStartFlag=!1,this.dragExtent=[[-1/0,-1/0],[1/0,1/0]],this.event={x:0,y:0,dx:0,dy:0,transform:{translate:[0,0],scale:[1,1]}},this.onDragStart=function(e,i){t.event.x=i.offsetX,t.event.y=i.offsetY,t.event.dx=0,t.event.dy=0,t.dragStartFlag=!0},this.onDrag=function(){},this.onDragEnd=function(){t.event.x=event.offsetX,t.event.y=event.offsetY,t.event.dx=0,t.event.dy=0,t.dragStartFlag=!1}};function Fn(t,e){return e<=t[0]?t[0]:e>=t[1]?t[1]:e}function Nn(t,e,i,n){return t.translate[0]/=e,t.translate[1]/=e,t.translate[0]-=n[0]/e-n[0]/i,t.translate[1]-=n[1]/e-n[1]/i,t.scale=[i,i],t.translate[0]*=i,t.translate[1]*=i,t}On.prototype={dragExtent:function(t){return this.dragExtent=t,this},dragStart:function(t){const e=this;return"function"==typeof t&&(this.onDragStart=function(i,n){e.event.x=n.offsetX,e.event.y=n.offsetY,e.event.dx=0,e.event.dy=0,t.call(i,e.event),e.dragStartFlag=!0}),this},drag:function(t){const e=this;return"function"==typeof t&&(this.onDrag=function(i,n){const r=n.offsetX-e.event.x,o=n.offsetY-e.event.y;e.event.x=n.offsetX,e.event.y=n.offsetY,e.event=zn(this.event,{dx:r,dy:o},e.dragExtent),t.call(i,e.event)}),this},dragEnd:function(t){const e=this;return"function"==typeof t&&(this.onDragEnd=function(i,n){e.dragStartFlag=!1,e.event.x=n.offsetX,e.event.y=n.offsetY,e.event.dx=0,e.event.dy=0,t.call(i,e.event)}),this},bindMethods:function(t){const e=this;t.dragTo=function(i,n){e.dragTo(t,i,n)}},execute:function(t,e,i){const n=this;this.event.e=e,e.preventDefault&&e.preventDefault(),this.dragStartFlag||"mousedown"!==i&&"pointerdown"!==i?this.onDragEnd&&this.dragStartFlag&&("mouseup"===i||"mouseleave"===i||"pointerleave"===i||"pointerup"===i)?n.onDragEnd(t,e):this.dragStartFlag&&this.onDrag&&n.onDrag(t,e):n.onDragStart(t,e)}};const Rn=function(){const t=this;this.event={x:0,y:0,dx:0,dy:0,distance:0},this.event.pointers=[],this.event.transform={translate:[0,0],scale:[1,1]},this.zoomBy_=.001,this.zoomExtent_=[0,1/0],this.zoomStartFlag=!1,this.zoomDuration=250,this.onZoomStart=function(e,i){t.event.x=i.offsetX,t.event.y=i.offsetY,t.event.dx=0,t.event.dy=0,t.zoomStartFlag=!0,t.event.distance=0},this.onZoom=function(e,i){t.event.x=i.offsetX,t.event.y=i.offsetY},this.onZoomEnd=function(e,i){t.event.x=i.offsetX,t.event.y=i.offsetY,t.event.dx=0,t.event.dy=0,t.zoomStartFlag=!1,t.event.distance=0},this.onPanStart=function(t,e){},this.onPan=function(t,e){},this.onPanEnd=function(){},this.disableWheel=!1,this.disableDbclick=!1};Rn.prototype.zoomStart=function(t){const e=this;return"function"==typeof t&&(this.zoomStartExe=t,this.onZoomStart=function(i,n,r){if(r.pointers&&2===r.pointers.length){const t=r.pointers;n={x:t[0].offsetX+.5*(t[1].offsetX-t[0].offsetX),y:t[0].offsetY+.5*(t[1].offsetY-t[0].offsetY)}}e.event.x=n.offsetX,e.event.y=n.offsetY,e.event.dx=0,e.event.dy=0,e.zoomStartFlag||t.call(i,e.event),e.zoomStartFlag=!0,e.event.distance=0}),this},Rn.prototype.zoom=function(t){const e=this;return"function"==typeof t&&(this.zoomExe=t,this.onZoom=function(i,n){const r=e.event.transform,o=r.scale[0];let s=o;const a=n.deltaY,h=n.offsetX,c=n.offsetY;s=Fn(e.zoomExtent_,s+-1*a*e.zoomBy_),e.event.transform=Nn(r,o,s,[h,c]),e.event.x=h,e.event.y=c,t.call(i,e.event)}),this},Rn.prototype.zoomEnd=function(t){const e=this;return"function"==typeof t&&(this.zoomEndExe=t,this.onZoomEnd=function(i,n){e.event.x=n.offsetX,e.event.y=n.offsetY,e.event.dx=0,e.event.dy=0,e.zoomStartFlag=!1,t.call(i,e.event),e.event.distance=0}),this},Rn.prototype.zoomTransition=function(){},Rn.prototype.zoomExecute=function(t,e,i){this.eventType="zoom",e.preventDefault&&e.preventDefault(),this.zoomStartFlag?this.onZoom(t,e):this.onZoomStart(t,e,i)},Rn.prototype.zoomPinch=function(t,e,i){const n=i.pointers;if(e.preventDefault&&e.preventDefault(),2===i.pointers.length)if(this.zoomStartFlag){const i=this.event.distance;for(var r=0;r<n.length;r++)if(e.pointerId===n[r].pointerId){n[r]=e;break}const o=R.getDistance({x:n[0].offsetX,y:n[0].offsetY},{x:n[1].offsetX,y:n[1].offsetY}),s={offsetX:this.event.x,offsetY:this.event.y,deltaY:i?i-o:0};this.event.distance=o,this.onZoom(t,s)}else this.onZoomStart(t,e,i)},Rn.prototype.scaleBy=function(t,e,i){const n=this,r=n.event.transform,o=e*r.scale[0],s=r.scale[0],a=this.zoomTarget_||i,h=(a[0]-i[0])*s,c=(a[1]-i[1])*s;let l=0;const u={run(e){const a=r.scale[0],u=Fn(n.zoomExtent_,s+(o-s)*e);n.event.transform=Nn(r,a,u,i),n.event.transform.translate[0]+=h*(e-l)/u,n.event.transform.translate[1]+=c*(e-l)/u,l=e,n.zoomExe&&n.zoomExe.call(t,n.event)},target:t,duration:n.zoomDuration,delay:0,end:function(){n.onZoomEnd&&n.onZoomEnd(t,{})},loop:1,direction:"default",ease:"default"};Pn.add(Ln(),u,_n(u.ease))},Rn.prototype.zoomTarget=function(t){this.zoomTarget_=t},Rn.prototype.scaleTo=function(t,e,i){const n=this,r=n.event.transform,o=r.scale[0],s=this.zoomTarget_||i,a=(s[0]-i[0])*o,h=(s[1]-i[1])*o;let c=0;const l={run(s){const l=r.scale[0],u=Fn(n.zoomExtent_,o+(e-o)*s);n.event.transform=Nn(r,l,u,i),n.event.transform.translate[0]+=a*(s-c)/u,n.event.transform.translate[1]+=h*(s-c)/u,c=s,n.zoomStartFlag||n.onZoomStart(t,{offsetX:i[0],offsetY:i[1]},{}),n.zoomExe&&n.zoomExe.call(t,n.event)},target:t,duration:n.zoomDuration,delay:0,end:function(){n.onZoomEnd&&n.onZoomEnd(t,n.event)},loop:1,direction:"default",ease:"default"};Pn.add(Ln(),l,_n(l.ease))},Rn.prototype.panTo=function(t,e){const i=this,n=i.event.transform,r=e[0]-i.event.x,o=e[1]-i.event.y;let s=0;const a={run(e){const[a]=n.scale;n.translate[0]+=r*(e-s)/a,n.translate[1]+=o*(e-s)/a,s=e,i.zoomExe&&i.zoomExe.call(t,i.event)},target:t,duration:i.zoomDuration,delay:0,end:function(){i.onZoomEnd&&i.onZoomEnd(t,i.event)},loop:1,direction:"default",ease:"default"};Pn.add(Ln(),a,_n(a.ease))},Rn.prototype.bindMethods=function(t){const e=this;t.scaleTo=function(i,n){e.scaleTo(t,i,n)},t.scaleBy=function(i,n){return e.scaleBy(t,i,n),t},t.panTo=function(i,n){return e.panTo(t,i,n),t}},Rn.prototype.zoomFactor=function(t){return this.zoomBy_=t,this},Rn.prototype.scaleExtent=function(t){return this.zoomExtent_=t,this},Rn.prototype.duration=function(t){return this.zoomDuration=t||250,this},Rn.prototype.panExtent=function(t){return this.panExtent_=t,this.panFlag=!0,this},Rn.prototype.panExecute=function(t,e,i,n){if(1===n.pointers.length){if(this.event.e=e,this.eventType="pan",e.preventDefault&&e.preventDefault(),"touchstart"!==e.type&&"touchmove"!==e.type&&"touchend"!==e.type&&"touchcancel"!==e.type||(e.offsetX=e.touches[0].clientX,e.offsetY=e.touches[0].clientY),this.zoomStartFlag||"mousedown"!==i&&"pointerdown"!==i)if(!this.onZoomEnd||"mouseup"!==i&&"mouseleave"!==i&&"pointerup"!==i&&"pointerleave"!==i){if(this.zoomExe){const i=e.offsetX-this.event.x,n=e.offsetY-this.event.y;this.event.x=e.offsetX,this.event.y=e.offsetY,this.event=zn(this.event,{dx:i,dy:n},this.panExtent_),this.zoomExe.call(t,this.event)}}else this.onZoomEnd(t,e);else this.onZoomStart(t,e,{});e.preventDefault&&e.preventDefault()}};var jn={drag:function(){return new On},zoom:function(){return new Rn}};const Gn=["Courier","Courier-Bold","Courier-Oblique","Courier-BoldOblique","Helvetica","Helvetica-Bold","Helvetica-Oblique","Helvetica-BoldOblique","Symbol","Times-Roman","Times-Bold","Times-Italic","Times-BoldItalic","ZapfDingbats"],Xn={fillStyle:{prop:"fillColor",getValue:t=>t},fill:{prop:"fillColor",getValue:t=>t},strokeStyle:{prop:"strokeColor",getValue:t=>t},stroke:{prop:"strokeColor",getValue:t=>t},globalAlpha:{prop:"opacity",getValue:t=>t},lineDash:{prop:"dash",getValue:t=>t[0]},textAlign:{prop:"align",getValue:t=>t},font:{prop:"font",getValue:t=>{const e=t.match(/\b[A-Za-z]+[0-9]*[A-Za-z0-9]*\b/gm);return e&&e.length>0&&-1!==Gn.indexOf(e[0])?e[0]:"Helvetica"}}},Yn={fill:"fillStyle",stroke:"strokeStyle",lineDash:"setLineDash",opacity:"globalAlpha","stroke-width":"lineWidth","stroke-dasharray":"setLineDash"},Hn=R,Un=g;let Vn=0;const qn=jn.zoom(),Zn=jn.drag();function Wn(){return Vn+=1,Vn}const $n=function(){ln.apply(this,arguments)};function Qn(t){const e={translateX:0,translateY:0,scaleX:1,scaleY:1};return t&&(t.translate&&t.translate.length>0&&(e.translateX=t.translate[0],e.translateY=t.translate[1]),t.scale&&t.scale.length>0&&(e.scaleX=t.scale[0],e.scaleY=t.scale[1]||e.scaleX)),e}function Jn(){const t=this,{transform:e,points:i=[]}=t.attr,{translateX:n,translateY:r,scaleX:o,scaleY:s}=Qn(e);let a=0;if(i&&i.length>0){let e=i[0].x,h=i[0].x,c=i[0].y,l=i[0].y;for(let t=1;t<i.length;t+=1)e>i[t].x&&(e=i[t].x),h<i[t].x&&(h=i[t].x),c>i[t].y&&(c=i[t].y),l<i[t].y&&(l=i[t].y);t.BBox={x:n+e*o,y:r+c*s,width:(h-e)*o,height:(l-c)*s},a=c}else t.BBox={x:0,y:0,width:0,height:0};e&&e.rotate?t.BBoxHit=Hn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox,t.abYposition=a}function Kn(t={},e="linear"){this.config=t,this.type=e,this.dom={},this.mode=this.config.mode&&"percent"!==this.config.mode?"absolute":"percent"}function tr(t){return new Kn(t,"linear")}function er(t){return new Kn(t,"radial")}function ir(t,e,i){this.imageData=t,this.width=e,this.height=i}function nr(t,e={}){const i=e.id?e.id:"mask-"+Math.ceil(1e3*Math.random());this.config=e,this.mask=new Ar(t.dom.ctx,{el:"g",attr:{id:i}},Wn(),t.vDomIndex)}function rr(t){return new nr(this,t)}function or(t,e={}){const i=e.id?e.id:"clip-"+Math.ceil(1e3*Math.random());this.clip=new Ar(t.dom.ctx,{el:"g",attr:{id:i}},Wn(),t.vDomIndex)}function sr(t){return new or(this,t)}function ar(t,e={},i=0,n=0){const r=this,o=e.id?e.id:"pattern-"+Math.ceil(1e3*Math.random());this.repeatInd=e.repeat?e.repeat:"repeat",r.pattern=Pr(null,{},{enableEvents:!1,enableResize:!1}),r.pattern.setSize(i,n),r.pattern.setAttr("id",o),t.prependChild([r.pattern]),r.pattern.vDomIndex=t.vDomIndex+":"+o,r.pattern.onChange((function(){r.patternObj=t.ctx.createPattern(r.pattern.domEl,r.repeatInd)}))}function hr(t,e=0,i=0){return new ar(this,t,e,i)}function cr(){this.BBox={x:0,y:0,width:0,height:0},this.BBoxHit={x:0,y:0,width:0,height:0}}function lr(t,e,i){const n=this;return n.ctx=t,n.nodeName="dummy",n.attr=e,n.style=i,n.stack=[n],this}function ur(t,e,i,n,r,o){const s=this;s.ctx=t,s.attr=e,s.style=i,s.nodeName="Image",s.nodeExe=o;for(const t in e)this.setAttr(t,e[t]);Un.vDomChanged(o.vDomIndex),s.stack=[s]}function fr(t,e,i){const n=this;n.ctx=t,n.attr=e,n.style=i,n.nodeName="text",n.stack=[n],n.textHeight=0,n.height=1,n.attr.width&&n.attr.text&&this.fitWidth()}($n.prototype=new ln).constructor=$n,$n.prototype.createNode=function(t,e,i){return new Ar(t,e,Wn(),i)},Kn.prototype=new an,Kn.prototype.exe=function(t,e){return"linear"===this.type&&"percent"===this.mode?this.linearGradient(t,e):"linear"===this.type&&"absolute"===this.mode?this.absoluteLinearGradient(t):"radial"===this.type&&"percent"===this.mode?this.radialGradient(t,e):"radial"===this.type&&"absolute"===this.mode?this.absoluteRadialGradient(t):void console.error("wrong Gradiant type")},Kn.prototype.setAttr=function(t,e){this.config[t]=e},Kn.prototype.exePdf=function(t,e,i){return"linear"===this.type&&"percent"===this.mode?this.linearGradientPdf(t,e,i):"linear"===this.type&&"absolute"===this.mode?this.absoluteLinearGradientPdf(t,i):"radial"===this.type&&"percent"===this.mode?this.radialGradientPdf(t,e,i):"radial"===this.type&&"absolute"===this.mode?this.absoluteRadialGradientPdf(t,i):void console.error("wrong Gradiant type")},Kn.prototype.linearGradientPdf=function(t,e,i){const{translate:n=[0,0]}=i,r=t.linearGradient(n[0]+e.x+e.width*(this.config.x1/100),n[1]+0+e.height*(this.config.y1/100),n[0]+e.x+e.width*(this.config.x2/100),n[1]+0+e.height*(this.config.y2/100));return(this.config.colorStops??[]).forEach((t=>{r.stop(t.offset/100,t.color,t.opacity)})),r},Kn.prototype.linearGradient=function(t,e){const i=t.createLinearGradient(e.x+e.width*(this.config.x1/100),e.y+e.height*(this.config.y1/100),e.x+e.width*(this.config.x2/100),e.y+e.height*(this.config.y2/100));return(this.config.colorStops??[]).forEach((t=>{i.addColorStop(t.offset/100,t.color)})),i},Kn.prototype.absoluteLinearGradient=function(t){const e=t.createLinearGradient(this.config.x1,this.config.y1,this.config.x2,this.config.y2);return(this.config.colorStops??[]).forEach((t=>{e.addColorStop(t.offset,t.color)})),e},Kn.prototype.absoluteLinearGradientPdf=function(t,e){const{translate:i=[0,0]}=e,n=t.linearGradient(i[0]+this.config.x1,i[1]+this.config.y1,i[0]+this.config.x2,i[1]+this.config.y2);return(this.config.colorStops??[]).forEach((t=>{n.stop(t.offset,t.color,t.opacity)})),n},Kn.prototype.radialGradient=function(t,e){const{innerCircle:i={},outerCircle:n={}}=this.config,r=t.createRadialGradient(e.x+e.width*(i.x/100),e.y+e.height*(i.y/100),e.width>e.height?e.width*i.r/100:e.height*i.r/100,e.x+e.width*(n.x/100),e.y+e.height*(n.y/100),e.width>e.height?e.width*n.r/100:e.height*n.r/100);return(this.config.colorStops??[]).forEach((t=>{r.addColorStop(t.offset/100,t.color)})),r},Kn.prototype.radialGradientPdf=function(t,e,i){const{translate:n=[0,0]}=i,{innerCircle:r={},outerCircle:o={}}=this.config,s=t.radialGradient(n[0]+e.x+e.width*(r.x/100),n[1]+0+e.height*(r.y/100),r.r,n[0]+e.x+e.width*(o.x/100),n[1]+0+e.height*(o.y/100),o.r2);return(this.config.colorStops??[]).forEach((t=>{s.stop(t.offset/100,t.color,t.opacity)})),s},Kn.prototype.absoluteRadialGradient=function(t,e){const{innerCircle:i={},outerCircle:n={}}=this.config,r=t.createRadialGradient(i.x,i.y,i.r,n.x,n.y,n.r);return(this.config.colorStops??[]).forEach((t=>{r.addColorStop(t.offset/100,t.color)})),r},Kn.prototype.absoluteRadialGradientPdf=function(t,e,i){const{translate:n=[0,0]}=i,{innerCircle:r={},outerCircle:o={}}=this.config,s=t.radialGradient(n[0]+r.x,n[1]+r.y,r.r,n[0]+o.x,n[1]+o.y,o.r);return(this.config.colorStops??[]).forEach((t=>{s.stop(t.offset/100,t.color)})),s},Kn.prototype.colorStops=function(t){return"[object Array]"===Object.prototype.toString.call(t)&&(this.config.colorStops=t,this)},ir.prototype.get=function(t){const e=this.imageData?this.imageData.pixels:[],i=(t.y-1)*(4*this.width)+4*(t.x-1);return"rgba("+e[i]+", "+e[i+1]+", "+e[i+2]+", "+e[i+3]+")"},ir.prototype.put=function(t,e){const i=(t.y-1)*(4*this.width)+4*(t.x-1);return this.imageData.pixels[i]=e[0],this.imageData.pixels[i+1]=e[1],this.imageData.pixels[i+2]=e[2],this.imageData.pixels[i+3]=e[3],this},nr.prototype.setAttr=function(t,e){this.config[t]=e},nr.prototype.exe=function(){return this.mask.execute(),this.mask.dom.ctx.globalCompositeOperation=this.config.globalCompositeOperation||"destination-atop",!0},or.prototype.exe=function(){return this.clip.execute(),this.clip.dom.ctx.clip(),!0},ar.prototype.repeat=function(t){this.repeatInd=t},ar.prototype.exe=function(){return this.patternObj},cr.prototype={render:function(t){const e=this;if(t.transform){const{transform:i}=t,{scale:n=[1,1],skew:r=[0,0],translate:o=[0,0]}=i,[s=1,a=s]=n,[h=0,c=h]=r,[l=0,u=l]=o;e.ctx.transform(s,h,c,a,l,u),i.rotate&&i.rotate.length>0&&(e.ctx.translate(i.rotate[1]||0,i.rotate[2]||0),e.ctx.rotate(i.rotate[0]*(Math.PI/180)),e.ctx.translate(-i.rotate[1]||0,-i.rotate[2]||0))}for(let t=0;t<e.stack.length;t+=1)e.stack[t].execute()},renderPdf:function(t,e,i){const n=this;"cell"===n.attr.class&&console.log("cell");const r=i?n.attr.transform||{}:n.abTransform||{},{scale:o=[1,1],skew:s=[0,0],translate:a=[0,0]}=r,[h=1,c=h]=o,[l=0,u=l]=s,[f=0,d=f]=a;e.transform(h,l,u,c,f,d),r.rotate&&r.rotate.length>0&&(e.translate(r.rotate[1]||0,r.rotate[2]||0),e.rotate(r.rotate[0]*(Math.PI/180)),e.translate(-r.rotate[1]||0,-r.rotate[2]||0));for(let t=0;t<n.stack.length;t+=1)n.stack[t].executePdf(e,i)},setAttr:function(t,e){null==e&&null!=this.attr[t]?delete this.attr[t]:this.attr[t]=e},setStyle:function(t,e){null==e&&null!=this.style[t]?delete this.style[t]:this.style[t]=e},applyStyles:function(){"#000000"!==this.ctx.fillStyle&&this.ctx.fill(),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke()},applyStylesPdf:function(t){const e=this.style.fillStyle??this.style.fill??this.style.fillColor,i=this.style.stroke??this.style.strokeStyle??this.style.strokeColor;e&&i?t.fillAndStroke(e,i):e?t.fill():i&&t.stroke()}},lr.prototype=new cr,lr.prototype.constructor=lr,ur.prototype=new cr,ur.prototype.constructor=ur,ur.prototype.setAttr=function(t,e){const i=this;"src"===t&&("string"==typeof e?(i.image=i.image?i.image:function(t){const e=new Image;return e.crossOrigin="anonymous",e.onload=function(){t.attr.height=t.attr.height?t.attr.height:t.attr.width/this.naturalWidth*this.naturalHeight,t.attr.width=t.attr.width?t.attr.width:t.attr.height/this.naturalHeight*this.naturalWidth,t.imageObj=this,t.nodeExe.attr.onload&&"function"==typeof t.nodeExe.attr.onload&&t.nodeExe.attr.onload.call(t.nodeExe,t.image),t.nodeExe.BBoxUpdate=!0,Un.vDomChanged(t.nodeExe.vDomIndex)},e.onerror=function(e){t.nodeExe.attr.onerror&&"function"==typeof t.nodeExe.attr.onerror&&t.nodeExe.attr.onerror.call(t.nodeExe,e)},e}(i),i.image.src!==e&&(i.image.src=e)):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement?(i.imageObj=e,i.attr.height=i.attr.height?i.attr.height:e.height,i.attr.width=i.attr.width?i.attr.width:e.width):(e instanceof Ar||e instanceof Mr)&&(i.imageObj=e.domEl,i.attr.height=i.attr.height?i.attr.height:e.attr.height,i.attr.width=i.attr.width?i.attr.width:e.attr.width)),this.attr[t]=e,Un.vDomChanged(this.nodeExe.vDomIndex)},ur.prototype.updateBBox=function(){const t=this,{transform:e,x:i=0,y:n=0,width:r=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(e);t.BBox={x:(s+i)*h,y:(a+n)*c,width:r*h,height:o*c},e&&e.rotate?t.BBoxHit=Hn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox,t.abYposition=n},ur.prototype.execute=function(){const{width:t=0,height:e=0,x:i=0,y:n=0}=this.attr;this.imageObj&&this.ctx.drawImage(this.imageObj,i,n,t,e)},ur.prototype.executePdf=function(t){const{width:e=0,height:i=0,x:n=0,y:r=0}=this.attr;this.attr.src&&(t.translate(0,-this.abYposition),t.image(this.attr.src,n,r,{width:e,height:i}))},ur.prototype.applyStyles=function(){},ur.prototype.in=function(t){const{width:e=0,height:i=0,x:n=0,y:r=0}=this.attr;return t.x>=n&&t.x<=n+e&&t.y>=r&&t.y<=r+i},fr.prototype=new cr,fr.prototype.constructor=fr,fr.prototype.setAttr=function(t,e){null==e&&null!=this.attr[t]?delete this.attr[t]:(this.attr[t]=e,("width"===t||"text"===t)&&this.attr.width&&this.attr.text&&this.fitWidth())},fr.prototype.fitWidth=function(){this.style.font&&(this.ctx.font=this.style.font);const t=this.attr.width,e=[];let i="",n=0;const r=this.attr.text.toString().split("\n").reduce(((e,i)=>(i.split(/( )/g).forEach((i=>{this.ctx.measureText(i).width<t?e.push(i):e=e.concat(i.match(new RegExp(".{1,1}","g")))})),e.push("\n"),e)),[]);for(;n<r.length;)"\n"===r[n]?(e.push(i),i=" "):this.ctx.measureText(i+r[n]).width<t?i+=r[n]:(i&&i.length>0&&" "!==i&&e.push(i),i=r[n]),n++;i&&" "!==i&&e.push(i),this.textList=e},fr.prototype.text=function(t){this.attr.text=t,this.attr.width&&this.fitWidth()},fr.prototype.updateBBox=function(){const t=this;let e=1,i=0,{x:n=0,y:r=0,transform:o}=t.attr;const{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(o),{doc:l}=t.ctx;if(this.style.font?(this.ctx.font=this.style.font,e=parseInt(this.style.font.replace(/[^\d.]/g,""),10)||1,t.textHeight=e+3):(t.textHeight=this.ctx.measureText("I2DJS-Z").fontBoundingBoxAscent,e=t.textHeight+7),this.attr.width&&this.textList&&this.textList.length>0?(i=this.attr.width,e*=this.textList.length):i=this.ctx.measureText(this.attr.text).width,"center"===this.style.textAlign?n-=i/2:"right"===this.style.textAlign&&(n-=i),l){const t=this.style.align??this.style.textAlign,i={...this.attr.width&&{width:this.attr.width},...this.style.lineGap&&{lineGap:this.style.lineGap},...this.style.textBaseline&&{textBaseline:this.style.textBaseline},...t&&{align:t}};this.style.font&&l.fontSize(parseInt(this.style.font.replace(/[^\d.]/g,""),10)||10),e=l.heightOfString(this.attr.text,i)}t.width=i,t.height=e,t.x=n,t.y=r,t.BBox={x:(s+n)*h,y:(a+r)*c,width:i*h,height:e*c},t.abYposition=r,o&&o.rotate?t.BBoxHit=Hn.rotateBBox(this.BBox,o):t.BBoxHit=this.BBox},fr.prototype.execute=function(){if(void 0!==this.attr.text&&null!==this.attr.text)if(this.textList&&this.textList.length>0)for(var t=0;t<this.textList.length;t++)"#000000"!==this.ctx.fillStyle&&this.ctx.fillText(this.textList[t],this.attr.x,this.attr.y+this.textHeight*(t+1)),"#000000"!==this.ctx.strokeStyle&&this.ctx.strokeText(this.textList[t],this.attr.x,this.attr.y+this.textHeight*(t+1));else"#000000"!==this.ctx.fillStyle&&this.ctx.fillText(this.attr.text,this.attr.x,this.attr.y+this.height),"#000000"!==this.ctx.strokeStyle&&this.ctx.strokeText(this.attr.text,this.attr.x,this.attr.y+this.height)},fr.prototype.executePdf=function(t,e){if(void 0!==this.attr.text&&null!==this.attr.text){this.style.font&&t.fontSize(parseInt(this.style.font.replace(/[^\d.]/g,""),10)||10);const i=this.style.align??this.style.textAlign,n={...this.attr.width&&{width:this.attr.width},...this.style.lineGap&&{lineGap:this.style.lineGap},...this.style.textBaseline&&{textBaseline:this.style.textBaseline},...i&&{align:i}};(this.style.fillStyle||this.style.fill||this.style.fillColor)&&t.text(this.attr.text,this.attr.x,e?this.attr.y:0,n),(this.style.strokeStyle||this.style.stroke||this.style.strokeColor)&&t.text(this.attr.text,this.attr.x,e?this.attr.y:0,n)}},fr.prototype.in=function(t){const{x:e=0,y:i=0,width:n=0,height:r=0}=this;return t.x>=e&&t.x<=e+n&&t.y>=i&&t.y<=i+r};const dr=function(t,e,i){const n=this;n.ctx=t,n.attr=e,n.style=i,n.nodeName="circle",n.stack=[n]};(dr.prototype=new cr).constructor=dr,dr.prototype.updateBBox=function(){const t=this,{transform:e,r:i=0,cx:n=0,cy:r=0}=t.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Qn(e);t.BBox={x:o+(n-i)*a,y:s+(r-i)*h,width:2*i*a,height:2*i*h},e&&e.rotate?t.BBoxHit=Hn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox,t.abYposition=r},dr.prototype.execute=function(){const{r:t=0,cx:e=0,cy:i=0}=this.attr;this.ctx.beginPath(),this.ctx.arc(e,i,t,0,2*Math.PI,!1),this.applyStyles(),this.ctx.closePath()},dr.prototype.executePdf=function(t,e){const{r:i=0,cx:n=0,cy:r=0}=this.attr;e||t.translate(0,-this.abYposition),t.circle(parseInt(n),parseInt(r),parseInt(i)),this.applyStylesPdf(t)},dr.prototype.in=function(t,e){const{r:i=0,cx:n=0,cy:r=0}=this.attr;return Math.sqrt((t.x-n)*(t.x-n)+(t.y-r)*(t.y-r))<=i};const pr=function(t,e,i){const n=this;n.ctx=t,n.attr=e,n.style=i,n.nodeName="line",n.stack=[n]};function yr(t,e,i){const n=this;n.ctx=t,n.attr=e,n.style=i,n.nodeName="polyline",n.stack=[n]}(pr.prototype=new cr).constructor=pr,pr.prototype.updateBBox=function(){const t=this,{transform:e,x1:i=0,y1:n=0,x2:r=0,y2:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(e);t.BBox={x:s+(i<r?i:r)*h,y:a+(n<o?n:o)*c,width:Math.abs(r-i)*h,height:Math.abs(o-n)*c},e&&e.rotate?t.BBoxHit=Hn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox,t.abYposition=n<o?n:o},pr.prototype.execute=function(){const{ctx:t}=this,{x1:e=0,y1:i=0,x2:n=0,y2:r=0}=this.attr;t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),this.applyStyles(),t.closePath()},pr.prototype.executePdf=function(t,e){const{x1:i=0,y1:n=0,x2:r=0,y2:o=0}=this.attr;e||t.translate(0,-this.abYposition),t.moveTo(i,n),t.lineTo(r,o),t.stroke()},pr.prototype.in=function(t){const{x1:e=0,y1:i=0,x2:n=0,y2:r=0}=this.attr;return parseFloat(Hn.getDistance({x:e,y:i},t)+Hn.getDistance(t,{x:n,y:r})).toFixed(1)===parseFloat(Hn.getDistance({x:e,y:i},{x:n,y:r})).toFixed(1)},yr.prototype=new cr,yr.constructor=yr,yr.prototype.execute=function(){const t=this;let e;if(this.attr.points&&0!==this.attr.points.length){this.ctx.beginPath(),t.ctx.moveTo(this.attr.points[0].x,this.attr.points[0].y);for(var i=1;i<this.attr.points.length;i++)e=this.attr.points[i],t.ctx.lineTo(e.x,e.y);this.applyStyles(),this.ctx.closePath()}},yr.prototype.executePdf=function(t,e){let i;if(this.attr.points&&0!==this.attr.points.length){e||t.translate(0,-this.abYposition),t.moveTo(this.attr.points[0].x,this.attr.points[0].y);for(var n=1;n<this.attr.points.length;n++)i=this.attr.points[n],t.lineTo(i.x,i.y);t.stroke()}},yr.prototype.updateBBox=Jn,yr.prototype.in=function(t){let e=!1;for(let i=0,n=this.attr.points.length;i<=n-2;i++){const n=this.attr.points[i],r=this.attr.points[i+1];e=e||parseFloat(Hn.getDistance({x:n.x,y:n.y},t)+Hn.getDistance(t,{x:r.x,y:r.y})).toFixed(1)===parseFloat(Hn.getDistance({x:n.x,y:n.y},{x:r.x,y:r.y})).toFixed(1)}return e};const xr=function(t,e,i){const n=this;return n.ctx=t,n.angle=0,n.nodeName="path",n.attr=e,n.style=i,n.attr.d&&(Ve.isTypePath(n.attr.d)?(n.path=n.attr.d,n.attr.d=n.attr.d.fetchPathString()):n.path=Ve.instance(n.attr.d),n.pathNode=new Path2D(n.attr.d)),n.stack=[n],n};function gr(t){if("[object Array]"!==Object.prototype.toString.call(t))return void console.error("Points expected as array [{x: , y:}]");if(t&&0===t.length)return;const e=new Path2D;e.moveTo(t[0].x,t[0].y);for(let i=1;i<t.length;i++)e.lineTo(t[i].x,t[i].y);return e.closePath(),{path:e,points:t,rawPoints:t.map((t=>[t.x,t.y])),execute:function(t){t.beginPath();const e=this.points;t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y);t.closePath()}}}(xr.prototype=new cr).constructor=xr,xr.prototype.updateBBox=function(){const t=this,{transform:e}=t.attr,{translateX:i,translateY:n,scaleX:r,scaleY:o}=Qn(e);t.BBox=t.path?t.path.BBox:{x:0,y:0,width:0,height:0},t.abYposition=t.BBox.y,t.BBox.x=i+t.BBox.x*r,t.BBox.y=n+t.BBox.y*o,t.BBox.width*=r,t.BBox.height*=o,e&&e.rotate?t.BBoxHit=Hn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},xr.prototype.setAttr=function(t,e){this.attr[t]=e,"d"===t&&(Ve.isTypePath(e)?(this.path=e,this.attr.d=e.fetchPathString()):this.path=Ve.instance(this.attr.d),this.pathNode=new Path2D(this.attr.d))},xr.prototype.getPointAtLength=function(t){return this.path?this.path.getPointAtLength(t):{x:0,y:0}},xr.prototype.getAngleAtLength=function(t){return this.path?this.path.getAngleAtLength(t):0},xr.prototype.getTotalLength=function(){return this.path?this.path.getTotalLength():0},xr.prototype.execute=function(){this.attr.d&&("#000000"!==this.ctx.fillStyle||"#000000"!==this.ctx.strokeStyle?("#000000"!==this.ctx.fillStyle&&this.ctx.fill(this.pathNode),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke(this.pathNode)):this.path.execute(this.ctx))},xr.prototype.executePdf=function(t,e){this.attr.d&&(e||t.translate(0,-this.abYposition),t.path(this.attr.d),this.applyStylesPdf(t))},xr.prototype.applyStyles=function(){},xr.prototype.in=function(t){let e=!1;return this.attr.d&&this.pathNode?(this.ctx.save(),this.ctx.scale(1/this.ctx.pixelRatio,1/this.ctx.pixelRatio),e=this.ctx.isPointInPath(this.pathNode,t.x,t.y),this.ctx.restore(),e):e};const mr=function(t,e,i){const n=this;return n.ctx=t,n.nodeName="polygon",n.attr=e,n.style=i,n.stack=[n],n.attr.points&&(n.polygon=gr(n.attr.points)),this};(mr.prototype=new cr).constructor=mr,mr.prototype.setAttr=function(t,e){this.attr[t]=e,"points"===t&&(this.polygon=gr(this.attr.points),this.polygon&&(this.attr.points=this.polygon.points))},mr.prototype.updateBBox=Jn,mr.prototype.execute=function(){this.polygon&&("#000000"!==this.ctx.fillStyle||"#000000"!==this.ctx.strokeStyle?("#000000"!==this.ctx.fillStyle&&this.ctx.fill(this.polygon.path),"#000000"!==this.ctx.strokeStyle&&this.ctx.stroke(this.polygon.path)):this.polygon.execute(this.ctx))},mr.prototype.executePdf=function(t,e){this.polygon&&(e||t.translate(0,-this.abYposition),t.polygon(...this.polygon.rawPoints),this.applyStylesPdf(t))},mr.prototype.applyStyles=function(){},mr.prototype.in=function(t){let e=!1;return!!this.polygon&&(this.ctx.save(),this.ctx.scale(1/this.ctx.pixelRatio,1/this.ctx.pixelRatio),e=this.style.fillStyle?this.ctx.isPointInPath(this.polygon.path,t.x,t.y):e,this.ctx.restore(),e)};const vr=function(t,e,i){const n=this;return n.ctx=t,n.nodeName="ellipse",n.attr=e,n.style=i,n.stack=[n],this};(vr.prototype=new cr).constructor=vr,vr.prototype.updateBBox=function(){const t=this,{transform:e,cx:i=0,cy:n=0,rx:r=0,ry:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(e);t.BBox={x:s+(i-r)*h,y:a+(n-o)*c,width:2*r*h,height:2*o*c},e&&e.rotate?t.BBoxHit=Hn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox,this.abYposition=n-o},vr.prototype.execute=function(){const t=this.ctx,{cx:e=0,cy:i=0,rx:n=0,ry:r=0}=this.attr;t.beginPath(),t.ellipse(e,i,n,r,0,0,2*Math.PI),this.applyStyles(),t.closePath()},vr.prototype.executePdf=function(t,e){const{cx:i=0,cy:n=0,rx:r=0,ry:o=0}=this.attr;e||t.translate(0,-this.abYposition),t.ellipse(i,n,r,o),this.applyStylesPdf(t)},vr.prototype.in=function(t){const{cx:e=0,cy:i=0,rx:n=0,ry:r=0}=this.attr;return(t.x-e)*(t.x-e)/(n*n)+(t.y-i)*(t.y-i)/(r*r)<=1};const wr=function(t,e,i){const n=this;return n.ctx=t,n.nodeName="rect",n.attr=e,n.style=i,n.stack=[n],this};function br(t,e){const{x:i=0,y:n=0,width:r=0,height:o=0,rx:s=0,ry:a=0}=e;t.beginPath(),t.moveTo(i+s,n),t.lineTo(i+r-s,n),t.quadraticCurveTo(i+r,n,i+r,n+a),t.lineTo(i+r,n+o-a),t.quadraticCurveTo(i+r,n+o,i+r-s,n+o),t.lineTo(i+s,n+o),t.quadraticCurveTo(i,n+o,i,n+o-a),t.lineTo(i,n+a),t.quadraticCurveTo(i,n,i+s,n),t.closePath()}(wr.prototype=new cr).constructor=wr,wr.prototype.updateBBox=function(){const t=this,{transform:e,x:i=0,y:n=0,width:r=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Qn(e);t.BBox={x:s+i*h,y:a+n*c,width:r*h,height:o*c},e&&e.rotate?t.BBoxHit=Hn.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox,t.abYposition=n},wr.prototype.executePdf=function(t,e){const{x:i=0,y:n=0,width:r=0,height:o=0,rx:s=0,ry:a=0}=this.attr;e||t.translate(0,-this.abYposition),s||a?function(t,e){const{x:i=0,y:n=0,width:r=0,height:o=0,rx:s=0,ry:a=0}=e;t.moveTo(i+s,n),t.lineTo(i+r-s,n),t.quadraticCurveTo(i+r,n,i+r,n+a),t.lineTo(i+r,n+o-a),t.quadraticCurveTo(i+r,n+o,i+r-s,n+o),t.lineTo(i+s,n+o),t.quadraticCurveTo(i,n+o,i,n+o-a),t.lineTo(i,n+a),t.quadraticCurveTo(i,n,i+s,n)}(t,{x:i,y:n,width:r,height:o,rx:s,ry:a}):t.rect(i,n,r,o),this.applyStylesPdf(t)},wr.prototype.execute=function(){const t=this.ctx,{x:e=0,y:i=0,width:n=0,height:r=0,rx:o=0,ry:s=0}=this.attr;"#000000"===t.fillStyle&&"#000000"===t.strokeStyle||("#000000"!==t.fillStyle&&(o||s?(br(t,{x:e,y:i,width:n,height:r,rx:o,ry:s}),t.fill()):t.fillRect(e,i,n,r)),"#000000"!==t.strokeStyle&&(o||s?(br(t,{x:e,y:i,width:n,height:r,rx:o,ry:s}),t.stroke()):t.strokeRect(e,i,n,r)))},wr.prototype.in=function(t){const{x:e=0,y:i=0,width:n=0,height:r=0}=this.attr;return t.x>=e&&t.x<=e+n&&t.y>=i&&t.y<=i+r};const Br=function(t,e,i){const n=this;return n.nodeName="g",n.ctx=t,n.attr=e,n.style=i,n.stack=new Array(0),this};(Br.prototype=new cr).constructor=Br,Br.prototype.updateBBox=function(t){const e=this;let i,n,r,o;const{transform:s}=e.attr,{translateX:a,translateY:h,scaleX:c,scaleY:l}=Qn(s);if(e.BBox={},t&&t.length>0){let e,s,a;for(let h=0;h<t.length;h+=1)e=t[h],s=e.dom.BBoxHit.x,a=e.dom.BBoxHit.y,i=void 0===i||i>s?s:i,r=void 0===r||r>a?a:r,n=void 0===n||n<s+e.dom.BBoxHit.width?s+e.dom.BBoxHit.width:n,o=void 0===o||o<a+e.dom.BBoxHit.height?a+e.dom.BBoxHit.height:o}i=void 0===i?0:i,r=void 0===r?0:r,n=void 0===n?0:n,o=void 0===o?0:o,e.BBox.x=a+i*c,e.BBox.y=h+r*l,e.BBox.width=Math.abs(n-i)*c,e.BBox.height=Math.abs(o-r)*l,e.attr.transform&&e.attr.transform.rotate?e.BBoxHit=Hn.rotateBBox(this.BBox,this.attr.transform):e.BBoxHit=this.BBox},Br.prototype.child=function(t){const e=this,i=t;i instanceof Ar?(i.dom.parent=e,i.vDomIndex=e.vDomIndex,e.stack[e.stack.length]=i):i instanceof $n?i.stack.forEach((t=>{t.dom.parent=e,t.vDomIndex=e.vDomIndex,e.stack[e.stack.length]=t})):console.log("wrong Object")},Br.prototype.in=function(t){const e=t.x,i=t.y,{BBox:n}=this,{transform:r}=this.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Qn(r);return e>=(n.x-o)/a&&e<=(n.x-o+n.width)/a&&i>=(n.y-s)/h&&i<=(n.y-s+n.height)/h};const Ar=function(t,e,i,n){switch(this.style=e.style||{},this.setStyle(e.style),this.attr=e.attr||{},this.id=i,this.nodeName=e.el,this.nodeType="CANVAS",this.children=[],this.events={},this.ctx=t,this.vDomIndex=n,this.bbox=void 0===e.bbox||e.bbox,this.BBoxUpdate=!0,this.block=e.block||!1,e.el){case"circle":this.dom=new dr(this.ctx,this.attr,this.style);break;case"rect":this.dom=new wr(this.ctx,this.attr,this.style);break;case"line":this.dom=new pr(this.ctx,this.attr,this.style);break;case"polyline":this.dom=new yr(this.ctx,this.attr,this.style);break;case"path":this.dom=new xr(this.ctx,this.attr,this.style);break;case"group":case"g":this.dom=new Br(this.ctx,this.attr,this.style);break;case"text":this.dom=new fr(this.ctx,this.attr,this.style);break;case"image":this.dom=new ur(this.ctx,this.attr,this.style,e.onload,e.onerror,this);break;case"polygon":this.dom=new mr(this.ctx,this.attr,this.style);break;case"ellipse":this.dom=new vr(this.ctx,this.attr,this.style);break;default:this.dom=new lr(this.ctx,this.attr,this.style),this.bbox=!1,this.BBoxUpdate=!1}this.dom.nodeExe=this};function Tr(t){return ti.RGBAInstanceCheck(t)&&(t=t.rgba),"#000"===t||"#000000"===t||"black"===t?"#010101":t}function kr(t,e){const i=document.createElement("canvas");i.setAttribute("height",e),i.setAttribute("width",t),this.canvas=i,this.context=this.canvas.getContext("2d")}function Sr(t,e){const i=new Image;return i.crossOrigin="anonymous",i.src=e,t?(i.onload=function(){if(t){if(t.attr){const e=t.attr.width||t.attr.height?t.attr.width?t.attr.width:t.attr.height/this.naturalHeight*this.naturalWidth:this.naturalWidth,i=t.attr.width||t.attr.height?t.attr.height?t.attr.height:t.attr.width/this.naturalWidth*this.naturalHeight:this.naturalHeight;t.attr.height=i,t.attr.width=e}t instanceof Mr&&t.setSize(t.attr.width,t.attr.height),t.imageObj=this,t.attr&&t.attr.onload&&"function"==typeof t.attr.onload&&t.attr.onload.call(t,t.image),t.asyncOnLoad&&"function"==typeof t.asyncOnLoad&&t.asyncOnLoad(t.image),Er(t)}},i.onerror=function(e){console.error(e),t.nodeExe.attr.onerror&&"function"==typeof t.nodeExe.attr.onerror&&t.nodeExe.attr.onerror.call(t.nodeExe,e),t.asyncOnLoad&&"function"==typeof t.asyncOnLoad&&t.asyncOnLoad(t.image)},i):i}function Er(t){t.imageObj&&(t.attr&&t.attr.clip?function(t){const e=t.ctx,{clip:i,width:n=0,height:r=0}=t.attr,{sx:o=0,sy:s=0,swidth:a=n,sheight:h=r}=i;e.clearRect(0,0,n,r),e.drawImage(t.imageObj,o,s,a,h,0,0,n,r)}(t):t.execute(),t.attr&&t.attr.filter&&function(t){const e=t.ctx,{width:i=0,height:n=0}=t.attr,r=e.getImageData(0,0,i,n);e.putImageData(t.attr.filter(r),0,0)}(t),Un.vDomChanged(t.nodeExe.vDomIndex))}function Mr(t,e={}){const i=this;i.attr=Object.assign({},e.attr)||{},i.style=Object.assign({},e.style)||{};const n=i.attr.scale||1;i.rImageObj=new kr((i.attr.width||1)*n,(i.attr.height||1)*n),i.ctx=i.rImageObj.context,i.domEl=i.rImageObj.canvas,i.imageArray=[],i.seekIndex=0,i.nodeName="Sprite",i.nodeExe=t;for(const t in i.attr)i.setAttr(t,i.attr[t]);Un.vDomChanged(t.vDomIndex)}function Cr(t,e){const i=new Ar(t,{el:"g",attr:{id:"rootNode"}},Wn(),e);return i.setStyle=function(t,e){this.domEl.style[t]=e},i.addDependentLayer=function(t){if(!(t instanceof Ar))return;const e=t.attr.id?t.attr.id:"dep-"+Math.ceil(1e3*Math.random());t.setAttr("id",e),t.vDomIndex=this.vDomIndex+":"+e,this.prependChild([t])},i.toDataURL=function(t){return this.domEl.toDataURL(t)},i.invokeOnChange=function(){},i.setViewBox=function(t,e,i,n){},i.setContext=function(t,e){this.ctx[t]&&"function"==typeof this.ctx[t]?this.ctx[t].apply(null,e):this.ctx[t]&&(this.ctx[t]=e)},i.createPattern=hr,i.createClip=sr,i.createMask=rr,i.clear=function(){},i.flush=function(){this.children=[],Un.vDomChanged(this.vDomIndex)},i.update=function(){this.execute()},i.exportPdf=function(t){const e=this.margin||0,{top:n=e,bottom:r=e}=this.margins||{top:e,bottom:e},o=this.height;i.updateBBox(),i.updateABBox();let s=Dr(i);s=s.sort(((t,e)=>{const i=t.dom&&t.dom.abTransform?t.dom.abTransform:{translate:[0,0]},n=t.dom.BBox,r=e.dom&&e.dom.abTransform?e.dom.abTransform:{translate:[0,0]},o=e.dom.BBox;return i.translate[1]+n.height+t.dom.abYposition-(r.translate[1]+o.height+e.dom.abYposition)}));let a=0;let h=t.bufferedPageRange().count-1;s.forEach((e=>{const i=e.dom.abTransform,s=e.dom.BBox.height||0,c=e.dom.abYposition||0;let l=(i.translate[1]+c||0)-a;l<o-r-n&&l+s<o-r-n||s>o-r-n||(a+=o-n-r,l=(i.translate[1]+c||0)-a,a+=l,l=0,t.addPage({margin:this.margin,margins:this.margins,size:[this.width,this.height]}),this.pageTemplate&&this.pageTemplate.executePdf(t),h+=1),e.dom.abTransform={translate:[i.translate[0],l+n]};const u=e.executePdf.bind(e);var f;e.executePdf=(f=h,function(t){t.switchToPage(f),u(t)})})),i.executePdf(t)},i.addTemplate=function(t){this.pageTemplate=t,this.pageTemplate.updateBBox(),this.pageTemplate.updateABBox(),function(t){Dr(t).forEach((t=>{const e=t.dom.abTransform,i=t.dom.abYposition||0,n=e.translate[1]+i||0;t.dom.abTransform={translate:[e.translate[0],n]}}))}(this.pageTemplate)},i.createTexture=function(t={}){return new Mr(this,t)},i.createAsyncTexture=function(t){return new Promise(((e,i)=>{const n=new Mr(this,t);n.onLoad((function(){e(n)}))}))},i}function Dr(t){const e=[];let i=[t];for(;0!==i.length;){const t=i.shift();t.block||t.children&&0===t.children.length&&"g"!==t.nodeName&&"group"!==t.nodeName?e.push(t):t.children&&0!==t.children.length&&(i=i.concat(t.children))}return e}function Pr(i,n={},r={}){const o=i instanceof HTMLElement?i:"string"==typeof i||i instanceof String?document.querySelector(i):null;let s=o?o.clientHeight:0,a=o?o.clientWidth:0;const h=document.createElement("canvas"),c=h.getContext("2d",n);let{enableEvents:l=!0,autoUpdate:u=!0,enableResize:f=!0}=r,d=function(t){const e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return e<1?1:e}(c);c.pixelRatio=d;let p,y=function(t){t.clearRect(0,0,a*d,s*d)};h.setAttribute("height",s*d),h.setAttribute("width",a*d),h.style.height=`${s}px`,h.style.width=`${a}px`,h.style.position="absolute";let x,g,v,w,b=999999;o?(o.appendChild(h),p=new m,u&&(b=Un.addVdom(p))):l=!1;const B=Cr(c,b),A=function(t){if(i instanceof HTMLElement&&!document.body.contains(i)||i instanceof String&&!document.querySelector(i))return dn(B),void B.destroy();s=x||t.height,a=g||t.width,B.width=a,B.height=s,S(B.domEl,a,s),v&&v(),B.execute()};p&&p.rootNode(B);const T=B.execute.bind(B),k=B.exportPdf.bind(B);B.container=o,B.domEl=h,B.height=s,B.width=a,B.type="CANVAS",B.ctx=c,B.clear=function(){y(c)},B.setAttr=function(t,e){"viewBox"===t&&this.setViewBox.apply(this,e.split(",")),h.setAttribute(t,e),this.attr[t]=e},B.setClear=function(t){y=t},B.setSize=function(t,e){x=e,g=t,a=t,s=e,this.width=a,this.height=s,S(this.domEl,a,s),this.execute()},B.onResize=function(t){v=t},B.getPixels=function(t,e,i,n){return new ir(this.ctx.getImageData(t,e,i,n),i,n)},B.putPixels=function(t,e,i){if(t instanceof ir)return this.ctx.putImageData(t.imageData,e,i)},B.execute=function(){y(c),c.setTransform(d,0,0,d,0,0),this.updateBBox(),T(),w&&this.stateModified&&w(),this.stateModified=!1},B.onChange=function(t){w=t},B.exportPdf=function(i,n={}){const r=_r(n),o=new e({size:[this.width,this.height],...r}),s=o.pipe(t()),a=n.fontRegister||{},h=n.info||{title:"I2Djs-PDF"};if(a)for(const t in a)o.registerFont(t,a[t]);h&&(o.info.Title=h.title||"",o.info.Author=h.author||"",o.info.Subject=h.subject||"",o.info.Keywords=h.keywords||"",o.info.CreationDate=h.creationDate||""),B.updateBBox(),B.updateABBox(),o.addPage(),k(o),o.end(),s.on("finish",(function(){i(s.toBlobURL("application/pdf"))}))};const S=function(t,e,i){t.setAttribute("height",i*d),t.setAttribute("width",e*d),t.style.height=`${i}px`,t.style.width=`${e}px`};if(B.setPixelRatio=function(t){d=t,this.ctx.pixelRatio=d,S(this.domEl,this.width,this.height)},B.destroy=function(){document.body.contains(this.container)&&this.container.contains(this.domEl)&&this.container.removeChild(this.domEl),Un.removeVdom(b),dn(B,A)},l){const t=new ei(B);h.addEventListener("mousemove",(e=>{e.preventDefault(),t.mousemoveCheck(e)})),h.addEventListener("mousedown",(e=>{t.mousedownCheck(e)})),h.addEventListener("mouseup",(e=>{t.mouseupCheck(e)})),h.addEventListener("mouseleave",(e=>{t.mouseleaveCheck(e)})),h.addEventListener("contextmenu",(e=>{t.contextmenuCheck(e)})),h.addEventListener("touchstart",(e=>{t.touchstartCheck(e)})),h.addEventListener("touchend",(e=>{t.touchendCheck(e)})),h.addEventListener("touchmove",(e=>{e.preventDefault(),t.touchmoveCheck(e)})),h.addEventListener("touchcancel",(e=>{t.touchcancelCheck(e)})),h.addEventListener("wheel",(e=>{t.wheelEventCheck(e)})),h.addEventListener("pointerdown",(e=>{t.addPointer(e),t.pointerdownCheck(e)})),h.addEventListener("pointerup",(e=>{t.removePointer(e),t.pointerupCheck(e)})),h.addEventListener("pointermove",(e=>{e.preventDefault(),t.pointermoveCheck(e)}))}return Un.execute(),f&&B.container&&fn(B,A),B}function _r(t,e={}){return{...e,autoFirstPage:!1,bufferPages:!0,...void 0!==t.margin&&{margin:t.margin},...void 0!==t.margins&&{margins:t.margins},...void 0!==t.defaultFont&&{font:t.defaultFont},...void 0!==t.encryption&&{...t.encryption}}}Ar.prototype=new an,Ar.prototype.node=function(){return this.updateBBox(),this.dom},Ar.prototype.stylesExe=function(){let t,e;const i=this.style;for(e in this.resolvedStyle={},i)"string"==typeof i[e]||"number"==typeof i[e]?t=i[e]:"object"==typeof i[e]?t=i[e]instanceof Kn||i[e]instanceof ar||i[e]instanceof or||i[e]instanceof nr?i[e].exe(this.ctx,this.dom.BBox):i[e]:"function"==typeof i[e]?(i[e]=i[e].call(this,this.dataObj),t=i[e]):console.log("unkonwn Style"),Yn[e]&&(e=Yn[e]),"function"!=typeof this.ctx[e]?this.ctx[e]=t:"function"==typeof this.ctx[e]?this.ctx[e](t):console.log("junk comp"),this.resolvedStyle[e]=t},Ar.prototype.stylesExePdf=function(t){if(!t)return;const e=this.style;let i;for(let n in e)"string"==typeof e[n]||"number"==typeof e[n]?i=e[n]:"object"==typeof e[n]?i=e[n]instanceof Kn||e[n]instanceof ar||e[n]instanceof or||e[n]instanceof nr?e[n].exePdf(t,this.dom.BBox,this.dom.abTransform):e[n]:"function"==typeof e[n]?(e[n]=e[n].call(this,this.dataObj),i=e[n]):console.log("unkonwn Style"),Xn[n]&&(i=Xn[n].getValue(i),n=Xn[n].prop),"fillColor"!==n&&"strokeColor"!==n||"string"!=typeof i||(i=ti.colorToRGBPdf(i)),"function"!=typeof t[n]?t[n]=i:"function"==typeof t[n]?t[n](i):console.log("junk comp")},Ar.prototype.remove=function(){const{children:t}=this.dom.parent,e=t.indexOf(this);-1!==e&&t.splice(e,1),this.dom.parent.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex)},Ar.prototype.attributesExe=function(){this.dom.render(this.attr)},Ar.prototype.attributesExePdf=function(t,e){this.dom.renderPdf(this.attr,t,e)},Ar.prototype.setStyle=function(t,e){if(2===arguments.length)null==e&&null!=this.style[t]?delete this.style[t]:this.style[t]=Tr(e);else if(1===arguments.length&&"object"==typeof t){const e=Object.keys(t);for(let i=0,n=e.length;i<n;i+=1)null==t[e[i]]&&null!=this.style[e[i]]?delete this.style[e[i]]:this.style[e[i]]=Tr(t[e[i]])}return Un.vDomChanged(this.vDomIndex),this},Ar.prototype.setAttr=function(t,e){if(2===arguments.length)null==e&&null!=this.attr[t]?delete this.attr[t]:this.attr[t]=e,this.dom.setAttr(t,e);else if(1===arguments.length&&"object"==typeof t){const e=Object.keys(t);for(let i=0;i<e.length;i+=1)null==t[e[i]]&&null!=this.attr[e[i]]?delete this.attr[e[i]]:this.attr[e[i]]=t[e[i]],this.dom.setAttr(e[i],t[e[i]])}return this.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex),this},Ar.prototype.rotate=function(t,e,i){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,i||0],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex),this},Ar.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),t.length<1?null:(this.attr.transform.scale=[t[0],t[1]?t[1]:t[0]],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex),this)},Ar.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex),this},Ar.prototype.skewX=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skew||(this.attr.transform.skew=[]),this.attr.transform.skew[0]=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex),this},Ar.prototype.skewY=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.skew||(this.attr.transform.skew=[]),this.attr.transform.skew[1]=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex),this},Ar.prototype.execute=function(){if("none"!==this.style.display){if(this.ctx.save(),this.stylesExe(),this.attributesExe(),this.dom instanceof Br)for(let t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();this.ctx.restore()}},Ar.prototype.executePdf=function(t,e){if("none"!==this.style.display){if(this.dom instanceof Br&&!e&&!this.block||t.save(),this.stylesExePdf(t),this.attributesExePdf(t,e),this.dom instanceof Br)for(let i=0,n=this.children.length;i<n;i+=1)this.children[i].executePdf(t,e||this.block);this.dom instanceof Br&&!e&&!this.block||t.restore()}},Ar.prototype.prependChild=function(t){const e=this,i=t;if(e.dom instanceof Br)for(let t=0;t<i.length;t+=1)i[t].dom.parent=e,i[t].vDomIndex=e.vDomIndex,e.children.unshift(i[t]);else console.error("Trying to insert child to nonGroup Element");return this.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex),e},Ar.prototype.child=function(t){const e=this,i=t;if(e.dom instanceof Br)for(let t=0;t<i.length;t+=1)i[t].dom.parent=e,i[t].setVDomIndex(e.vDomIndex),e.children[e.children.length]=i[t];else console.error("Trying to insert child to nonGroup Element");return this.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex),e},Ar.prototype.setVDomIndex=function(t){this.vDomIndex=t;for(let e=0,i=this.children.length;e<i;e+=1)this.children[e]&&this.children[e].setVDomIndex&&this.children[e].setVDomIndex(t)},Ar.prototype.updateBBox=function(){let t;if(this.bbox){for(let e=0,i=this.children.length;e<i;e+=1)this.children[e]&&this.children[e].updateBBox&&(t=this.children[e].updateBBox()||t);if(this.BBoxUpdate||t)return this.dom.updateBBox(this.children),this.BBoxUpdate=!1,!0}return!1},Ar.prototype.updateABBox=function(t={translate:[0,0]}){"0-header"===this.attr.class&&console.log("0-header");const e=this.attr.transform||{translate:[0,0]},i={translate:[t.translate[0]+e.translate[0],t.translate[1]+e.translate[1]]};if(this.dom.abTransform=i,"0-header"===this.attr.class&&console.log(i),this.dom instanceof Br)for(let t=0,e=this.children.length;t<e&&this.children[t];t+=1)this.children[t].updateABBox(i)},Ar.prototype.in=function(t){return this.dom.in(t)},Ar.prototype.on=function(t,e){const i=this;if(this.events||(this.events={}),!e&&this.events[t])delete this.events[t];else if(e)if("function"==typeof e){const n=e.bind(i);this.events[t]=function(t){n(t)}}else"object"==typeof e&&(this.events[t]=e,e.constructor!==qn.constructor&&e.constructor!==Zn.constructor||e.bindMethods(this));return this},Ar.prototype.animatePathTo=Ve.animatePathTo,Ar.prototype.morphTo=Ve.morphTo,Ar.prototype.vDomIndex=null,Ar.prototype.createRadialGradient=er,Ar.prototype.createLinearGradient=tr,Ar.prototype.createEls=function(t,e){const i=new $n({type:"CANVAS",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(i.stack),Un.vDomChanged(this.vDomIndex),i},Ar.prototype.text=function(t){return this.dom instanceof fr&&this.dom.text(t),Un.vDomChanged(this.vDomIndex),this},Ar.prototype.createEl=function(t){const e=new Ar(this.dom.ctx,t,Wn(),this.vDomIndex);return this.child([e]),Un.vDomChanged(this.vDomIndex),e},Ar.prototype.removeChild=function(t){let e=-1;if(this.children.forEach(((i,n)=>{i===t&&(e=n)})),-1!==e){const t=this.children.splice(e,1)[0];this.dom.removeChild(t.dom)}this.BBoxUpdate=!0,Un.vDomChanged(this.vDomIndex)},Ar.prototype.getBBox=function(){return{x:this.dom.BBox.x,y:this.dom.BBox.y,width:this.dom.BBox.width,height:this.dom.BBox.height}},Ar.prototype.getPixels=function(){return new ir(this.ctx.getImageData(this.dom.BBox.x,this.dom.BBox.y,this.dom.BBox.width,this.dom.BBox.height),this.dom.BBox.width,this.dom.BBox.height)},Ar.prototype.putPixels=function(t){if(t instanceof ir)return this.ctx.putImageData(t.imageData,this.dom.BBox.x,this.dom.BBox.y)},kr.prototype.setAttr=function(t,e){"height"===t?this.canvas.setAttribute("height",e):"width"===t&&this.canvas.setAttribute("width",e)},Mr.prototype=new an,Mr.prototype.constructor=Mr,Mr.prototype.setSize=function(t,e){const i=this.attr.scale||1;this.rImageObj.setAttr("width",t*i),this.rImageObj.setAttr("height",e*i),Er(this)},Mr.prototype.setAttr=function(t,e){const i=this;if("src"===t)if(Array.isArray(e)){const t=e.map((function(t){return new Promise(((e,i)=>{const n=Sr(null,t);n.onload=function(){e(this)},n.onerror=function(t){i(t)}}))}));Promise.all(t).then((function(t){i.image=t,i.imageObj=t[i.seekIndex],i.attr&&i.attr.onload&&"function"==typeof i.attr.onload&&i.attr.onload.call(i,t),i.asyncOnLoad&&"function"==typeof i.asyncOnLoad&&i.asyncOnLoad(t),Er(i)}))}else"string"==typeof e?(i.image||(i.image=Sr(i,e)),i.image.src!==e&&(i.image.src=e)):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement?(i.imageObj=e,i.attr.height=i.attr.height?i.attr.height:e.height,i.attr.width=i.attr.width?i.attr.width:e.width,Er(i)):(e instanceof Ar||e instanceof Mr)&&(i.imageObj=e.domEl,i.attr.height=i.attr.height?i.attr.height:e.attr.height,i.attr.width=i.attr.width?i.attr.width:e.attr.width,Er(i));return this.attr[t]=e,"height"!==t&&"width"!==t||(this.rImageObj.setAttr(t,e),Er(i)),"clip"!==t&&"filter"!==t||Er(i),i},Mr.prototype.onLoad=function(t){this.asyncOnLoad=t},Mr.prototype.clone=function(){const t=Object.assign({},this.attr),e=Object.assign({},this.style);return t.src=this,new Mr(this.nodeExe,{attr:t,style:e})},Mr.prototype.execute=function(){const{width:t=0,height:e=0}=this.attr,i=this.attr.draw||{},n=this.attr.scale||1;this.ctx.clearRect(0,0,t*n,e*n),this.ctx.drawImage(this.imageObj,i.x||0,i.y||0,(i.width||t)*n,(i.height||e)*n)},Mr.prototype.exportAsDataUrl=function(t="image/png",e=1){return this.rImageObj?this.rImageObj.canvas.toDataURL(t,e):this},Mr.prototype.next=function(t){Array.isArray(this.image)&&(t<this.image.length&&t>=0?this.seekIndex=t:this.seekIndex<this.image.length-1&&this.seekIndex++,this.imageObj=this.image[this.seekIndex],Er(this))};var Ir={canvasLayer:Pr,pdfLayer:function(i,n={},r={}){const o=i instanceof HTMLElement?i:"string"==typeof i||i instanceof String?document.querySelector(i):null;let{height:s=0,width:a=0}=n,h=_r(n,{});const{autoUpdate:c=!0,onUpdate:l}=r,u=document.createElement("canvas"),f=u.getContext("2d",{});let d=n.fontRegister||{},p=n.info||{title:"I2Djs-PDF"},y=999999,x=null;f.type_="pdf",f.doc=new e({size:[a,s],...h}),u.setAttribute("height",1*s),u.setAttribute("width",1*a);const g=new m;c&&(y=Un.addVdom(g));const v=Cr(f,y);function w(){this.pages=[],this.ctx=f,this.domEl=u,this.vDomIndex=y,this.container=o}w.prototype.flush=function(){this.pages.forEach((function(t){t.flush()})),this.pages=[],this.doc&&this.doc.flushPages()},w.prototype.setConfig=function(t={}){const e=_r(t,h);return t.fontRegister&&(d={...t.fontRegister||{}}),t.info&&(p=t.info||{title:"I2Djs-PDF"}),s=t.height||s,a=t.width||a,u.setAttribute("height",1*s),u.setAttribute("width",1*a),this.width=a,this.height=s,h=e,this.execute(),this},w.prototype.setPageTemplate=function(t){x=t},w.prototype.setSize=function(t=0,e=0){return this.width=t,this.height=e,this},w.prototype.execute=function(){this.exportPdf(l||function(t){o.setAttribute("src",t)},h)},w.prototype.addPage=function(t={}){const e=Cr(f,this.vDomIndex);return e.domEl=u,e.height=t.height||s,e.width=t.width||a,e.margin=t.margin||h.margin||0,e.margins=t.margins||h.margins||{top:0,bottom:0,left:0,right:0},e.type="CANVAS",e.EXEType="pdf",e.ctx=f,(t.pageTemplate||x)&&e.addTemplate(t.pageTemplate||x),this.pages.push(e),e},w.prototype.removePage=function(t){const e=this.pages.indexOf(t);let i=null;return-1!==e&&(i=this.pages.splice(e,1)),i},w.prototype.createTemplate=function(){return Cr(f,this.vDomIndex)},w.prototype.exportPdf=function(i,n={}){const r=new e({...n}),o=r.pipe(t());if(d)for(const t in d)r.registerFont(t,d[t]);p&&(r.info.Title=p.title||"",r.info.Author=p.author||"",r.info.Subject=p.subject||"",r.info.Keywords=p.keywords||"",r.info.CreationDate=p.creationDate||""),this.doc=r,this.pages.forEach((function(t,e){t.updateBBox(),r.addPage({margin:t.margin||0,size:[t.width,t.height]}),t.pageTemplate&&t.pageTemplate.executePdf(r),t.exportPdf(r)})),r.end(),o.on("finish",(function(){i(o.toBlobURL("application/pdf"))}))},w.prototype.destroy=function(){this.flush()},w.prototype.exec=function(t){t.call(this,this.dataObj)},w.prototype.data=function(t){return t?(this.dataObj=t,this):this.dataObj},w.prototype.createTexture=function(t={}){return v.createTexture(t)},w.prototype.createAsyncTexture=function(t={}){return v.createAsyncTexture(t)};const b=new w;return g&&g.rootNode(b),b},CanvasNodeExe:Ar,CanvasGradient:Kn,createRadialGradient:er,createLinearGradient:tr};function Lr(t){let e;switch(t){case"point":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in float a_size;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      gl_PointSize = a_size;\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                        fragColor = v_color;\n                    }\n                    "};break;case"circle":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in float a_radius;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      gl_PointSize = a_radius; // * a_transform.z * u_transform.z;\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                      float r = 0.0, delta = 0.0, alpha = 1.0;\n                      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n                      r = dot(cxy, cxy);\n                      if(r > 1.0) {\n                        discard;\n                      }\n                      delta = 0.09;\n                      alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n                      fragColor = v_color * alpha;\n                    }\n                    "};break;case"image":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec2 a_texCoord;\n                    uniform mat3 u_transformMatrix;\n                    out vec2 v_texCoord;\n\n                    void main() {\n                      gl_Position = vec4(u_transformMatrix * vec3(a_position, 1), 1);\n                      v_texCoord = a_texCoord;\n                    }\n          ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    uniform sampler2D u_image;\n                    uniform float u_opacity;\n                    in vec2 v_texCoord;\n                    out vec4 fragColor;\n                    void main() {\n                      vec4 col = texture(u_image, v_texCoord);\n                      if (col.a == 0.0) {\n                        discard;\n                      } else {\n                        fragColor = col;\n                        fragColor.a *= u_opacity;\n                      }\n                    }\n                    "};break;case"polyline":case"polygon":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    uniform mat3 u_transformMatrix;\n\n                    void main() {\n                      gl_Position = vec4(u_transformMatrix * vec3(a_position, 1), 1);\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    uniform vec4 u_color;\n                    out vec4 fragColor;\n                    void main() {\n                        fragColor = u_color;\n                    }\n                    "};break;case"rect":default:e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                      fragColor = v_color;\n                    }\n                    "};break;case"line":e={vertexShader:"#version 300 es\n                    precision highp float;\n                    in vec2 a_position;\n                    in vec4 a_color;\n                    in mat3 a_transformMatrix;\n                    out vec4 v_color;\n\n                    void main() {\n                      gl_Position = vec4(a_transformMatrix * vec3(a_position, 1), 1);\n                      v_color = a_color;\n                    }\n                    ",fragmentShader:"#version 300 es\n                    precision mediump float;\n                    in vec4 v_color;\n                    out vec4 fragColor;\n                    void main() {\n                        fragColor = v_color;\n                    }\n                    "}}return e}const zr=R;let Or;const Fr=g,Nr=jn.zoom(),Rr=jn.drag();let jr=0;function Gr(){return jr+=1,jr}function Xr(t){const e={translateX:0,translateY:0,scaleX:1,scaleY:1,angle:0};return t&&(t.translate&&t.translate.length>0&&(e.translateX=t.translate[0],e.translateY=t.translate[1]),t.scale&&t.scale.length>0&&(e.scaleX=t.scale[0],e.scaleY=t.scale[1]||e.scaleX),t.rotate&&t.rotate.length>0&&(e.angle=t.rotate[0])),e}function Yr(){const t=this,{transform:e,points:i=[]}=t.attr,{translateX:n,translateY:r,scaleX:o,scaleY:s}=Xr(e);if(i&&i.length>0){let e=i[0].x,a=i[0].x,h=i[0].y,c=i[0].y;for(let t=1;t<i.length;t+=1)e>i[t].x&&(e=i[t].x),a<i[t].x&&(a=i[t].x),h>i[t].y&&(h=i[t].y),c<i[t].y&&(c=i[t].y);t.BBox={x:n+e*o,y:r+h*s,width:(a-e)*o,height:(c-h)*s}}else t.BBox={x:0,y:0,width:0,height:0};e&&e.rotate?t.BBoxHit=zr.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox}var Hr=function(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],h=t[6],c=t[7],l=t[8],u=e[0],f=e[1],d=e[2],p=e[3],y=e[4],x=e[5],g=e[6],m=e[7],v=e[8];return[u*i+f*o+d*h,u*n+f*s+d*c,u*r+f*a+d*l,p*i+y*o+x*h,p*n+y*s+x*c,p*r+y*a+x*l,g*i+m*o+v*h,g*n+m*s+v*c,g*r+m*a+v*l]},Ur=function(t,e,i){return i&&i[6]===t&&i[7]===e?i:[1,0,0,0,1,0,t,e,1]},Vr=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,-i,0,i,e,0,0,0,1]},qr=function(t,e){return[t,0,0,0,e,0,0,0,1]},Zr=function(){return[1,0,0,0,1,0,0,0,1]},Wr=function(t,e){return[2/t,0,0,0,-2/e,0,-1,1,1]};function $r(t){const e=this.attr.transform;let i=t||this.projectionMatrix;if(e&&e.translate&&(this.translationMatrix=Ur(e.translate[0],e.translate[1],this.translationMatrix),i=Hr(i,this.translationMatrix)),e&&e.rotate){const t=Math.PI/180*e.rotate[0];this.rotationMatrix=Vr(t),this.rotationCentric=Ur(e.rotate[1]||0,e.rotate[2]||0,this.rotationCentric),i=Hr(i,this.rotationMatrix)}e&&e.scale&&(this.scaleMatrix=qr(e.scale[0],e.scale[1]),i=Hr(i,this.scaleMatrix)),this.rotationCentric&&(i=Hr(i,this.rotationCentric)),this.transformMatrix=i}const Qr=function(){ln.apply(this,arguments)};function Jr(t,e,i){var n=t.createShader(i);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(n);return console.error("*** Error compiling shader '"+n+"':"+r),t.deleteShader(n),null}return n}function Kr(t,e){return function(t,e){var i=t.createProgram();if(e.forEach((function(e){t.attachShader(i,e)})),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){var n=t.getProgramInfoLog(i);return console.error("Error in program linking:"+n),t.deleteProgram(i),null}return i}(t,[Jr(t,e.vertexShader,t.VERTEX_SHADER),Jr(t,e.fragmentShader,t.FRAGMENT_SHADER)])}function to(){this.BBox={x:0,y:0,width:0,height:0},this.BBoxHit={x:0,y:0,width:0,height:0}}function eo(t,e,i){this.ctx=t,this.attr=e||{},this.style=i||{},this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null)}function io(t,e,i){this.ctx=t,this.attr=e||{},this.style=i||{},this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null)}function no(t,e,i){const n=this;this.ctx=t,this.attr=e,this.style=i,this.pointsGeometry=[],this.transform=[0,0,1,1],this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),n.attr.d&&(Ve.isTypePath(n.attr.d)?(n.path=n.attr.d,n.attr.d=n.attr.d.fetchPathString()):n.path=Ve.instance(n.attr.d),this.points=new Float32Array(this.path.getPoints())),this.style.stroke&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255])),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null)}function ro(t,e,i){this.ctx=t,this.attr=e||{},this.style=i||{},this.points=[],this.transform=[0,0,1,1];const n=[];if(this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),this.attr.points){const t=this.attr.points;for(let e=0,i=t.length;e<i;e++)n[2*e]=t[e].x,n[2*e+1]=t[e].y;this.points=new Float32Array(n)}this.style.stroke&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255])),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null)}function oo(t,e,i){this.ctx=t,this.attr=e||{},this.style=i||{},this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null)}function so(t){return re.exports(t.reduce((function(t,e){return t[t.length]=e.x,t[t.length]=e.y,t}),[])).map((function(e){return t[e]}))}function ao(t,e,i){this.ctx=t,this.attr=e,this.style=i,this.positionArray=[],this.transform=[0,0,1,1];const n=[];if(this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),this.attr.points){const t=so(this.attr.points);for(let e=0,i=t.length;e<i;e++)n[2*e]=t[e].x,n[2*e+1]=t[e].y;this.points=new Float32Array(n)}this.style.fill&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255])),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null)}function ho(t,e,i){this.ctx=t,this.attr=e,this.style=i,this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null)}(Qr.prototype=new ln).constructor=Qr,Qr.prototype.createNode=function(t,e,i){return new Go(t,e,Gr(),i)},to.prototype.exec=function(t,e){"function"!=typeof t&&console.error("Wrong Exe type"),t.call(this,e)},to.prototype.setStyle=function(t,e){e?(this.style[t]=e,this.shader&&"fill"===t&&(void 0!==this.style.opacity&&(e.a*=this.style.opacity),this.shader.indexBased&&this.shader.updateColor(this.pindex,e)),this.shader&&"opacity"===t&&(void 0!==this.style.fill&&(this.style.fill.a*=this.style.opacity),this.shader.updateColor(this.pindex,this.style.fill))):this.style[t]&&delete this.style[t]},to.prototype.getAttr=function(t){return this.attr[t]},to.prototype.getStyle=function(t){return this.style[t]},eo.prototype=new to,eo.prototype.constructor=eo,eo.prototype.setShader=function(t){this.shader=t,this.shader&&(this.shader.addVertex(this.attr.x||0,this.attr.y||0,this.pindex),this.shader.addColors(this.style.fill||xo,this.pindex),this.shader.addSize(this.attr.size||0,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},eo.prototype.setAttr=function(t,e){this.attr[t]=e,"transform"===t&&this.exec($r,this.p_matrix),this.shader&&("x"===t||"y"===t?this.shader.updateVertex(this.pindex,this.attr.x,this.attr.y):"size"===t?this.shader.updateSize(this.pindex,this.attr.size||0):"transform"===t&&this.shader.updateTransform(this.pindex,this.transformMatrix))},eo.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},eo.prototype.in=function(t){const{x:e=0,y:i=0,size:n=0}=this.attr;return t.x>=e&&t.x<=e+n&&t.y>=i&&t.y<=i+n},eo.prototype.updateBBox=function(){const t=this,{transform:e,x:i=0,y:n=0,size:r=0}=t.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Xr(e);t.BBox={x:o+i*a,y:s+n*h,width:r*a,height:r*h},e&&e.rotate?t.BBoxHit=zr.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},io.prototype=new to,io.prototype.constructor=io,io.prototype.setShader=function(t){this.shader=t,this.shader&&(this.shader.addVertex(this.attr.x||0,this.attr.y||0,this.attr.width||0,this.attr.height||0,this.pindex),this.shader.addColors(this.style.fill||xo,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},io.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},io.prototype.setAttr=function(t,e){this.attr[t]=e,"transform"===t&&this.exec($r,this.p_matrix),this.shader&&("x"===t||"width"===t||"y"===t||"height"===t?this.shader.updateVertex(this.pindex,this.attr.x||0,this.attr.y||0,this.attr.width||0,this.attr.height||0):"transform"===t&&this.shader.updateTransform(this.pindex,this.transformMatrix))},io.prototype.in=function(t){const{x:e=0,y:i=0,width:n=0,height:r=0}=this.attr;return t.x>=e&&t.x<=e+n&&t.y>=i&&t.y<=i+r},io.prototype.updateBBox=function(){const t=this,{transform:e,x:i=0,y:n=0,width:r=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Xr(e);t.BBox={x:s+i*h,y:a+n*c,width:r*h,height:o*c},e&&e.rotate?t.BBoxHit=zr.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},no.prototype=new to,no.prototype.constructor=no,no.prototype.setShader=function(t){this.shader=t},no.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t)},no.prototype.setAttr=function(t,e){this.attr[t]=e,null!==e?"d"===t?(Ve.isTypePath(e)?(this.path=e,this.attr.d=e.fetchPathString()):this.path=Ve.instance(this.attr.d),this.points=new Float32Array(this.path.getPoints())):"transform"===t&&this.exec($r,this.p_matrix):delete this.attr[t]},no.prototype.updateBBox=function(){const t=this,{transform:e}=t.attr,{translateX:i,translateY:n,scaleX:r,scaleY:o}=Xr(e);t.BBox=t.path?t.path.BBox:{x:0,y:0,width:0,height:0},t.BBox.x=i+t.BBox.x*r,t.BBox.y=n+t.BBox.y*o,t.BBox.width*=r,t.BBox.height*=o,e&&e.rotate?t.BBoxHit=zr.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},ro.prototype=new to,ro.prototype.constructor=ro,ro.prototype.setShader=function(t){this.shader=t},ro.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t)},ro.prototype.setAttr=function(t,e){if(this.attr[t]=e,"points"===t){const t=this.attr.points,e=[];for(let i=0,n=t.length;i<n;i++)e[2*i]=t[i].x,e[2*i+1]=t[i].y;this.points=new Float32Array(e)}else"transform"===t&&this.exec($r,this.p_matrix)},ro.prototype.updateBBox=Yr,ro.prototype.setStyle=function(t,e){this.style[t]=e,"stroke"===t&&(this.color=new Float32Array([this.style.stroke.r/255,this.style.stroke.g/255,this.style.stroke.b/255,void 0===this.style.stroke.a?1:this.style.stroke.a/255]))},oo.prototype=new to,oo.prototype.constructor=oo,oo.prototype.setShader=function(t){this.shader=t;const{x1:e=0,y1:i=0,x2:n=e,y2:r=i}=this.attr;this.shader&&(this.shader.addVertex(e,i,n,r,this.pindex),this.shader.addColors(this.style.stroke||xo,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},oo.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},oo.prototype.setAttr=function(t,e){this.attr[t]=e,null!==e||null===this.attr[t]?("transform"===t&&this.exec($r,this.p_matrix),!this.shader||"x1"!==t&&"y1"!==t&&"x2"!==t&&"y2"!==t?this.shader&&"transform"===t&&this.shader.updateTransform(this.pindex,this.transformMatrix):this.shader.updateVertex(this.pindex,this.attr.x1,this.attr.y1,this.attr.x2,this.attr.y2)):delete this.attr[t]},oo.prototype.updateBBox=function(){const t=this,{transform:e,x1:i=0,y1:n=0,x2:r=0,y2:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Xr(e);t.BBox={x:s+(i<r?i:r)*h,y:a+(n<o?n:o)*c,width:Math.abs(r-i)*h,height:Math.abs(o-n)*c},e&&e.rotate?t.BBoxHit=zr.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},ao.prototype=new to,ao.prototype.constructor=ao,ao.prototype.setShader=function(t){this.shader=t},ao.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t)},ao.prototype.setAttr=function(t,e){if(this.attr[t]=e,null!==e)if("points"===t){const t=[],i=so(e);for(let e=0,n=i.length;e<n;e++)t[2*e]=i[e].x,t[2*e+1]=i[e].y;this.points=new Float32Array(t)}else"transform"===t&&this.exec($r,this.p_matrix);else delete this.attr[t]},ao.prototype.setStyle=function(t,e){this.style[t]=e,"fill"===t&&(this.color=new Float32Array([this.style.fill.r/255,this.style.fill.g/255,this.style.fill.b/255,void 0===this.style.fill.a?1:this.style.fill.a/255]))},ao.prototype.updateBBox=Yr,ho.prototype=new to,ho.prototype.constructor=ho,ho.prototype.setShader=function(t){this.shader=t,this.shader&&(this.shader.addVertex(this.attr.cx||0,this.attr.cy||0,this.pindex),this.shader.addColors(this.style.fill||xo,this.pindex),this.shader.addSize(this.attr.r||0,this.pindex),this.shader.addTransform(this.transformMatrix,this.pindex))},ho.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t),this.shader&&this.shader.addTransform(this.transformMatrix,this.pindex)},ho.prototype.setAttr=function(t,e){this.attr[t]=e,null!==e?("transform"===t&&this.exec($r,this.p_matrix),"cx"!==t&&"cy"!==t||!this.shader?"r"===t&&this.shader?this.shader.updateSize(this.pindex,this.attr.r||0):"transform"===t&&this.shader&&this.shader.updateTransform(this.pindex,this.transformMatrix):this.shader.updateVertex(this.pindex,this.attr.cx,this.attr.cy)):delete this.attr[t]},ho.prototype.in=function(t,e){const{r:i=0,cx:n=0,cy:r=0}=this.attr;return Math.sqrt((t.x-n)*(t.x-n)+(t.y-r)*(t.y-r))<=i},ho.prototype.updateBBox=function(){const t=this,{transform:e,r:i=0,cx:n=0,cy:r=0}=t.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Xr(e);t.BBox={x:o+(n-i)*a,y:s+(r-i)*h,width:2*i*a,height:2*i*h},e&&e.rotate?t.BBoxHit=zr.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox};const co={};function lo(t){return 0==(t&t-1)}function uo(t,e){const i=document.createElement("canvas"),n=i.getContext("2d");(e=e||{fill:"#fff"}).font||(e.font="10px Arial");const r=parseFloat(e.font,10)||12;n.font=e.font;const o=n.measureText(t).width,s=r;i.setAttribute("height",s*Or),i.setAttribute("width",o*Or),i.style.width=o,i.style.height=s,e.font=r*Or+(isNaN(parseFloat(e.font,10))?e.font:e.font.substring(r.toString().length));for(const t in e)n[t]=e[t];return n.fillText(t,0,.75*s*Or),{dom:i,ctx:n,width:o,height:s,ratio:Or,style:e,str:t,updateText:function(){!function(t,e,i,n){t.clearRect(0,0,e*n,i*n)}(this.ctx,this.width,this.height,this.ratio);for(const t in this.style)this.ctx[t]=this.style[t];this.ctx.fillText(this.str,0,.75*this.height)}}}function fo(t,e,i,n){const r=this;this.ctx=t,this.attr=e,this.style=i,this.vDomIndex=n,this.positionArray=new Float32Array(12),this.transform=[0,0,1,1],this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null),r.attr.text&&"string"==typeof r.attr.text&&(this.text=uo(r.attr.text,r.style),this.attr.width=this.text.width,this.attr.height=this.text.height),this.text&&(this.textureNode=new Uo(t,{src:this.text.dom},this.vDomIndex))}function po(t,e,i,n){const r=this;if(this.ctx=t,this.attr=e,this.style=i,this.vDomIndex=n,this.positionArray=new Float32Array(12),this.transform=[0,0,1,1],this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null),r.attr.src&&"string"==typeof r.attr.src&&!co[r.attr.src]?(this.textureNode=new Uo(t,{src:this.attr.src},this.vDomIndex),co[r.attr.src]=this.textureNode):r.attr.src&&r.attr.src instanceof an?this.textureNode=new Uo(t,{src:this.attr.src},this.vDomIndex):"string"==typeof r.attr.src&&co[r.attr.src]?this.textureNode=co[r.attr.src]:r.attr.src&&r.attr.src instanceof Uo&&(this.textureNode=r.attr.src),this.attr.x||this.attr.y||this.attr.width||this.attr.height){const t=this.attr.x||0,e=this.attr.y||0,i=t+(this.attr.width||0),n=e+(this.attr.height||0);this.positionArray[0]=this.positionArray[4]=this.positionArray[6]=t,this.positionArray[1]=this.positionArray[3]=this.positionArray[9]=e,this.positionArray[2]=this.positionArray[8]=this.positionArray[10]=i,this.positionArray[5]=this.positionArray[7]=this.positionArray[11]=n}}function yo(t,e,i,n,r){this.ctx=t,this.attr=e,this.style=i,this.renderTarget=n,this.vDomIndex=r,e.shaderType&&(this.shader=jo(t,e,i,e.shaderType,this.renderTarget,r)),this.projectionMatrix=Wr(this.ctx.canvas.width/Or,this.ctx.canvas.height/Or),this.transformMatrix=Hr(this.projectionMatrix,Zr()),this.attr.transform&&this.exec($r,null)}fo.prototype=new to,fo.prototype.constructor=fo,fo.prototype.setShader=function(t){this.shader=t},fo.prototype.setAttr=function(t,e){if(this.attr[t]=e,null!==e){if("text"===t&&"string"==typeof e&&(this.text?this.text=uo(this.attr.text,this.style):this.text=uo(e,this.style),this.attr.width=this.text.width,this.attr.height=this.text.height,this.textureNode?this.textureNode.setAttr("src",this.text.dom):this.textureNode=new Uo(this.ctx,{src:this.text.dom},this.vDomIndex)),"transform"===t)this.exec($r,this.p_matrix);else if("x"===t||"y"===t){const t=this.attr.x||0,e=this.attr.y||0,i=t+(this.attr.width||0),n=e+(this.attr.height||0);this.positionArray[0]=this.positionArray[4]=this.positionArray[6]=t,this.positionArray[1]=this.positionArray[3]=this.positionArray[9]=e,this.positionArray[2]=this.positionArray[8]=this.positionArray[10]=i,this.positionArray[5]=this.positionArray[7]=this.positionArray[11]=n}}else delete this.attr[t]},fo.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t)},fo.prototype.setStyle=function(t,e){if(this.style[t]=e,this.text)if(this.text.style[t]=e,"font"===t){const t=parseFloat(e,10)||12;this.text.ctx.font=e;const i=this.text.ctx.measureText(this.attr.text).width,n=t;this.text.style.font=t*Or+(isNaN(parseFloat(e,10))?this.style.font:this.style.font.substring(t.toString().length)),this.text.updateText(),this.text.dom.setAttribute("height",n*Or),this.text.dom.setAttribute("width",i*Or),this.attr.width=i,this.attr.height=n,this.shader.updateVertexX(this.pindex,this.attr.x||0,this.attr.width||0),this.shader.updateVertexY(this.pindex,this.attr.y||0,this.attr.height||0)}else this.text.style[t]=e,this.text.updateText(),this.textureNode.setAttr("src",this.text.dom)},fo.prototype.getAttr=function(t){return this.attr[t]},fo.prototype.getStyle=function(t){return this.style[t]},fo.prototype.in=function(t){const{width:e=0,height:i=0,x:n=0,y:r=0}=this.attr;return t.x>=n&&t.x<=n+e&&t.y>=r&&t.y<=r+i},fo.prototype.updateBBox=function(){const t=this,{transform:e,x:i=0,y:n=0,width:r=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Xr(e);t.BBox={x:(s+i)*h,y:(a+n)*c,width:r*h,height:o*c},e&&e.rotate?t.BBoxHit=zr.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},po.prototype=new to,po.prototype.constructor=po,po.prototype.setShader=function(t){this.shader=t},po.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t)},po.prototype.setAttr=function(t,e){if(this.attr[t]=e,null!==e)if("src"===t&&"string"==typeof e)e&&!co[e]?(this.textureNode=new Uo(this.ctx,{src:e},this.vDomIndex),co[e]=this.textureNode):e&&co[e]&&(this.textureNode=co[e]);else if("src"===t&&e instanceof an)this.textureNode=new Uo(this.ctx,{src:e},this.vDomIndex);else if("src"===t&&e instanceof Uo)this.textureNode=e;else if("x"===t||"width"===t||"y"===t||"height"===t){const t=this.attr.x||0,e=this.attr.y||0,i=t+(this.attr.width||0),n=e+(this.attr.height||0);this.positionArray[0]=this.positionArray[4]=this.positionArray[6]=t,this.positionArray[1]=this.positionArray[3]=this.positionArray[9]=e,this.positionArray[2]=this.positionArray[8]=this.positionArray[10]=i,this.positionArray[5]=this.positionArray[7]=this.positionArray[11]=n}else"transform"===t&&this.exec($r,this.p_matrix);else delete this.attr[t]},po.prototype.setStyle=function(t,e){e?this.style[t]=e:this.style[t]&&delete this.style[t]},po.prototype.getAttr=function(t){return this.attr[t]},po.prototype.getStyle=function(t){return this.style[t]},po.prototype.in=function(t){const{width:e=0,height:i=0,x:n=0,y:r=0}=this.attr;return t.x>=n&&t.x<=n+e&&t.y>=r&&t.y<=r+i},po.prototype.updateBBox=function(){const t=this,{transform:e,x:i=0,y:n=0,width:r=0,height:o=0}=t.attr,{translateX:s,translateY:a,scaleX:h,scaleY:c}=Xr(e);t.BBox={x:(s+i)*h,y:(a+n)*c,width:r*h,height:o*c},e&&e.rotate?t.BBoxHit=zr.rotateBBox(this.BBox,e):t.BBoxHit=this.BBox},yo.prototype=new to,yo.prototype.constructor=yo,yo.prototype.applyTransformationMatrix=function(t){this.p_matrix=t,this.exec($r,t),this.transformMatrix=Hr(this.transformMatrix,t)},yo.prototype.setAttr=function(t,e){this.attr[t]=e,"shaderType"===t&&(this.shader=jo(this.ctx,this.attr,this.style,e,this.renderTarget,this.vDomIndex)),"transform"===t&&this.exec($r,this.p_matrix)},yo.prototype.setShader=function(){},yo.prototype.in=function(t){const e=t.x,i=t.y,{BBox:n}=this,{transform:r}=this.attr,{translateX:o,translateY:s,scaleX:a,scaleY:h}=Xr(r);return e>=(n.x-o)/a&&e<=(n.x-o+n.width)/a&&i>=(n.y-s)/h&&i<=(n.y-s+n.height)/h},yo.prototype.updateBBox=function(t){const e=this;let i,n,r,o;const{transform:s}=e.attr,{translateX:a,translateY:h,scaleX:c,scaleY:l}=Xr(s);if(e.BBox={},t&&t.length>0){let e,s,a;for(let h=0;h<t.length;h+=1)e=t[h],e&&(s=e.dom.BBoxHit.x,a=e.dom.BBoxHit.y,i=void 0===i||i>s?s:i,r=void 0===r||r>a?a:r,n=void 0===n||n<s+e.dom.BBoxHit.width?s+e.dom.BBoxHit.width:n,o=void 0===o||o<a+e.dom.BBoxHit.height?a+e.dom.BBoxHit.height:o)}i=void 0===i?0:i,r=void 0===r?0:r,n=void 0===n?0:n,o=void 0===o?0:o,e.BBox.x=a+i*c,e.BBox.y=h+r*l,e.BBox.width=Math.abs(n-i)*c,e.BBox.height=Math.abs(o-r)*l,e.attr.transform&&e.attr.transform.rotate?e.BBoxHit=zr.rotateBBox(this.BBox,this.attr.transform):e.BBoxHit=this.BBox};const xo=ti.rgba(0,0,0,255);function go(t,e,i,n){let r=n.type;r||(r="FLOAT",n.value instanceof Float32Array?r="FLOAT":n.value instanceof Int8Array?r="BYTE":n.value instanceof Int16Array?r="SHORT":n.value instanceof Uint8Array?r="UNSIGNED_BYTE":n.value instanceof Uint16Array&&(r="UNSIGNED_SHORT"));const o=t.createBuffer();return{bufferType:t.ARRAY_BUFFER,buffer:o,drawType:t.STATIC_DRAW,valueType:t[r],size:n.size,attributeLocation:t.getAttribLocation(e,i),value:n.value,attr:i}}function mo(t,e,i,n){let r;const o=n.size?n.size:n.value.length;return n.matrix?Number.isInteger(Math.sqrt(n.value.length))?r="uniformMatrix"+Math.sqrt(n.value.length)+"fv":console.error("Not Square Matrix"):n.value instanceof Uo?r="uniform1i":n.value instanceof Float32Array?r="uniform"+o+"fv":n.value instanceof Int8Array||n.value instanceof Int16Array||n.value instanceof Uint8Array?r="uniform"+o+"iv":Number.isInteger(n.value)?Number.isInteger(n.value)&&(r="uniform1i"):r="uniform1f",{matrix:n.matrix,transpose:void 0!==n.transpose&&n.transpose,type:r,value:n.value,uniformLocation:t.getUniformLocation(e,i)}}function vo(t,e,i){this.ctx=t,this.dom={BBoxHit:{x:0,y:0,height:0,width:0}},this.shader=e,this.vDomIndex=i,this.program=Kr(t,e),this.uniforms={},this.attr={},this.attrObjs={},this.indexesObj=null,this.preDraw=e.preDraw,this.postDraw=e.postDraw,this.geometry=e.geometry,this.renderTarget=e.renderTarget,this.vao=t.createVertexArray();for(const i in e.uniforms)this.uniforms[i]=mo(t,this.program,i,e.uniforms[i]);this.geometry&&(this.geometry instanceof Zo||this.geometry instanceof Wo||this.geometry instanceof $o?(this.attributes=this.geometry.attributes,this.indexes=this.geometry.indexes):console.error("Wrong Geometry type"));for(const e in this.attributes)this.attrObjs[e]=go(t,this.program,e,this.attributes[e]),this.applyAttributeToVao(e,this.attrObjs[e]);this.indexes&&(this.indexesObj=function(t,e,i){let n="FLOAT";return i.value instanceof Float32Array?n="FLOAT":i.value instanceof Int8Array?n="BYTE":i.value instanceof Int16Array?n="SHORT":i.value instanceof Uint8Array?n="UNSIGNED_BYTE":i.value instanceof Uint16Array&&(n="UNSIGNED_SHORT"),{bufferType:t.ELEMENT_ARRAY_BUFFER,buffer:t.createBuffer(),drawType:t.STATIC_DRAW,valueType:t[n],value:i.value,count:i.count,offset:i.offset}}(t,this.program,this.indexes))}function wo(){}function bo(t,e,i,n){t.transform=t.transformTyped&&t.transformTyped.length>0?Array.from(t.transformTyped):t.transform,t.transformTyped=null;const r=e*i*9;let o=0;for(;o<i;)t.transform[r+9*o]=n[0],t.transform[r+9*o+1]=n[1],t.transform[r+9*o+2]=n[2],t.transform[r+9*o+3]=n[3],t.transform[r+9*o+4]=n[4],t.transform[r+9*o+5]=n[5],t.transform[r+9*o+6]=n[6],t.transform[r+9*o+7]=n[7],t.transform[r+9*o+8]=n[8],o++;t.addTransform_=!0,t.transformUpdate=!0}function Bo(t,e,i,n){const r=t.addTransform_?t.transform:t.transformTyped,o=e*i*9;let s=0;for(;s<i;)r[o+9*s]=n[0],r[o+9*s+1]=n[1],r[o+9*s+2]=n[2],r[o+9*s+3]=n[3],r[o+9*s+4]=n[4],r[o+9*s+5]=n[5],r[o+9*s+6]=n[6],r[o+9*s+7]=n[7],r[o+9*s+8]=n[8],s++;t.updateTransform_=!0}function Ao(t,e,i){const n=t.addTransform_?t.transform:t.transformTyped,r=e*i*9;let o=0;for(;o<i;)n[r+9*o]=void 0,n[r+9*o+1]=void 0,n[r+9*o+2]=void 0,n[r+9*o+3]=void 0,n[r+9*o+4]=void 0,n[r+9*o+5]=void 0,n[r+9*o+6]=void 0,n[r+9*o+7]=void 0,n[r+9*o+8]=void 0,o++;t.clearTransform_=!0,t.filterTransformUpdate=!0}function To(t){t.addTransform_&&(t.clearTransform_&&(t.transform=t.transform.filter((function(t){return!isNaN(t)})),t.clearTransform_=!1),t.transformTyped=new Float32Array(t.transform),t.transform=[],t.addTransform_=!1,t.updateTransform_=!1,t.shaderInstance.setAttributeData("a_transformMatrix",t.transformTyped)),t.clearTransform_&&(t.transformTyped=t.transformTyped.filter((function(t){return!isNaN(t)})),t.clearTransform_=!1,t.shaderInstance.setAttributeData("a_transformMatrix",t.transformTyped)),t.updateTransform_&&(t.shaderInstance.setAttributeData("a_transformMatrix",t.transformTyped),t.updateTransform_=!1)}function ko(t,e,i,n){t.positionArray=t.typedPositionArray&&t.typedPositionArray.length>0?Array.from(t.typedPositionArray):t.positionArray,t.typedPositionArray=null;const r=e*i*2;let o=0;for(;o<n.length;)t.positionArray[r+o]=n[o],o++;t.addVertex_=!0}function So(t,e,i,n){const r=t.addVertex_?t.positionArray:t.typedPositionArray,o=e*i*2;let s=0;for(isNaN(r[o])&&console.log("overriding Nan");s<n.length;)r[o+s]=n[s],s++;t.updateVertex_=!0}function Eo(t,e,i){const n=t.addVertex_?t.positionArray:t.typedPositionArray,r=e*i*2;let o=0;for(;o<i;)n[r+2*o]=void 0,n[r+2*o+1]=void 0,o++;t.filterVertex_=!0}function Mo(t){t.addVertex_&&(t.filterVertex_&&(t.positionArray=t.positionArray.filter((function(t){return!isNaN(t)})),t.filterVertex_=!1),t.typedPositionArray=new Float32Array(t.positionArray),t.positionArray=[],t.addVertex_=!1,t.updateVertex_=!1,t.shaderInstance.setAttributeData("a_position",t.typedPositionArray)),t.filterVertex_&&(t.typedPositionArray=t.typedPositionArray.filter((function(t){return!isNaN(t)})),t.filterVertex_=!1,t.shaderInstance.setAttributeData("a_position",t.typedPositionArray)),t.updateVertex_&&(t.shaderInstance.setAttributeData("a_position",t.typedPositionArray),t.updateVertex_=!1)}function Co(t,e,i,n){t.colorArray=t.typedColorArray&&t.typedColorArray.length>0?Array.from(t.typedColorArray):t.colorArray,t.typedColorArray=null;const r=e*i*4;let o=0;for(n=ti.colorToRGB(n);o<i;)t.colorArray[r+4*o]=n.r/255,t.colorArray[r+4*o+1]=n.g/255,t.colorArray[r+4*o+2]=n.b/255,t.colorArray[r+4*o+3]=void 0===n.a?1:n.a/255,o++;t.addColor_=!0}function Do(t,e,i,n){const r=t.addColor_?t.colorArray:t.typedColorArray;isNaN(r[e*i*4])&&console.log("overriding Nan");const o=e*i*4;let s=0;for(;s<i;)r[o+4*s]=n.r/255,r[o+4*s+1]=n.g/255,r[o+4*s+2]=n.b/255,r[o+4*s+3]=void 0===n.a?1:n.a/255,s++;t.updateColor_=!0}function Po(t,e,i){const n=t.addColor_?t.colorArray:t.typedColorArray;isNaN(n[e*i*4])&&console.log("overriding Nan");const r=e*i*4;let o=0;for(;o<i;)n[r+4*o]=void 0,n[r+4*o+1]=void 0,n[r+4*o+2]=void 0,n[r+4*o+3]=void 0,o++;t.filterColor_=!0}function _o(t){t.addColor_&&(t.filterColor_&&(t.colorArray=t.colorArray.filter((function(t){return!isNaN(t)})),t.filterColor_=!1),t.typedColorArray=new Float32Array(t.colorArray),t.colorArray=[],t.addColor_=!1,t.updateColor_=!1,t.shaderInstance.setAttributeData("a_color",t.typedColorArray)),t.filterColor_&&(t.typedColorArray=t.typedColorArray.filter((function(t){return!isNaN(t)})),t.shaderInstance.setAttributeData("a_color",t.typedColorArray),t.filterColor_=!1),t.updateColor_&&(t.shaderInstance.setAttributeData("a_color",t.typedColorArray),t.updateColor_=!1)}function Io(t,e,i,n){this.ctx=t,this.dom={},this.attr=e||{},this.style=i||{},this.vDomIndex=n,this.indexBased=!0,this.transform=[],this.selftransform=[0,0,1,1],this.attr.transform||(this.attr.transform={translate:[0,0],scale:[1,1]}),this.geometry=new Wo,this.geometry.setAttr("a_color",{value:new Float32Array([]),size:4}),this.geometry.setAttr("a_size",{value:new Float32Array([]),size:1}),this.geometry.setAttr("a_position",{value:new Float32Array([]),size:2}),this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.shaderInstance=new vo(t,{fragmentShader:Lr("point").fragmentShader,vertexShader:Lr("point").vertexShader,uniforms:{},geometry:this.geometry},n),this.positionArray=[],this.colorArray=[],this.pointsSize=[],this.transform=[],this.vertexUpdate=!0,this.colorUpdate=!0,this.sizeUpdate=!0,this.transformUpdate=!0}function Lo(t,e,i,n,r){this.ctx=t,this.dom={},this.positionArray=[],this.colorArray=[],this.transform=[],this.rotate=[],this.attr=e||{},this.style=i||{},this.vDomIndex=r,this.renderTarget=n,this.indexBased=!0,this.selftransform=[0,0,1,1],this.geometry=new Zo,this.geometry.setAttr("a_transformMatrix",{value:new Float32Array([]),size:3}),this.geometry.setAttr("a_color",{value:new Float32Array(this.colorArray),size:4}),this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setDrawRange(0,this.positionArray.length/2),this.shaderInstance=new vo(t,{fragmentShader:Lr("rect").fragmentShader,vertexShader:Lr("rect").vertexShader,uniforms:{},geometry:this.geometry},r)}function zo(t,e,i,n,r){this.ctx=t,this.dom={},this.attr=e||{},this.style=i||{},this.vDomIndex=r,this.positionArray=[],this.colorArray=[],this.transform=[],this.vertexUpdate=!0,this.colorUpdate=!0,this.renderTarget=n,this.indexBased=!0,this.selftransform=new Float32Array([0,0,1,1]),this.geometry=new $o,this.geometry.setAttr("a_color",{value:new Float32Array(this.colorArray),size:4}),this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.geometry.setDrawRange(0,this.positionArray.length/2),this.shaderInstance=new vo(t,{fragmentShader:Lr("line").fragmentShader,vertexShader:Lr("line").vertexShader,uniforms:{},geometry:this.geometry},r)}function Oo(t,e,i,n,r){this.ctx=t,this.dom={},this.attr=e||{},this.style=i||{},this.vDomIndex=r,this.positionArray=[],this.colorArray=[],this.renderTarget=n,this.indexBased=!1,this.geometry=new $o,this.geometry.drawType="LINE_STRIP",this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setDrawRange(0,this.positionArray.length/2),this.shaderInstance=new vo(t,{fragmentShader:Lr("polyline").fragmentShader,vertexShader:Lr("polyline").vertexShader,uniforms:{u_transformMatrix:{value:new Float32Array(Zr()),matrix:!0},u_color:{value:new Float32Array(4)}},geometry:this.geometry},r)}function Fo(t,e,i,n,r){this.ctx=t,this.dom={},this.attr=e||{},this.style=i||{},this.vDomIndex=r,this.colorArray=[],this.positionArray=[],this.renderTarget=n,this.indexBased=!1,this.geometry=new Zo,this.geometry.setAttr("a_position",{value:new Float32Array([]),size:2}),this.shaderInstance=new vo(t,{fragmentShader:Lr("polygon").fragmentShader,vertexShader:Lr("polygon").vertexShader,uniforms:{u_transformMatrix:{value:new Float32Array(Zr()),matrix:!0},u_color:{value:new Float32Array(4)}},geometry:this.geometry},r)}function No(t,e,i,n,r){this.ctx=t,this.dom={},this.attr=e||{},this.style=i||{},this.vDomIndex=r,this.positionArray=[],this.colorArray=[],this.transform=[],this.pointsSize=[],this.renderTarget=n,this.indexBased=!0,this.geometry=new Wo,this.geometry.setAttr("a_transformMatrix",{value:new Float32Array(this.transform),size:3}),this.geometry.setAttr("a_color",{value:new Float32Array(this.colorArray),size:4}),this.geometry.setAttr("a_radius",{value:new Float32Array(this.pointsSize),size:1}),this.geometry.setAttr("a_position",{value:new Float32Array(this.positionArray),size:2}),this.geometry.setDrawRange(0,0),this.shaderInstance=new vo(t,{fragmentShader:Lr("circle").fragmentShader,vertexShader:Lr("circle").vertexShader,uniforms:{},geometry:this.geometry},r)}function Ro(t,e,i,n,r){this.ctx=t,this.dom={},this.attr=e||{},this.style=i||{},this.vDomIndex=r,this.textCoor=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),this.renderTarget=n,this.indexBased=!1,this.geometry=new Zo,this.geometry.setAttr("a_texCoord",{value:this.textCoor,size:2}),this.geometry.setAttr("a_position",{value:new Float32Array([0,0]),size:2}),this.geometry.setDrawRange(0,6),this.shaderInstance=new vo(t,{fragmentShader:Lr("image").fragmentShader.trim(),vertexShader:Lr("image").vertexShader.trim(),uniforms:{u_transformMatrix:{value:new Float32Array(Zr()),matrix:!0},u_image:{value:new Uo(this.ctx,{},this.vDomIndex)},u_opacity:{value:1..toFixed(2)}},geometry:this.geometry},r),this.positionArray=[],this.vertexUpdate=!0}function jo(t,e,i,n,r,o){let s;switch(n){case"rect":s=new Lo(t,e,i,r,o);break;case"point":s=new Io(t,e,i,r);break;case"line":s=new zo(t,e,i,r,o);break;case"polyline":case"path":s=new Oo(t,e,i,r,o);break;case"polygon":s=new Fo(t,e,i,r,o);break;case"circle":s=new No(t,e,i,r,o);break;case"image":case"text":s=new Ro(t,e,i,r,o);break;default:s=null}return s}function Go(t,e,i,n){switch(this.ctx=t,this.style=e.style||{},this.attr=e.attr||{},this.id=i,this.nodeName=e.el,this.nodeType="WEBGL",this.children=[],this.ctx=t,this.vDomIndex=n,this.el=e.el,this.shaderType=e.shaderType,this.exeCtx=e.ctx,this.bbox=void 0===e.bbox||e.bbox,this.events={},e.el){case"point":this.dom=new eo(this.ctx,this.attr,this.style);break;case"rect":this.dom=new io(this.ctx,this.attr,this.style);break;case"line":this.dom=new oo(this.ctx,this.attr,this.style);break;case"polyline":this.dom=new ro(this.ctx,this.attr,this.style);break;case"polygon":this.dom=new ao(this.ctx,this.attr,this.style);break;case"path":this.dom=new no(this.ctx,this.attr,this.style);break;case"circle":this.dom=new ho(this.ctx,this.attr,this.style);break;case"image":this.dom=new po(this.ctx,this.attr,this.style,n);break;case"text":this.dom=new fo(this.ctx,this.attr,this.style,n);break;case"group":this.dom=new yo(this.ctx,this.attr,this.style,e.renderTarget,n);break;default:this.dom=null}this.dom.nodeExe=this,this.dom instanceof yo||(delete this.createEl,delete this.createEls)}function Xo(t,e={},i={}){const n=t instanceof HTMLElement?t:"string"==typeof t||t instanceof String?document.querySelector(t):null;let r=n?n.clientHeight:0,o=n?n.clientWidth:0,s=ti.rgba(0,0,0,0);const{enableEvents:a=!1,autoUpdate:h=!0,enableResize:c=!1}=i;(e=e||{premultipliedAlpha:!1,depth:!1,antialias:!1,alpha:!0}).premultipliedAlpha=void 0!==e.premultipliedAlpha&&e.premultipliedAlpha,e.depth=void 0!==e.depth&&e.depth,e.antialias=void 0!==e.antialias&&e.antialias,e.alpha=void 0===e.alpha||e.alpha;const l=document.createElement("canvas"),u=l.getContext("webgl2",e),f=function(t){const e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return e<1?1:e}(u);let d;Or=f>=2?2:Math.floor(f),l.setAttribute("height",r*Or),l.setAttribute("width",o*Or),l.style.height=`${r}px`,l.style.width=`${o}px`,l.style.position="absolute";let p,y,x=999999;n&&(n.appendChild(l),d=new m,h&&(x=Fr.addVdom(d)));const g=new Go(u,{el:"group",attr:{id:"rootNode"},ctx:function(t){t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor(s.r,s.g,s.b,s.a)}},Gr(),x);d&&d.rootNode(g);const v=g.execute.bind(g);g.container=n,g.domEl=l,g.height=r,g.width=o,g.type="WEBGL",g.ctx.pixelRatio=Or;let w=function(t){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)};g.execute=function(){w(this.ctx),this.updateBBox(),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),v()},g.update=function(){this.execute()},g.getPixels=function(t,e,i,n){const r=new Uint8Array(i*n*4);return this.ctx.readPixels(t,e,i,n,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,r),r},g.putPixels=function(t,e,i){return this.ctx.putImageData(t,e,i)},g.clear=function(){w(this.ctx)},g.setClearColor=function(t){s=t},g.setClear=function(t){w=t};const b=function(e){if(t instanceof HTMLElement&&!document.body.contains(t)||t instanceof String&&!document.querySelector(t))return dn(g),void g.destroy();r=e.height,o=e.width,g.width=o,g.height=r,B(g.domEl,o,r),w(g.ctx),p&&p(),g.execute(),l.style.height=`${r}px`,l.style.width=`${o}px`},B=function(t,e,i){t.width=Math.floor(e*Or),t.height=Math.floor(i*Or),t.style.height=i+"px",t.style.width=e+"px"};if(g.onResize=function(t){p=t},g.destroy=function(){document.body.contains(this.container)&&this.container.contains(this.domEl)&&this.container.removeChild(this.domEl),Fr.removeVdom(x),dn(g,b)},g.onChange=function(t){y=t},g.invokeOnChange=function(){y&&y()},g.setPixelRatio=function(t){Or=t,this.ctx.pixelRatio=Or,B(this.domEl,this.width,this.height)},g.setSize=function(t,e){this.width=t,this.height=e,r=e,o=t,B(this.domEl,this.width,this.height),this.execute()},g.setViewBox=function(t,e,i,n){},g.setStyle=function(t,e){this.domEl.style[t]=e},g.setAttr=function(t,e){"viewBox"===t&&this.setViewBox.apply(this,e.split(",")),l.setAttribute(t,e)},g.setContext=function(t,e){this.ctx[t]&&"function"==typeof this.ctx[t]?this.ctx[t].apply(null,e):this.ctx[t]&&(this.ctx[t]=e)},g.MeshGeometry=function(){return new Zo(this.ctx)},g.PointsGeometry=function(){return new Wo(this.ctx)},g.LineGeometry=function(){return new $o(this.ctx)},g.createWebglTexture=function(t){return new Uo(this.ctx,t,this.vDomIndex)},g.RenderTarget=function(t){return new Vo(this.ctx,t,this.vDomIndex)},a){const t=new ei(g);l.addEventListener("mousemove",(e=>{e.preventDefault(),t.mousemoveCheck(e)})),l.addEventListener("mousedown",(e=>{t.mousedownCheck(e)})),l.addEventListener("mouseup",(e=>{t.mouseupCheck(e)})),l.addEventListener("mouseleave",(e=>{t.mouseleaveCheck(e)})),l.addEventListener("contextmenu",(e=>{t.contextmenuCheck(e)})),l.addEventListener("touchstart",(e=>{t.touchstartCheck(e)})),l.addEventListener("touchend",(e=>{t.touchendCheck(e)})),l.addEventListener("touchmove",(e=>{e.preventDefault(),t.touchmoveCheck(e)})),l.addEventListener("touchcancel",(e=>{t.touchcancelCheck(e)})),l.addEventListener("wheel",(e=>{t.wheelEventCheck(e)})),l.addEventListener("pointerdown",(e=>{t.addPointer(e),t.pointerdownCheck(e)})),l.addEventListener("pointerup",(e=>{t.removePointer(e),t.pointerupCheck(e)})),l.addEventListener("pointermove",(e=>{e.preventDefault(),t.pointermoveCheck(e)}))}return Fr.execute(),c&&g.container&&fn(g,b),g}function Yo(t){const e=new Image;return e.crossOrigin="anonymous",e.onload=function(){t.update(),t.updated=!0,Fr.vDomChanged(t.vDomIndex)},e.onerror=function(t){},e}function Ho(t,e){return new Uint8Array(new ArrayBuffer(t*e*4))}function Uo(t,e,i){const n=this,r=t.getParameter(t.MAX_TEXTURE_SIZE);this.ctx=t,this.texture=t.createTexture(),this.type="TEXTURE_2D",this.width=e.width>r?r:e.width,this.height=e.height>r?r:e.height,this.border=e.border?e.border:0,this.format=e.format?e.format:"RGBA",this.type=e.type?e.type:"UNSIGNED_BYTE",this.warpS=e.warpS?e.warpS:"CLAMP_TO_EDGE",this.warpT=e.warpT?e.warpT:"CLAMP_TO_EDGE",this.magFilter=e.magFilter?e.magFilter:"LINEAR",this.minFilter=e.minFilter?e.minFilter:"LINEAR",this.mipMap=e.mipMap,this.updated=!1,this.image=null,this.vDomIndex=i,"string"==typeof e.src?(n.image=Yo(n),n.image.src=e.src):e.src instanceof HTMLImageElement||e.src instanceof SVGImageElement||e.src instanceof HTMLCanvasElement||e.src instanceof Uint8Array?(n.image=e.src,n.update(),n.updated=!0):e.src instanceof an?(n.image=e.src.domEl,n.update(),n.updated=!0):(this.width&&this.height&&(n.image=Ho(this.width,this.height),n.update()),n.updated=!0),Fr.vDomChanged(n.vDomIndex)}function Vo(t,e){this.ctx=t,this.fbo=t.createFramebuffer(),this.texture=e.texture,this.texture.updated||this.texture.update()}function qo(){}function Zo(t){this.attributes={},this.drawType="TRIANGLES",this.indexes=null,this.drawRange=[0,0]}function Wo(t){this.attributes={},this.drawType="POINTS",this.indexes=null,this.drawRange=[0,0]}function $o(t){this.attributes={},this.drawType="LINES",this.indexes=null,this.drawRange=[0,0]}vo.prototype=new wo,vo.prototype.constructor=vo,vo.prototype.applyAttributeToVao=function(t,e){this.ctx.bindVertexArray(this.vao),"a_transformMatrix"===t?(this.ctx.enableVertexAttribArray(e.attributeLocation+0),this.ctx.enableVertexAttribArray(e.attributeLocation+1),this.ctx.enableVertexAttribArray(e.attributeLocation+2),this.ctx.bindBuffer(e.bufferType,e.buffer),this.ctx.bufferData(e.bufferType,e.value,e.drawType),this.ctx.vertexAttribPointer(e.attributeLocation+0,e.size,e.valueType,!1,4*e.size*3,0),this.ctx.vertexAttribPointer(e.attributeLocation+1,e.size,e.valueType,!1,4*e.size*3,12),this.ctx.vertexAttribPointer(e.attributeLocation+2,e.size,e.valueType,!1,4*e.size*3,24)):(this.ctx.enableVertexAttribArray(e.attributeLocation),this.ctx.bindBuffer(e.bufferType,e.buffer),this.ctx.bufferData(e.bufferType,e.value,e.drawType),this.ctx.vertexAttribPointer(e.attributeLocation,e.size,e.valueType,!1,0,0))},vo.prototype.useProgram=function(){this.ctx.useProgram(this.program)},vo.prototype.applyUniforms=function(){for(const t in this.uniforms)this.uniforms[t].matrix?this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].transpose,this.uniforms[t].value):this.uniforms[t].value instanceof Uo?(this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].value.texture),this.uniforms[t].value.loadTexture()):this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].value)},vo.prototype.applyIndexes=function(){const t=this.indexesObj;this.ctx.bindBuffer(t.bufferType,t.buffer),this.ctx.bufferData(t.bufferType,t.value,t.drawType)},vo.prototype.draw=function(){this.ctx.drawArrays(this.ctx[this.geometry.drawType],this.geometry.drawRange[0],this.geometry.drawRange[1])},vo.prototype.drawElements=function(){this.ctx.drawElements(this.ctx[this.geometry.drawType],this.indexesObj.count,this.indexesObj.type?this.indexesObj.type:this.ctx.UNSIGNED_SHORT,this.indexesObj.offset)},vo.prototype.updateBBox=function(t){return!0},vo.prototype.execute=function(){this.ctx.useProgram(this.program),this.applyUniforms(),this.ctx.bindVertexArray(this.vao),this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.update(),this.indexesObj?(this.applyIndexes(),this.drawElements()):this.draw(),this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.clear(),this.ctx.bindVertexArray(null)},vo.prototype.addUniform=function(t,e){this.uniforms[t]=mo(this.ctx,this.program,t,e),Fr.vDomChanged(this.vDomIndex)},vo.prototype.addAttribute=function(t,e){this.attributes[t]=e,this.attrObjs[t]=go(this.ctx,this.program,t,e),this.applyAttributeToVao(t,this.attrObjs[t]),Fr.vDomChanged(this.vDomIndex)},vo.prototype.setAttributeData=function(t,e){const i=this.attrObjs[t];this.attributes[t].value=e,this.attrObjs[t].value=e,this.ctx.bindBuffer(i.bufferType,i.buffer),this.ctx.bufferData(i.bufferType,i.value,i.drawType),Fr.vDomChanged(this.vDomIndex)},vo.prototype.applyAttributeData=function(t,e){this.attributes[t].value=e,this.attrObjs[t].value=e;const i=this.attrObjs[t];this.ctx.bindBuffer(i.bufferType,i.buffer),this.ctx.bufferData(i.bufferType,this.attributes[i.attr].value,i.drawType),this.ctx.enableVertexAttribArray(i.attributeLocation),this.ctx.vertexAttribPointer(i.attributeLocation,i.size,i.valueType,!1,0,0)},vo.prototype.setUniformData=function(t,e){this.uniforms[t].value=e,Fr.vDomChanged(this.vDomIndex)},vo.prototype.applyUniformData=function(t,e){this.uniforms[t].value=e,this.uniforms[t].matrix?this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].transpose,this.uniforms[t].value):this.ctx[this.uniforms[t].type](this.uniforms[t].uniformLocation,this.uniforms[t].value)},wo.prototype.setAttr=function(t,e){if(this.attr[t]=e,"transform"===t){const{translateX:t,translateY:e,scaleX:i,scaleY:n}=Xr(this.attr.transform);this.selftransform=new Float32Array([t,e,i,n])}},wo.prototype.translate=function(t){this.attr.transform.translate=t},wo.prototype.scale=function(t){this.attr.transform.scale=t},wo.prototype.rotate=function(t){this.attr.transform.rotate=t},Io.prototype=new wo,Io.prototype.constructor=Io,Io.prototype.clear=function(t){Po(this,t,1),Eo(this,t,1),Ao(this,t,1);(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=void 0,this.filterSizeFlag=!0},Io.prototype.addTransform=function(t,e){bo(this,e,1,t)},Io.prototype.updateTransform=function(t,e){Bo(this,t,1,e)},Io.prototype.updateVertex=function(t,e,i){So(this,t,1,[e,i])},Io.prototype.updateSize=function(t,e){(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=e},Io.prototype.updateColor=function(t,e){Do(this,t,1,e)},Io.prototype.addVertex=function(t,e,i){ko(this,i,1,[t,e])},Io.prototype.addSize=function(t,e){this.pointsSize=this.typedSizeArray&&this.typedSizeArray.length>0?Array.from(this.typedSizeArray):this.pointsSize,this.pointsSize[e]=t,this.sizeUpdate=!0},Io.prototype.addColors=function(t,e){Co(this,e,1,t)},Io.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.update(),Mo(this),_o(this),To(this),this.sizeUpdate&&(this.filterSizeFlag&&(this.pointsSize=this.pointsSize.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.typedSizeArray=new Float32Array(this.pointsSize),this.pointsSize=[],this.sizeUpdate=!1),this.filterSizeFlag&&(this.typedSizeArray=this.typedSizeArray.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.shaderInstance.setAttributeData("a_size",this.typedSizeArray),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.update()},Lo.prototype=new wo,Lo.prototype.constructor=Lo,Lo.prototype.clear=function(t){Po(this,t,6),Eo(this,t,6),Ao(this,t,6)},Lo.prototype.updateVertex=function(t,e,i,n,r){const o=e+n,s=i+r;So(this,t,6,[e,i,o,i,e,s,e,s,o,i,o,s])},Lo.prototype.updateTransform=function(t,e){Bo(this,t,6,e)},Lo.prototype.addTransform=function(t,e){bo(this,e,6,t)},Lo.prototype.updateColor=function(t,e){Do(this,t,6,e)},Lo.prototype.addVertex=function(t,e,i,n,r){const o=t+i,s=e+n;ko(this,r,6,[t,e,o,e,t,s,t,s,o,e,o,s])},Lo.prototype.addColors=function(t,e){Co(this,e,6,t)},Lo.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.update(),_o(this),To(this),Mo(this),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.clear()},zo.prototype=new wo,zo.prototype.constructor=zo,zo.prototype.clear=function(t){Po(this,t,2),Eo(this,t,2)},zo.prototype.updateTransform=function(t,e){Bo(this,t,2,e)},zo.prototype.addTransform=function(t,e){bo(this,e,2,t)},zo.prototype.updateVertex=function(t,e,i,n,r){So(this,t,2,[e,i,n,r])},zo.prototype.updateColor=function(t,e){Do(this,t,2,e)},zo.prototype.addVertex=function(t,e,i,n,r){ko(this,r,2,[t,e,i,n])},zo.prototype.addColors=function(t,e){Co(this,e,2,t)},zo.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.update(),Mo(this),_o(this),To(this),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.clear()},Oo.prototype=new wo,Oo.prototype.constructor=Oo,Oo.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.update();for(let e=0,i=t.length;e<i;e++)this.shaderInstance.setUniformData("u_transformMatrix",t[e].dom.transformMatrix),this.shaderInstance.setAttributeData("a_position",t[e].dom.points),this.shaderInstance.setUniformData("u_color",t[e].dom.color),this.geometry.setDrawRange(0,t[e].dom.points.length/2),this.shaderInstance.execute();this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.clear()},Fo.prototype=new wo,Fo.prototype.constructor=Fo,Fo.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.update(),this.shaderInstance.useProgram();for(let e=0,i=t.length;e<i;e++)this.shaderInstance.setUniformData("u_transformMatrix",t[e].dom.transformMatrix),this.shaderInstance.setAttributeData("a_position",t[e].dom.points),this.shaderInstance.setUniformData("u_color",t[e].dom.color),this.geometry.setDrawRange(0,t[e].dom.points.length/2),this.shaderInstance.execute();this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.clear()},No.prototype=new wo,No.prototype.constructor=No,No.prototype.clear=function(t){Po(this,t,1),Eo(this,t,1),Ao(this,t,1);(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=void 0,this.filterSizeFlag=!0},No.prototype.updateTransform=function(t,e){Bo(this,t,1,e)},No.prototype.addTransform=function(t,e){bo(this,e,1,t)},No.prototype.updateVertex=function(t,e,i){So(this,t,1,[e,i])},No.prototype.updateColor=function(t,e){Do(this,t,1,e)},No.prototype.updateSize=function(t,e){(this.sizeUpdate?this.pointsSize:this.typedSizeArray)[t]=e},No.prototype.addVertex=function(t,e,i){ko(this,i,1,[t,e])},No.prototype.addSize=function(t,e){this.pointsSize=this.typedSizeArray&&this.typedSizeArray.length>0?Array.from(this.typedSizeArray):this.pointsSize,this.pointsSize[e]=t,this.sizeUpdate=!0},No.prototype.addColors=function(t,e){Co(this,e,1,t)},No.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.update(),Mo(this),_o(this),To(this),this.sizeUpdate&&(this.filterSizeFlag&&(this.pointsSize=this.pointsSize.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.typedSizeArray=new Float32Array(this.pointsSize),this.pointsSize=[],this.sizeUpdate=!1),this.filterSizeFlag&&(this.typedSizeArray=this.typedSizeArray.filter((function(t){return!isNaN(t)})),this.filterSizeFlag=!1),this.shaderInstance.setAttributeData("a_radius",this.typedSizeArray),this.geometry.setDrawRange(0,this.typedPositionArray.length/2),this.shaderInstance.execute(),this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.clear()},Ro.prototype=new wo,Ro.prototype.constructor=Ro,Ro.prototype.execute=function(t){this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.update(),this.shaderInstance.useProgram(),this.shaderInstance.applyAttributeData("a_texCoord",this.textCoor);const e=void 0!==this.style.opacity?this.style.opacity:1;let i;for(let n=0,r=t.length;n<r;n++){const r=t[n];r.dom.textureNode&&r.dom.textureNode.updated&&("none"!==r.style.display&&(this.shaderInstance.applyUniformData("u_transformMatrix",r.dom.transformMatrix),r.dom.textureNode!==i&&(r.dom.textureNode.loadTexture(),i=r.dom.textureNode,this.shaderInstance.applyUniformData("u_image",r.dom.textureNode)),this.shaderInstance.applyAttributeData("a_position",r.dom.positionArray),this.shaderInstance.applyUniformData("u_opacity",((void 0!==r.style.opacity?r.style.opacity:1)*e).toFixed(2)),this.shaderInstance.draw()))}this.renderTarget&&this.renderTarget instanceof Vo&&this.renderTarget.clear()},Go.prototype=new an,Go.prototype.reIndexChildren=function(t){const e=t||this;let i=e.children;i=i.filter((function(t){return t}));for(var n=0,r=i.length;n<r;n++)i[n].dom.pindex=n;e.children=i},Go.prototype.applyTransformationMatrix=function(t){this.dom.applyTransformationMatrix(t),this.children.forEach((function(t){t.applyTransformationMatrix(self.dom.transformMatrix)}))},Go.prototype.setAttr=function(t,e){const i=this;if(2===arguments.length)null===e&&null!==this.attr[t]?delete this.attr[t]:this.attr[t]=e,this.dom.setAttr(t,e),"transform"===t&&this.children.length>0&&this.children.forEach((function(t){t.applyTransformationMatrix(i.dom.transformMatrix)}));else if(1===arguments.length&&"object"==typeof t)for(const e in t)null===t[e]&&null!==this.attr[t]?delete this.attr[e]:this.attr[e]=t[e],this.dom.setAttr(e,t[e]),"transform"===t&&this.children.length>0&&this.children.forEach((function(t){t.applyTransformationMatrix(i.dom.transformMatrix)}));return this.BBoxUpdate=!0,Fr.vDomChanged(this.vDomIndex),this},Go.prototype.scale=function(t){return this.attr.transform||(this.attr.transform={}),t.length<1?null:(this.attr.transform.scale=[t[0],t[1]?t[1]:t[0]],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Fr.vDomChanged(this.vDomIndex),this)},Go.prototype.translate=function(t){return this.attr.transform||(this.attr.transform={}),this.attr.transform.translate=t,this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Fr.vDomChanged(this.vDomIndex),this},Go.prototype.rotate=function(t,e,i){return this.attr.transform||(this.attr.transform={}),"[object Array]"===Object.prototype.toString.call(t)?this.attr.transform.rotate=[t[0]||0,t[1]||0,t[2]||0]:this.attr.transform.rotate=[t,e||0,i||0],this.dom.setAttr("transform",this.attr.transform),this.BBoxUpdate=!0,Fr.vDomChanged(this.vDomIndex),this},Go.prototype.setStyle=function(t,e){if(2===arguments.length)null===e&&null!=this.style[t]?delete this.style[t]:("fill"!==t&&"stroke"!==t||(e=ti.colorToRGB(e)),this.style[t]=e),this.dom.setStyle(t,e);else if(1===arguments.length&&"object"==typeof t)for(const i in t)null===(e=t[i])&&null!=this.style[i]?delete this.style[i]:("fill"!==i&&"stroke"!==i||(e=ti.colorToRGB(e)),this.style[i]=e),this.dom.setStyle(i,e);return Fr.vDomChanged(this.vDomIndex),this},Go.prototype.setReIndex=function(){this.reindex=!0},Go.prototype.updateBBox=function(){let t;if(this.bbox){for(let e=0,i=this.children.length;e<i;e+=1)this.children[e]&&(t=this.children[e].updateBBox()||t);if(this.BBoxUpdate||t)return this.dom.updateBBox(this.children),this.BBoxUpdate=!1,!0}return!1},Go.prototype.in=function(t){return this.dom.in(t)},Go.prototype.on=function(t,e){const i=this;if(this.events||(this.events={}),null===e&&null!==this.events[t])delete this.events[t];else if(e)if("function"==typeof e){const n=e.bind(i);this.events[t]=function(t){n(t)}}else"object"==typeof e&&(this.events[t]=e,e.constructor!==Nr.constructor&&e.constructor!==Rr.constructor||e.bindMethods(this));return this},Go.prototype.execute=function(){if("none"!==this.style.display)if(!this.dom.shader&&!this.dom.shaderGroup&&this.dom instanceof yo)for(let t=0,e=this.children.length;t<e;t+=1)this.children[t].execute();else if(this.dom.shader&&this.dom instanceof yo)this.reindex&&(this.reIndexChildren(),this.reindex=!1),this.exeCtx&&this.exeCtx(this.ctx),this.dom.shader.execute(this.children);else if(this.dom.shaderGroup&&this.dom instanceof yo){this.exeCtx&&this.exeCtx(this.ctx);for(const t in this.dom.shaderGroup){const e=this.dom.shaderGroup[t];e.reindex&&(this.reIndexChildren(e),e.reindex=!1),e.shader.execute(e.children)}}},Go.prototype.child=function(t){const e=this;let i;if(e.dom instanceof yo)for(let n=0;n<t.length;n+=1)i=t[n],i.dom.parent=e,e.children[e.children.length]=i,i.dom.pindex=e.children.length-1,i.vDomIndex=e.vDomIndex,i instanceof vo||i.dom instanceof yo||(this.dom.shader?i.el===this.dom.shader.attr.shaderType?i.dom.setShader(this.dom.shader):(console.warn("wrong el type '"+i.el+"' being added to shader group - '"+this.dom.shader.attr.shaderType+"'"),e.children.pop()):(this.dom.shaderGroup||(this.dom.shaderGroup={}),this.dom.shaderGroup[i.el]||(this.dom.shaderGroup[i.el]={children:[],shader:jo(e.ctx,e.attr,e.style,i.el,e.renderTarget,e.vDomIndex)}),this.dom.shaderGroup[i.el].children[this.dom.shaderGroup[i.el].children.length]=i,i.dom.pindex=this.dom.shaderGroup[i.el].children.length-1,i.dom.setShader(this.dom.shaderGroup[i.el].shader))),e.dom.attr&&e.dom.attr.transform&&i.applyTransformationMatrix(e.dom.transformMatrix);else console.log("Error");return this.BBoxUpdate=!0,Fr.vDomChanged(this.vDomIndex),e},Go.prototype.createEls=function(t,e){const i=new Qr({type:"WEBGL",ctx:this.dom.ctx},t,e,this.vDomIndex);return this.child(i.stack),Fr.vDomChanged(this.vDomIndex),i},Go.prototype.createEl=function(t){const e=new Go(this.ctx,t,Gr(),this.vDomIndex);return this.child([e]),Fr.vDomChanged(this.vDomIndex),e},Go.prototype.createShaderEl=function(t){const e=new vo(this.ctx,t,this.vDomIndex);return this.child([e]),Fr.vDomChanged(this.vDomIndex),e},Go.prototype.remove=function(){const{children:t}=this.dom.parent,e=t.indexOf(this);if(-1!==e)if(this.dom.parent.dom.shader)this.dom.parent.dom.shader.indexBased&&this.dom.parent.dom.shader.clear(this.dom.pindex),this.dom.parent.setReIndex(),t[this.dom.pindex]=void 0;else if(this.dom.parent.dom.shaderGroup){const i=this.dom.parent.dom.shaderGroup[this.el];if(i){const t=i.children.indexOf(this);i.reindex=!0,i.shader.indexBased&&(i.shader.clear(this.dom.pindex),this.dom.parent.setReIndex()),i.children[t]=void 0}t[e]=void 0}else t.splice(e,1);this.BBoxUpdate=!0,Fr.vDomChanged(this.vDomIndex)},Go.prototype.removeChild=function(t){let e=-1;if(this.children.forEach(((i,n)=>{i===t&&(e=n)})),-1!==e){const t=this.children.splice(e,1)[0];this.dom.removeChild(t.dom)}this.BBoxUpdate=!0,Fr.vDomChanged(this.vDomIndex)},Uo.prototype.setAttr=function(t,e){if(1===arguments.length)for(const i in t)this[i]=t[i],"src"===i&&("string"==typeof e?(this.image&&this.image instanceof Image||(this.image=Yo(this)),this.image.src=e):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement||e instanceof Uint8Array?(this.image=e,this.update()):e instanceof an&&(this.image=e.domEl,this.update())),(t.height||t.width)&&(self.image=Ho(this.width,this.height));else this[t]=e,console.warning("Instead of key, value, pass Object of key,value for optimal rendering"),"src"===t&&("string"==typeof e?(this.image&&this.image instanceof Image||(this.image=Yo(this)),this.image.src=e):e instanceof HTMLImageElement||e instanceof SVGImageElement||e instanceof HTMLCanvasElement||e instanceof Uint8Array?(this.image=e,this.update()):e instanceof an&&(this.image=e.domEl,this.update()))},Uo.prototype.loadTexture=function(){this.updated&&(this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.texture))},Uo.prototype.clear=function(t){},Uo.prototype.update=function(){const t=this.ctx;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),!this.image||this.image instanceof Uint8Array?t.texImage2D(t.TEXTURE_2D,this.border,t[this.format],this.width,this.height,0,t[this.format],t[this.type],this.image):t.texImage2D(t.TEXTURE_2D,this.border,t[this.format],t[this.format],t[this.type],this.image),this.mipMap?(lo(self.image.width)&&lo(self.image.height)||console.warn("Image dimension not in power of 2"),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[this.magFilter])):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[this.warpS]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[this.warpT]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[this.minFilter])),this.updated=!0},Vo.prototype.setAttr=function(t,e){this[t]=e},Vo.prototype.update=function(){this.texture&&this.texture instanceof Uo&&(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.fbo),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.texture.texture,0),this.ctx.clearColor(0,0,0,0),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT))},Vo.prototype.clear=function(){this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null)},qo.prototype.setAttr=function(t,e){!e&&this.attributes[t]?delete this.attributes[t]:this.attributes[t]=e},qo.prototype.setDrawRange=function(t,e){this.drawRange=[t,e]},qo.prototype.setDrawType=function(t){this.drawType=t},qo.prototype.setIndex=function(t){this.indexes=t},Zo.prototype=new qo,Zo.constructor=Zo,Wo.prototype=new qo,Wo.constructor=Wo,$o.prototype=new qo,$o.constructor=$o;
/**
* StackBlur - a fast almost Gaussian Blur For Canvas
*
* In case you find this class useful - especially in commercial projects -
* I am not totally unhappy for a small donation to my PayPal account
* mario@quasimondo.de
*
* Or support me on flattr:
* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.
*
* @module StackBlur
* @author Mario Klingemann
* Contact: mario@quasimondo.com
* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}
* Twitter: @quasimondo
*
* @copyright (c) 2010 Mario Klingemann
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/
var Qo=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Jo=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];var Ko=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},ts={blur:function(t=1){return function(e){return function(t,e,i,n,r,o){for(var s,a=t.data,h=2*o+1,c=n-1,l=r-1,u=o+1,f=u*(u+1)/2,d=new Ko,p=d,y=1;y<h;y++)p=p.next=new Ko,y===u&&(s=p);p.next=d;for(var x=null,g=null,m=0,v=0,w=Qo[o],b=Jo[o],B=0;B<r;B++){p=d;for(var A=a[v],T=a[v+1],k=a[v+2],S=a[v+3],E=0;E<u;E++)p.r=A,p.g=T,p.b=k,p.a=S,p=p.next;for(var M=0,C=0,D=0,P=0,_=u*A,I=u*T,L=u*k,z=u*S,O=f*A,F=f*T,N=f*k,R=f*S,j=1;j<u;j++){var G=v+((c<j?c:j)<<2),X=a[G],Y=a[G+1],H=a[G+2],U=a[G+3],V=u-j;O+=(p.r=X)*V,F+=(p.g=Y)*V,N+=(p.b=H)*V,R+=(p.a=U)*V,M+=X,C+=Y,D+=H,P+=U,p=p.next}x=d,g=s;for(var q=0;q<n;q++){var Z=R*w>>b;if(a[v+3]=Z,0!==Z){var W=255/Z;a[v]=(O*w>>b)*W,a[v+1]=(F*w>>b)*W,a[v+2]=(N*w>>b)*W}else a[v]=a[v+1]=a[v+2]=0;O-=_,F-=I,N-=L,R-=z,_-=x.r,I-=x.g,L-=x.b,z-=x.a;var $=q+o+1;$=m+($<c?$:c)<<2,O+=M+=x.r=a[$],F+=C+=x.g=a[$+1],N+=D+=x.b=a[$+2],R+=P+=x.a=a[$+3],x=x.next;var Q=g,J=Q.r,K=Q.g,tt=Q.b,et=Q.a;_+=J,I+=K,L+=tt,z+=et,M-=J,C-=K,D-=tt,P-=et,g=g.next,v+=4}m+=n}for(var it=0;it<n;it++){var nt=a[v=it<<2],rt=a[v+1],ot=a[v+2],st=a[v+3],at=u*nt,ht=u*rt,ct=u*ot,lt=u*st,ut=f*nt,ft=f*rt,dt=f*ot,pt=f*st;p=d;for(var yt=0;yt<u;yt++)p.r=nt,p.g=rt,p.b=ot,p.a=st,p=p.next;for(var xt=n,gt=0,mt=0,vt=0,wt=0,bt=1;bt<=o;bt++){v=xt+it<<2;var Bt=u-bt;ut+=(p.r=nt=a[v])*Bt,ft+=(p.g=rt=a[v+1])*Bt,dt+=(p.b=ot=a[v+2])*Bt,pt+=(p.a=st=a[v+3])*Bt,wt+=nt,gt+=rt,mt+=ot,vt+=st,p=p.next,bt<l&&(xt+=n)}v=it,x=d,g=s;for(var At=0;At<r;At++){var Tt=v<<2;a[Tt+3]=st=pt*w>>b,st>0?(st=255/st,a[Tt]=(ut*w>>b)*st,a[Tt+1]=(ft*w>>b)*st,a[Tt+2]=(dt*w>>b)*st):a[Tt]=a[Tt+1]=a[Tt+2]=0,ut-=at,ft-=ht,dt-=ct,pt-=lt,at-=x.r,ht-=x.g,ct-=x.b,lt-=x.a,Tt=it+((Tt=At+u)<l?Tt:l)*n<<2,ut+=wt+=x.r=a[Tt],ft+=gt+=x.g=a[Tt+1],dt+=mt+=x.b=a[Tt+2],pt+=vt+=x.a=a[Tt+3],x=x.next,at+=nt=g.r,ht+=rt=g.g,ct+=ot=g.b,lt+=st=g.a,wt-=nt,gt-=rt,mt-=ot,vt-=st,g=g.next,v+=n}}return t}(e,0,0,e.width,e.height,t)}},greyScale:function(t){let e=null;switch(t){case"grey-1":e=function(t){const e=t.data;let i;for(let n=0,r=e.length;n<r;n+=4)i=parseInt(.299*e[n]+.587*e[n+1]+.114*e[n+2]),t.data[n]=i,t.data[n+1]=i,t.data[n+2]=i;return t};break;case"grey-2":e=function(t){const e=t.data;let i;for(let n=0,r=e.length;n<r;n+=4)i=parseInt(3*e[n]+4*e[n+1]+e[n+2]>>>3),t.data[n]=i,t.data[n+1]=i,t.data[n+2]=i;return t};break;default:e=function(t){const e=t.data;let i;for(let n=0,r=e.length;n<r;n+=4)i=parseInt(.2126*e[n]+.715*e[n+1]+.0722*e[n+2]),t.data[n]=i,t.data[n+1]=i,t.data[n+2]=i;return t}}return e}};const es=Ve.instance,is=Ir.canvasLayer,ns=Ir.pdfLayer,rs=Ir.CanvasNodeExe,os=Ir.CanvasGradient,ss=Ir.createRadialGradient,as=Ir.createLinearGradient;export{os as CanvasGradient,rs as CanvasNodeExe,es as Path,jn as behaviour,is as canvasLayer,xt as chain,ti as color,as as createLinearGradient,ss as createRadialGradient,K as ease,R as geometry,ns as pdfLayer,g as queue,Dn as svgLayer,ts as utility,Xo as webglLayer};